(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const f of a)if(f.type==="childList")for(const h of f.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&o(h)}).observe(document,{childList:!0,subtree:!0});function i(a){const f={};return a.integrity&&(f.integrity=a.integrity),a.referrerPolicy&&(f.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?f.credentials="include":a.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function o(a){if(a.ep)return;a.ep=!0;const f=i(a);fetch(a.href,f)}})();function xg(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var hu={exports:{}},No={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wh;function d0(){if(wh)return No;wh=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function i(o,a,f){var h=null;if(f!==void 0&&(h=""+f),a.key!==void 0&&(h=""+a.key),"key"in a){f={};for(var m in a)m!=="key"&&(f[m]=a[m])}else f=a;return a=f.ref,{$$typeof:t,type:o,key:h,ref:a!==void 0?a:null,props:f}}return No.Fragment=e,No.jsx=i,No.jsxs=i,No}var Dh;function h0(){return Dh||(Dh=1,hu.exports=d0()),hu.exports}var T=h0(),mu={exports:{}},ke={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lh;function m0(){if(Lh)return ke;Lh=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),f=Symbol.for("react.consumer"),h=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),x=Symbol.iterator;function S(L){return L===null||typeof L!="object"?null:(L=x&&L[x]||L["@@iterator"],typeof L=="function"?L:null)}var M={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,D={};function k(L,te,de){this.props=L,this.context=te,this.refs=D,this.updater=de||M}k.prototype.isReactComponent={},k.prototype.setState=function(L,te){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,te,"setState")},k.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function q(){}q.prototype=k.prototype;function N(L,te,de){this.props=L,this.context=te,this.refs=D,this.updater=de||M}var F=N.prototype=new q;F.constructor=N,w(F,k.prototype),F.isPureReactComponent=!0;var X=Array.isArray,G={H:null,A:null,T:null,S:null,V:null},$=Object.prototype.hasOwnProperty;function ie(L,te,de,re,Se,Ue){return de=Ue.ref,{$$typeof:t,type:L,key:te,ref:de!==void 0?de:null,props:Ue}}function se(L,te){return ie(L.type,te,void 0,void 0,void 0,L.props)}function ne(L){return typeof L=="object"&&L!==null&&L.$$typeof===t}function he(L){var te={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(de){return te[de]})}var me=/\/+/g;function pe(L,te){return typeof L=="object"&&L!==null&&L.key!=null?he(""+L.key):te.toString(36)}function Oe(){}function ye(L){switch(L.status){case"fulfilled":return L.value;case"rejected":throw L.reason;default:switch(typeof L.status=="string"?L.then(Oe,Oe):(L.status="pending",L.then(function(te){L.status==="pending"&&(L.status="fulfilled",L.value=te)},function(te){L.status==="pending"&&(L.status="rejected",L.reason=te)})),L.status){case"fulfilled":return L.value;case"rejected":throw L.reason}}throw L}function qe(L,te,de,re,Se){var Ue=typeof L;(Ue==="undefined"||Ue==="boolean")&&(L=null);var Te=!1;if(L===null)Te=!0;else switch(Ue){case"bigint":case"string":case"number":Te=!0;break;case"object":switch(L.$$typeof){case t:case e:Te=!0;break;case v:return Te=L._init,qe(Te(L._payload),te,de,re,Se)}}if(Te)return Se=Se(L),Te=re===""?"."+pe(L,0):re,X(Se)?(de="",Te!=null&&(de=Te.replace(me,"$&/")+"/"),qe(Se,te,de,"",function(Ht){return Ht})):Se!=null&&(ne(Se)&&(Se=se(Se,de+(Se.key==null||L&&L.key===Se.key?"":(""+Se.key).replace(me,"$&/")+"/")+Te)),te.push(Se)),1;Te=0;var Ae=re===""?".":re+":";if(X(L))for(var Ke=0;Ke<L.length;Ke++)re=L[Ke],Ue=Ae+pe(re,Ke),Te+=qe(re,te,de,Ue,Se);else if(Ke=S(L),typeof Ke=="function")for(L=Ke.call(L),Ke=0;!(re=L.next()).done;)re=re.value,Ue=Ae+pe(re,Ke++),Te+=qe(re,te,de,Ue,Se);else if(Ue==="object"){if(typeof L.then=="function")return qe(ye(L),te,de,re,Se);throw te=String(L),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.")}return Te}function K(L,te,de){if(L==null)return L;var re=[],Se=0;return qe(L,re,"","",function(Ue){return te.call(de,Ue,Se++)}),re}function ae(L){if(L._status===-1){var te=L._result;te=te(),te.then(function(de){(L._status===0||L._status===-1)&&(L._status=1,L._result=de)},function(de){(L._status===0||L._status===-1)&&(L._status=2,L._result=de)}),L._status===-1&&(L._status=0,L._result=te)}if(L._status===1)return L._result.default;throw L._result}var _e=typeof reportError=="function"?reportError:function(L){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var te=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof L=="object"&&L!==null&&typeof L.message=="string"?String(L.message):String(L),error:L});if(!window.dispatchEvent(te))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",L);return}console.error(L)};function Xe(){}return ke.Children={map:K,forEach:function(L,te,de){K(L,function(){te.apply(this,arguments)},de)},count:function(L){var te=0;return K(L,function(){te++}),te},toArray:function(L){return K(L,function(te){return te})||[]},only:function(L){if(!ne(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},ke.Component=k,ke.Fragment=i,ke.Profiler=a,ke.PureComponent=N,ke.StrictMode=o,ke.Suspense=p,ke.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=G,ke.__COMPILER_RUNTIME={__proto__:null,c:function(L){return G.H.useMemoCache(L)}},ke.cache=function(L){return function(){return L.apply(null,arguments)}},ke.cloneElement=function(L,te,de){if(L==null)throw Error("The argument must be a React element, but you passed "+L+".");var re=w({},L.props),Se=L.key,Ue=void 0;if(te!=null)for(Te in te.ref!==void 0&&(Ue=void 0),te.key!==void 0&&(Se=""+te.key),te)!$.call(te,Te)||Te==="key"||Te==="__self"||Te==="__source"||Te==="ref"&&te.ref===void 0||(re[Te]=te[Te]);var Te=arguments.length-2;if(Te===1)re.children=de;else if(1<Te){for(var Ae=Array(Te),Ke=0;Ke<Te;Ke++)Ae[Ke]=arguments[Ke+2];re.children=Ae}return ie(L.type,Se,void 0,void 0,Ue,re)},ke.createContext=function(L){return L={$$typeof:h,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null},L.Provider=L,L.Consumer={$$typeof:f,_context:L},L},ke.createElement=function(L,te,de){var re,Se={},Ue=null;if(te!=null)for(re in te.key!==void 0&&(Ue=""+te.key),te)$.call(te,re)&&re!=="key"&&re!=="__self"&&re!=="__source"&&(Se[re]=te[re]);var Te=arguments.length-2;if(Te===1)Se.children=de;else if(1<Te){for(var Ae=Array(Te),Ke=0;Ke<Te;Ke++)Ae[Ke]=arguments[Ke+2];Se.children=Ae}if(L&&L.defaultProps)for(re in Te=L.defaultProps,Te)Se[re]===void 0&&(Se[re]=Te[re]);return ie(L,Ue,void 0,void 0,null,Se)},ke.createRef=function(){return{current:null}},ke.forwardRef=function(L){return{$$typeof:m,render:L}},ke.isValidElement=ne,ke.lazy=function(L){return{$$typeof:v,_payload:{_status:-1,_result:L},_init:ae}},ke.memo=function(L,te){return{$$typeof:g,type:L,compare:te===void 0?null:te}},ke.startTransition=function(L){var te=G.T,de={};G.T=de;try{var re=L(),Se=G.S;Se!==null&&Se(de,re),typeof re=="object"&&re!==null&&typeof re.then=="function"&&re.then(Xe,_e)}catch(Ue){_e(Ue)}finally{G.T=te}},ke.unstable_useCacheRefresh=function(){return G.H.useCacheRefresh()},ke.use=function(L){return G.H.use(L)},ke.useActionState=function(L,te,de){return G.H.useActionState(L,te,de)},ke.useCallback=function(L,te){return G.H.useCallback(L,te)},ke.useContext=function(L){return G.H.useContext(L)},ke.useDebugValue=function(){},ke.useDeferredValue=function(L,te){return G.H.useDeferredValue(L,te)},ke.useEffect=function(L,te,de){var re=G.H;if(typeof de=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return re.useEffect(L,te)},ke.useId=function(){return G.H.useId()},ke.useImperativeHandle=function(L,te,de){return G.H.useImperativeHandle(L,te,de)},ke.useInsertionEffect=function(L,te){return G.H.useInsertionEffect(L,te)},ke.useLayoutEffect=function(L,te){return G.H.useLayoutEffect(L,te)},ke.useMemo=function(L,te){return G.H.useMemo(L,te)},ke.useOptimistic=function(L,te){return G.H.useOptimistic(L,te)},ke.useReducer=function(L,te,de){return G.H.useReducer(L,te,de)},ke.useRef=function(L){return G.H.useRef(L)},ke.useState=function(L){return G.H.useState(L)},ke.useSyncExternalStore=function(L,te,de){return G.H.useSyncExternalStore(L,te,de)},ke.useTransition=function(){return G.H.useTransition()},ke.version="19.1.0",ke}var Uh;function Hu(){return Uh||(Uh=1,mu.exports=m0()),mu.exports}var Ee=Hu();const g0=xg(Ee);var gu={exports:{}},Ro={},pu={exports:{}},yu={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ih;function p0(){return Ih||(Ih=1,function(t){function e(K,ae){var _e=K.length;K.push(ae);e:for(;0<_e;){var Xe=_e-1>>>1,L=K[Xe];if(0<a(L,ae))K[Xe]=ae,K[_e]=L,_e=Xe;else break e}}function i(K){return K.length===0?null:K[0]}function o(K){if(K.length===0)return null;var ae=K[0],_e=K.pop();if(_e!==ae){K[0]=_e;e:for(var Xe=0,L=K.length,te=L>>>1;Xe<te;){var de=2*(Xe+1)-1,re=K[de],Se=de+1,Ue=K[Se];if(0>a(re,_e))Se<L&&0>a(Ue,re)?(K[Xe]=Ue,K[Se]=_e,Xe=Se):(K[Xe]=re,K[de]=_e,Xe=de);else if(Se<L&&0>a(Ue,_e))K[Xe]=Ue,K[Se]=_e,Xe=Se;else break e}}return ae}function a(K,ae){var _e=K.sortIndex-ae.sortIndex;return _e!==0?_e:K.id-ae.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var f=performance;t.unstable_now=function(){return f.now()}}else{var h=Date,m=h.now();t.unstable_now=function(){return h.now()-m}}var p=[],g=[],v=1,x=null,S=3,M=!1,w=!1,D=!1,k=!1,q=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,F=typeof setImmediate<"u"?setImmediate:null;function X(K){for(var ae=i(g);ae!==null;){if(ae.callback===null)o(g);else if(ae.startTime<=K)o(g),ae.sortIndex=ae.expirationTime,e(p,ae);else break;ae=i(g)}}function G(K){if(D=!1,X(K),!w)if(i(p)!==null)w=!0,$||($=!0,pe());else{var ae=i(g);ae!==null&&qe(G,ae.startTime-K)}}var $=!1,ie=-1,se=5,ne=-1;function he(){return k?!0:!(t.unstable_now()-ne<se)}function me(){if(k=!1,$){var K=t.unstable_now();ne=K;var ae=!0;try{e:{w=!1,D&&(D=!1,N(ie),ie=-1),M=!0;var _e=S;try{t:{for(X(K),x=i(p);x!==null&&!(x.expirationTime>K&&he());){var Xe=x.callback;if(typeof Xe=="function"){x.callback=null,S=x.priorityLevel;var L=Xe(x.expirationTime<=K);if(K=t.unstable_now(),typeof L=="function"){x.callback=L,X(K),ae=!0;break t}x===i(p)&&o(p),X(K)}else o(p);x=i(p)}if(x!==null)ae=!0;else{var te=i(g);te!==null&&qe(G,te.startTime-K),ae=!1}}break e}finally{x=null,S=_e,M=!1}ae=void 0}}finally{ae?pe():$=!1}}}var pe;if(typeof F=="function")pe=function(){F(me)};else if(typeof MessageChannel<"u"){var Oe=new MessageChannel,ye=Oe.port2;Oe.port1.onmessage=me,pe=function(){ye.postMessage(null)}}else pe=function(){q(me,0)};function qe(K,ae){ie=q(function(){K(t.unstable_now())},ae)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(K){K.callback=null},t.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):se=0<K?Math.floor(1e3/K):5},t.unstable_getCurrentPriorityLevel=function(){return S},t.unstable_next=function(K){switch(S){case 1:case 2:case 3:var ae=3;break;default:ae=S}var _e=S;S=ae;try{return K()}finally{S=_e}},t.unstable_requestPaint=function(){k=!0},t.unstable_runWithPriority=function(K,ae){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var _e=S;S=K;try{return ae()}finally{S=_e}},t.unstable_scheduleCallback=function(K,ae,_e){var Xe=t.unstable_now();switch(typeof _e=="object"&&_e!==null?(_e=_e.delay,_e=typeof _e=="number"&&0<_e?Xe+_e:Xe):_e=Xe,K){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=_e+L,K={id:v++,callback:ae,priorityLevel:K,startTime:_e,expirationTime:L,sortIndex:-1},_e>Xe?(K.sortIndex=_e,e(g,K),i(p)===null&&K===i(g)&&(D?(N(ie),ie=-1):D=!0,qe(G,_e-Xe))):(K.sortIndex=L,e(p,K),w||M||(w=!0,$||($=!0,pe()))),K},t.unstable_shouldYield=he,t.unstable_wrapCallback=function(K){var ae=S;return function(){var _e=S;S=ae;try{return K.apply(this,arguments)}finally{S=_e}}}}(yu)),yu}var kh;function y0(){return kh||(kh=1,pu.exports=p0()),pu.exports}var vu={exports:{}},Vt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bh;function v0(){if(Bh)return Vt;Bh=1;var t=Hu();function e(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)g+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var o={d:{f:i,r:function(){throw Error(e(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},a=Symbol.for("react.portal");function f(p,g,v){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:x==null?null:""+x,children:p,containerInfo:g,implementation:v}}var h=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Vt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,Vt.createPortal=function(p,g){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return f(p,g,null,v)},Vt.flushSync=function(p){var g=h.T,v=o.p;try{if(h.T=null,o.p=2,p)return p()}finally{h.T=g,o.p=v,o.d.f()}},Vt.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,o.d.C(p,g))},Vt.prefetchDNS=function(p){typeof p=="string"&&o.d.D(p)},Vt.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var v=g.as,x=m(v,g.crossOrigin),S=typeof g.integrity=="string"?g.integrity:void 0,M=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;v==="style"?o.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:x,integrity:S,fetchPriority:M}):v==="script"&&o.d.X(p,{crossOrigin:x,integrity:S,fetchPriority:M,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Vt.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var v=m(g.as,g.crossOrigin);o.d.M(p,{crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&o.d.M(p)},Vt.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var v=g.as,x=m(v,g.crossOrigin);o.d.L(p,v,{crossOrigin:x,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Vt.preloadModule=function(p,g){if(typeof p=="string")if(g){var v=m(g.as,g.crossOrigin);o.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else o.d.m(p)},Vt.requestFormReset=function(p){o.d.r(p)},Vt.unstable_batchedUpdates=function(p,g){return p(g)},Vt.useFormState=function(p,g,v){return h.H.useFormState(p,g,v)},Vt.useFormStatus=function(){return h.H.useHostTransitionStatus()},Vt.version="19.1.0",Vt}var Ph;function T0(){if(Ph)return vu.exports;Ph=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),vu.exports=v0(),vu.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vh;function x0(){if(Vh)return Ro;Vh=1;var t=y0(),e=Hu(),i=T0();function o(n){var l="https://react.dev/errors/"+n;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)l+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+n+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function f(n){var l=n,s=n;if(n.alternate)for(;l.return;)l=l.return;else{n=l;do l=n,(l.flags&4098)!==0&&(s=l.return),n=l.return;while(n)}return l.tag===3?s:null}function h(n){if(n.tag===13){var l=n.memoizedState;if(l===null&&(n=n.alternate,n!==null&&(l=n.memoizedState)),l!==null)return l.dehydrated}return null}function m(n){if(f(n)!==n)throw Error(o(188))}function p(n){var l=n.alternate;if(!l){if(l=f(n),l===null)throw Error(o(188));return l!==n?null:n}for(var s=n,c=l;;){var d=s.return;if(d===null)break;var y=d.alternate;if(y===null){if(c=d.return,c!==null){s=c;continue}break}if(d.child===y.child){for(y=d.child;y;){if(y===s)return m(d),n;if(y===c)return m(d),l;y=y.sibling}throw Error(o(188))}if(s.return!==c.return)s=d,c=y;else{for(var C=!1,E=d.child;E;){if(E===s){C=!0,s=d,c=y;break}if(E===c){C=!0,c=d,s=y;break}E=E.sibling}if(!C){for(E=y.child;E;){if(E===s){C=!0,s=y,c=d;break}if(E===c){C=!0,c=y,s=d;break}E=E.sibling}if(!C)throw Error(o(189))}}if(s.alternate!==c)throw Error(o(190))}if(s.tag!==3)throw Error(o(188));return s.stateNode.current===s?n:l}function g(n){var l=n.tag;if(l===5||l===26||l===27||l===6)return n;for(n=n.child;n!==null;){if(l=g(n),l!==null)return l;n=n.sibling}return null}var v=Object.assign,x=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),M=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),D=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),q=Symbol.for("react.provider"),N=Symbol.for("react.consumer"),F=Symbol.for("react.context"),X=Symbol.for("react.forward_ref"),G=Symbol.for("react.suspense"),$=Symbol.for("react.suspense_list"),ie=Symbol.for("react.memo"),se=Symbol.for("react.lazy"),ne=Symbol.for("react.activity"),he=Symbol.for("react.memo_cache_sentinel"),me=Symbol.iterator;function pe(n){return n===null||typeof n!="object"?null:(n=me&&n[me]||n["@@iterator"],typeof n=="function"?n:null)}var Oe=Symbol.for("react.client.reference");function ye(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===Oe?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case w:return"Fragment";case k:return"Profiler";case D:return"StrictMode";case G:return"Suspense";case $:return"SuspenseList";case ne:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case M:return"Portal";case F:return(n.displayName||"Context")+".Provider";case N:return(n._context.displayName||"Context")+".Consumer";case X:var l=n.render;return n=n.displayName,n||(n=l.displayName||l.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case ie:return l=n.displayName||null,l!==null?l:ye(n.type)||"Memo";case se:l=n._payload,n=n._init;try{return ye(n(l))}catch{}}return null}var qe=Array.isArray,K=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,_e={pending:!1,data:null,method:null,action:null},Xe=[],L=-1;function te(n){return{current:n}}function de(n){0>L||(n.current=Xe[L],Xe[L]=null,L--)}function re(n,l){L++,Xe[L]=n.current,n.current=l}var Se=te(null),Ue=te(null),Te=te(null),Ae=te(null);function Ke(n,l){switch(re(Te,l),re(Ue,n),re(Se,null),l.nodeType){case 9:case 11:n=(n=l.documentElement)&&(n=n.namespaceURI)?lh(n):0;break;default:if(n=l.tagName,l=l.namespaceURI)l=lh(l),n=oh(l,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}de(Se),re(Se,n)}function Ht(){de(Se),de(Ue),de(Te)}function zt(n){n.memoizedState!==null&&re(Ae,n);var l=Se.current,s=oh(l,n.type);l!==s&&(re(Ue,n),re(Se,s))}function hn(n){Ue.current===n&&(de(Se),de(Ue)),Ae.current===n&&(de(Ae),So._currentValue=_e)}var mn=Object.prototype.hasOwnProperty,Ct=t.unstable_scheduleCallback,lt=t.unstable_cancelCallback,Nn=t.unstable_shouldYield,Rn=t.unstable_requestPaint,ft=t.unstable_now,gn=t.unstable_getCurrentPriorityLevel,tn=t.unstable_ImmediatePriority,pn=t.unstable_UserBlockingPriority,$t=t.unstable_NormalPriority,Ti=t.unstable_LowPriority,Gi=t.unstable_IdlePriority,Hi=t.log,zi=t.unstable_setDisableYieldValue,bn=null,bt=null;function at(n){if(typeof Hi=="function"&&zi(n),bt&&typeof bt.setStrictMode=="function")try{bt.setStrictMode(bn,n)}catch{}}var wt=Math.clz32?Math.clz32:Fi,Xn=Math.log,Kn=Math.LN2;function Fi(n){return n>>>=0,n===0?32:31-(Xn(n)/Kn|0)|0}var _=256,R=4194304;function Y(n){var l=n&42;if(l!==0)return l;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function J(n,l,s){var c=n.pendingLanes;if(c===0)return 0;var d=0,y=n.suspendedLanes,C=n.pingedLanes;n=n.warmLanes;var E=c&134217727;return E!==0?(c=E&~y,c!==0?d=Y(c):(C&=E,C!==0?d=Y(C):s||(s=E&~n,s!==0&&(d=Y(s))))):(E=c&~y,E!==0?d=Y(E):C!==0?d=Y(C):s||(s=c&~n,s!==0&&(d=Y(s)))),d===0?0:l!==0&&l!==d&&(l&y)===0&&(y=d&-d,s=l&-l,y>=s||y===32&&(s&4194048)!==0)?l:d}function le(n,l){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&l)===0}function oe(n,l){switch(n){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function j(){var n=_;return _<<=1,(_&4194048)===0&&(_=256),n}function ce(){var n=R;return R<<=1,(R&62914560)===0&&(R=4194304),n}function fe(n){for(var l=[],s=0;31>s;s++)l.push(n);return l}function we(n,l){n.pendingLanes|=l,l!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Je(n,l,s,c,d,y){var C=n.pendingLanes;n.pendingLanes=s,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=s,n.entangledLanes&=s,n.errorRecoveryDisabledLanes&=s,n.shellSuspendCounter=0;var E=n.entanglements,b=n.expirationTimes,V=n.hiddenUpdates;for(s=C&~s;0<s;){var Q=31-wt(s),ee=1<<Q;E[Q]=0,b[Q]=-1;var H=V[Q];if(H!==null)for(V[Q]=null,Q=0;Q<H.length;Q++){var O=H[Q];O!==null&&(O.lane&=-536870913)}s&=~ee}c!==0&&Ie(n,c,0),y!==0&&d===0&&n.tag!==0&&(n.suspendedLanes|=y&~(C&~l))}function Ie(n,l,s){n.pendingLanes|=l,n.suspendedLanes&=~l;var c=31-wt(l);n.entangledLanes|=l,n.entanglements[c]=n.entanglements[c]|1073741824|s&4194090}function rt(n,l){var s=n.entangledLanes|=l;for(n=n.entanglements;s;){var c=31-wt(s),d=1<<c;d&l|n[c]&l&&(n[c]|=l),s&=~d}}function Ze(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function yt(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function ut(){var n=ae.p;return n!==0?n:(n=window.event,n===void 0?32:Mh(n.type))}function St(n,l){var s=ae.p;try{return ae.p=n,l()}finally{ae.p=s}}var Ye=Math.random().toString(36).slice(2),ze="__reactFiber$"+Ye,Pe="__reactProps$"+Ye,A="__reactContainer$"+Ye,P="__reactEvents$"+Ye,z="__reactListeners$"+Ye,W="__reactHandles$"+Ye,ue="__reactResources$"+Ye,ve="__reactMarker$"+Ye;function De(n){delete n[ze],delete n[Pe],delete n[P],delete n[z],delete n[W]}function Me(n){var l=n[ze];if(l)return l;for(var s=n.parentNode;s;){if(l=s[A]||s[ze]){if(s=l.alternate,l.child!==null||s!==null&&s.child!==null)for(n=uh(n);n!==null;){if(s=n[ze])return s;n=uh(n)}return l}n=s,s=n.parentNode}return null}function Re(n){if(n=n[ze]||n[A]){var l=n.tag;if(l===5||l===6||l===13||l===26||l===27||l===3)return n}return null}function dt(n){var l=n.tag;if(l===5||l===26||l===27||l===6)return n.stateNode;throw Error(o(33))}function mt(n){var l=n[ue];return l||(l=n[ue]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function gt(n){n[ve]=!0}var Bo=new Set,$u={};function xi(n,l){Oi(n,l),Oi(n+"Capture",l)}function Oi(n,l){for($u[n]=l,n=0;n<l.length;n++)Bo.add(l[n])}var lp=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Xu={},Ku={};function op(n){return mn.call(Ku,n)?!0:mn.call(Xu,n)?!1:lp.test(n)?Ku[n]=!0:(Xu[n]=!0,!1)}function Po(n,l,s){if(op(l))if(s===null)n.removeAttribute(l);else{switch(typeof s){case"undefined":case"function":case"symbol":n.removeAttribute(l);return;case"boolean":var c=l.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){n.removeAttribute(l);return}}n.setAttribute(l,""+s)}}function Vo(n,l,s){if(s===null)n.removeAttribute(l);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(l);return}n.setAttribute(l,""+s)}}function wn(n,l,s,c){if(c===null)n.removeAttribute(s);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttributeNS(l,s,""+c)}}var aa,Qu;function Yi(n){if(aa===void 0)try{throw Error()}catch(s){var l=s.stack.trim().match(/\n( *(at )?)/);aa=l&&l[1]||"",Qu=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+aa+n+Qu}var ra=!1;function ua(n,l){if(!n||ra)return"";ra=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(l){var ee=function(){throw Error()};if(Object.defineProperty(ee.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ee,[])}catch(O){var H=O}Reflect.construct(n,[],ee)}else{try{ee.call()}catch(O){H=O}n.call(ee.prototype)}}else{try{throw Error()}catch(O){H=O}(ee=n())&&typeof ee.catch=="function"&&ee.catch(function(){})}}catch(O){if(O&&H&&typeof O.stack=="string")return[O.stack,H.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=c.DetermineComponentFrameRoot(),C=y[0],E=y[1];if(C&&E){var b=C.split(`
`),V=E.split(`
`);for(d=c=0;c<b.length&&!b[c].includes("DetermineComponentFrameRoot");)c++;for(;d<V.length&&!V[d].includes("DetermineComponentFrameRoot");)d++;if(c===b.length||d===V.length)for(c=b.length-1,d=V.length-1;1<=c&&0<=d&&b[c]!==V[d];)d--;for(;1<=c&&0<=d;c--,d--)if(b[c]!==V[d]){if(c!==1||d!==1)do if(c--,d--,0>d||b[c]!==V[d]){var Q=`
`+b[c].replace(" at new "," at ");return n.displayName&&Q.includes("<anonymous>")&&(Q=Q.replace("<anonymous>",n.displayName)),Q}while(1<=c&&0<=d);break}}}finally{ra=!1,Error.prepareStackTrace=s}return(s=n?n.displayName||n.name:"")?Yi(s):""}function sp(n){switch(n.tag){case 26:case 27:case 5:return Yi(n.type);case 16:return Yi("Lazy");case 13:return Yi("Suspense");case 19:return Yi("SuspenseList");case 0:case 15:return ua(n.type,!1);case 11:return ua(n.type.render,!1);case 1:return ua(n.type,!0);case 31:return Yi("Activity");default:return""}}function Zu(n){try{var l="";do l+=sp(n),n=n.return;while(n);return l}catch(s){return`
Error generating stack: `+s.message+`
`+s.stack}}function nn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Wu(n){var l=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function ap(n){var l=Wu(n)?"checked":"value",s=Object.getOwnPropertyDescriptor(n.constructor.prototype,l),c=""+n[l];if(!n.hasOwnProperty(l)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var d=s.get,y=s.set;return Object.defineProperty(n,l,{configurable:!0,get:function(){return d.call(this)},set:function(C){c=""+C,y.call(this,C)}}),Object.defineProperty(n,l,{enumerable:s.enumerable}),{getValue:function(){return c},setValue:function(C){c=""+C},stopTracking:function(){n._valueTracker=null,delete n[l]}}}}function qo(n){n._valueTracker||(n._valueTracker=ap(n))}function ju(n){if(!n)return!1;var l=n._valueTracker;if(!l)return!0;var s=l.getValue(),c="";return n&&(c=Wu(n)?n.checked?"true":"false":n.value),n=c,n!==s?(l.setValue(n),!0):!1}function Go(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var rp=/[\n"\\]/g;function ln(n){return n.replace(rp,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function ca(n,l,s,c,d,y,C,E){n.name="",C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?n.type=C:n.removeAttribute("type"),l!=null?C==="number"?(l===0&&n.value===""||n.value!=l)&&(n.value=""+nn(l)):n.value!==""+nn(l)&&(n.value=""+nn(l)):C!=="submit"&&C!=="reset"||n.removeAttribute("value"),l!=null?fa(n,C,nn(l)):s!=null?fa(n,C,nn(s)):c!=null&&n.removeAttribute("value"),d==null&&y!=null&&(n.defaultChecked=!!y),d!=null&&(n.checked=d&&typeof d!="function"&&typeof d!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?n.name=""+nn(E):n.removeAttribute("name")}function ec(n,l,s,c,d,y,C,E){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(n.type=y),l!=null||s!=null){if(!(y!=="submit"&&y!=="reset"||l!=null))return;s=s!=null?""+nn(s):"",l=l!=null?""+nn(l):s,E||l===n.value||(n.value=l),n.defaultValue=l}c=c??d,c=typeof c!="function"&&typeof c!="symbol"&&!!c,n.checked=E?n.checked:!!c,n.defaultChecked=!!c,C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(n.name=C)}function fa(n,l,s){l==="number"&&Go(n.ownerDocument)===n||n.defaultValue===""+s||(n.defaultValue=""+s)}function Ji(n,l,s,c){if(n=n.options,l){l={};for(var d=0;d<s.length;d++)l["$"+s[d]]=!0;for(s=0;s<n.length;s++)d=l.hasOwnProperty("$"+n[s].value),n[s].selected!==d&&(n[s].selected=d),d&&c&&(n[s].defaultSelected=!0)}else{for(s=""+nn(s),l=null,d=0;d<n.length;d++){if(n[d].value===s){n[d].selected=!0,c&&(n[d].defaultSelected=!0);return}l!==null||n[d].disabled||(l=n[d])}l!==null&&(l.selected=!0)}}function tc(n,l,s){if(l!=null&&(l=""+nn(l),l!==n.value&&(n.value=l),s==null)){n.defaultValue!==l&&(n.defaultValue=l);return}n.defaultValue=s!=null?""+nn(s):""}function nc(n,l,s,c){if(l==null){if(c!=null){if(s!=null)throw Error(o(92));if(qe(c)){if(1<c.length)throw Error(o(93));c=c[0]}s=c}s==null&&(s=""),l=s}s=nn(l),n.defaultValue=s,c=n.textContent,c===s&&c!==""&&c!==null&&(n.value=c)}function $i(n,l){if(l){var s=n.firstChild;if(s&&s===n.lastChild&&s.nodeType===3){s.nodeValue=l;return}}n.textContent=l}var up=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ic(n,l,s){var c=l.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?c?n.setProperty(l,""):l==="float"?n.cssFloat="":n[l]="":c?n.setProperty(l,s):typeof s!="number"||s===0||up.has(l)?l==="float"?n.cssFloat=s:n[l]=(""+s).trim():n[l]=s+"px"}function lc(n,l,s){if(l!=null&&typeof l!="object")throw Error(o(62));if(n=n.style,s!=null){for(var c in s)!s.hasOwnProperty(c)||l!=null&&l.hasOwnProperty(c)||(c.indexOf("--")===0?n.setProperty(c,""):c==="float"?n.cssFloat="":n[c]="");for(var d in l)c=l[d],l.hasOwnProperty(d)&&s[d]!==c&&ic(n,d,c)}else for(var y in l)l.hasOwnProperty(y)&&ic(n,y,l[y])}function da(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var cp=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),fp=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ho(n){return fp.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var ha=null;function ma(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Xi=null,Ki=null;function oc(n){var l=Re(n);if(l&&(n=l.stateNode)){var s=n[Pe]||null;e:switch(n=l.stateNode,l.type){case"input":if(ca(n,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),l=s.name,s.type==="radio"&&l!=null){for(s=n;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+ln(""+l)+'"][type="radio"]'),l=0;l<s.length;l++){var c=s[l];if(c!==n&&c.form===n.form){var d=c[Pe]||null;if(!d)throw Error(o(90));ca(c,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(l=0;l<s.length;l++)c=s[l],c.form===n.form&&ju(c)}break e;case"textarea":tc(n,s.value,s.defaultValue);break e;case"select":l=s.value,l!=null&&Ji(n,!!s.multiple,l,!1)}}}var ga=!1;function sc(n,l,s){if(ga)return n(l,s);ga=!0;try{var c=n(l);return c}finally{if(ga=!1,(Xi!==null||Ki!==null)&&(As(),Xi&&(l=Xi,n=Ki,Ki=Xi=null,oc(l),n)))for(l=0;l<n.length;l++)oc(n[l])}}function Il(n,l){var s=n.stateNode;if(s===null)return null;var c=s[Pe]||null;if(c===null)return null;s=c[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(s&&typeof s!="function")throw Error(o(231,l,typeof s));return s}var Dn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),pa=!1;if(Dn)try{var kl={};Object.defineProperty(kl,"passive",{get:function(){pa=!0}}),window.addEventListener("test",kl,kl),window.removeEventListener("test",kl,kl)}catch{pa=!1}var Qn=null,ya=null,zo=null;function ac(){if(zo)return zo;var n,l=ya,s=l.length,c,d="value"in Qn?Qn.value:Qn.textContent,y=d.length;for(n=0;n<s&&l[n]===d[n];n++);var C=s-n;for(c=1;c<=C&&l[s-c]===d[y-c];c++);return zo=d.slice(n,1<c?1-c:void 0)}function Fo(n){var l=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&l===13&&(n=13)):n=l,n===10&&(n=13),32<=n||n===13?n:0}function Oo(){return!0}function rc(){return!1}function Ft(n){function l(s,c,d,y,C){this._reactName=s,this._targetInst=d,this.type=c,this.nativeEvent=y,this.target=C,this.currentTarget=null;for(var E in n)n.hasOwnProperty(E)&&(s=n[E],this[E]=s?s(y):y[E]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Oo:rc,this.isPropagationStopped=rc,this}return v(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=Oo)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=Oo)},persist:function(){},isPersistent:Oo}),l}var Ci={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Yo=Ft(Ci),Bl=v({},Ci,{view:0,detail:0}),dp=Ft(Bl),va,Ta,Pl,Jo=v({},Bl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ca,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Pl&&(Pl&&n.type==="mousemove"?(va=n.screenX-Pl.screenX,Ta=n.screenY-Pl.screenY):Ta=va=0,Pl=n),va)},movementY:function(n){return"movementY"in n?n.movementY:Ta}}),uc=Ft(Jo),hp=v({},Jo,{dataTransfer:0}),mp=Ft(hp),gp=v({},Bl,{relatedTarget:0}),xa=Ft(gp),pp=v({},Ci,{animationName:0,elapsedTime:0,pseudoElement:0}),yp=Ft(pp),vp=v({},Ci,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Tp=Ft(vp),xp=v({},Ci,{data:0}),cc=Ft(xp),Cp={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ep={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Mp(n){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(n):(n=Ep[n])?!!l[n]:!1}function Ca(){return Mp}var _p=v({},Bl,{key:function(n){if(n.key){var l=Cp[n.key]||n.key;if(l!=="Unidentified")return l}return n.type==="keypress"?(n=Fo(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Sp[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ca,charCode:function(n){return n.type==="keypress"?Fo(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Fo(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Ap=Ft(_p),Np=v({},Jo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),fc=Ft(Np),Rp=v({},Bl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ca}),bp=Ft(Rp),wp=v({},Ci,{propertyName:0,elapsedTime:0,pseudoElement:0}),Dp=Ft(wp),Lp=v({},Jo,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Up=Ft(Lp),Ip=v({},Ci,{newState:0,oldState:0}),kp=Ft(Ip),Bp=[9,13,27,32],Sa=Dn&&"CompositionEvent"in window,Vl=null;Dn&&"documentMode"in document&&(Vl=document.documentMode);var Pp=Dn&&"TextEvent"in window&&!Vl,dc=Dn&&(!Sa||Vl&&8<Vl&&11>=Vl),hc=" ",mc=!1;function gc(n,l){switch(n){case"keyup":return Bp.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function pc(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Qi=!1;function Vp(n,l){switch(n){case"compositionend":return pc(l);case"keypress":return l.which!==32?null:(mc=!0,hc);case"textInput":return n=l.data,n===hc&&mc?null:n;default:return null}}function qp(n,l){if(Qi)return n==="compositionend"||!Sa&&gc(n,l)?(n=ac(),zo=ya=Qn=null,Qi=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return dc&&l.locale!=="ko"?null:l.data;default:return null}}var Gp={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yc(n){var l=n&&n.nodeName&&n.nodeName.toLowerCase();return l==="input"?!!Gp[n.type]:l==="textarea"}function vc(n,l,s,c){Xi?Ki?Ki.push(c):Ki=[c]:Xi=c,l=Ls(l,"onChange"),0<l.length&&(s=new Yo("onChange","change",null,s,c),n.push({event:s,listeners:l}))}var ql=null,Gl=null;function Hp(n){jd(n,0)}function $o(n){var l=dt(n);if(ju(l))return n}function Tc(n,l){if(n==="change")return l}var xc=!1;if(Dn){var Ea;if(Dn){var Ma="oninput"in document;if(!Ma){var Cc=document.createElement("div");Cc.setAttribute("oninput","return;"),Ma=typeof Cc.oninput=="function"}Ea=Ma}else Ea=!1;xc=Ea&&(!document.documentMode||9<document.documentMode)}function Sc(){ql&&(ql.detachEvent("onpropertychange",Ec),Gl=ql=null)}function Ec(n){if(n.propertyName==="value"&&$o(Gl)){var l=[];vc(l,Gl,n,ma(n)),sc(Hp,l)}}function zp(n,l,s){n==="focusin"?(Sc(),ql=l,Gl=s,ql.attachEvent("onpropertychange",Ec)):n==="focusout"&&Sc()}function Fp(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return $o(Gl)}function Op(n,l){if(n==="click")return $o(l)}function Yp(n,l){if(n==="input"||n==="change")return $o(l)}function Jp(n,l){return n===l&&(n!==0||1/n===1/l)||n!==n&&l!==l}var Xt=typeof Object.is=="function"?Object.is:Jp;function Hl(n,l){if(Xt(n,l))return!0;if(typeof n!="object"||n===null||typeof l!="object"||l===null)return!1;var s=Object.keys(n),c=Object.keys(l);if(s.length!==c.length)return!1;for(c=0;c<s.length;c++){var d=s[c];if(!mn.call(l,d)||!Xt(n[d],l[d]))return!1}return!0}function Mc(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function _c(n,l){var s=Mc(n);n=0;for(var c;s;){if(s.nodeType===3){if(c=n+s.textContent.length,n<=l&&c>=l)return{node:s,offset:l-n};n=c}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Mc(s)}}function Ac(n,l){return n&&l?n===l?!0:n&&n.nodeType===3?!1:l&&l.nodeType===3?Ac(n,l.parentNode):"contains"in n?n.contains(l):n.compareDocumentPosition?!!(n.compareDocumentPosition(l)&16):!1:!1}function Nc(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var l=Go(n.document);l instanceof n.HTMLIFrameElement;){try{var s=typeof l.contentWindow.location.href=="string"}catch{s=!1}if(s)n=l.contentWindow;else break;l=Go(n.document)}return l}function _a(n){var l=n&&n.nodeName&&n.nodeName.toLowerCase();return l&&(l==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||l==="textarea"||n.contentEditable==="true")}var $p=Dn&&"documentMode"in document&&11>=document.documentMode,Zi=null,Aa=null,zl=null,Na=!1;function Rc(n,l,s){var c=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Na||Zi==null||Zi!==Go(c)||(c=Zi,"selectionStart"in c&&_a(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),zl&&Hl(zl,c)||(zl=c,c=Ls(Aa,"onSelect"),0<c.length&&(l=new Yo("onSelect","select",null,l,s),n.push({event:l,listeners:c}),l.target=Zi)))}function Si(n,l){var s={};return s[n.toLowerCase()]=l.toLowerCase(),s["Webkit"+n]="webkit"+l,s["Moz"+n]="moz"+l,s}var Wi={animationend:Si("Animation","AnimationEnd"),animationiteration:Si("Animation","AnimationIteration"),animationstart:Si("Animation","AnimationStart"),transitionrun:Si("Transition","TransitionRun"),transitionstart:Si("Transition","TransitionStart"),transitioncancel:Si("Transition","TransitionCancel"),transitionend:Si("Transition","TransitionEnd")},Ra={},bc={};Dn&&(bc=document.createElement("div").style,"AnimationEvent"in window||(delete Wi.animationend.animation,delete Wi.animationiteration.animation,delete Wi.animationstart.animation),"TransitionEvent"in window||delete Wi.transitionend.transition);function Ei(n){if(Ra[n])return Ra[n];if(!Wi[n])return n;var l=Wi[n],s;for(s in l)if(l.hasOwnProperty(s)&&s in bc)return Ra[n]=l[s];return n}var wc=Ei("animationend"),Dc=Ei("animationiteration"),Lc=Ei("animationstart"),Xp=Ei("transitionrun"),Kp=Ei("transitionstart"),Qp=Ei("transitioncancel"),Uc=Ei("transitionend"),Ic=new Map,ba="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ba.push("scrollEnd");function yn(n,l){Ic.set(n,l),xi(l,[n])}var kc=new WeakMap;function on(n,l){if(typeof n=="object"&&n!==null){var s=kc.get(n);return s!==void 0?s:(l={value:n,source:l,stack:Zu(l)},kc.set(n,l),l)}return{value:n,source:l,stack:Zu(l)}}var sn=[],ji=0,wa=0;function Xo(){for(var n=ji,l=wa=ji=0;l<n;){var s=sn[l];sn[l++]=null;var c=sn[l];sn[l++]=null;var d=sn[l];sn[l++]=null;var y=sn[l];if(sn[l++]=null,c!==null&&d!==null){var C=c.pending;C===null?d.next=d:(d.next=C.next,C.next=d),c.pending=d}y!==0&&Bc(s,d,y)}}function Ko(n,l,s,c){sn[ji++]=n,sn[ji++]=l,sn[ji++]=s,sn[ji++]=c,wa|=c,n.lanes|=c,n=n.alternate,n!==null&&(n.lanes|=c)}function Da(n,l,s,c){return Ko(n,l,s,c),Qo(n)}function el(n,l){return Ko(n,null,null,l),Qo(n)}function Bc(n,l,s){n.lanes|=s;var c=n.alternate;c!==null&&(c.lanes|=s);for(var d=!1,y=n.return;y!==null;)y.childLanes|=s,c=y.alternate,c!==null&&(c.childLanes|=s),y.tag===22&&(n=y.stateNode,n===null||n._visibility&1||(d=!0)),n=y,y=y.return;return n.tag===3?(y=n.stateNode,d&&l!==null&&(d=31-wt(s),n=y.hiddenUpdates,c=n[d],c===null?n[d]=[l]:c.push(l),l.lane=s|536870912),y):null}function Qo(n){if(50<mo)throw mo=0,Pr=null,Error(o(185));for(var l=n.return;l!==null;)n=l,l=n.return;return n.tag===3?n.stateNode:null}var tl={};function Zp(n,l,s,c){this.tag=n,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Kt(n,l,s,c){return new Zp(n,l,s,c)}function La(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Ln(n,l){var s=n.alternate;return s===null?(s=Kt(n.tag,l,n.key,n.mode),s.elementType=n.elementType,s.type=n.type,s.stateNode=n.stateNode,s.alternate=n,n.alternate=s):(s.pendingProps=l,s.type=n.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=n.flags&65011712,s.childLanes=n.childLanes,s.lanes=n.lanes,s.child=n.child,s.memoizedProps=n.memoizedProps,s.memoizedState=n.memoizedState,s.updateQueue=n.updateQueue,l=n.dependencies,s.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},s.sibling=n.sibling,s.index=n.index,s.ref=n.ref,s.refCleanup=n.refCleanup,s}function Pc(n,l){n.flags&=65011714;var s=n.alternate;return s===null?(n.childLanes=0,n.lanes=l,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=s.childLanes,n.lanes=s.lanes,n.child=s.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=s.memoizedProps,n.memoizedState=s.memoizedState,n.updateQueue=s.updateQueue,n.type=s.type,l=s.dependencies,n.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),n}function Zo(n,l,s,c,d,y){var C=0;if(c=n,typeof n=="function")La(n)&&(C=1);else if(typeof n=="string")C=jy(n,s,Se.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case ne:return n=Kt(31,s,l,d),n.elementType=ne,n.lanes=y,n;case w:return Mi(s.children,d,y,l);case D:C=8,d|=24;break;case k:return n=Kt(12,s,l,d|2),n.elementType=k,n.lanes=y,n;case G:return n=Kt(13,s,l,d),n.elementType=G,n.lanes=y,n;case $:return n=Kt(19,s,l,d),n.elementType=$,n.lanes=y,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case q:case F:C=10;break e;case N:C=9;break e;case X:C=11;break e;case ie:C=14;break e;case se:C=16,c=null;break e}C=29,s=Error(o(130,n===null?"null":typeof n,"")),c=null}return l=Kt(C,s,l,d),l.elementType=n,l.type=c,l.lanes=y,l}function Mi(n,l,s,c){return n=Kt(7,n,c,l),n.lanes=s,n}function Ua(n,l,s){return n=Kt(6,n,null,l),n.lanes=s,n}function Ia(n,l,s){return l=Kt(4,n.children!==null?n.children:[],n.key,l),l.lanes=s,l.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},l}var nl=[],il=0,Wo=null,jo=0,an=[],rn=0,_i=null,Un=1,In="";function Ai(n,l){nl[il++]=jo,nl[il++]=Wo,Wo=n,jo=l}function Vc(n,l,s){an[rn++]=Un,an[rn++]=In,an[rn++]=_i,_i=n;var c=Un;n=In;var d=32-wt(c)-1;c&=~(1<<d),s+=1;var y=32-wt(l)+d;if(30<y){var C=d-d%5;y=(c&(1<<C)-1).toString(32),c>>=C,d-=C,Un=1<<32-wt(l)+d|s<<d|c,In=y+n}else Un=1<<y|s<<d|c,In=n}function ka(n){n.return!==null&&(Ai(n,1),Vc(n,1,0))}function Ba(n){for(;n===Wo;)Wo=nl[--il],nl[il]=null,jo=nl[--il],nl[il]=null;for(;n===_i;)_i=an[--rn],an[rn]=null,In=an[--rn],an[rn]=null,Un=an[--rn],an[rn]=null}var Gt=null,vt=null,Qe=!1,Ni=null,Cn=!1,Pa=Error(o(519));function Ri(n){var l=Error(o(418,""));throw Yl(on(l,n)),Pa}function qc(n){var l=n.stateNode,s=n.type,c=n.memoizedProps;switch(l[ze]=n,l[Pe]=c,s){case"dialog":He("cancel",l),He("close",l);break;case"iframe":case"object":case"embed":He("load",l);break;case"video":case"audio":for(s=0;s<po.length;s++)He(po[s],l);break;case"source":He("error",l);break;case"img":case"image":case"link":He("error",l),He("load",l);break;case"details":He("toggle",l);break;case"input":He("invalid",l),ec(l,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0),qo(l);break;case"select":He("invalid",l);break;case"textarea":He("invalid",l),nc(l,c.value,c.defaultValue,c.children),qo(l)}s=c.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||l.textContent===""+s||c.suppressHydrationWarning===!0||ih(l.textContent,s)?(c.popover!=null&&(He("beforetoggle",l),He("toggle",l)),c.onScroll!=null&&He("scroll",l),c.onScrollEnd!=null&&He("scrollend",l),c.onClick!=null&&(l.onclick=Us),l=!0):l=!1,l||Ri(n)}function Gc(n){for(Gt=n.return;Gt;)switch(Gt.tag){case 5:case 13:Cn=!1;return;case 27:case 3:Cn=!0;return;default:Gt=Gt.return}}function Fl(n){if(n!==Gt)return!1;if(!Qe)return Gc(n),Qe=!0,!1;var l=n.tag,s;if((s=l!==3&&l!==27)&&((s=l===5)&&(s=n.type,s=!(s!=="form"&&s!=="button")||jr(n.type,n.memoizedProps)),s=!s),s&&vt&&Ri(n),Gc(n),l===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(o(317));e:{for(n=n.nextSibling,l=0;n;){if(n.nodeType===8)if(s=n.data,s==="/$"){if(l===0){vt=Tn(n.nextSibling);break e}l--}else s!=="$"&&s!=="$!"&&s!=="$?"||l++;n=n.nextSibling}vt=null}}else l===27?(l=vt,di(n.type)?(n=iu,iu=null,vt=n):vt=l):vt=Gt?Tn(n.stateNode.nextSibling):null;return!0}function Ol(){vt=Gt=null,Qe=!1}function Hc(){var n=Ni;return n!==null&&(Jt===null?Jt=n:Jt.push.apply(Jt,n),Ni=null),n}function Yl(n){Ni===null?Ni=[n]:Ni.push(n)}var Va=te(null),bi=null,kn=null;function Zn(n,l,s){re(Va,l._currentValue),l._currentValue=s}function Bn(n){n._currentValue=Va.current,de(Va)}function qa(n,l,s){for(;n!==null;){var c=n.alternate;if((n.childLanes&l)!==l?(n.childLanes|=l,c!==null&&(c.childLanes|=l)):c!==null&&(c.childLanes&l)!==l&&(c.childLanes|=l),n===s)break;n=n.return}}function Ga(n,l,s,c){var d=n.child;for(d!==null&&(d.return=n);d!==null;){var y=d.dependencies;if(y!==null){var C=d.child;y=y.firstContext;e:for(;y!==null;){var E=y;y=d;for(var b=0;b<l.length;b++)if(E.context===l[b]){y.lanes|=s,E=y.alternate,E!==null&&(E.lanes|=s),qa(y.return,s,n),c||(C=null);break e}y=E.next}}else if(d.tag===18){if(C=d.return,C===null)throw Error(o(341));C.lanes|=s,y=C.alternate,y!==null&&(y.lanes|=s),qa(C,s,n),C=null}else C=d.child;if(C!==null)C.return=d;else for(C=d;C!==null;){if(C===n){C=null;break}if(d=C.sibling,d!==null){d.return=C.return,C=d;break}C=C.return}d=C}}function Jl(n,l,s,c){n=null;for(var d=l,y=!1;d!==null;){if(!y){if((d.flags&524288)!==0)y=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var C=d.alternate;if(C===null)throw Error(o(387));if(C=C.memoizedProps,C!==null){var E=d.type;Xt(d.pendingProps.value,C.value)||(n!==null?n.push(E):n=[E])}}else if(d===Ae.current){if(C=d.alternate,C===null)throw Error(o(387));C.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(n!==null?n.push(So):n=[So])}d=d.return}n!==null&&Ga(l,n,s,c),l.flags|=262144}function es(n){for(n=n.firstContext;n!==null;){if(!Xt(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function wi(n){bi=n,kn=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Pt(n){return zc(bi,n)}function ts(n,l){return bi===null&&wi(n),zc(n,l)}function zc(n,l){var s=l._currentValue;if(l={context:l,memoizedValue:s,next:null},kn===null){if(n===null)throw Error(o(308));kn=l,n.dependencies={lanes:0,firstContext:l},n.flags|=524288}else kn=kn.next=l;return s}var Wp=typeof AbortController<"u"?AbortController:function(){var n=[],l=this.signal={aborted:!1,addEventListener:function(s,c){n.push(c)}};this.abort=function(){l.aborted=!0,n.forEach(function(s){return s()})}},jp=t.unstable_scheduleCallback,ey=t.unstable_NormalPriority,Nt={$$typeof:F,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ha(){return{controller:new Wp,data:new Map,refCount:0}}function $l(n){n.refCount--,n.refCount===0&&jp(ey,function(){n.controller.abort()})}var Xl=null,za=0,ll=0,ol=null;function ty(n,l){if(Xl===null){var s=Xl=[];za=0,ll=Or(),ol={status:"pending",value:void 0,then:function(c){s.push(c)}}}return za++,l.then(Fc,Fc),l}function Fc(){if(--za===0&&Xl!==null){ol!==null&&(ol.status="fulfilled");var n=Xl;Xl=null,ll=0,ol=null;for(var l=0;l<n.length;l++)(0,n[l])()}}function ny(n,l){var s=[],c={status:"pending",value:null,reason:null,then:function(d){s.push(d)}};return n.then(function(){c.status="fulfilled",c.value=l;for(var d=0;d<s.length;d++)(0,s[d])(l)},function(d){for(c.status="rejected",c.reason=d,d=0;d<s.length;d++)(0,s[d])(void 0)}),c}var Oc=K.S;K.S=function(n,l){typeof l=="object"&&l!==null&&typeof l.then=="function"&&ty(n,l),Oc!==null&&Oc(n,l)};var Di=te(null);function Fa(){var n=Di.current;return n!==null?n:st.pooledCache}function ns(n,l){l===null?re(Di,Di.current):re(Di,l.pool)}function Yc(){var n=Fa();return n===null?null:{parent:Nt._currentValue,pool:n}}var Kl=Error(o(460)),Jc=Error(o(474)),is=Error(o(542)),Oa={then:function(){}};function $c(n){return n=n.status,n==="fulfilled"||n==="rejected"}function ls(){}function Xc(n,l,s){switch(s=n[s],s===void 0?n.push(l):s!==l&&(l.then(ls,ls),l=s),l.status){case"fulfilled":return l.value;case"rejected":throw n=l.reason,Qc(n),n;default:if(typeof l.status=="string")l.then(ls,ls);else{if(n=st,n!==null&&100<n.shellSuspendCounter)throw Error(o(482));n=l,n.status="pending",n.then(function(c){if(l.status==="pending"){var d=l;d.status="fulfilled",d.value=c}},function(c){if(l.status==="pending"){var d=l;d.status="rejected",d.reason=c}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw n=l.reason,Qc(n),n}throw Ql=l,Kl}}var Ql=null;function Kc(){if(Ql===null)throw Error(o(459));var n=Ql;return Ql=null,n}function Qc(n){if(n===Kl||n===is)throw Error(o(483))}var Wn=!1;function Ya(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ja(n,l){n=n.updateQueue,l.updateQueue===n&&(l.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function jn(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function ei(n,l,s){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(We&2)!==0){var d=c.pending;return d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l,l=Qo(n),Bc(n,null,s),l}return Ko(n,c,l,s),Qo(n)}function Zl(n,l,s){if(l=l.updateQueue,l!==null&&(l=l.shared,(s&4194048)!==0)){var c=l.lanes;c&=n.pendingLanes,s|=c,l.lanes=s,rt(n,s)}}function $a(n,l){var s=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,s===c)){var d=null,y=null;if(s=s.firstBaseUpdate,s!==null){do{var C={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};y===null?d=y=C:y=y.next=C,s=s.next}while(s!==null);y===null?d=y=l:y=y.next=l}else d=y=l;s={baseState:c.baseState,firstBaseUpdate:d,lastBaseUpdate:y,shared:c.shared,callbacks:c.callbacks},n.updateQueue=s;return}n=s.lastBaseUpdate,n===null?s.firstBaseUpdate=l:n.next=l,s.lastBaseUpdate=l}var Xa=!1;function Wl(){if(Xa){var n=ol;if(n!==null)throw n}}function jl(n,l,s,c){Xa=!1;var d=n.updateQueue;Wn=!1;var y=d.firstBaseUpdate,C=d.lastBaseUpdate,E=d.shared.pending;if(E!==null){d.shared.pending=null;var b=E,V=b.next;b.next=null,C===null?y=V:C.next=V,C=b;var Q=n.alternate;Q!==null&&(Q=Q.updateQueue,E=Q.lastBaseUpdate,E!==C&&(E===null?Q.firstBaseUpdate=V:E.next=V,Q.lastBaseUpdate=b))}if(y!==null){var ee=d.baseState;C=0,Q=V=b=null,E=y;do{var H=E.lane&-536870913,O=H!==E.lane;if(O?(Fe&H)===H:(c&H)===H){H!==0&&H===ll&&(Xa=!0),Q!==null&&(Q=Q.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});e:{var Le=n,Ne=E;H=l;var it=s;switch(Ne.tag){case 1:if(Le=Ne.payload,typeof Le=="function"){ee=Le.call(it,ee,H);break e}ee=Le;break e;case 3:Le.flags=Le.flags&-65537|128;case 0:if(Le=Ne.payload,H=typeof Le=="function"?Le.call(it,ee,H):Le,H==null)break e;ee=v({},ee,H);break e;case 2:Wn=!0}}H=E.callback,H!==null&&(n.flags|=64,O&&(n.flags|=8192),O=d.callbacks,O===null?d.callbacks=[H]:O.push(H))}else O={lane:H,tag:E.tag,payload:E.payload,callback:E.callback,next:null},Q===null?(V=Q=O,b=ee):Q=Q.next=O,C|=H;if(E=E.next,E===null){if(E=d.shared.pending,E===null)break;O=E,E=O.next,O.next=null,d.lastBaseUpdate=O,d.shared.pending=null}}while(!0);Q===null&&(b=ee),d.baseState=b,d.firstBaseUpdate=V,d.lastBaseUpdate=Q,y===null&&(d.shared.lanes=0),ri|=C,n.lanes=C,n.memoizedState=ee}}function Zc(n,l){if(typeof n!="function")throw Error(o(191,n));n.call(l)}function Wc(n,l){var s=n.callbacks;if(s!==null)for(n.callbacks=null,n=0;n<s.length;n++)Zc(s[n],l)}var sl=te(null),os=te(0);function jc(n,l){n=Fn,re(os,n),re(sl,l),Fn=n|l.baseLanes}function Ka(){re(os,Fn),re(sl,sl.current)}function Qa(){Fn=os.current,de(sl),de(os)}var ti=0,Be=null,tt=null,_t=null,ss=!1,al=!1,Li=!1,as=0,eo=0,rl=null,iy=0;function Et(){throw Error(o(321))}function Za(n,l){if(l===null)return!1;for(var s=0;s<l.length&&s<n.length;s++)if(!Xt(n[s],l[s]))return!1;return!0}function Wa(n,l,s,c,d,y){return ti=y,Be=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,K.H=n===null||n.memoizedState===null?Pf:Vf,Li=!1,y=s(c,d),Li=!1,al&&(y=tf(l,s,c,d)),ef(n),y}function ef(n){K.H=hs;var l=tt!==null&&tt.next!==null;if(ti=0,_t=tt=Be=null,ss=!1,eo=0,rl=null,l)throw Error(o(300));n===null||Dt||(n=n.dependencies,n!==null&&es(n)&&(Dt=!0))}function tf(n,l,s,c){Be=n;var d=0;do{if(al&&(rl=null),eo=0,al=!1,25<=d)throw Error(o(301));if(d+=1,_t=tt=null,n.updateQueue!=null){var y=n.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}K.H=cy,y=l(s,c)}while(al);return y}function ly(){var n=K.H,l=n.useState()[0];return l=typeof l.then=="function"?to(l):l,n=n.useState()[0],(tt!==null?tt.memoizedState:null)!==n&&(Be.flags|=1024),l}function ja(){var n=as!==0;return as=0,n}function er(n,l,s){l.updateQueue=n.updateQueue,l.flags&=-2053,n.lanes&=~s}function tr(n){if(ss){for(n=n.memoizedState;n!==null;){var l=n.queue;l!==null&&(l.pending=null),n=n.next}ss=!1}ti=0,_t=tt=Be=null,al=!1,eo=as=0,rl=null}function Ot(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _t===null?Be.memoizedState=_t=n:_t=_t.next=n,_t}function At(){if(tt===null){var n=Be.alternate;n=n!==null?n.memoizedState:null}else n=tt.next;var l=_t===null?Be.memoizedState:_t.next;if(l!==null)_t=l,tt=n;else{if(n===null)throw Be.alternate===null?Error(o(467)):Error(o(310));tt=n,n={memoizedState:tt.memoizedState,baseState:tt.baseState,baseQueue:tt.baseQueue,queue:tt.queue,next:null},_t===null?Be.memoizedState=_t=n:_t=_t.next=n}return _t}function nr(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function to(n){var l=eo;return eo+=1,rl===null&&(rl=[]),n=Xc(rl,n,l),l=Be,(_t===null?l.memoizedState:_t.next)===null&&(l=l.alternate,K.H=l===null||l.memoizedState===null?Pf:Vf),n}function rs(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return to(n);if(n.$$typeof===F)return Pt(n)}throw Error(o(438,String(n)))}function ir(n){var l=null,s=Be.updateQueue;if(s!==null&&(l=s.memoCache),l==null){var c=Be.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(l={data:c.data.map(function(d){return d.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),s===null&&(s=nr(),Be.updateQueue=s),s.memoCache=l,s=l.data[l.index],s===void 0)for(s=l.data[l.index]=Array(n),c=0;c<n;c++)s[c]=he;return l.index++,s}function Pn(n,l){return typeof l=="function"?l(n):l}function us(n){var l=At();return lr(l,tt,n)}function lr(n,l,s){var c=n.queue;if(c===null)throw Error(o(311));c.lastRenderedReducer=s;var d=n.baseQueue,y=c.pending;if(y!==null){if(d!==null){var C=d.next;d.next=y.next,y.next=C}l.baseQueue=d=y,c.pending=null}if(y=n.baseState,d===null)n.memoizedState=y;else{l=d.next;var E=C=null,b=null,V=l,Q=!1;do{var ee=V.lane&-536870913;if(ee!==V.lane?(Fe&ee)===ee:(ti&ee)===ee){var H=V.revertLane;if(H===0)b!==null&&(b=b.next={lane:0,revertLane:0,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null}),ee===ll&&(Q=!0);else if((ti&H)===H){V=V.next,H===ll&&(Q=!0);continue}else ee={lane:0,revertLane:V.revertLane,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null},b===null?(E=b=ee,C=y):b=b.next=ee,Be.lanes|=H,ri|=H;ee=V.action,Li&&s(y,ee),y=V.hasEagerState?V.eagerState:s(y,ee)}else H={lane:ee,revertLane:V.revertLane,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null},b===null?(E=b=H,C=y):b=b.next=H,Be.lanes|=ee,ri|=ee;V=V.next}while(V!==null&&V!==l);if(b===null?C=y:b.next=E,!Xt(y,n.memoizedState)&&(Dt=!0,Q&&(s=ol,s!==null)))throw s;n.memoizedState=y,n.baseState=C,n.baseQueue=b,c.lastRenderedState=y}return d===null&&(c.lanes=0),[n.memoizedState,c.dispatch]}function or(n){var l=At(),s=l.queue;if(s===null)throw Error(o(311));s.lastRenderedReducer=n;var c=s.dispatch,d=s.pending,y=l.memoizedState;if(d!==null){s.pending=null;var C=d=d.next;do y=n(y,C.action),C=C.next;while(C!==d);Xt(y,l.memoizedState)||(Dt=!0),l.memoizedState=y,l.baseQueue===null&&(l.baseState=y),s.lastRenderedState=y}return[y,c]}function nf(n,l,s){var c=Be,d=At(),y=Qe;if(y){if(s===void 0)throw Error(o(407));s=s()}else s=l();var C=!Xt((tt||d).memoizedState,s);C&&(d.memoizedState=s,Dt=!0),d=d.queue;var E=sf.bind(null,c,d,n);if(no(2048,8,E,[n]),d.getSnapshot!==l||C||_t!==null&&_t.memoizedState.tag&1){if(c.flags|=2048,ul(9,cs(),of.bind(null,c,d,s,l),null),st===null)throw Error(o(349));y||(ti&124)!==0||lf(c,l,s)}return s}function lf(n,l,s){n.flags|=16384,n={getSnapshot:l,value:s},l=Be.updateQueue,l===null?(l=nr(),Be.updateQueue=l,l.stores=[n]):(s=l.stores,s===null?l.stores=[n]:s.push(n))}function of(n,l,s,c){l.value=s,l.getSnapshot=c,af(l)&&rf(n)}function sf(n,l,s){return s(function(){af(l)&&rf(n)})}function af(n){var l=n.getSnapshot;n=n.value;try{var s=l();return!Xt(n,s)}catch{return!0}}function rf(n){var l=el(n,2);l!==null&&en(l,n,2)}function sr(n){var l=Ot();if(typeof n=="function"){var s=n;if(n=s(),Li){at(!0);try{s()}finally{at(!1)}}}return l.memoizedState=l.baseState=n,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pn,lastRenderedState:n},l}function uf(n,l,s,c){return n.baseState=s,lr(n,tt,typeof c=="function"?c:Pn)}function oy(n,l,s,c,d){if(ds(n))throw Error(o(485));if(n=l.action,n!==null){var y={payload:d,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(C){y.listeners.push(C)}};K.T!==null?s(!0):y.isTransition=!1,c(y),s=l.pending,s===null?(y.next=l.pending=y,cf(l,y)):(y.next=s.next,l.pending=s.next=y)}}function cf(n,l){var s=l.action,c=l.payload,d=n.state;if(l.isTransition){var y=K.T,C={};K.T=C;try{var E=s(d,c),b=K.S;b!==null&&b(C,E),ff(n,l,E)}catch(V){ar(n,l,V)}finally{K.T=y}}else try{y=s(d,c),ff(n,l,y)}catch(V){ar(n,l,V)}}function ff(n,l,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(c){df(n,l,c)},function(c){return ar(n,l,c)}):df(n,l,s)}function df(n,l,s){l.status="fulfilled",l.value=s,hf(l),n.state=s,l=n.pending,l!==null&&(s=l.next,s===l?n.pending=null:(s=s.next,l.next=s,cf(n,s)))}function ar(n,l,s){var c=n.pending;if(n.pending=null,c!==null){c=c.next;do l.status="rejected",l.reason=s,hf(l),l=l.next;while(l!==c)}n.action=null}function hf(n){n=n.listeners;for(var l=0;l<n.length;l++)(0,n[l])()}function mf(n,l){return l}function gf(n,l){if(Qe){var s=st.formState;if(s!==null){e:{var c=Be;if(Qe){if(vt){t:{for(var d=vt,y=Cn;d.nodeType!==8;){if(!y){d=null;break t}if(d=Tn(d.nextSibling),d===null){d=null;break t}}y=d.data,d=y==="F!"||y==="F"?d:null}if(d){vt=Tn(d.nextSibling),c=d.data==="F!";break e}}Ri(c)}c=!1}c&&(l=s[0])}}return s=Ot(),s.memoizedState=s.baseState=l,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:mf,lastRenderedState:l},s.queue=c,s=If.bind(null,Be,c),c.dispatch=s,c=sr(!1),y=dr.bind(null,Be,!1,c.queue),c=Ot(),d={state:l,dispatch:null,action:n,pending:null},c.queue=d,s=oy.bind(null,Be,d,y,s),d.dispatch=s,c.memoizedState=n,[l,s,!1]}function pf(n){var l=At();return yf(l,tt,n)}function yf(n,l,s){if(l=lr(n,l,mf)[0],n=us(Pn)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var c=to(l)}catch(C){throw C===Kl?is:C}else c=l;l=At();var d=l.queue,y=d.dispatch;return s!==l.memoizedState&&(Be.flags|=2048,ul(9,cs(),sy.bind(null,d,s),null)),[c,y,n]}function sy(n,l){n.action=l}function vf(n){var l=At(),s=tt;if(s!==null)return yf(l,s,n);At(),l=l.memoizedState,s=At();var c=s.queue.dispatch;return s.memoizedState=n,[l,c,!1]}function ul(n,l,s,c){return n={tag:n,create:s,deps:c,inst:l,next:null},l=Be.updateQueue,l===null&&(l=nr(),Be.updateQueue=l),s=l.lastEffect,s===null?l.lastEffect=n.next=n:(c=s.next,s.next=n,n.next=c,l.lastEffect=n),n}function cs(){return{destroy:void 0,resource:void 0}}function Tf(){return At().memoizedState}function fs(n,l,s,c){var d=Ot();c=c===void 0?null:c,Be.flags|=n,d.memoizedState=ul(1|l,cs(),s,c)}function no(n,l,s,c){var d=At();c=c===void 0?null:c;var y=d.memoizedState.inst;tt!==null&&c!==null&&Za(c,tt.memoizedState.deps)?d.memoizedState=ul(l,y,s,c):(Be.flags|=n,d.memoizedState=ul(1|l,y,s,c))}function xf(n,l){fs(8390656,8,n,l)}function Cf(n,l){no(2048,8,n,l)}function Sf(n,l){return no(4,2,n,l)}function Ef(n,l){return no(4,4,n,l)}function Mf(n,l){if(typeof l=="function"){n=n();var s=l(n);return function(){typeof s=="function"?s():l(null)}}if(l!=null)return n=n(),l.current=n,function(){l.current=null}}function _f(n,l,s){s=s!=null?s.concat([n]):null,no(4,4,Mf.bind(null,l,n),s)}function rr(){}function Af(n,l){var s=At();l=l===void 0?null:l;var c=s.memoizedState;return l!==null&&Za(l,c[1])?c[0]:(s.memoizedState=[n,l],n)}function Nf(n,l){var s=At();l=l===void 0?null:l;var c=s.memoizedState;if(l!==null&&Za(l,c[1]))return c[0];if(c=n(),Li){at(!0);try{n()}finally{at(!1)}}return s.memoizedState=[c,l],c}function ur(n,l,s){return s===void 0||(ti&1073741824)!==0?n.memoizedState=l:(n.memoizedState=s,n=wd(),Be.lanes|=n,ri|=n,s)}function Rf(n,l,s,c){return Xt(s,l)?s:sl.current!==null?(n=ur(n,s,c),Xt(n,l)||(Dt=!0),n):(ti&42)===0?(Dt=!0,n.memoizedState=s):(n=wd(),Be.lanes|=n,ri|=n,l)}function bf(n,l,s,c,d){var y=ae.p;ae.p=y!==0&&8>y?y:8;var C=K.T,E={};K.T=E,dr(n,!1,l,s);try{var b=d(),V=K.S;if(V!==null&&V(E,b),b!==null&&typeof b=="object"&&typeof b.then=="function"){var Q=ny(b,c);io(n,l,Q,jt(n))}else io(n,l,c,jt(n))}catch(ee){io(n,l,{then:function(){},status:"rejected",reason:ee},jt())}finally{ae.p=y,K.T=C}}function ay(){}function cr(n,l,s,c){if(n.tag!==5)throw Error(o(476));var d=wf(n).queue;bf(n,d,l,_e,s===null?ay:function(){return Df(n),s(c)})}function wf(n){var l=n.memoizedState;if(l!==null)return l;l={memoizedState:_e,baseState:_e,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pn,lastRenderedState:_e},next:null};var s={};return l.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pn,lastRenderedState:s},next:null},n.memoizedState=l,n=n.alternate,n!==null&&(n.memoizedState=l),l}function Df(n){var l=wf(n).next.queue;io(n,l,{},jt())}function fr(){return Pt(So)}function Lf(){return At().memoizedState}function Uf(){return At().memoizedState}function ry(n){for(var l=n.return;l!==null;){switch(l.tag){case 24:case 3:var s=jt();n=jn(s);var c=ei(l,n,s);c!==null&&(en(c,l,s),Zl(c,l,s)),l={cache:Ha()},n.payload=l;return}l=l.return}}function uy(n,l,s){var c=jt();s={lane:c,revertLane:0,action:s,hasEagerState:!1,eagerState:null,next:null},ds(n)?kf(l,s):(s=Da(n,l,s,c),s!==null&&(en(s,n,c),Bf(s,l,c)))}function If(n,l,s){var c=jt();io(n,l,s,c)}function io(n,l,s,c){var d={lane:c,revertLane:0,action:s,hasEagerState:!1,eagerState:null,next:null};if(ds(n))kf(l,d);else{var y=n.alternate;if(n.lanes===0&&(y===null||y.lanes===0)&&(y=l.lastRenderedReducer,y!==null))try{var C=l.lastRenderedState,E=y(C,s);if(d.hasEagerState=!0,d.eagerState=E,Xt(E,C))return Ko(n,l,d,0),st===null&&Xo(),!1}catch{}finally{}if(s=Da(n,l,d,c),s!==null)return en(s,n,c),Bf(s,l,c),!0}return!1}function dr(n,l,s,c){if(c={lane:2,revertLane:Or(),action:c,hasEagerState:!1,eagerState:null,next:null},ds(n)){if(l)throw Error(o(479))}else l=Da(n,s,c,2),l!==null&&en(l,n,2)}function ds(n){var l=n.alternate;return n===Be||l!==null&&l===Be}function kf(n,l){al=ss=!0;var s=n.pending;s===null?l.next=l:(l.next=s.next,s.next=l),n.pending=l}function Bf(n,l,s){if((s&4194048)!==0){var c=l.lanes;c&=n.pendingLanes,s|=c,l.lanes=s,rt(n,s)}}var hs={readContext:Pt,use:rs,useCallback:Et,useContext:Et,useEffect:Et,useImperativeHandle:Et,useLayoutEffect:Et,useInsertionEffect:Et,useMemo:Et,useReducer:Et,useRef:Et,useState:Et,useDebugValue:Et,useDeferredValue:Et,useTransition:Et,useSyncExternalStore:Et,useId:Et,useHostTransitionStatus:Et,useFormState:Et,useActionState:Et,useOptimistic:Et,useMemoCache:Et,useCacheRefresh:Et},Pf={readContext:Pt,use:rs,useCallback:function(n,l){return Ot().memoizedState=[n,l===void 0?null:l],n},useContext:Pt,useEffect:xf,useImperativeHandle:function(n,l,s){s=s!=null?s.concat([n]):null,fs(4194308,4,Mf.bind(null,l,n),s)},useLayoutEffect:function(n,l){return fs(4194308,4,n,l)},useInsertionEffect:function(n,l){fs(4,2,n,l)},useMemo:function(n,l){var s=Ot();l=l===void 0?null:l;var c=n();if(Li){at(!0);try{n()}finally{at(!1)}}return s.memoizedState=[c,l],c},useReducer:function(n,l,s){var c=Ot();if(s!==void 0){var d=s(l);if(Li){at(!0);try{s(l)}finally{at(!1)}}}else d=l;return c.memoizedState=c.baseState=d,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:d},c.queue=n,n=n.dispatch=uy.bind(null,Be,n),[c.memoizedState,n]},useRef:function(n){var l=Ot();return n={current:n},l.memoizedState=n},useState:function(n){n=sr(n);var l=n.queue,s=If.bind(null,Be,l);return l.dispatch=s,[n.memoizedState,s]},useDebugValue:rr,useDeferredValue:function(n,l){var s=Ot();return ur(s,n,l)},useTransition:function(){var n=sr(!1);return n=bf.bind(null,Be,n.queue,!0,!1),Ot().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,l,s){var c=Be,d=Ot();if(Qe){if(s===void 0)throw Error(o(407));s=s()}else{if(s=l(),st===null)throw Error(o(349));(Fe&124)!==0||lf(c,l,s)}d.memoizedState=s;var y={value:s,getSnapshot:l};return d.queue=y,xf(sf.bind(null,c,y,n),[n]),c.flags|=2048,ul(9,cs(),of.bind(null,c,y,s,l),null),s},useId:function(){var n=Ot(),l=st.identifierPrefix;if(Qe){var s=In,c=Un;s=(c&~(1<<32-wt(c)-1)).toString(32)+s,l=""+l+"R"+s,s=as++,0<s&&(l+="H"+s.toString(32)),l+=""}else s=iy++,l=""+l+"r"+s.toString(32)+"";return n.memoizedState=l},useHostTransitionStatus:fr,useFormState:gf,useActionState:gf,useOptimistic:function(n){var l=Ot();l.memoizedState=l.baseState=n;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=s,l=dr.bind(null,Be,!0,s),s.dispatch=l,[n,l]},useMemoCache:ir,useCacheRefresh:function(){return Ot().memoizedState=ry.bind(null,Be)}},Vf={readContext:Pt,use:rs,useCallback:Af,useContext:Pt,useEffect:Cf,useImperativeHandle:_f,useInsertionEffect:Sf,useLayoutEffect:Ef,useMemo:Nf,useReducer:us,useRef:Tf,useState:function(){return us(Pn)},useDebugValue:rr,useDeferredValue:function(n,l){var s=At();return Rf(s,tt.memoizedState,n,l)},useTransition:function(){var n=us(Pn)[0],l=At().memoizedState;return[typeof n=="boolean"?n:to(n),l]},useSyncExternalStore:nf,useId:Lf,useHostTransitionStatus:fr,useFormState:pf,useActionState:pf,useOptimistic:function(n,l){var s=At();return uf(s,tt,n,l)},useMemoCache:ir,useCacheRefresh:Uf},cy={readContext:Pt,use:rs,useCallback:Af,useContext:Pt,useEffect:Cf,useImperativeHandle:_f,useInsertionEffect:Sf,useLayoutEffect:Ef,useMemo:Nf,useReducer:or,useRef:Tf,useState:function(){return or(Pn)},useDebugValue:rr,useDeferredValue:function(n,l){var s=At();return tt===null?ur(s,n,l):Rf(s,tt.memoizedState,n,l)},useTransition:function(){var n=or(Pn)[0],l=At().memoizedState;return[typeof n=="boolean"?n:to(n),l]},useSyncExternalStore:nf,useId:Lf,useHostTransitionStatus:fr,useFormState:vf,useActionState:vf,useOptimistic:function(n,l){var s=At();return tt!==null?uf(s,tt,n,l):(s.baseState=n,[n,s.queue.dispatch])},useMemoCache:ir,useCacheRefresh:Uf},cl=null,lo=0;function ms(n){var l=lo;return lo+=1,cl===null&&(cl=[]),Xc(cl,n,l)}function oo(n,l){l=l.props.ref,n.ref=l!==void 0?l:null}function gs(n,l){throw l.$$typeof===x?Error(o(525)):(n=Object.prototype.toString.call(l),Error(o(31,n==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":n)))}function qf(n){var l=n._init;return l(n._payload)}function Gf(n){function l(I,U){if(n){var B=I.deletions;B===null?(I.deletions=[U],I.flags|=16):B.push(U)}}function s(I,U){if(!n)return null;for(;U!==null;)l(I,U),U=U.sibling;return null}function c(I){for(var U=new Map;I!==null;)I.key!==null?U.set(I.key,I):U.set(I.index,I),I=I.sibling;return U}function d(I,U){return I=Ln(I,U),I.index=0,I.sibling=null,I}function y(I,U,B){return I.index=B,n?(B=I.alternate,B!==null?(B=B.index,B<U?(I.flags|=67108866,U):B):(I.flags|=67108866,U)):(I.flags|=1048576,U)}function C(I){return n&&I.alternate===null&&(I.flags|=67108866),I}function E(I,U,B,Z){return U===null||U.tag!==6?(U=Ua(B,I.mode,Z),U.return=I,U):(U=d(U,B),U.return=I,U)}function b(I,U,B,Z){var ge=B.type;return ge===w?Q(I,U,B.props.children,Z,B.key):U!==null&&(U.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===se&&qf(ge)===U.type)?(U=d(U,B.props),oo(U,B),U.return=I,U):(U=Zo(B.type,B.key,B.props,null,I.mode,Z),oo(U,B),U.return=I,U)}function V(I,U,B,Z){return U===null||U.tag!==4||U.stateNode.containerInfo!==B.containerInfo||U.stateNode.implementation!==B.implementation?(U=Ia(B,I.mode,Z),U.return=I,U):(U=d(U,B.children||[]),U.return=I,U)}function Q(I,U,B,Z,ge){return U===null||U.tag!==7?(U=Mi(B,I.mode,Z,ge),U.return=I,U):(U=d(U,B),U.return=I,U)}function ee(I,U,B){if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return U=Ua(""+U,I.mode,B),U.return=I,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case S:return B=Zo(U.type,U.key,U.props,null,I.mode,B),oo(B,U),B.return=I,B;case M:return U=Ia(U,I.mode,B),U.return=I,U;case se:var Z=U._init;return U=Z(U._payload),ee(I,U,B)}if(qe(U)||pe(U))return U=Mi(U,I.mode,B,null),U.return=I,U;if(typeof U.then=="function")return ee(I,ms(U),B);if(U.$$typeof===F)return ee(I,ts(I,U),B);gs(I,U)}return null}function H(I,U,B,Z){var ge=U!==null?U.key:null;if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return ge!==null?null:E(I,U,""+B,Z);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case S:return B.key===ge?b(I,U,B,Z):null;case M:return B.key===ge?V(I,U,B,Z):null;case se:return ge=B._init,B=ge(B._payload),H(I,U,B,Z)}if(qe(B)||pe(B))return ge!==null?null:Q(I,U,B,Z,null);if(typeof B.then=="function")return H(I,U,ms(B),Z);if(B.$$typeof===F)return H(I,U,ts(I,B),Z);gs(I,B)}return null}function O(I,U,B,Z,ge){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return I=I.get(B)||null,E(U,I,""+Z,ge);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case S:return I=I.get(Z.key===null?B:Z.key)||null,b(U,I,Z,ge);case M:return I=I.get(Z.key===null?B:Z.key)||null,V(U,I,Z,ge);case se:var Ve=Z._init;return Z=Ve(Z._payload),O(I,U,B,Z,ge)}if(qe(Z)||pe(Z))return I=I.get(B)||null,Q(U,I,Z,ge,null);if(typeof Z.then=="function")return O(I,U,B,ms(Z),ge);if(Z.$$typeof===F)return O(I,U,B,ts(U,Z),ge);gs(U,Z)}return null}function Le(I,U,B,Z){for(var ge=null,Ve=null,Ce=U,be=U=0,Ut=null;Ce!==null&&be<B.length;be++){Ce.index>be?(Ut=Ce,Ce=null):Ut=Ce.sibling;var $e=H(I,Ce,B[be],Z);if($e===null){Ce===null&&(Ce=Ut);break}n&&Ce&&$e.alternate===null&&l(I,Ce),U=y($e,U,be),Ve===null?ge=$e:Ve.sibling=$e,Ve=$e,Ce=Ut}if(be===B.length)return s(I,Ce),Qe&&Ai(I,be),ge;if(Ce===null){for(;be<B.length;be++)Ce=ee(I,B[be],Z),Ce!==null&&(U=y(Ce,U,be),Ve===null?ge=Ce:Ve.sibling=Ce,Ve=Ce);return Qe&&Ai(I,be),ge}for(Ce=c(Ce);be<B.length;be++)Ut=O(Ce,I,be,B[be],Z),Ut!==null&&(n&&Ut.alternate!==null&&Ce.delete(Ut.key===null?be:Ut.key),U=y(Ut,U,be),Ve===null?ge=Ut:Ve.sibling=Ut,Ve=Ut);return n&&Ce.forEach(function(yi){return l(I,yi)}),Qe&&Ai(I,be),ge}function Ne(I,U,B,Z){if(B==null)throw Error(o(151));for(var ge=null,Ve=null,Ce=U,be=U=0,Ut=null,$e=B.next();Ce!==null&&!$e.done;be++,$e=B.next()){Ce.index>be?(Ut=Ce,Ce=null):Ut=Ce.sibling;var yi=H(I,Ce,$e.value,Z);if(yi===null){Ce===null&&(Ce=Ut);break}n&&Ce&&yi.alternate===null&&l(I,Ce),U=y(yi,U,be),Ve===null?ge=yi:Ve.sibling=yi,Ve=yi,Ce=Ut}if($e.done)return s(I,Ce),Qe&&Ai(I,be),ge;if(Ce===null){for(;!$e.done;be++,$e=B.next())$e=ee(I,$e.value,Z),$e!==null&&(U=y($e,U,be),Ve===null?ge=$e:Ve.sibling=$e,Ve=$e);return Qe&&Ai(I,be),ge}for(Ce=c(Ce);!$e.done;be++,$e=B.next())$e=O(Ce,I,be,$e.value,Z),$e!==null&&(n&&$e.alternate!==null&&Ce.delete($e.key===null?be:$e.key),U=y($e,U,be),Ve===null?ge=$e:Ve.sibling=$e,Ve=$e);return n&&Ce.forEach(function(f0){return l(I,f0)}),Qe&&Ai(I,be),ge}function it(I,U,B,Z){if(typeof B=="object"&&B!==null&&B.type===w&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case S:e:{for(var ge=B.key;U!==null;){if(U.key===ge){if(ge=B.type,ge===w){if(U.tag===7){s(I,U.sibling),Z=d(U,B.props.children),Z.return=I,I=Z;break e}}else if(U.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===se&&qf(ge)===U.type){s(I,U.sibling),Z=d(U,B.props),oo(Z,B),Z.return=I,I=Z;break e}s(I,U);break}else l(I,U);U=U.sibling}B.type===w?(Z=Mi(B.props.children,I.mode,Z,B.key),Z.return=I,I=Z):(Z=Zo(B.type,B.key,B.props,null,I.mode,Z),oo(Z,B),Z.return=I,I=Z)}return C(I);case M:e:{for(ge=B.key;U!==null;){if(U.key===ge)if(U.tag===4&&U.stateNode.containerInfo===B.containerInfo&&U.stateNode.implementation===B.implementation){s(I,U.sibling),Z=d(U,B.children||[]),Z.return=I,I=Z;break e}else{s(I,U);break}else l(I,U);U=U.sibling}Z=Ia(B,I.mode,Z),Z.return=I,I=Z}return C(I);case se:return ge=B._init,B=ge(B._payload),it(I,U,B,Z)}if(qe(B))return Le(I,U,B,Z);if(pe(B)){if(ge=pe(B),typeof ge!="function")throw Error(o(150));return B=ge.call(B),Ne(I,U,B,Z)}if(typeof B.then=="function")return it(I,U,ms(B),Z);if(B.$$typeof===F)return it(I,U,ts(I,B),Z);gs(I,B)}return typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint"?(B=""+B,U!==null&&U.tag===6?(s(I,U.sibling),Z=d(U,B),Z.return=I,I=Z):(s(I,U),Z=Ua(B,I.mode,Z),Z.return=I,I=Z),C(I)):s(I,U)}return function(I,U,B,Z){try{lo=0;var ge=it(I,U,B,Z);return cl=null,ge}catch(Ce){if(Ce===Kl||Ce===is)throw Ce;var Ve=Kt(29,Ce,null,I.mode);return Ve.lanes=Z,Ve.return=I,Ve}finally{}}}var fl=Gf(!0),Hf=Gf(!1),un=te(null),Sn=null;function ni(n){var l=n.alternate;re(Rt,Rt.current&1),re(un,n),Sn===null&&(l===null||sl.current!==null||l.memoizedState!==null)&&(Sn=n)}function zf(n){if(n.tag===22){if(re(Rt,Rt.current),re(un,n),Sn===null){var l=n.alternate;l!==null&&l.memoizedState!==null&&(Sn=n)}}else ii()}function ii(){re(Rt,Rt.current),re(un,un.current)}function Vn(n){de(un),Sn===n&&(Sn=null),de(Rt)}var Rt=te(0);function ps(n){for(var l=n;l!==null;){if(l.tag===13){var s=l.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||nu(s)))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===n)break;for(;l.sibling===null;){if(l.return===null||l.return===n)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}function hr(n,l,s,c){l=n.memoizedState,s=s(c,l),s=s==null?l:v({},l,s),n.memoizedState=s,n.lanes===0&&(n.updateQueue.baseState=s)}var mr={enqueueSetState:function(n,l,s){n=n._reactInternals;var c=jt(),d=jn(c);d.payload=l,s!=null&&(d.callback=s),l=ei(n,d,c),l!==null&&(en(l,n,c),Zl(l,n,c))},enqueueReplaceState:function(n,l,s){n=n._reactInternals;var c=jt(),d=jn(c);d.tag=1,d.payload=l,s!=null&&(d.callback=s),l=ei(n,d,c),l!==null&&(en(l,n,c),Zl(l,n,c))},enqueueForceUpdate:function(n,l){n=n._reactInternals;var s=jt(),c=jn(s);c.tag=2,l!=null&&(c.callback=l),l=ei(n,c,s),l!==null&&(en(l,n,s),Zl(l,n,s))}};function Ff(n,l,s,c,d,y,C){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,y,C):l.prototype&&l.prototype.isPureReactComponent?!Hl(s,c)||!Hl(d,y):!0}function Of(n,l,s,c){n=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(s,c),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(s,c),l.state!==n&&mr.enqueueReplaceState(l,l.state,null)}function Ui(n,l){var s=l;if("ref"in l){s={};for(var c in l)c!=="ref"&&(s[c]=l[c])}if(n=n.defaultProps){s===l&&(s=v({},s));for(var d in n)s[d]===void 0&&(s[d]=n[d])}return s}var ys=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function Yf(n){ys(n)}function Jf(n){console.error(n)}function $f(n){ys(n)}function vs(n,l){try{var s=n.onUncaughtError;s(l.value,{componentStack:l.stack})}catch(c){setTimeout(function(){throw c})}}function Xf(n,l,s){try{var c=n.onCaughtError;c(s.value,{componentStack:s.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function gr(n,l,s){return s=jn(s),s.tag=3,s.payload={element:null},s.callback=function(){vs(n,l)},s}function Kf(n){return n=jn(n),n.tag=3,n}function Qf(n,l,s,c){var d=s.type.getDerivedStateFromError;if(typeof d=="function"){var y=c.value;n.payload=function(){return d(y)},n.callback=function(){Xf(l,s,c)}}var C=s.stateNode;C!==null&&typeof C.componentDidCatch=="function"&&(n.callback=function(){Xf(l,s,c),typeof d!="function"&&(ui===null?ui=new Set([this]):ui.add(this));var E=c.stack;this.componentDidCatch(c.value,{componentStack:E!==null?E:""})})}function fy(n,l,s,c,d){if(s.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(l=s.alternate,l!==null&&Jl(l,s,d,!0),s=un.current,s!==null){switch(s.tag){case 13:return Sn===null?qr():s.alternate===null&&Tt===0&&(Tt=3),s.flags&=-257,s.flags|=65536,s.lanes=d,c===Oa?s.flags|=16384:(l=s.updateQueue,l===null?s.updateQueue=new Set([c]):l.add(c),Hr(n,c,d)),!1;case 22:return s.flags|=65536,c===Oa?s.flags|=16384:(l=s.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([c])},s.updateQueue=l):(s=l.retryQueue,s===null?l.retryQueue=new Set([c]):s.add(c)),Hr(n,c,d)),!1}throw Error(o(435,s.tag))}return Hr(n,c,d),qr(),!1}if(Qe)return l=un.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=d,c!==Pa&&(n=Error(o(422),{cause:c}),Yl(on(n,s)))):(c!==Pa&&(l=Error(o(423),{cause:c}),Yl(on(l,s))),n=n.current.alternate,n.flags|=65536,d&=-d,n.lanes|=d,c=on(c,s),d=gr(n.stateNode,c,d),$a(n,d),Tt!==4&&(Tt=2)),!1;var y=Error(o(520),{cause:c});if(y=on(y,s),ho===null?ho=[y]:ho.push(y),Tt!==4&&(Tt=2),l===null)return!0;c=on(c,s),s=l;do{switch(s.tag){case 3:return s.flags|=65536,n=d&-d,s.lanes|=n,n=gr(s.stateNode,c,n),$a(s,n),!1;case 1:if(l=s.type,y=s.stateNode,(s.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(ui===null||!ui.has(y))))return s.flags|=65536,d&=-d,s.lanes|=d,d=Kf(d),Qf(d,n,s,c),$a(s,d),!1}s=s.return}while(s!==null);return!1}var Zf=Error(o(461)),Dt=!1;function It(n,l,s,c){l.child=n===null?Hf(l,null,s,c):fl(l,n.child,s,c)}function Wf(n,l,s,c,d){s=s.render;var y=l.ref;if("ref"in c){var C={};for(var E in c)E!=="ref"&&(C[E]=c[E])}else C=c;return wi(l),c=Wa(n,l,s,C,y,d),E=ja(),n!==null&&!Dt?(er(n,l,d),qn(n,l,d)):(Qe&&E&&ka(l),l.flags|=1,It(n,l,c,d),l.child)}function jf(n,l,s,c,d){if(n===null){var y=s.type;return typeof y=="function"&&!La(y)&&y.defaultProps===void 0&&s.compare===null?(l.tag=15,l.type=y,ed(n,l,y,c,d)):(n=Zo(s.type,null,c,l,l.mode,d),n.ref=l.ref,n.return=l,l.child=n)}if(y=n.child,!Er(n,d)){var C=y.memoizedProps;if(s=s.compare,s=s!==null?s:Hl,s(C,c)&&n.ref===l.ref)return qn(n,l,d)}return l.flags|=1,n=Ln(y,c),n.ref=l.ref,n.return=l,l.child=n}function ed(n,l,s,c,d){if(n!==null){var y=n.memoizedProps;if(Hl(y,c)&&n.ref===l.ref)if(Dt=!1,l.pendingProps=c=y,Er(n,d))(n.flags&131072)!==0&&(Dt=!0);else return l.lanes=n.lanes,qn(n,l,d)}return pr(n,l,s,c,d)}function td(n,l,s){var c=l.pendingProps,d=c.children,y=n!==null?n.memoizedState:null;if(c.mode==="hidden"){if((l.flags&128)!==0){if(c=y!==null?y.baseLanes|s:s,n!==null){for(d=l.child=n.child,y=0;d!==null;)y=y|d.lanes|d.childLanes,d=d.sibling;l.childLanes=y&~c}else l.childLanes=0,l.child=null;return nd(n,l,c,s)}if((s&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},n!==null&&ns(l,y!==null?y.cachePool:null),y!==null?jc(l,y):Ka(),zf(l);else return l.lanes=l.childLanes=536870912,nd(n,l,y!==null?y.baseLanes|s:s,s)}else y!==null?(ns(l,y.cachePool),jc(l,y),ii(),l.memoizedState=null):(n!==null&&ns(l,null),Ka(),ii());return It(n,l,d,s),l.child}function nd(n,l,s,c){var d=Fa();return d=d===null?null:{parent:Nt._currentValue,pool:d},l.memoizedState={baseLanes:s,cachePool:d},n!==null&&ns(l,null),Ka(),zf(l),n!==null&&Jl(n,l,c,!0),null}function Ts(n,l){var s=l.ref;if(s===null)n!==null&&n.ref!==null&&(l.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(o(284));(n===null||n.ref!==s)&&(l.flags|=4194816)}}function pr(n,l,s,c,d){return wi(l),s=Wa(n,l,s,c,void 0,d),c=ja(),n!==null&&!Dt?(er(n,l,d),qn(n,l,d)):(Qe&&c&&ka(l),l.flags|=1,It(n,l,s,d),l.child)}function id(n,l,s,c,d,y){return wi(l),l.updateQueue=null,s=tf(l,c,s,d),ef(n),c=ja(),n!==null&&!Dt?(er(n,l,y),qn(n,l,y)):(Qe&&c&&ka(l),l.flags|=1,It(n,l,s,y),l.child)}function ld(n,l,s,c,d){if(wi(l),l.stateNode===null){var y=tl,C=s.contextType;typeof C=="object"&&C!==null&&(y=Pt(C)),y=new s(c,y),l.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=mr,l.stateNode=y,y._reactInternals=l,y=l.stateNode,y.props=c,y.state=l.memoizedState,y.refs={},Ya(l),C=s.contextType,y.context=typeof C=="object"&&C!==null?Pt(C):tl,y.state=l.memoizedState,C=s.getDerivedStateFromProps,typeof C=="function"&&(hr(l,s,C,c),y.state=l.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(C=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),C!==y.state&&mr.enqueueReplaceState(y,y.state,null),jl(l,c,y,d),Wl(),y.state=l.memoizedState),typeof y.componentDidMount=="function"&&(l.flags|=4194308),c=!0}else if(n===null){y=l.stateNode;var E=l.memoizedProps,b=Ui(s,E);y.props=b;var V=y.context,Q=s.contextType;C=tl,typeof Q=="object"&&Q!==null&&(C=Pt(Q));var ee=s.getDerivedStateFromProps;Q=typeof ee=="function"||typeof y.getSnapshotBeforeUpdate=="function",E=l.pendingProps!==E,Q||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(E||V!==C)&&Of(l,y,c,C),Wn=!1;var H=l.memoizedState;y.state=H,jl(l,c,y,d),Wl(),V=l.memoizedState,E||H!==V||Wn?(typeof ee=="function"&&(hr(l,s,ee,c),V=l.memoizedState),(b=Wn||Ff(l,s,b,c,H,V,C))?(Q||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(l.flags|=4194308)):(typeof y.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=c,l.memoizedState=V),y.props=c,y.state=V,y.context=C,c=b):(typeof y.componentDidMount=="function"&&(l.flags|=4194308),c=!1)}else{y=l.stateNode,Ja(n,l),C=l.memoizedProps,Q=Ui(s,C),y.props=Q,ee=l.pendingProps,H=y.context,V=s.contextType,b=tl,typeof V=="object"&&V!==null&&(b=Pt(V)),E=s.getDerivedStateFromProps,(V=typeof E=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(C!==ee||H!==b)&&Of(l,y,c,b),Wn=!1,H=l.memoizedState,y.state=H,jl(l,c,y,d),Wl();var O=l.memoizedState;C!==ee||H!==O||Wn||n!==null&&n.dependencies!==null&&es(n.dependencies)?(typeof E=="function"&&(hr(l,s,E,c),O=l.memoizedState),(Q=Wn||Ff(l,s,Q,c,H,O,b)||n!==null&&n.dependencies!==null&&es(n.dependencies))?(V||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(c,O,b),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(c,O,b)),typeof y.componentDidUpdate=="function"&&(l.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof y.componentDidUpdate!="function"||C===n.memoizedProps&&H===n.memoizedState||(l.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||C===n.memoizedProps&&H===n.memoizedState||(l.flags|=1024),l.memoizedProps=c,l.memoizedState=O),y.props=c,y.state=O,y.context=b,c=Q):(typeof y.componentDidUpdate!="function"||C===n.memoizedProps&&H===n.memoizedState||(l.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||C===n.memoizedProps&&H===n.memoizedState||(l.flags|=1024),c=!1)}return y=c,Ts(n,l),c=(l.flags&128)!==0,y||c?(y=l.stateNode,s=c&&typeof s.getDerivedStateFromError!="function"?null:y.render(),l.flags|=1,n!==null&&c?(l.child=fl(l,n.child,null,d),l.child=fl(l,null,s,d)):It(n,l,s,d),l.memoizedState=y.state,n=l.child):n=qn(n,l,d),n}function od(n,l,s,c){return Ol(),l.flags|=256,It(n,l,s,c),l.child}var yr={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function vr(n){return{baseLanes:n,cachePool:Yc()}}function Tr(n,l,s){return n=n!==null?n.childLanes&~s:0,l&&(n|=cn),n}function sd(n,l,s){var c=l.pendingProps,d=!1,y=(l.flags&128)!==0,C;if((C=y)||(C=n!==null&&n.memoizedState===null?!1:(Rt.current&2)!==0),C&&(d=!0,l.flags&=-129),C=(l.flags&32)!==0,l.flags&=-33,n===null){if(Qe){if(d?ni(l):ii(),Qe){var E=vt,b;if(b=E){e:{for(b=E,E=Cn;b.nodeType!==8;){if(!E){E=null;break e}if(b=Tn(b.nextSibling),b===null){E=null;break e}}E=b}E!==null?(l.memoizedState={dehydrated:E,treeContext:_i!==null?{id:Un,overflow:In}:null,retryLane:536870912,hydrationErrors:null},b=Kt(18,null,null,0),b.stateNode=E,b.return=l,l.child=b,Gt=l,vt=null,b=!0):b=!1}b||Ri(l)}if(E=l.memoizedState,E!==null&&(E=E.dehydrated,E!==null))return nu(E)?l.lanes=32:l.lanes=536870912,null;Vn(l)}return E=c.children,c=c.fallback,d?(ii(),d=l.mode,E=xs({mode:"hidden",children:E},d),c=Mi(c,d,s,null),E.return=l,c.return=l,E.sibling=c,l.child=E,d=l.child,d.memoizedState=vr(s),d.childLanes=Tr(n,C,s),l.memoizedState=yr,c):(ni(l),xr(l,E))}if(b=n.memoizedState,b!==null&&(E=b.dehydrated,E!==null)){if(y)l.flags&256?(ni(l),l.flags&=-257,l=Cr(n,l,s)):l.memoizedState!==null?(ii(),l.child=n.child,l.flags|=128,l=null):(ii(),d=c.fallback,E=l.mode,c=xs({mode:"visible",children:c.children},E),d=Mi(d,E,s,null),d.flags|=2,c.return=l,d.return=l,c.sibling=d,l.child=c,fl(l,n.child,null,s),c=l.child,c.memoizedState=vr(s),c.childLanes=Tr(n,C,s),l.memoizedState=yr,l=d);else if(ni(l),nu(E)){if(C=E.nextSibling&&E.nextSibling.dataset,C)var V=C.dgst;C=V,c=Error(o(419)),c.stack="",c.digest=C,Yl({value:c,source:null,stack:null}),l=Cr(n,l,s)}else if(Dt||Jl(n,l,s,!1),C=(s&n.childLanes)!==0,Dt||C){if(C=st,C!==null&&(c=s&-s,c=(c&42)!==0?1:Ze(c),c=(c&(C.suspendedLanes|s))!==0?0:c,c!==0&&c!==b.retryLane))throw b.retryLane=c,el(n,c),en(C,n,c),Zf;E.data==="$?"||qr(),l=Cr(n,l,s)}else E.data==="$?"?(l.flags|=192,l.child=n.child,l=null):(n=b.treeContext,vt=Tn(E.nextSibling),Gt=l,Qe=!0,Ni=null,Cn=!1,n!==null&&(an[rn++]=Un,an[rn++]=In,an[rn++]=_i,Un=n.id,In=n.overflow,_i=l),l=xr(l,c.children),l.flags|=4096);return l}return d?(ii(),d=c.fallback,E=l.mode,b=n.child,V=b.sibling,c=Ln(b,{mode:"hidden",children:c.children}),c.subtreeFlags=b.subtreeFlags&65011712,V!==null?d=Ln(V,d):(d=Mi(d,E,s,null),d.flags|=2),d.return=l,c.return=l,c.sibling=d,l.child=c,c=d,d=l.child,E=n.child.memoizedState,E===null?E=vr(s):(b=E.cachePool,b!==null?(V=Nt._currentValue,b=b.parent!==V?{parent:V,pool:V}:b):b=Yc(),E={baseLanes:E.baseLanes|s,cachePool:b}),d.memoizedState=E,d.childLanes=Tr(n,C,s),l.memoizedState=yr,c):(ni(l),s=n.child,n=s.sibling,s=Ln(s,{mode:"visible",children:c.children}),s.return=l,s.sibling=null,n!==null&&(C=l.deletions,C===null?(l.deletions=[n],l.flags|=16):C.push(n)),l.child=s,l.memoizedState=null,s)}function xr(n,l){return l=xs({mode:"visible",children:l},n.mode),l.return=n,n.child=l}function xs(n,l){return n=Kt(22,n,null,l),n.lanes=0,n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},n}function Cr(n,l,s){return fl(l,n.child,null,s),n=xr(l,l.pendingProps.children),n.flags|=2,l.memoizedState=null,n}function ad(n,l,s){n.lanes|=l;var c=n.alternate;c!==null&&(c.lanes|=l),qa(n.return,l,s)}function Sr(n,l,s,c,d){var y=n.memoizedState;y===null?n.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:c,tail:s,tailMode:d}:(y.isBackwards=l,y.rendering=null,y.renderingStartTime=0,y.last=c,y.tail=s,y.tailMode=d)}function rd(n,l,s){var c=l.pendingProps,d=c.revealOrder,y=c.tail;if(It(n,l,c.children,s),c=Rt.current,(c&2)!==0)c=c&1|2,l.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=l.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&ad(n,s,l);else if(n.tag===19)ad(n,s,l);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===l)break e;for(;n.sibling===null;){if(n.return===null||n.return===l)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}switch(re(Rt,c),d){case"forwards":for(s=l.child,d=null;s!==null;)n=s.alternate,n!==null&&ps(n)===null&&(d=s),s=s.sibling;s=d,s===null?(d=l.child,l.child=null):(d=s.sibling,s.sibling=null),Sr(l,!1,d,s,y);break;case"backwards":for(s=null,d=l.child,l.child=null;d!==null;){if(n=d.alternate,n!==null&&ps(n)===null){l.child=d;break}n=d.sibling,d.sibling=s,s=d,d=n}Sr(l,!0,s,null,y);break;case"together":Sr(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function qn(n,l,s){if(n!==null&&(l.dependencies=n.dependencies),ri|=l.lanes,(s&l.childLanes)===0)if(n!==null){if(Jl(n,l,s,!1),(s&l.childLanes)===0)return null}else return null;if(n!==null&&l.child!==n.child)throw Error(o(153));if(l.child!==null){for(n=l.child,s=Ln(n,n.pendingProps),l.child=s,s.return=l;n.sibling!==null;)n=n.sibling,s=s.sibling=Ln(n,n.pendingProps),s.return=l;s.sibling=null}return l.child}function Er(n,l){return(n.lanes&l)!==0?!0:(n=n.dependencies,!!(n!==null&&es(n)))}function dy(n,l,s){switch(l.tag){case 3:Ke(l,l.stateNode.containerInfo),Zn(l,Nt,n.memoizedState.cache),Ol();break;case 27:case 5:zt(l);break;case 4:Ke(l,l.stateNode.containerInfo);break;case 10:Zn(l,l.type,l.memoizedProps.value);break;case 13:var c=l.memoizedState;if(c!==null)return c.dehydrated!==null?(ni(l),l.flags|=128,null):(s&l.child.childLanes)!==0?sd(n,l,s):(ni(l),n=qn(n,l,s),n!==null?n.sibling:null);ni(l);break;case 19:var d=(n.flags&128)!==0;if(c=(s&l.childLanes)!==0,c||(Jl(n,l,s,!1),c=(s&l.childLanes)!==0),d){if(c)return rd(n,l,s);l.flags|=128}if(d=l.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),re(Rt,Rt.current),c)break;return null;case 22:case 23:return l.lanes=0,td(n,l,s);case 24:Zn(l,Nt,n.memoizedState.cache)}return qn(n,l,s)}function ud(n,l,s){if(n!==null)if(n.memoizedProps!==l.pendingProps)Dt=!0;else{if(!Er(n,s)&&(l.flags&128)===0)return Dt=!1,dy(n,l,s);Dt=(n.flags&131072)!==0}else Dt=!1,Qe&&(l.flags&1048576)!==0&&Vc(l,jo,l.index);switch(l.lanes=0,l.tag){case 16:e:{n=l.pendingProps;var c=l.elementType,d=c._init;if(c=d(c._payload),l.type=c,typeof c=="function")La(c)?(n=Ui(c,n),l.tag=1,l=ld(null,l,c,n,s)):(l.tag=0,l=pr(null,l,c,n,s));else{if(c!=null){if(d=c.$$typeof,d===X){l.tag=11,l=Wf(null,l,c,n,s);break e}else if(d===ie){l.tag=14,l=jf(null,l,c,n,s);break e}}throw l=ye(c)||c,Error(o(306,l,""))}}return l;case 0:return pr(n,l,l.type,l.pendingProps,s);case 1:return c=l.type,d=Ui(c,l.pendingProps),ld(n,l,c,d,s);case 3:e:{if(Ke(l,l.stateNode.containerInfo),n===null)throw Error(o(387));c=l.pendingProps;var y=l.memoizedState;d=y.element,Ja(n,l),jl(l,c,null,s);var C=l.memoizedState;if(c=C.cache,Zn(l,Nt,c),c!==y.cache&&Ga(l,[Nt],s,!0),Wl(),c=C.element,y.isDehydrated)if(y={element:c,isDehydrated:!1,cache:C.cache},l.updateQueue.baseState=y,l.memoizedState=y,l.flags&256){l=od(n,l,c,s);break e}else if(c!==d){d=on(Error(o(424)),l),Yl(d),l=od(n,l,c,s);break e}else{switch(n=l.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(vt=Tn(n.firstChild),Gt=l,Qe=!0,Ni=null,Cn=!0,s=Hf(l,null,c,s),l.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling}else{if(Ol(),c===d){l=qn(n,l,s);break e}It(n,l,c,s)}l=l.child}return l;case 26:return Ts(n,l),n===null?(s=hh(l.type,null,l.pendingProps,null))?l.memoizedState=s:Qe||(s=l.type,n=l.pendingProps,c=Is(Te.current).createElement(s),c[ze]=l,c[Pe]=n,Bt(c,s,n),gt(c),l.stateNode=c):l.memoizedState=hh(l.type,n.memoizedProps,l.pendingProps,n.memoizedState),null;case 27:return zt(l),n===null&&Qe&&(c=l.stateNode=ch(l.type,l.pendingProps,Te.current),Gt=l,Cn=!0,d=vt,di(l.type)?(iu=d,vt=Tn(c.firstChild)):vt=d),It(n,l,l.pendingProps.children,s),Ts(n,l),n===null&&(l.flags|=4194304),l.child;case 5:return n===null&&Qe&&((d=c=vt)&&(c=Gy(c,l.type,l.pendingProps,Cn),c!==null?(l.stateNode=c,Gt=l,vt=Tn(c.firstChild),Cn=!1,d=!0):d=!1),d||Ri(l)),zt(l),d=l.type,y=l.pendingProps,C=n!==null?n.memoizedProps:null,c=y.children,jr(d,y)?c=null:C!==null&&jr(d,C)&&(l.flags|=32),l.memoizedState!==null&&(d=Wa(n,l,ly,null,null,s),So._currentValue=d),Ts(n,l),It(n,l,c,s),l.child;case 6:return n===null&&Qe&&((n=s=vt)&&(s=Hy(s,l.pendingProps,Cn),s!==null?(l.stateNode=s,Gt=l,vt=null,n=!0):n=!1),n||Ri(l)),null;case 13:return sd(n,l,s);case 4:return Ke(l,l.stateNode.containerInfo),c=l.pendingProps,n===null?l.child=fl(l,null,c,s):It(n,l,c,s),l.child;case 11:return Wf(n,l,l.type,l.pendingProps,s);case 7:return It(n,l,l.pendingProps,s),l.child;case 8:return It(n,l,l.pendingProps.children,s),l.child;case 12:return It(n,l,l.pendingProps.children,s),l.child;case 10:return c=l.pendingProps,Zn(l,l.type,c.value),It(n,l,c.children,s),l.child;case 9:return d=l.type._context,c=l.pendingProps.children,wi(l),d=Pt(d),c=c(d),l.flags|=1,It(n,l,c,s),l.child;case 14:return jf(n,l,l.type,l.pendingProps,s);case 15:return ed(n,l,l.type,l.pendingProps,s);case 19:return rd(n,l,s);case 31:return c=l.pendingProps,s=l.mode,c={mode:c.mode,children:c.children},n===null?(s=xs(c,s),s.ref=l.ref,l.child=s,s.return=l,l=s):(s=Ln(n.child,c),s.ref=l.ref,l.child=s,s.return=l,l=s),l;case 22:return td(n,l,s);case 24:return wi(l),c=Pt(Nt),n===null?(d=Fa(),d===null&&(d=st,y=Ha(),d.pooledCache=y,y.refCount++,y!==null&&(d.pooledCacheLanes|=s),d=y),l.memoizedState={parent:c,cache:d},Ya(l),Zn(l,Nt,d)):((n.lanes&s)!==0&&(Ja(n,l),jl(l,null,null,s),Wl()),d=n.memoizedState,y=l.memoizedState,d.parent!==c?(d={parent:c,cache:c},l.memoizedState=d,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=d),Zn(l,Nt,c)):(c=y.cache,Zn(l,Nt,c),c!==d.cache&&Ga(l,[Nt],s,!0))),It(n,l,l.pendingProps.children,s),l.child;case 29:throw l.pendingProps}throw Error(o(156,l.tag))}function Gn(n){n.flags|=4}function cd(n,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!vh(l)){if(l=un.current,l!==null&&((Fe&4194048)===Fe?Sn!==null:(Fe&62914560)!==Fe&&(Fe&536870912)===0||l!==Sn))throw Ql=Oa,Jc;n.flags|=8192}}function Cs(n,l){l!==null&&(n.flags|=4),n.flags&16384&&(l=n.tag!==22?ce():536870912,n.lanes|=l,gl|=l)}function so(n,l){if(!Qe)switch(n.tailMode){case"hidden":l=n.tail;for(var s=null;l!==null;)l.alternate!==null&&(s=l),l=l.sibling;s===null?n.tail=null:s.sibling=null;break;case"collapsed":s=n.tail;for(var c=null;s!==null;)s.alternate!==null&&(c=s),s=s.sibling;c===null?l||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function pt(n){var l=n.alternate!==null&&n.alternate.child===n.child,s=0,c=0;if(l)for(var d=n.child;d!==null;)s|=d.lanes|d.childLanes,c|=d.subtreeFlags&65011712,c|=d.flags&65011712,d.return=n,d=d.sibling;else for(d=n.child;d!==null;)s|=d.lanes|d.childLanes,c|=d.subtreeFlags,c|=d.flags,d.return=n,d=d.sibling;return n.subtreeFlags|=c,n.childLanes=s,l}function hy(n,l,s){var c=l.pendingProps;switch(Ba(l),l.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pt(l),null;case 1:return pt(l),null;case 3:return s=l.stateNode,c=null,n!==null&&(c=n.memoizedState.cache),l.memoizedState.cache!==c&&(l.flags|=2048),Bn(Nt),Ht(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(n===null||n.child===null)&&(Fl(l)?Gn(l):n===null||n.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,Hc())),pt(l),null;case 26:return s=l.memoizedState,n===null?(Gn(l),s!==null?(pt(l),cd(l,s)):(pt(l),l.flags&=-16777217)):s?s!==n.memoizedState?(Gn(l),pt(l),cd(l,s)):(pt(l),l.flags&=-16777217):(n.memoizedProps!==c&&Gn(l),pt(l),l.flags&=-16777217),null;case 27:hn(l),s=Te.current;var d=l.type;if(n!==null&&l.stateNode!=null)n.memoizedProps!==c&&Gn(l);else{if(!c){if(l.stateNode===null)throw Error(o(166));return pt(l),null}n=Se.current,Fl(l)?qc(l):(n=ch(d,c,s),l.stateNode=n,Gn(l))}return pt(l),null;case 5:if(hn(l),s=l.type,n!==null&&l.stateNode!=null)n.memoizedProps!==c&&Gn(l);else{if(!c){if(l.stateNode===null)throw Error(o(166));return pt(l),null}if(n=Se.current,Fl(l))qc(l);else{switch(d=Is(Te.current),n){case 1:n=d.createElementNS("http://www.w3.org/2000/svg",s);break;case 2:n=d.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;default:switch(s){case"svg":n=d.createElementNS("http://www.w3.org/2000/svg",s);break;case"math":n=d.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;case"script":n=d.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof c.is=="string"?d.createElement("select",{is:c.is}):d.createElement("select"),c.multiple?n.multiple=!0:c.size&&(n.size=c.size);break;default:n=typeof c.is=="string"?d.createElement(s,{is:c.is}):d.createElement(s)}}n[ze]=l,n[Pe]=c;e:for(d=l.child;d!==null;){if(d.tag===5||d.tag===6)n.appendChild(d.stateNode);else if(d.tag!==4&&d.tag!==27&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break e;for(;d.sibling===null;){if(d.return===null||d.return===l)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}l.stateNode=n;e:switch(Bt(n,s,c),s){case"button":case"input":case"select":case"textarea":n=!!c.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&Gn(l)}}return pt(l),l.flags&=-16777217,null;case 6:if(n&&l.stateNode!=null)n.memoizedProps!==c&&Gn(l);else{if(typeof c!="string"&&l.stateNode===null)throw Error(o(166));if(n=Te.current,Fl(l)){if(n=l.stateNode,s=l.memoizedProps,c=null,d=Gt,d!==null)switch(d.tag){case 27:case 5:c=d.memoizedProps}n[ze]=l,n=!!(n.nodeValue===s||c!==null&&c.suppressHydrationWarning===!0||ih(n.nodeValue,s)),n||Ri(l)}else n=Is(n).createTextNode(c),n[ze]=l,l.stateNode=n}return pt(l),null;case 13:if(c=l.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(d=Fl(l),c!==null&&c.dehydrated!==null){if(n===null){if(!d)throw Error(o(318));if(d=l.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(o(317));d[ze]=l}else Ol(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;pt(l),d=!1}else d=Hc(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=d),d=!0;if(!d)return l.flags&256?(Vn(l),l):(Vn(l),null)}if(Vn(l),(l.flags&128)!==0)return l.lanes=s,l;if(s=c!==null,n=n!==null&&n.memoizedState!==null,s){c=l.child,d=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(d=c.alternate.memoizedState.cachePool.pool);var y=null;c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(y=c.memoizedState.cachePool.pool),y!==d&&(c.flags|=2048)}return s!==n&&s&&(l.child.flags|=8192),Cs(l,l.updateQueue),pt(l),null;case 4:return Ht(),n===null&&Xr(l.stateNode.containerInfo),pt(l),null;case 10:return Bn(l.type),pt(l),null;case 19:if(de(Rt),d=l.memoizedState,d===null)return pt(l),null;if(c=(l.flags&128)!==0,y=d.rendering,y===null)if(c)so(d,!1);else{if(Tt!==0||n!==null&&(n.flags&128)!==0)for(n=l.child;n!==null;){if(y=ps(n),y!==null){for(l.flags|=128,so(d,!1),n=y.updateQueue,l.updateQueue=n,Cs(l,n),l.subtreeFlags=0,n=s,s=l.child;s!==null;)Pc(s,n),s=s.sibling;return re(Rt,Rt.current&1|2),l.child}n=n.sibling}d.tail!==null&&ft()>Ms&&(l.flags|=128,c=!0,so(d,!1),l.lanes=4194304)}else{if(!c)if(n=ps(y),n!==null){if(l.flags|=128,c=!0,n=n.updateQueue,l.updateQueue=n,Cs(l,n),so(d,!0),d.tail===null&&d.tailMode==="hidden"&&!y.alternate&&!Qe)return pt(l),null}else 2*ft()-d.renderingStartTime>Ms&&s!==536870912&&(l.flags|=128,c=!0,so(d,!1),l.lanes=4194304);d.isBackwards?(y.sibling=l.child,l.child=y):(n=d.last,n!==null?n.sibling=y:l.child=y,d.last=y)}return d.tail!==null?(l=d.tail,d.rendering=l,d.tail=l.sibling,d.renderingStartTime=ft(),l.sibling=null,n=Rt.current,re(Rt,c?n&1|2:n&1),l):(pt(l),null);case 22:case 23:return Vn(l),Qa(),c=l.memoizedState!==null,n!==null?n.memoizedState!==null!==c&&(l.flags|=8192):c&&(l.flags|=8192),c?(s&536870912)!==0&&(l.flags&128)===0&&(pt(l),l.subtreeFlags&6&&(l.flags|=8192)):pt(l),s=l.updateQueue,s!==null&&Cs(l,s.retryQueue),s=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(s=n.memoizedState.cachePool.pool),c=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(c=l.memoizedState.cachePool.pool),c!==s&&(l.flags|=2048),n!==null&&de(Di),null;case 24:return s=null,n!==null&&(s=n.memoizedState.cache),l.memoizedState.cache!==s&&(l.flags|=2048),Bn(Nt),pt(l),null;case 25:return null;case 30:return null}throw Error(o(156,l.tag))}function my(n,l){switch(Ba(l),l.tag){case 1:return n=l.flags,n&65536?(l.flags=n&-65537|128,l):null;case 3:return Bn(Nt),Ht(),n=l.flags,(n&65536)!==0&&(n&128)===0?(l.flags=n&-65537|128,l):null;case 26:case 27:case 5:return hn(l),null;case 13:if(Vn(l),n=l.memoizedState,n!==null&&n.dehydrated!==null){if(l.alternate===null)throw Error(o(340));Ol()}return n=l.flags,n&65536?(l.flags=n&-65537|128,l):null;case 19:return de(Rt),null;case 4:return Ht(),null;case 10:return Bn(l.type),null;case 22:case 23:return Vn(l),Qa(),n!==null&&de(Di),n=l.flags,n&65536?(l.flags=n&-65537|128,l):null;case 24:return Bn(Nt),null;case 25:return null;default:return null}}function fd(n,l){switch(Ba(l),l.tag){case 3:Bn(Nt),Ht();break;case 26:case 27:case 5:hn(l);break;case 4:Ht();break;case 13:Vn(l);break;case 19:de(Rt);break;case 10:Bn(l.type);break;case 22:case 23:Vn(l),Qa(),n!==null&&de(Di);break;case 24:Bn(Nt)}}function ao(n,l){try{var s=l.updateQueue,c=s!==null?s.lastEffect:null;if(c!==null){var d=c.next;s=d;do{if((s.tag&n)===n){c=void 0;var y=s.create,C=s.inst;c=y(),C.destroy=c}s=s.next}while(s!==d)}}catch(E){ot(l,l.return,E)}}function li(n,l,s){try{var c=l.updateQueue,d=c!==null?c.lastEffect:null;if(d!==null){var y=d.next;c=y;do{if((c.tag&n)===n){var C=c.inst,E=C.destroy;if(E!==void 0){C.destroy=void 0,d=l;var b=s,V=E;try{V()}catch(Q){ot(d,b,Q)}}}c=c.next}while(c!==y)}}catch(Q){ot(l,l.return,Q)}}function dd(n){var l=n.updateQueue;if(l!==null){var s=n.stateNode;try{Wc(l,s)}catch(c){ot(n,n.return,c)}}}function hd(n,l,s){s.props=Ui(n.type,n.memoizedProps),s.state=n.memoizedState;try{s.componentWillUnmount()}catch(c){ot(n,l,c)}}function ro(n,l){try{var s=n.ref;if(s!==null){switch(n.tag){case 26:case 27:case 5:var c=n.stateNode;break;case 30:c=n.stateNode;break;default:c=n.stateNode}typeof s=="function"?n.refCleanup=s(c):s.current=c}}catch(d){ot(n,l,d)}}function En(n,l){var s=n.ref,c=n.refCleanup;if(s!==null)if(typeof c=="function")try{c()}catch(d){ot(n,l,d)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(d){ot(n,l,d)}else s.current=null}function md(n){var l=n.type,s=n.memoizedProps,c=n.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":s.autoFocus&&c.focus();break e;case"img":s.src?c.src=s.src:s.srcSet&&(c.srcset=s.srcSet)}}catch(d){ot(n,n.return,d)}}function Mr(n,l,s){try{var c=n.stateNode;ky(c,n.type,s,l),c[Pe]=l}catch(d){ot(n,n.return,d)}}function gd(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&di(n.type)||n.tag===4}function _r(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||gd(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&di(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Ar(n,l,s){var c=n.tag;if(c===5||c===6)n=n.stateNode,l?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(n,l):(l=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,l.appendChild(n),s=s._reactRootContainer,s!=null||l.onclick!==null||(l.onclick=Us));else if(c!==4&&(c===27&&di(n.type)&&(s=n.stateNode,l=null),n=n.child,n!==null))for(Ar(n,l,s),n=n.sibling;n!==null;)Ar(n,l,s),n=n.sibling}function Ss(n,l,s){var c=n.tag;if(c===5||c===6)n=n.stateNode,l?s.insertBefore(n,l):s.appendChild(n);else if(c!==4&&(c===27&&di(n.type)&&(s=n.stateNode),n=n.child,n!==null))for(Ss(n,l,s),n=n.sibling;n!==null;)Ss(n,l,s),n=n.sibling}function pd(n){var l=n.stateNode,s=n.memoizedProps;try{for(var c=n.type,d=l.attributes;d.length;)l.removeAttributeNode(d[0]);Bt(l,c,s),l[ze]=n,l[Pe]=s}catch(y){ot(n,n.return,y)}}var Hn=!1,Mt=!1,Nr=!1,yd=typeof WeakSet=="function"?WeakSet:Set,Lt=null;function gy(n,l){if(n=n.containerInfo,Zr=Gs,n=Nc(n),_a(n)){if("selectionStart"in n)var s={start:n.selectionStart,end:n.selectionEnd};else e:{s=(s=n.ownerDocument)&&s.defaultView||window;var c=s.getSelection&&s.getSelection();if(c&&c.rangeCount!==0){s=c.anchorNode;var d=c.anchorOffset,y=c.focusNode;c=c.focusOffset;try{s.nodeType,y.nodeType}catch{s=null;break e}var C=0,E=-1,b=-1,V=0,Q=0,ee=n,H=null;t:for(;;){for(var O;ee!==s||d!==0&&ee.nodeType!==3||(E=C+d),ee!==y||c!==0&&ee.nodeType!==3||(b=C+c),ee.nodeType===3&&(C+=ee.nodeValue.length),(O=ee.firstChild)!==null;)H=ee,ee=O;for(;;){if(ee===n)break t;if(H===s&&++V===d&&(E=C),H===y&&++Q===c&&(b=C),(O=ee.nextSibling)!==null)break;ee=H,H=ee.parentNode}ee=O}s=E===-1||b===-1?null:{start:E,end:b}}else s=null}s=s||{start:0,end:0}}else s=null;for(Wr={focusedElem:n,selectionRange:s},Gs=!1,Lt=l;Lt!==null;)if(l=Lt,n=l.child,(l.subtreeFlags&1024)!==0&&n!==null)n.return=l,Lt=n;else for(;Lt!==null;){switch(l=Lt,y=l.alternate,n=l.flags,l.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&y!==null){n=void 0,s=l,d=y.memoizedProps,y=y.memoizedState,c=s.stateNode;try{var Le=Ui(s.type,d,s.elementType===s.type);n=c.getSnapshotBeforeUpdate(Le,y),c.__reactInternalSnapshotBeforeUpdate=n}catch(Ne){ot(s,s.return,Ne)}}break;case 3:if((n&1024)!==0){if(n=l.stateNode.containerInfo,s=n.nodeType,s===9)tu(n);else if(s===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":tu(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(o(163))}if(n=l.sibling,n!==null){n.return=l.return,Lt=n;break}Lt=l.return}}function vd(n,l,s){var c=s.flags;switch(s.tag){case 0:case 11:case 15:oi(n,s),c&4&&ao(5,s);break;case 1:if(oi(n,s),c&4)if(n=s.stateNode,l===null)try{n.componentDidMount()}catch(C){ot(s,s.return,C)}else{var d=Ui(s.type,l.memoizedProps);l=l.memoizedState;try{n.componentDidUpdate(d,l,n.__reactInternalSnapshotBeforeUpdate)}catch(C){ot(s,s.return,C)}}c&64&&dd(s),c&512&&ro(s,s.return);break;case 3:if(oi(n,s),c&64&&(n=s.updateQueue,n!==null)){if(l=null,s.child!==null)switch(s.child.tag){case 27:case 5:l=s.child.stateNode;break;case 1:l=s.child.stateNode}try{Wc(n,l)}catch(C){ot(s,s.return,C)}}break;case 27:l===null&&c&4&&pd(s);case 26:case 5:oi(n,s),l===null&&c&4&&md(s),c&512&&ro(s,s.return);break;case 12:oi(n,s);break;case 13:oi(n,s),c&4&&Cd(n,s),c&64&&(n=s.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(s=My.bind(null,s),zy(n,s))));break;case 22:if(c=s.memoizedState!==null||Hn,!c){l=l!==null&&l.memoizedState!==null||Mt,d=Hn;var y=Mt;Hn=c,(Mt=l)&&!y?si(n,s,(s.subtreeFlags&8772)!==0):oi(n,s),Hn=d,Mt=y}break;case 30:break;default:oi(n,s)}}function Td(n){var l=n.alternate;l!==null&&(n.alternate=null,Td(l)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(l=n.stateNode,l!==null&&De(l)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var ht=null,Yt=!1;function zn(n,l,s){for(s=s.child;s!==null;)xd(n,l,s),s=s.sibling}function xd(n,l,s){if(bt&&typeof bt.onCommitFiberUnmount=="function")try{bt.onCommitFiberUnmount(bn,s)}catch{}switch(s.tag){case 26:Mt||En(s,l),zn(n,l,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:Mt||En(s,l);var c=ht,d=Yt;di(s.type)&&(ht=s.stateNode,Yt=!1),zn(n,l,s),vo(s.stateNode),ht=c,Yt=d;break;case 5:Mt||En(s,l);case 6:if(c=ht,d=Yt,ht=null,zn(n,l,s),ht=c,Yt=d,ht!==null)if(Yt)try{(ht.nodeType===9?ht.body:ht.nodeName==="HTML"?ht.ownerDocument.body:ht).removeChild(s.stateNode)}catch(y){ot(s,l,y)}else try{ht.removeChild(s.stateNode)}catch(y){ot(s,l,y)}break;case 18:ht!==null&&(Yt?(n=ht,rh(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,s.stateNode),Ao(n)):rh(ht,s.stateNode));break;case 4:c=ht,d=Yt,ht=s.stateNode.containerInfo,Yt=!0,zn(n,l,s),ht=c,Yt=d;break;case 0:case 11:case 14:case 15:Mt||li(2,s,l),Mt||li(4,s,l),zn(n,l,s);break;case 1:Mt||(En(s,l),c=s.stateNode,typeof c.componentWillUnmount=="function"&&hd(s,l,c)),zn(n,l,s);break;case 21:zn(n,l,s);break;case 22:Mt=(c=Mt)||s.memoizedState!==null,zn(n,l,s),Mt=c;break;default:zn(n,l,s)}}function Cd(n,l){if(l.memoizedState===null&&(n=l.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Ao(n)}catch(s){ot(l,l.return,s)}}function py(n){switch(n.tag){case 13:case 19:var l=n.stateNode;return l===null&&(l=n.stateNode=new yd),l;case 22:return n=n.stateNode,l=n._retryCache,l===null&&(l=n._retryCache=new yd),l;default:throw Error(o(435,n.tag))}}function Rr(n,l){var s=py(n);l.forEach(function(c){var d=_y.bind(null,n,c);s.has(c)||(s.add(c),c.then(d,d))})}function Qt(n,l){var s=l.deletions;if(s!==null)for(var c=0;c<s.length;c++){var d=s[c],y=n,C=l,E=C;e:for(;E!==null;){switch(E.tag){case 27:if(di(E.type)){ht=E.stateNode,Yt=!1;break e}break;case 5:ht=E.stateNode,Yt=!1;break e;case 3:case 4:ht=E.stateNode.containerInfo,Yt=!0;break e}E=E.return}if(ht===null)throw Error(o(160));xd(y,C,d),ht=null,Yt=!1,y=d.alternate,y!==null&&(y.return=null),d.return=null}if(l.subtreeFlags&13878)for(l=l.child;l!==null;)Sd(l,n),l=l.sibling}var vn=null;function Sd(n,l){var s=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Qt(l,n),Zt(n),c&4&&(li(3,n,n.return),ao(3,n),li(5,n,n.return));break;case 1:Qt(l,n),Zt(n),c&512&&(Mt||s===null||En(s,s.return)),c&64&&Hn&&(n=n.updateQueue,n!==null&&(c=n.callbacks,c!==null&&(s=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=s===null?c:s.concat(c))));break;case 26:var d=vn;if(Qt(l,n),Zt(n),c&512&&(Mt||s===null||En(s,s.return)),c&4){var y=s!==null?s.memoizedState:null;if(c=n.memoizedState,s===null)if(c===null)if(n.stateNode===null){e:{c=n.type,s=n.memoizedProps,d=d.ownerDocument||d;t:switch(c){case"title":y=d.getElementsByTagName("title")[0],(!y||y[ve]||y[ze]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=d.createElement(c),d.head.insertBefore(y,d.querySelector("head > title"))),Bt(y,c,s),y[ze]=n,gt(y),c=y;break e;case"link":var C=ph("link","href",d).get(c+(s.href||""));if(C){for(var E=0;E<C.length;E++)if(y=C[E],y.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&y.getAttribute("rel")===(s.rel==null?null:s.rel)&&y.getAttribute("title")===(s.title==null?null:s.title)&&y.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){C.splice(E,1);break t}}y=d.createElement(c),Bt(y,c,s),d.head.appendChild(y);break;case"meta":if(C=ph("meta","content",d).get(c+(s.content||""))){for(E=0;E<C.length;E++)if(y=C[E],y.getAttribute("content")===(s.content==null?null:""+s.content)&&y.getAttribute("name")===(s.name==null?null:s.name)&&y.getAttribute("property")===(s.property==null?null:s.property)&&y.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&y.getAttribute("charset")===(s.charSet==null?null:s.charSet)){C.splice(E,1);break t}}y=d.createElement(c),Bt(y,c,s),d.head.appendChild(y);break;default:throw Error(o(468,c))}y[ze]=n,gt(y),c=y}n.stateNode=c}else yh(d,n.type,n.stateNode);else n.stateNode=gh(d,c,n.memoizedProps);else y!==c?(y===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):y.count--,c===null?yh(d,n.type,n.stateNode):gh(d,c,n.memoizedProps)):c===null&&n.stateNode!==null&&Mr(n,n.memoizedProps,s.memoizedProps)}break;case 27:Qt(l,n),Zt(n),c&512&&(Mt||s===null||En(s,s.return)),s!==null&&c&4&&Mr(n,n.memoizedProps,s.memoizedProps);break;case 5:if(Qt(l,n),Zt(n),c&512&&(Mt||s===null||En(s,s.return)),n.flags&32){d=n.stateNode;try{$i(d,"")}catch(O){ot(n,n.return,O)}}c&4&&n.stateNode!=null&&(d=n.memoizedProps,Mr(n,d,s!==null?s.memoizedProps:d)),c&1024&&(Nr=!0);break;case 6:if(Qt(l,n),Zt(n),c&4){if(n.stateNode===null)throw Error(o(162));c=n.memoizedProps,s=n.stateNode;try{s.nodeValue=c}catch(O){ot(n,n.return,O)}}break;case 3:if(Ps=null,d=vn,vn=ks(l.containerInfo),Qt(l,n),vn=d,Zt(n),c&4&&s!==null&&s.memoizedState.isDehydrated)try{Ao(l.containerInfo)}catch(O){ot(n,n.return,O)}Nr&&(Nr=!1,Ed(n));break;case 4:c=vn,vn=ks(n.stateNode.containerInfo),Qt(l,n),Zt(n),vn=c;break;case 12:Qt(l,n),Zt(n);break;case 13:Qt(l,n),Zt(n),n.child.flags&8192&&n.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(Ir=ft()),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,Rr(n,c)));break;case 22:d=n.memoizedState!==null;var b=s!==null&&s.memoizedState!==null,V=Hn,Q=Mt;if(Hn=V||d,Mt=Q||b,Qt(l,n),Mt=Q,Hn=V,Zt(n),c&8192)e:for(l=n.stateNode,l._visibility=d?l._visibility&-2:l._visibility|1,d&&(s===null||b||Hn||Mt||Ii(n)),s=null,l=n;;){if(l.tag===5||l.tag===26){if(s===null){b=s=l;try{if(y=b.stateNode,d)C=y.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none";else{E=b.stateNode;var ee=b.memoizedProps.style,H=ee!=null&&ee.hasOwnProperty("display")?ee.display:null;E.style.display=H==null||typeof H=="boolean"?"":(""+H).trim()}}catch(O){ot(b,b.return,O)}}}else if(l.tag===6){if(s===null){b=l;try{b.stateNode.nodeValue=d?"":b.memoizedProps}catch(O){ot(b,b.return,O)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===n)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===n)break e;for(;l.sibling===null;){if(l.return===null||l.return===n)break e;s===l&&(s=null),l=l.return}s===l&&(s=null),l.sibling.return=l.return,l=l.sibling}c&4&&(c=n.updateQueue,c!==null&&(s=c.retryQueue,s!==null&&(c.retryQueue=null,Rr(n,s))));break;case 19:Qt(l,n),Zt(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,Rr(n,c)));break;case 30:break;case 21:break;default:Qt(l,n),Zt(n)}}function Zt(n){var l=n.flags;if(l&2){try{for(var s,c=n.return;c!==null;){if(gd(c)){s=c;break}c=c.return}if(s==null)throw Error(o(160));switch(s.tag){case 27:var d=s.stateNode,y=_r(n);Ss(n,y,d);break;case 5:var C=s.stateNode;s.flags&32&&($i(C,""),s.flags&=-33);var E=_r(n);Ss(n,E,C);break;case 3:case 4:var b=s.stateNode.containerInfo,V=_r(n);Ar(n,V,b);break;default:throw Error(o(161))}}catch(Q){ot(n,n.return,Q)}n.flags&=-3}l&4096&&(n.flags&=-4097)}function Ed(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var l=n;Ed(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),n=n.sibling}}function oi(n,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)vd(n,l.alternate,l),l=l.sibling}function Ii(n){for(n=n.child;n!==null;){var l=n;switch(l.tag){case 0:case 11:case 14:case 15:li(4,l,l.return),Ii(l);break;case 1:En(l,l.return);var s=l.stateNode;typeof s.componentWillUnmount=="function"&&hd(l,l.return,s),Ii(l);break;case 27:vo(l.stateNode);case 26:case 5:En(l,l.return),Ii(l);break;case 22:l.memoizedState===null&&Ii(l);break;case 30:Ii(l);break;default:Ii(l)}n=n.sibling}}function si(n,l,s){for(s=s&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var c=l.alternate,d=n,y=l,C=y.flags;switch(y.tag){case 0:case 11:case 15:si(d,y,s),ao(4,y);break;case 1:if(si(d,y,s),c=y,d=c.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(V){ot(c,c.return,V)}if(c=y,d=c.updateQueue,d!==null){var E=c.stateNode;try{var b=d.shared.hiddenCallbacks;if(b!==null)for(d.shared.hiddenCallbacks=null,d=0;d<b.length;d++)Zc(b[d],E)}catch(V){ot(c,c.return,V)}}s&&C&64&&dd(y),ro(y,y.return);break;case 27:pd(y);case 26:case 5:si(d,y,s),s&&c===null&&C&4&&md(y),ro(y,y.return);break;case 12:si(d,y,s);break;case 13:si(d,y,s),s&&C&4&&Cd(d,y);break;case 22:y.memoizedState===null&&si(d,y,s),ro(y,y.return);break;case 30:break;default:si(d,y,s)}l=l.sibling}}function br(n,l){var s=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(s=n.memoizedState.cachePool.pool),n=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(n=l.memoizedState.cachePool.pool),n!==s&&(n!=null&&n.refCount++,s!=null&&$l(s))}function wr(n,l){n=null,l.alternate!==null&&(n=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==n&&(l.refCount++,n!=null&&$l(n))}function Mn(n,l,s,c){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)Md(n,l,s,c),l=l.sibling}function Md(n,l,s,c){var d=l.flags;switch(l.tag){case 0:case 11:case 15:Mn(n,l,s,c),d&2048&&ao(9,l);break;case 1:Mn(n,l,s,c);break;case 3:Mn(n,l,s,c),d&2048&&(n=null,l.alternate!==null&&(n=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==n&&(l.refCount++,n!=null&&$l(n)));break;case 12:if(d&2048){Mn(n,l,s,c),n=l.stateNode;try{var y=l.memoizedProps,C=y.id,E=y.onPostCommit;typeof E=="function"&&E(C,l.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(b){ot(l,l.return,b)}}else Mn(n,l,s,c);break;case 13:Mn(n,l,s,c);break;case 23:break;case 22:y=l.stateNode,C=l.alternate,l.memoizedState!==null?y._visibility&2?Mn(n,l,s,c):uo(n,l):y._visibility&2?Mn(n,l,s,c):(y._visibility|=2,dl(n,l,s,c,(l.subtreeFlags&10256)!==0)),d&2048&&br(C,l);break;case 24:Mn(n,l,s,c),d&2048&&wr(l.alternate,l);break;default:Mn(n,l,s,c)}}function dl(n,l,s,c,d){for(d=d&&(l.subtreeFlags&10256)!==0,l=l.child;l!==null;){var y=n,C=l,E=s,b=c,V=C.flags;switch(C.tag){case 0:case 11:case 15:dl(y,C,E,b,d),ao(8,C);break;case 23:break;case 22:var Q=C.stateNode;C.memoizedState!==null?Q._visibility&2?dl(y,C,E,b,d):uo(y,C):(Q._visibility|=2,dl(y,C,E,b,d)),d&&V&2048&&br(C.alternate,C);break;case 24:dl(y,C,E,b,d),d&&V&2048&&wr(C.alternate,C);break;default:dl(y,C,E,b,d)}l=l.sibling}}function uo(n,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var s=n,c=l,d=c.flags;switch(c.tag){case 22:uo(s,c),d&2048&&br(c.alternate,c);break;case 24:uo(s,c),d&2048&&wr(c.alternate,c);break;default:uo(s,c)}l=l.sibling}}var co=8192;function hl(n){if(n.subtreeFlags&co)for(n=n.child;n!==null;)_d(n),n=n.sibling}function _d(n){switch(n.tag){case 26:hl(n),n.flags&co&&n.memoizedState!==null&&t0(vn,n.memoizedState,n.memoizedProps);break;case 5:hl(n);break;case 3:case 4:var l=vn;vn=ks(n.stateNode.containerInfo),hl(n),vn=l;break;case 22:n.memoizedState===null&&(l=n.alternate,l!==null&&l.memoizedState!==null?(l=co,co=16777216,hl(n),co=l):hl(n));break;default:hl(n)}}function Ad(n){var l=n.alternate;if(l!==null&&(n=l.child,n!==null)){l.child=null;do l=n.sibling,n.sibling=null,n=l;while(n!==null)}}function fo(n){var l=n.deletions;if((n.flags&16)!==0){if(l!==null)for(var s=0;s<l.length;s++){var c=l[s];Lt=c,Rd(c,n)}Ad(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Nd(n),n=n.sibling}function Nd(n){switch(n.tag){case 0:case 11:case 15:fo(n),n.flags&2048&&li(9,n,n.return);break;case 3:fo(n);break;case 12:fo(n);break;case 22:var l=n.stateNode;n.memoizedState!==null&&l._visibility&2&&(n.return===null||n.return.tag!==13)?(l._visibility&=-3,Es(n)):fo(n);break;default:fo(n)}}function Es(n){var l=n.deletions;if((n.flags&16)!==0){if(l!==null)for(var s=0;s<l.length;s++){var c=l[s];Lt=c,Rd(c,n)}Ad(n)}for(n=n.child;n!==null;){switch(l=n,l.tag){case 0:case 11:case 15:li(8,l,l.return),Es(l);break;case 22:s=l.stateNode,s._visibility&2&&(s._visibility&=-3,Es(l));break;default:Es(l)}n=n.sibling}}function Rd(n,l){for(;Lt!==null;){var s=Lt;switch(s.tag){case 0:case 11:case 15:li(8,s,l);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var c=s.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:$l(s.memoizedState.cache)}if(c=s.child,c!==null)c.return=s,Lt=c;else e:for(s=n;Lt!==null;){c=Lt;var d=c.sibling,y=c.return;if(Td(c),c===s){Lt=null;break e}if(d!==null){d.return=y,Lt=d;break e}Lt=y}}}var yy={getCacheForType:function(n){var l=Pt(Nt),s=l.data.get(n);return s===void 0&&(s=n(),l.data.set(n,s)),s}},vy=typeof WeakMap=="function"?WeakMap:Map,We=0,st=null,Ge=null,Fe=0,je=0,Wt=null,ai=!1,ml=!1,Dr=!1,Fn=0,Tt=0,ri=0,ki=0,Lr=0,cn=0,gl=0,ho=null,Jt=null,Ur=!1,Ir=0,Ms=1/0,_s=null,ui=null,kt=0,ci=null,pl=null,yl=0,kr=0,Br=null,bd=null,mo=0,Pr=null;function jt(){if((We&2)!==0&&Fe!==0)return Fe&-Fe;if(K.T!==null){var n=ll;return n!==0?n:Or()}return ut()}function wd(){cn===0&&(cn=(Fe&536870912)===0||Qe?j():536870912);var n=un.current;return n!==null&&(n.flags|=32),cn}function en(n,l,s){(n===st&&(je===2||je===9)||n.cancelPendingCommit!==null)&&(vl(n,0),fi(n,Fe,cn,!1)),we(n,s),((We&2)===0||n!==st)&&(n===st&&((We&2)===0&&(ki|=s),Tt===4&&fi(n,Fe,cn,!1)),_n(n))}function Dd(n,l,s){if((We&6)!==0)throw Error(o(327));var c=!s&&(l&124)===0&&(l&n.expiredLanes)===0||le(n,l),d=c?Cy(n,l):Gr(n,l,!0),y=c;do{if(d===0){ml&&!c&&fi(n,l,0,!1);break}else{if(s=n.current.alternate,y&&!Ty(s)){d=Gr(n,l,!1),y=!1;continue}if(d===2){if(y=l,n.errorRecoveryDisabledLanes&y)var C=0;else C=n.pendingLanes&-536870913,C=C!==0?C:C&536870912?536870912:0;if(C!==0){l=C;e:{var E=n;d=ho;var b=E.current.memoizedState.isDehydrated;if(b&&(vl(E,C).flags|=256),C=Gr(E,C,!1),C!==2){if(Dr&&!b){E.errorRecoveryDisabledLanes|=y,ki|=y,d=4;break e}y=Jt,Jt=d,y!==null&&(Jt===null?Jt=y:Jt.push.apply(Jt,y))}d=C}if(y=!1,d!==2)continue}}if(d===1){vl(n,0),fi(n,l,0,!0);break}e:{switch(c=n,y=d,y){case 0:case 1:throw Error(o(345));case 4:if((l&4194048)!==l)break;case 6:fi(c,l,cn,!ai);break e;case 2:Jt=null;break;case 3:case 5:break;default:throw Error(o(329))}if((l&62914560)===l&&(d=Ir+300-ft(),10<d)){if(fi(c,l,cn,!ai),J(c,0,!0)!==0)break e;c.timeoutHandle=sh(Ld.bind(null,c,s,Jt,_s,Ur,l,cn,ki,gl,ai,y,2,-0,0),d);break e}Ld(c,s,Jt,_s,Ur,l,cn,ki,gl,ai,y,0,-0,0)}}break}while(!0);_n(n)}function Ld(n,l,s,c,d,y,C,E,b,V,Q,ee,H,O){if(n.timeoutHandle=-1,ee=l.subtreeFlags,(ee&8192||(ee&16785408)===16785408)&&(Co={stylesheets:null,count:0,unsuspend:e0},_d(l),ee=n0(),ee!==null)){n.cancelPendingCommit=ee(qd.bind(null,n,l,y,s,c,d,C,E,b,Q,1,H,O)),fi(n,y,C,!V);return}qd(n,l,y,s,c,d,C,E,b)}function Ty(n){for(var l=n;;){var s=l.tag;if((s===0||s===11||s===15)&&l.flags&16384&&(s=l.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var c=0;c<s.length;c++){var d=s[c],y=d.getSnapshot;d=d.value;try{if(!Xt(y(),d))return!1}catch{return!1}}if(s=l.child,l.subtreeFlags&16384&&s!==null)s.return=l,l=s;else{if(l===n)break;for(;l.sibling===null;){if(l.return===null||l.return===n)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function fi(n,l,s,c){l&=~Lr,l&=~ki,n.suspendedLanes|=l,n.pingedLanes&=~l,c&&(n.warmLanes|=l),c=n.expirationTimes;for(var d=l;0<d;){var y=31-wt(d),C=1<<y;c[y]=-1,d&=~C}s!==0&&Ie(n,s,l)}function As(){return(We&6)===0?(go(0),!1):!0}function Vr(){if(Ge!==null){if(je===0)var n=Ge.return;else n=Ge,kn=bi=null,tr(n),cl=null,lo=0,n=Ge;for(;n!==null;)fd(n.alternate,n),n=n.return;Ge=null}}function vl(n,l){var s=n.timeoutHandle;s!==-1&&(n.timeoutHandle=-1,Py(s)),s=n.cancelPendingCommit,s!==null&&(n.cancelPendingCommit=null,s()),Vr(),st=n,Ge=s=Ln(n.current,null),Fe=l,je=0,Wt=null,ai=!1,ml=le(n,l),Dr=!1,gl=cn=Lr=ki=ri=Tt=0,Jt=ho=null,Ur=!1,(l&8)!==0&&(l|=l&32);var c=n.entangledLanes;if(c!==0)for(n=n.entanglements,c&=l;0<c;){var d=31-wt(c),y=1<<d;l|=n[d],c&=~y}return Fn=l,Xo(),s}function Ud(n,l){Be=null,K.H=hs,l===Kl||l===is?(l=Kc(),je=3):l===Jc?(l=Kc(),je=4):je=l===Zf?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,Wt=l,Ge===null&&(Tt=1,vs(n,on(l,n.current)))}function Id(){var n=K.H;return K.H=hs,n===null?hs:n}function kd(){var n=K.A;return K.A=yy,n}function qr(){Tt=4,ai||(Fe&4194048)!==Fe&&un.current!==null||(ml=!0),(ri&134217727)===0&&(ki&134217727)===0||st===null||fi(st,Fe,cn,!1)}function Gr(n,l,s){var c=We;We|=2;var d=Id(),y=kd();(st!==n||Fe!==l)&&(_s=null,vl(n,l)),l=!1;var C=Tt;e:do try{if(je!==0&&Ge!==null){var E=Ge,b=Wt;switch(je){case 8:Vr(),C=6;break e;case 3:case 2:case 9:case 6:un.current===null&&(l=!0);var V=je;if(je=0,Wt=null,Tl(n,E,b,V),s&&ml){C=0;break e}break;default:V=je,je=0,Wt=null,Tl(n,E,b,V)}}xy(),C=Tt;break}catch(Q){Ud(n,Q)}while(!0);return l&&n.shellSuspendCounter++,kn=bi=null,We=c,K.H=d,K.A=y,Ge===null&&(st=null,Fe=0,Xo()),C}function xy(){for(;Ge!==null;)Bd(Ge)}function Cy(n,l){var s=We;We|=2;var c=Id(),d=kd();st!==n||Fe!==l?(_s=null,Ms=ft()+500,vl(n,l)):ml=le(n,l);e:do try{if(je!==0&&Ge!==null){l=Ge;var y=Wt;t:switch(je){case 1:je=0,Wt=null,Tl(n,l,y,1);break;case 2:case 9:if($c(y)){je=0,Wt=null,Pd(l);break}l=function(){je!==2&&je!==9||st!==n||(je=7),_n(n)},y.then(l,l);break e;case 3:je=7;break e;case 4:je=5;break e;case 7:$c(y)?(je=0,Wt=null,Pd(l)):(je=0,Wt=null,Tl(n,l,y,7));break;case 5:var C=null;switch(Ge.tag){case 26:C=Ge.memoizedState;case 5:case 27:var E=Ge;if(!C||vh(C)){je=0,Wt=null;var b=E.sibling;if(b!==null)Ge=b;else{var V=E.return;V!==null?(Ge=V,Ns(V)):Ge=null}break t}}je=0,Wt=null,Tl(n,l,y,5);break;case 6:je=0,Wt=null,Tl(n,l,y,6);break;case 8:Vr(),Tt=6;break e;default:throw Error(o(462))}}Sy();break}catch(Q){Ud(n,Q)}while(!0);return kn=bi=null,K.H=c,K.A=d,We=s,Ge!==null?0:(st=null,Fe=0,Xo(),Tt)}function Sy(){for(;Ge!==null&&!Nn();)Bd(Ge)}function Bd(n){var l=ud(n.alternate,n,Fn);n.memoizedProps=n.pendingProps,l===null?Ns(n):Ge=l}function Pd(n){var l=n,s=l.alternate;switch(l.tag){case 15:case 0:l=id(s,l,l.pendingProps,l.type,void 0,Fe);break;case 11:l=id(s,l,l.pendingProps,l.type.render,l.ref,Fe);break;case 5:tr(l);default:fd(s,l),l=Ge=Pc(l,Fn),l=ud(s,l,Fn)}n.memoizedProps=n.pendingProps,l===null?Ns(n):Ge=l}function Tl(n,l,s,c){kn=bi=null,tr(l),cl=null,lo=0;var d=l.return;try{if(fy(n,d,l,s,Fe)){Tt=1,vs(n,on(s,n.current)),Ge=null;return}}catch(y){if(d!==null)throw Ge=d,y;Tt=1,vs(n,on(s,n.current)),Ge=null;return}l.flags&32768?(Qe||c===1?n=!0:ml||(Fe&536870912)!==0?n=!1:(ai=n=!0,(c===2||c===9||c===3||c===6)&&(c=un.current,c!==null&&c.tag===13&&(c.flags|=16384))),Vd(l,n)):Ns(l)}function Ns(n){var l=n;do{if((l.flags&32768)!==0){Vd(l,ai);return}n=l.return;var s=hy(l.alternate,l,Fn);if(s!==null){Ge=s;return}if(l=l.sibling,l!==null){Ge=l;return}Ge=l=n}while(l!==null);Tt===0&&(Tt=5)}function Vd(n,l){do{var s=my(n.alternate,n);if(s!==null){s.flags&=32767,Ge=s;return}if(s=n.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!l&&(n=n.sibling,n!==null)){Ge=n;return}Ge=n=s}while(n!==null);Tt=6,Ge=null}function qd(n,l,s,c,d,y,C,E,b){n.cancelPendingCommit=null;do Rs();while(kt!==0);if((We&6)!==0)throw Error(o(327));if(l!==null){if(l===n.current)throw Error(o(177));if(y=l.lanes|l.childLanes,y|=wa,Je(n,s,y,C,E,b),n===st&&(Ge=st=null,Fe=0),pl=l,ci=n,yl=s,kr=y,Br=d,bd=c,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,Ay($t,function(){return Od(),null})):(n.callbackNode=null,n.callbackPriority=0),c=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||c){c=K.T,K.T=null,d=ae.p,ae.p=2,C=We,We|=4;try{gy(n,l,s)}finally{We=C,ae.p=d,K.T=c}}kt=1,Gd(),Hd(),zd()}}function Gd(){if(kt===1){kt=0;var n=ci,l=pl,s=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||s){s=K.T,K.T=null;var c=ae.p;ae.p=2;var d=We;We|=4;try{Sd(l,n);var y=Wr,C=Nc(n.containerInfo),E=y.focusedElem,b=y.selectionRange;if(C!==E&&E&&E.ownerDocument&&Ac(E.ownerDocument.documentElement,E)){if(b!==null&&_a(E)){var V=b.start,Q=b.end;if(Q===void 0&&(Q=V),"selectionStart"in E)E.selectionStart=V,E.selectionEnd=Math.min(Q,E.value.length);else{var ee=E.ownerDocument||document,H=ee&&ee.defaultView||window;if(H.getSelection){var O=H.getSelection(),Le=E.textContent.length,Ne=Math.min(b.start,Le),it=b.end===void 0?Ne:Math.min(b.end,Le);!O.extend&&Ne>it&&(C=it,it=Ne,Ne=C);var I=_c(E,Ne),U=_c(E,it);if(I&&U&&(O.rangeCount!==1||O.anchorNode!==I.node||O.anchorOffset!==I.offset||O.focusNode!==U.node||O.focusOffset!==U.offset)){var B=ee.createRange();B.setStart(I.node,I.offset),O.removeAllRanges(),Ne>it?(O.addRange(B),O.extend(U.node,U.offset)):(B.setEnd(U.node,U.offset),O.addRange(B))}}}}for(ee=[],O=E;O=O.parentNode;)O.nodeType===1&&ee.push({element:O,left:O.scrollLeft,top:O.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<ee.length;E++){var Z=ee[E];Z.element.scrollLeft=Z.left,Z.element.scrollTop=Z.top}}Gs=!!Zr,Wr=Zr=null}finally{We=d,ae.p=c,K.T=s}}n.current=l,kt=2}}function Hd(){if(kt===2){kt=0;var n=ci,l=pl,s=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||s){s=K.T,K.T=null;var c=ae.p;ae.p=2;var d=We;We|=4;try{vd(n,l.alternate,l)}finally{We=d,ae.p=c,K.T=s}}kt=3}}function zd(){if(kt===4||kt===3){kt=0,Rn();var n=ci,l=pl,s=yl,c=bd;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?kt=5:(kt=0,pl=ci=null,Fd(n,n.pendingLanes));var d=n.pendingLanes;if(d===0&&(ui=null),yt(s),l=l.stateNode,bt&&typeof bt.onCommitFiberRoot=="function")try{bt.onCommitFiberRoot(bn,l,void 0,(l.current.flags&128)===128)}catch{}if(c!==null){l=K.T,d=ae.p,ae.p=2,K.T=null;try{for(var y=n.onRecoverableError,C=0;C<c.length;C++){var E=c[C];y(E.value,{componentStack:E.stack})}}finally{K.T=l,ae.p=d}}(yl&3)!==0&&Rs(),_n(n),d=n.pendingLanes,(s&4194090)!==0&&(d&42)!==0?n===Pr?mo++:(mo=0,Pr=n):mo=0,go(0)}}function Fd(n,l){(n.pooledCacheLanes&=l)===0&&(l=n.pooledCache,l!=null&&(n.pooledCache=null,$l(l)))}function Rs(n){return Gd(),Hd(),zd(),Od()}function Od(){if(kt!==5)return!1;var n=ci,l=kr;kr=0;var s=yt(yl),c=K.T,d=ae.p;try{ae.p=32>s?32:s,K.T=null,s=Br,Br=null;var y=ci,C=yl;if(kt=0,pl=ci=null,yl=0,(We&6)!==0)throw Error(o(331));var E=We;if(We|=4,Nd(y.current),Md(y,y.current,C,s),We=E,go(0,!1),bt&&typeof bt.onPostCommitFiberRoot=="function")try{bt.onPostCommitFiberRoot(bn,y)}catch{}return!0}finally{ae.p=d,K.T=c,Fd(n,l)}}function Yd(n,l,s){l=on(s,l),l=gr(n.stateNode,l,2),n=ei(n,l,2),n!==null&&(we(n,2),_n(n))}function ot(n,l,s){if(n.tag===3)Yd(n,n,s);else for(;l!==null;){if(l.tag===3){Yd(l,n,s);break}else if(l.tag===1){var c=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(ui===null||!ui.has(c))){n=on(s,n),s=Kf(2),c=ei(l,s,2),c!==null&&(Qf(s,c,l,n),we(c,2),_n(c));break}}l=l.return}}function Hr(n,l,s){var c=n.pingCache;if(c===null){c=n.pingCache=new vy;var d=new Set;c.set(l,d)}else d=c.get(l),d===void 0&&(d=new Set,c.set(l,d));d.has(s)||(Dr=!0,d.add(s),n=Ey.bind(null,n,l,s),l.then(n,n))}function Ey(n,l,s){var c=n.pingCache;c!==null&&c.delete(l),n.pingedLanes|=n.suspendedLanes&s,n.warmLanes&=~s,st===n&&(Fe&s)===s&&(Tt===4||Tt===3&&(Fe&62914560)===Fe&&300>ft()-Ir?(We&2)===0&&vl(n,0):Lr|=s,gl===Fe&&(gl=0)),_n(n)}function Jd(n,l){l===0&&(l=ce()),n=el(n,l),n!==null&&(we(n,l),_n(n))}function My(n){var l=n.memoizedState,s=0;l!==null&&(s=l.retryLane),Jd(n,s)}function _y(n,l){var s=0;switch(n.tag){case 13:var c=n.stateNode,d=n.memoizedState;d!==null&&(s=d.retryLane);break;case 19:c=n.stateNode;break;case 22:c=n.stateNode._retryCache;break;default:throw Error(o(314))}c!==null&&c.delete(l),Jd(n,s)}function Ay(n,l){return Ct(n,l)}var bs=null,xl=null,zr=!1,ws=!1,Fr=!1,Bi=0;function _n(n){n!==xl&&n.next===null&&(xl===null?bs=xl=n:xl=xl.next=n),ws=!0,zr||(zr=!0,Ry())}function go(n,l){if(!Fr&&ws){Fr=!0;do for(var s=!1,c=bs;c!==null;){if(n!==0){var d=c.pendingLanes;if(d===0)var y=0;else{var C=c.suspendedLanes,E=c.pingedLanes;y=(1<<31-wt(42|n)+1)-1,y&=d&~(C&~E),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(s=!0,Qd(c,y))}else y=Fe,y=J(c,c===st?y:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(y&3)===0||le(c,y)||(s=!0,Qd(c,y));c=c.next}while(s);Fr=!1}}function Ny(){$d()}function $d(){ws=zr=!1;var n=0;Bi!==0&&(By()&&(n=Bi),Bi=0);for(var l=ft(),s=null,c=bs;c!==null;){var d=c.next,y=Xd(c,l);y===0?(c.next=null,s===null?bs=d:s.next=d,d===null&&(xl=s)):(s=c,(n!==0||(y&3)!==0)&&(ws=!0)),c=d}go(n)}function Xd(n,l){for(var s=n.suspendedLanes,c=n.pingedLanes,d=n.expirationTimes,y=n.pendingLanes&-62914561;0<y;){var C=31-wt(y),E=1<<C,b=d[C];b===-1?((E&s)===0||(E&c)!==0)&&(d[C]=oe(E,l)):b<=l&&(n.expiredLanes|=E),y&=~E}if(l=st,s=Fe,s=J(n,n===l?s:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c=n.callbackNode,s===0||n===l&&(je===2||je===9)||n.cancelPendingCommit!==null)return c!==null&&c!==null&&lt(c),n.callbackNode=null,n.callbackPriority=0;if((s&3)===0||le(n,s)){if(l=s&-s,l===n.callbackPriority)return l;switch(c!==null&&lt(c),yt(s)){case 2:case 8:s=pn;break;case 32:s=$t;break;case 268435456:s=Gi;break;default:s=$t}return c=Kd.bind(null,n),s=Ct(s,c),n.callbackPriority=l,n.callbackNode=s,l}return c!==null&&c!==null&&lt(c),n.callbackPriority=2,n.callbackNode=null,2}function Kd(n,l){if(kt!==0&&kt!==5)return n.callbackNode=null,n.callbackPriority=0,null;var s=n.callbackNode;if(Rs()&&n.callbackNode!==s)return null;var c=Fe;return c=J(n,n===st?c:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c===0?null:(Dd(n,c,l),Xd(n,ft()),n.callbackNode!=null&&n.callbackNode===s?Kd.bind(null,n):null)}function Qd(n,l){if(Rs())return null;Dd(n,l,!0)}function Ry(){Vy(function(){(We&6)!==0?Ct(tn,Ny):$d()})}function Or(){return Bi===0&&(Bi=j()),Bi}function Zd(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Ho(""+n)}function Wd(n,l){var s=l.ownerDocument.createElement("input");return s.name=l.name,s.value=l.value,n.id&&s.setAttribute("form",n.id),l.parentNode.insertBefore(s,l),n=new FormData(n),s.parentNode.removeChild(s),n}function by(n,l,s,c,d){if(l==="submit"&&s&&s.stateNode===d){var y=Zd((d[Pe]||null).action),C=c.submitter;C&&(l=(l=C[Pe]||null)?Zd(l.formAction):C.getAttribute("formAction"),l!==null&&(y=l,C=null));var E=new Yo("action","action",null,c,d);n.push({event:E,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Bi!==0){var b=C?Wd(d,C):new FormData(d);cr(s,{pending:!0,data:b,method:d.method,action:y},null,b)}}else typeof y=="function"&&(E.preventDefault(),b=C?Wd(d,C):new FormData(d),cr(s,{pending:!0,data:b,method:d.method,action:y},y,b))},currentTarget:d}]})}}for(var Yr=0;Yr<ba.length;Yr++){var Jr=ba[Yr],wy=Jr.toLowerCase(),Dy=Jr[0].toUpperCase()+Jr.slice(1);yn(wy,"on"+Dy)}yn(wc,"onAnimationEnd"),yn(Dc,"onAnimationIteration"),yn(Lc,"onAnimationStart"),yn("dblclick","onDoubleClick"),yn("focusin","onFocus"),yn("focusout","onBlur"),yn(Xp,"onTransitionRun"),yn(Kp,"onTransitionStart"),yn(Qp,"onTransitionCancel"),yn(Uc,"onTransitionEnd"),Oi("onMouseEnter",["mouseout","mouseover"]),Oi("onMouseLeave",["mouseout","mouseover"]),Oi("onPointerEnter",["pointerout","pointerover"]),Oi("onPointerLeave",["pointerout","pointerover"]),xi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),xi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),xi("onBeforeInput",["compositionend","keypress","textInput","paste"]),xi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),xi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),xi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var po="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ly=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(po));function jd(n,l){l=(l&4)!==0;for(var s=0;s<n.length;s++){var c=n[s],d=c.event;c=c.listeners;e:{var y=void 0;if(l)for(var C=c.length-1;0<=C;C--){var E=c[C],b=E.instance,V=E.currentTarget;if(E=E.listener,b!==y&&d.isPropagationStopped())break e;y=E,d.currentTarget=V;try{y(d)}catch(Q){ys(Q)}d.currentTarget=null,y=b}else for(C=0;C<c.length;C++){if(E=c[C],b=E.instance,V=E.currentTarget,E=E.listener,b!==y&&d.isPropagationStopped())break e;y=E,d.currentTarget=V;try{y(d)}catch(Q){ys(Q)}d.currentTarget=null,y=b}}}}function He(n,l){var s=l[P];s===void 0&&(s=l[P]=new Set);var c=n+"__bubble";s.has(c)||(eh(l,n,2,!1),s.add(c))}function $r(n,l,s){var c=0;l&&(c|=4),eh(s,n,c,l)}var Ds="_reactListening"+Math.random().toString(36).slice(2);function Xr(n){if(!n[Ds]){n[Ds]=!0,Bo.forEach(function(s){s!=="selectionchange"&&(Ly.has(s)||$r(s,!1,n),$r(s,!0,n))});var l=n.nodeType===9?n:n.ownerDocument;l===null||l[Ds]||(l[Ds]=!0,$r("selectionchange",!1,l))}}function eh(n,l,s,c){switch(Mh(l)){case 2:var d=o0;break;case 8:d=s0;break;default:d=ru}s=d.bind(null,l,s,n),d=void 0,!pa||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(d=!0),c?d!==void 0?n.addEventListener(l,s,{capture:!0,passive:d}):n.addEventListener(l,s,!0):d!==void 0?n.addEventListener(l,s,{passive:d}):n.addEventListener(l,s,!1)}function Kr(n,l,s,c,d){var y=c;if((l&1)===0&&(l&2)===0&&c!==null)e:for(;;){if(c===null)return;var C=c.tag;if(C===3||C===4){var E=c.stateNode.containerInfo;if(E===d)break;if(C===4)for(C=c.return;C!==null;){var b=C.tag;if((b===3||b===4)&&C.stateNode.containerInfo===d)return;C=C.return}for(;E!==null;){if(C=Me(E),C===null)return;if(b=C.tag,b===5||b===6||b===26||b===27){c=y=C;continue e}E=E.parentNode}}c=c.return}sc(function(){var V=y,Q=ma(s),ee=[];e:{var H=Ic.get(n);if(H!==void 0){var O=Yo,Le=n;switch(n){case"keypress":if(Fo(s)===0)break e;case"keydown":case"keyup":O=Ap;break;case"focusin":Le="focus",O=xa;break;case"focusout":Le="blur",O=xa;break;case"beforeblur":case"afterblur":O=xa;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":O=uc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":O=mp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":O=bp;break;case wc:case Dc:case Lc:O=yp;break;case Uc:O=Dp;break;case"scroll":case"scrollend":O=dp;break;case"wheel":O=Up;break;case"copy":case"cut":case"paste":O=Tp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":O=fc;break;case"toggle":case"beforetoggle":O=kp}var Ne=(l&4)!==0,it=!Ne&&(n==="scroll"||n==="scrollend"),I=Ne?H!==null?H+"Capture":null:H;Ne=[];for(var U=V,B;U!==null;){var Z=U;if(B=Z.stateNode,Z=Z.tag,Z!==5&&Z!==26&&Z!==27||B===null||I===null||(Z=Il(U,I),Z!=null&&Ne.push(yo(U,Z,B))),it)break;U=U.return}0<Ne.length&&(H=new O(H,Le,null,s,Q),ee.push({event:H,listeners:Ne}))}}if((l&7)===0){e:{if(H=n==="mouseover"||n==="pointerover",O=n==="mouseout"||n==="pointerout",H&&s!==ha&&(Le=s.relatedTarget||s.fromElement)&&(Me(Le)||Le[A]))break e;if((O||H)&&(H=Q.window===Q?Q:(H=Q.ownerDocument)?H.defaultView||H.parentWindow:window,O?(Le=s.relatedTarget||s.toElement,O=V,Le=Le?Me(Le):null,Le!==null&&(it=f(Le),Ne=Le.tag,Le!==it||Ne!==5&&Ne!==27&&Ne!==6)&&(Le=null)):(O=null,Le=V),O!==Le)){if(Ne=uc,Z="onMouseLeave",I="onMouseEnter",U="mouse",(n==="pointerout"||n==="pointerover")&&(Ne=fc,Z="onPointerLeave",I="onPointerEnter",U="pointer"),it=O==null?H:dt(O),B=Le==null?H:dt(Le),H=new Ne(Z,U+"leave",O,s,Q),H.target=it,H.relatedTarget=B,Z=null,Me(Q)===V&&(Ne=new Ne(I,U+"enter",Le,s,Q),Ne.target=B,Ne.relatedTarget=it,Z=Ne),it=Z,O&&Le)t:{for(Ne=O,I=Le,U=0,B=Ne;B;B=Cl(B))U++;for(B=0,Z=I;Z;Z=Cl(Z))B++;for(;0<U-B;)Ne=Cl(Ne),U--;for(;0<B-U;)I=Cl(I),B--;for(;U--;){if(Ne===I||I!==null&&Ne===I.alternate)break t;Ne=Cl(Ne),I=Cl(I)}Ne=null}else Ne=null;O!==null&&th(ee,H,O,Ne,!1),Le!==null&&it!==null&&th(ee,it,Le,Ne,!0)}}e:{if(H=V?dt(V):window,O=H.nodeName&&H.nodeName.toLowerCase(),O==="select"||O==="input"&&H.type==="file")var ge=Tc;else if(yc(H))if(xc)ge=Yp;else{ge=Fp;var Ve=zp}else O=H.nodeName,!O||O.toLowerCase()!=="input"||H.type!=="checkbox"&&H.type!=="radio"?V&&da(V.elementType)&&(ge=Tc):ge=Op;if(ge&&(ge=ge(n,V))){vc(ee,ge,s,Q);break e}Ve&&Ve(n,H,V),n==="focusout"&&V&&H.type==="number"&&V.memoizedProps.value!=null&&fa(H,"number",H.value)}switch(Ve=V?dt(V):window,n){case"focusin":(yc(Ve)||Ve.contentEditable==="true")&&(Zi=Ve,Aa=V,zl=null);break;case"focusout":zl=Aa=Zi=null;break;case"mousedown":Na=!0;break;case"contextmenu":case"mouseup":case"dragend":Na=!1,Rc(ee,s,Q);break;case"selectionchange":if($p)break;case"keydown":case"keyup":Rc(ee,s,Q)}var Ce;if(Sa)e:{switch(n){case"compositionstart":var be="onCompositionStart";break e;case"compositionend":be="onCompositionEnd";break e;case"compositionupdate":be="onCompositionUpdate";break e}be=void 0}else Qi?gc(n,s)&&(be="onCompositionEnd"):n==="keydown"&&s.keyCode===229&&(be="onCompositionStart");be&&(dc&&s.locale!=="ko"&&(Qi||be!=="onCompositionStart"?be==="onCompositionEnd"&&Qi&&(Ce=ac()):(Qn=Q,ya="value"in Qn?Qn.value:Qn.textContent,Qi=!0)),Ve=Ls(V,be),0<Ve.length&&(be=new cc(be,n,null,s,Q),ee.push({event:be,listeners:Ve}),Ce?be.data=Ce:(Ce=pc(s),Ce!==null&&(be.data=Ce)))),(Ce=Pp?Vp(n,s):qp(n,s))&&(be=Ls(V,"onBeforeInput"),0<be.length&&(Ve=new cc("onBeforeInput","beforeinput",null,s,Q),ee.push({event:Ve,listeners:be}),Ve.data=Ce)),by(ee,n,V,s,Q)}jd(ee,l)})}function yo(n,l,s){return{instance:n,listener:l,currentTarget:s}}function Ls(n,l){for(var s=l+"Capture",c=[];n!==null;){var d=n,y=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||y===null||(d=Il(n,s),d!=null&&c.unshift(yo(n,d,y)),d=Il(n,l),d!=null&&c.push(yo(n,d,y))),n.tag===3)return c;n=n.return}return[]}function Cl(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function th(n,l,s,c,d){for(var y=l._reactName,C=[];s!==null&&s!==c;){var E=s,b=E.alternate,V=E.stateNode;if(E=E.tag,b!==null&&b===c)break;E!==5&&E!==26&&E!==27||V===null||(b=V,d?(V=Il(s,y),V!=null&&C.unshift(yo(s,V,b))):d||(V=Il(s,y),V!=null&&C.push(yo(s,V,b)))),s=s.return}C.length!==0&&n.push({event:l,listeners:C})}var Uy=/\r\n?/g,Iy=/\u0000|\uFFFD/g;function nh(n){return(typeof n=="string"?n:""+n).replace(Uy,`
`).replace(Iy,"")}function ih(n,l){return l=nh(l),nh(n)===l}function Us(){}function nt(n,l,s,c,d,y){switch(s){case"children":typeof c=="string"?l==="body"||l==="textarea"&&c===""||$i(n,c):(typeof c=="number"||typeof c=="bigint")&&l!=="body"&&$i(n,""+c);break;case"className":Vo(n,"class",c);break;case"tabIndex":Vo(n,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Vo(n,s,c);break;case"style":lc(n,c,y);break;case"data":if(l!=="object"){Vo(n,"data",c);break}case"src":case"href":if(c===""&&(l!=="a"||s!=="href")){n.removeAttribute(s);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(s);break}c=Ho(""+c),n.setAttribute(s,c);break;case"action":case"formAction":if(typeof c=="function"){n.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(s==="formAction"?(l!=="input"&&nt(n,l,"name",d.name,d,null),nt(n,l,"formEncType",d.formEncType,d,null),nt(n,l,"formMethod",d.formMethod,d,null),nt(n,l,"formTarget",d.formTarget,d,null)):(nt(n,l,"encType",d.encType,d,null),nt(n,l,"method",d.method,d,null),nt(n,l,"target",d.target,d,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(s);break}c=Ho(""+c),n.setAttribute(s,c);break;case"onClick":c!=null&&(n.onclick=Us);break;case"onScroll":c!=null&&He("scroll",n);break;case"onScrollEnd":c!=null&&He("scrollend",n);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(o(61));if(s=c.__html,s!=null){if(d.children!=null)throw Error(o(60));n.innerHTML=s}}break;case"multiple":n.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":n.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){n.removeAttribute("xlink:href");break}s=Ho(""+c),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(s,""+c):n.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(s,""):n.removeAttribute(s);break;case"capture":case"download":c===!0?n.setAttribute(s,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(s,c):n.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?n.setAttribute(s,c):n.removeAttribute(s);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?n.removeAttribute(s):n.setAttribute(s,c);break;case"popover":He("beforetoggle",n),He("toggle",n),Po(n,"popover",c);break;case"xlinkActuate":wn(n,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":wn(n,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":wn(n,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":wn(n,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":wn(n,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":wn(n,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":wn(n,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":wn(n,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":wn(n,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Po(n,"is",c);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=cp.get(s)||s,Po(n,s,c))}}function Qr(n,l,s,c,d,y){switch(s){case"style":lc(n,c,y);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(o(61));if(s=c.__html,s!=null){if(d.children!=null)throw Error(o(60));n.innerHTML=s}}break;case"children":typeof c=="string"?$i(n,c):(typeof c=="number"||typeof c=="bigint")&&$i(n,""+c);break;case"onScroll":c!=null&&He("scroll",n);break;case"onScrollEnd":c!=null&&He("scrollend",n);break;case"onClick":c!=null&&(n.onclick=Us);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!$u.hasOwnProperty(s))e:{if(s[0]==="o"&&s[1]==="n"&&(d=s.endsWith("Capture"),l=s.slice(2,d?s.length-7:void 0),y=n[Pe]||null,y=y!=null?y[s]:null,typeof y=="function"&&n.removeEventListener(l,y,d),typeof c=="function")){typeof y!="function"&&y!==null&&(s in n?n[s]=null:n.hasAttribute(s)&&n.removeAttribute(s)),n.addEventListener(l,c,d);break e}s in n?n[s]=c:c===!0?n.setAttribute(s,""):Po(n,s,c)}}}function Bt(n,l,s){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":He("error",n),He("load",n);var c=!1,d=!1,y;for(y in s)if(s.hasOwnProperty(y)){var C=s[y];if(C!=null)switch(y){case"src":c=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,l));default:nt(n,l,y,C,s,null)}}d&&nt(n,l,"srcSet",s.srcSet,s,null),c&&nt(n,l,"src",s.src,s,null);return;case"input":He("invalid",n);var E=y=C=d=null,b=null,V=null;for(c in s)if(s.hasOwnProperty(c)){var Q=s[c];if(Q!=null)switch(c){case"name":d=Q;break;case"type":C=Q;break;case"checked":b=Q;break;case"defaultChecked":V=Q;break;case"value":y=Q;break;case"defaultValue":E=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(o(137,l));break;default:nt(n,l,c,Q,s,null)}}ec(n,y,E,b,V,C,d,!1),qo(n);return;case"select":He("invalid",n),c=C=y=null;for(d in s)if(s.hasOwnProperty(d)&&(E=s[d],E!=null))switch(d){case"value":y=E;break;case"defaultValue":C=E;break;case"multiple":c=E;default:nt(n,l,d,E,s,null)}l=y,s=C,n.multiple=!!c,l!=null?Ji(n,!!c,l,!1):s!=null&&Ji(n,!!c,s,!0);return;case"textarea":He("invalid",n),y=d=c=null;for(C in s)if(s.hasOwnProperty(C)&&(E=s[C],E!=null))switch(C){case"value":c=E;break;case"defaultValue":d=E;break;case"children":y=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(o(91));break;default:nt(n,l,C,E,s,null)}nc(n,c,d,y),qo(n);return;case"option":for(b in s)if(s.hasOwnProperty(b)&&(c=s[b],c!=null))switch(b){case"selected":n.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:nt(n,l,b,c,s,null)}return;case"dialog":He("beforetoggle",n),He("toggle",n),He("cancel",n),He("close",n);break;case"iframe":case"object":He("load",n);break;case"video":case"audio":for(c=0;c<po.length;c++)He(po[c],n);break;case"image":He("error",n),He("load",n);break;case"details":He("toggle",n);break;case"embed":case"source":case"link":He("error",n),He("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(V in s)if(s.hasOwnProperty(V)&&(c=s[V],c!=null))switch(V){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,l));default:nt(n,l,V,c,s,null)}return;default:if(da(l)){for(Q in s)s.hasOwnProperty(Q)&&(c=s[Q],c!==void 0&&Qr(n,l,Q,c,s,void 0));return}}for(E in s)s.hasOwnProperty(E)&&(c=s[E],c!=null&&nt(n,l,E,c,s,null))}function ky(n,l,s,c){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,y=null,C=null,E=null,b=null,V=null,Q=null;for(O in s){var ee=s[O];if(s.hasOwnProperty(O)&&ee!=null)switch(O){case"checked":break;case"value":break;case"defaultValue":b=ee;default:c.hasOwnProperty(O)||nt(n,l,O,null,c,ee)}}for(var H in c){var O=c[H];if(ee=s[H],c.hasOwnProperty(H)&&(O!=null||ee!=null))switch(H){case"type":y=O;break;case"name":d=O;break;case"checked":V=O;break;case"defaultChecked":Q=O;break;case"value":C=O;break;case"defaultValue":E=O;break;case"children":case"dangerouslySetInnerHTML":if(O!=null)throw Error(o(137,l));break;default:O!==ee&&nt(n,l,H,O,c,ee)}}ca(n,C,E,b,V,Q,y,d);return;case"select":O=C=E=H=null;for(y in s)if(b=s[y],s.hasOwnProperty(y)&&b!=null)switch(y){case"value":break;case"multiple":O=b;default:c.hasOwnProperty(y)||nt(n,l,y,null,c,b)}for(d in c)if(y=c[d],b=s[d],c.hasOwnProperty(d)&&(y!=null||b!=null))switch(d){case"value":H=y;break;case"defaultValue":E=y;break;case"multiple":C=y;default:y!==b&&nt(n,l,d,y,c,b)}l=E,s=C,c=O,H!=null?Ji(n,!!s,H,!1):!!c!=!!s&&(l!=null?Ji(n,!!s,l,!0):Ji(n,!!s,s?[]:"",!1));return;case"textarea":O=H=null;for(E in s)if(d=s[E],s.hasOwnProperty(E)&&d!=null&&!c.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:nt(n,l,E,null,c,d)}for(C in c)if(d=c[C],y=s[C],c.hasOwnProperty(C)&&(d!=null||y!=null))switch(C){case"value":H=d;break;case"defaultValue":O=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(o(91));break;default:d!==y&&nt(n,l,C,d,c,y)}tc(n,H,O);return;case"option":for(var Le in s)if(H=s[Le],s.hasOwnProperty(Le)&&H!=null&&!c.hasOwnProperty(Le))switch(Le){case"selected":n.selected=!1;break;default:nt(n,l,Le,null,c,H)}for(b in c)if(H=c[b],O=s[b],c.hasOwnProperty(b)&&H!==O&&(H!=null||O!=null))switch(b){case"selected":n.selected=H&&typeof H!="function"&&typeof H!="symbol";break;default:nt(n,l,b,H,c,O)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ne in s)H=s[Ne],s.hasOwnProperty(Ne)&&H!=null&&!c.hasOwnProperty(Ne)&&nt(n,l,Ne,null,c,H);for(V in c)if(H=c[V],O=s[V],c.hasOwnProperty(V)&&H!==O&&(H!=null||O!=null))switch(V){case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(o(137,l));break;default:nt(n,l,V,H,c,O)}return;default:if(da(l)){for(var it in s)H=s[it],s.hasOwnProperty(it)&&H!==void 0&&!c.hasOwnProperty(it)&&Qr(n,l,it,void 0,c,H);for(Q in c)H=c[Q],O=s[Q],!c.hasOwnProperty(Q)||H===O||H===void 0&&O===void 0||Qr(n,l,Q,H,c,O);return}}for(var I in s)H=s[I],s.hasOwnProperty(I)&&H!=null&&!c.hasOwnProperty(I)&&nt(n,l,I,null,c,H);for(ee in c)H=c[ee],O=s[ee],!c.hasOwnProperty(ee)||H===O||H==null&&O==null||nt(n,l,ee,H,c,O)}var Zr=null,Wr=null;function Is(n){return n.nodeType===9?n:n.ownerDocument}function lh(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function oh(n,l){if(n===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&l==="foreignObject"?0:n}function jr(n,l){return n==="textarea"||n==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var eu=null;function By(){var n=window.event;return n&&n.type==="popstate"?n===eu?!1:(eu=n,!0):(eu=null,!1)}var sh=typeof setTimeout=="function"?setTimeout:void 0,Py=typeof clearTimeout=="function"?clearTimeout:void 0,ah=typeof Promise=="function"?Promise:void 0,Vy=typeof queueMicrotask=="function"?queueMicrotask:typeof ah<"u"?function(n){return ah.resolve(null).then(n).catch(qy)}:sh;function qy(n){setTimeout(function(){throw n})}function di(n){return n==="head"}function rh(n,l){var s=l,c=0,d=0;do{var y=s.nextSibling;if(n.removeChild(s),y&&y.nodeType===8)if(s=y.data,s==="/$"){if(0<c&&8>c){s=c;var C=n.ownerDocument;if(s&1&&vo(C.documentElement),s&2&&vo(C.body),s&4)for(s=C.head,vo(s),C=s.firstChild;C;){var E=C.nextSibling,b=C.nodeName;C[ve]||b==="SCRIPT"||b==="STYLE"||b==="LINK"&&C.rel.toLowerCase()==="stylesheet"||s.removeChild(C),C=E}}if(d===0){n.removeChild(y),Ao(l);return}d--}else s==="$"||s==="$?"||s==="$!"?d++:c=s.charCodeAt(0)-48;else c=0;s=y}while(s);Ao(l)}function tu(n){var l=n.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var s=l;switch(l=l.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":tu(s),De(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}n.removeChild(s)}}function Gy(n,l,s,c){for(;n.nodeType===1;){var d=s;if(n.nodeName.toLowerCase()!==l.toLowerCase()){if(!c&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(c){if(!n[ve])switch(l){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(y=n.getAttribute("rel"),y==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(y!==d.rel||n.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||n.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||n.getAttribute("title")!==(d.title==null?null:d.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(y=n.getAttribute("src"),(y!==(d.src==null?null:d.src)||n.getAttribute("type")!==(d.type==null?null:d.type)||n.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&y&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(l==="input"&&n.type==="hidden"){var y=d.name==null?null:""+d.name;if(d.type==="hidden"&&n.getAttribute("name")===y)return n}else return n;if(n=Tn(n.nextSibling),n===null)break}return null}function Hy(n,l,s){if(l==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!s||(n=Tn(n.nextSibling),n===null))return null;return n}function nu(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState==="complete"}function zy(n,l){var s=n.ownerDocument;if(n.data!=="$?"||s.readyState==="complete")l();else{var c=function(){l(),s.removeEventListener("DOMContentLoaded",c)};s.addEventListener("DOMContentLoaded",c),n._reactRetry=c}}function Tn(n){for(;n!=null;n=n.nextSibling){var l=n.nodeType;if(l===1||l===3)break;if(l===8){if(l=n.data,l==="$"||l==="$!"||l==="$?"||l==="F!"||l==="F")break;if(l==="/$")return null}}return n}var iu=null;function uh(n){n=n.previousSibling;for(var l=0;n;){if(n.nodeType===8){var s=n.data;if(s==="$"||s==="$!"||s==="$?"){if(l===0)return n;l--}else s==="/$"&&l++}n=n.previousSibling}return null}function ch(n,l,s){switch(l=Is(s),n){case"html":if(n=l.documentElement,!n)throw Error(o(452));return n;case"head":if(n=l.head,!n)throw Error(o(453));return n;case"body":if(n=l.body,!n)throw Error(o(454));return n;default:throw Error(o(451))}}function vo(n){for(var l=n.attributes;l.length;)n.removeAttributeNode(l[0]);De(n)}var fn=new Map,fh=new Set;function ks(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var On=ae.d;ae.d={f:Fy,r:Oy,D:Yy,C:Jy,L:$y,m:Xy,X:Qy,S:Ky,M:Zy};function Fy(){var n=On.f(),l=As();return n||l}function Oy(n){var l=Re(n);l!==null&&l.tag===5&&l.type==="form"?Df(l):On.r(n)}var Sl=typeof document>"u"?null:document;function dh(n,l,s){var c=Sl;if(c&&typeof l=="string"&&l){var d=ln(l);d='link[rel="'+n+'"][href="'+d+'"]',typeof s=="string"&&(d+='[crossorigin="'+s+'"]'),fh.has(d)||(fh.add(d),n={rel:n,crossOrigin:s,href:l},c.querySelector(d)===null&&(l=c.createElement("link"),Bt(l,"link",n),gt(l),c.head.appendChild(l)))}}function Yy(n){On.D(n),dh("dns-prefetch",n,null)}function Jy(n,l){On.C(n,l),dh("preconnect",n,l)}function $y(n,l,s){On.L(n,l,s);var c=Sl;if(c&&n&&l){var d='link[rel="preload"][as="'+ln(l)+'"]';l==="image"&&s&&s.imageSrcSet?(d+='[imagesrcset="'+ln(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(d+='[imagesizes="'+ln(s.imageSizes)+'"]')):d+='[href="'+ln(n)+'"]';var y=d;switch(l){case"style":y=El(n);break;case"script":y=Ml(n)}fn.has(y)||(n=v({rel:"preload",href:l==="image"&&s&&s.imageSrcSet?void 0:n,as:l},s),fn.set(y,n),c.querySelector(d)!==null||l==="style"&&c.querySelector(To(y))||l==="script"&&c.querySelector(xo(y))||(l=c.createElement("link"),Bt(l,"link",n),gt(l),c.head.appendChild(l)))}}function Xy(n,l){On.m(n,l);var s=Sl;if(s&&n){var c=l&&typeof l.as=="string"?l.as:"script",d='link[rel="modulepreload"][as="'+ln(c)+'"][href="'+ln(n)+'"]',y=d;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=Ml(n)}if(!fn.has(y)&&(n=v({rel:"modulepreload",href:n},l),fn.set(y,n),s.querySelector(d)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(xo(y)))return}c=s.createElement("link"),Bt(c,"link",n),gt(c),s.head.appendChild(c)}}}function Ky(n,l,s){On.S(n,l,s);var c=Sl;if(c&&n){var d=mt(c).hoistableStyles,y=El(n);l=l||"default";var C=d.get(y);if(!C){var E={loading:0,preload:null};if(C=c.querySelector(To(y)))E.loading=5;else{n=v({rel:"stylesheet",href:n,"data-precedence":l},s),(s=fn.get(y))&&lu(n,s);var b=C=c.createElement("link");gt(b),Bt(b,"link",n),b._p=new Promise(function(V,Q){b.onload=V,b.onerror=Q}),b.addEventListener("load",function(){E.loading|=1}),b.addEventListener("error",function(){E.loading|=2}),E.loading|=4,Bs(C,l,c)}C={type:"stylesheet",instance:C,count:1,state:E},d.set(y,C)}}}function Qy(n,l){On.X(n,l);var s=Sl;if(s&&n){var c=mt(s).hoistableScripts,d=Ml(n),y=c.get(d);y||(y=s.querySelector(xo(d)),y||(n=v({src:n,async:!0},l),(l=fn.get(d))&&ou(n,l),y=s.createElement("script"),gt(y),Bt(y,"link",n),s.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},c.set(d,y))}}function Zy(n,l){On.M(n,l);var s=Sl;if(s&&n){var c=mt(s).hoistableScripts,d=Ml(n),y=c.get(d);y||(y=s.querySelector(xo(d)),y||(n=v({src:n,async:!0,type:"module"},l),(l=fn.get(d))&&ou(n,l),y=s.createElement("script"),gt(y),Bt(y,"link",n),s.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},c.set(d,y))}}function hh(n,l,s,c){var d=(d=Te.current)?ks(d):null;if(!d)throw Error(o(446));switch(n){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(l=El(s.href),s=mt(d).hoistableStyles,c=s.get(l),c||(c={type:"style",instance:null,count:0,state:null},s.set(l,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){n=El(s.href);var y=mt(d).hoistableStyles,C=y.get(n);if(C||(d=d.ownerDocument||d,C={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(n,C),(y=d.querySelector(To(n)))&&!y._p&&(C.instance=y,C.state.loading=5),fn.has(n)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},fn.set(n,s),y||Wy(d,n,s,C.state))),l&&c===null)throw Error(o(528,""));return C}if(l&&c!==null)throw Error(o(529,""));return null;case"script":return l=s.async,s=s.src,typeof s=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=Ml(s),s=mt(d).hoistableScripts,c=s.get(l),c||(c={type:"script",instance:null,count:0,state:null},s.set(l,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,n))}}function El(n){return'href="'+ln(n)+'"'}function To(n){return'link[rel="stylesheet"]['+n+"]"}function mh(n){return v({},n,{"data-precedence":n.precedence,precedence:null})}function Wy(n,l,s,c){n.querySelector('link[rel="preload"][as="style"]['+l+"]")?c.loading=1:(l=n.createElement("link"),c.preload=l,l.addEventListener("load",function(){return c.loading|=1}),l.addEventListener("error",function(){return c.loading|=2}),Bt(l,"link",s),gt(l),n.head.appendChild(l))}function Ml(n){return'[src="'+ln(n)+'"]'}function xo(n){return"script[async]"+n}function gh(n,l,s){if(l.count++,l.instance===null)switch(l.type){case"style":var c=n.querySelector('style[data-href~="'+ln(s.href)+'"]');if(c)return l.instance=c,gt(c),c;var d=v({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return c=(n.ownerDocument||n).createElement("style"),gt(c),Bt(c,"style",d),Bs(c,s.precedence,n),l.instance=c;case"stylesheet":d=El(s.href);var y=n.querySelector(To(d));if(y)return l.state.loading|=4,l.instance=y,gt(y),y;c=mh(s),(d=fn.get(d))&&lu(c,d),y=(n.ownerDocument||n).createElement("link"),gt(y);var C=y;return C._p=new Promise(function(E,b){C.onload=E,C.onerror=b}),Bt(y,"link",c),l.state.loading|=4,Bs(y,s.precedence,n),l.instance=y;case"script":return y=Ml(s.src),(d=n.querySelector(xo(y)))?(l.instance=d,gt(d),d):(c=s,(d=fn.get(y))&&(c=v({},s),ou(c,d)),n=n.ownerDocument||n,d=n.createElement("script"),gt(d),Bt(d,"link",c),n.head.appendChild(d),l.instance=d);case"void":return null;default:throw Error(o(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(c=l.instance,l.state.loading|=4,Bs(c,s.precedence,n));return l.instance}function Bs(n,l,s){for(var c=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=c.length?c[c.length-1]:null,y=d,C=0;C<c.length;C++){var E=c[C];if(E.dataset.precedence===l)y=E;else if(y!==d)break}y?y.parentNode.insertBefore(n,y.nextSibling):(l=s.nodeType===9?s.head:s,l.insertBefore(n,l.firstChild))}function lu(n,l){n.crossOrigin==null&&(n.crossOrigin=l.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=l.referrerPolicy),n.title==null&&(n.title=l.title)}function ou(n,l){n.crossOrigin==null&&(n.crossOrigin=l.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=l.referrerPolicy),n.integrity==null&&(n.integrity=l.integrity)}var Ps=null;function ph(n,l,s){if(Ps===null){var c=new Map,d=Ps=new Map;d.set(s,c)}else d=Ps,c=d.get(s),c||(c=new Map,d.set(s,c));if(c.has(n))return c;for(c.set(n,null),s=s.getElementsByTagName(n),d=0;d<s.length;d++){var y=s[d];if(!(y[ve]||y[ze]||n==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var C=y.getAttribute(l)||"";C=n+C;var E=c.get(C);E?E.push(y):c.set(C,[y])}}return c}function yh(n,l,s){n=n.ownerDocument||n,n.head.insertBefore(s,l==="title"?n.querySelector("head > title"):null)}function jy(n,l,s){if(s===1||l.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return n=l.disabled,typeof l.precedence=="string"&&n==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function vh(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var Co=null;function e0(){}function t0(n,l,s){if(Co===null)throw Error(o(475));var c=Co;if(l.type==="stylesheet"&&(typeof s.media!="string"||matchMedia(s.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var d=El(s.href),y=n.querySelector(To(d));if(y){n=y._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(c.count++,c=Vs.bind(c),n.then(c,c)),l.state.loading|=4,l.instance=y,gt(y);return}y=n.ownerDocument||n,s=mh(s),(d=fn.get(d))&&lu(s,d),y=y.createElement("link"),gt(y);var C=y;C._p=new Promise(function(E,b){C.onload=E,C.onerror=b}),Bt(y,"link",s),l.instance=y}c.stylesheets===null&&(c.stylesheets=new Map),c.stylesheets.set(l,n),(n=l.state.preload)&&(l.state.loading&3)===0&&(c.count++,l=Vs.bind(c),n.addEventListener("load",l),n.addEventListener("error",l))}}function n0(){if(Co===null)throw Error(o(475));var n=Co;return n.stylesheets&&n.count===0&&su(n,n.stylesheets),0<n.count?function(l){var s=setTimeout(function(){if(n.stylesheets&&su(n,n.stylesheets),n.unsuspend){var c=n.unsuspend;n.unsuspend=null,c()}},6e4);return n.unsuspend=l,function(){n.unsuspend=null,clearTimeout(s)}}:null}function Vs(){if(this.count--,this.count===0){if(this.stylesheets)su(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var qs=null;function su(n,l){n.stylesheets=null,n.unsuspend!==null&&(n.count++,qs=new Map,l.forEach(i0,n),qs=null,Vs.call(n))}function i0(n,l){if(!(l.state.loading&4)){var s=qs.get(n);if(s)var c=s.get(null);else{s=new Map,qs.set(n,s);for(var d=n.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<d.length;y++){var C=d[y];(C.nodeName==="LINK"||C.getAttribute("media")!=="not all")&&(s.set(C.dataset.precedence,C),c=C)}c&&s.set(null,c)}d=l.instance,C=d.getAttribute("data-precedence"),y=s.get(C)||c,y===c&&s.set(null,d),s.set(C,d),this.count++,c=Vs.bind(this),d.addEventListener("load",c),d.addEventListener("error",c),y?y.parentNode.insertBefore(d,y.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(d,n.firstChild)),l.state.loading|=4}}var So={$$typeof:F,Provider:null,Consumer:null,_currentValue:_e,_currentValue2:_e,_threadCount:0};function l0(n,l,s,c,d,y,C,E){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=fe(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fe(0),this.hiddenUpdates=fe(null),this.identifierPrefix=c,this.onUncaughtError=d,this.onCaughtError=y,this.onRecoverableError=C,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=E,this.incompleteTransitions=new Map}function Th(n,l,s,c,d,y,C,E,b,V,Q,ee){return n=new l0(n,l,s,C,E,b,V,ee),l=1,y===!0&&(l|=24),y=Kt(3,null,null,l),n.current=y,y.stateNode=n,l=Ha(),l.refCount++,n.pooledCache=l,l.refCount++,y.memoizedState={element:c,isDehydrated:s,cache:l},Ya(y),n}function xh(n){return n?(n=tl,n):tl}function Ch(n,l,s,c,d,y){d=xh(d),c.context===null?c.context=d:c.pendingContext=d,c=jn(l),c.payload={element:s},y=y===void 0?null:y,y!==null&&(c.callback=y),s=ei(n,c,l),s!==null&&(en(s,n,l),Zl(s,n,l))}function Sh(n,l){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var s=n.retryLane;n.retryLane=s!==0&&s<l?s:l}}function au(n,l){Sh(n,l),(n=n.alternate)&&Sh(n,l)}function Eh(n){if(n.tag===13){var l=el(n,67108864);l!==null&&en(l,n,67108864),au(n,67108864)}}var Gs=!0;function o0(n,l,s,c){var d=K.T;K.T=null;var y=ae.p;try{ae.p=2,ru(n,l,s,c)}finally{ae.p=y,K.T=d}}function s0(n,l,s,c){var d=K.T;K.T=null;var y=ae.p;try{ae.p=8,ru(n,l,s,c)}finally{ae.p=y,K.T=d}}function ru(n,l,s,c){if(Gs){var d=uu(c);if(d===null)Kr(n,l,c,Hs,s),_h(n,c);else if(r0(d,n,l,s,c))c.stopPropagation();else if(_h(n,c),l&4&&-1<a0.indexOf(n)){for(;d!==null;){var y=Re(d);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var C=Y(y.pendingLanes);if(C!==0){var E=y;for(E.pendingLanes|=2,E.entangledLanes|=2;C;){var b=1<<31-wt(C);E.entanglements[1]|=b,C&=~b}_n(y),(We&6)===0&&(Ms=ft()+500,go(0))}}break;case 13:E=el(y,2),E!==null&&en(E,y,2),As(),au(y,2)}if(y=uu(c),y===null&&Kr(n,l,c,Hs,s),y===d)break;d=y}d!==null&&c.stopPropagation()}else Kr(n,l,c,null,s)}}function uu(n){return n=ma(n),cu(n)}var Hs=null;function cu(n){if(Hs=null,n=Me(n),n!==null){var l=f(n);if(l===null)n=null;else{var s=l.tag;if(s===13){if(n=h(l),n!==null)return n;n=null}else if(s===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;n=null}else l!==n&&(n=null)}}return Hs=n,null}function Mh(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(gn()){case tn:return 2;case pn:return 8;case $t:case Ti:return 32;case Gi:return 268435456;default:return 32}default:return 32}}var fu=!1,hi=null,mi=null,gi=null,Eo=new Map,Mo=new Map,pi=[],a0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function _h(n,l){switch(n){case"focusin":case"focusout":hi=null;break;case"dragenter":case"dragleave":mi=null;break;case"mouseover":case"mouseout":gi=null;break;case"pointerover":case"pointerout":Eo.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mo.delete(l.pointerId)}}function _o(n,l,s,c,d,y){return n===null||n.nativeEvent!==y?(n={blockedOn:l,domEventName:s,eventSystemFlags:c,nativeEvent:y,targetContainers:[d]},l!==null&&(l=Re(l),l!==null&&Eh(l)),n):(n.eventSystemFlags|=c,l=n.targetContainers,d!==null&&l.indexOf(d)===-1&&l.push(d),n)}function r0(n,l,s,c,d){switch(l){case"focusin":return hi=_o(hi,n,l,s,c,d),!0;case"dragenter":return mi=_o(mi,n,l,s,c,d),!0;case"mouseover":return gi=_o(gi,n,l,s,c,d),!0;case"pointerover":var y=d.pointerId;return Eo.set(y,_o(Eo.get(y)||null,n,l,s,c,d)),!0;case"gotpointercapture":return y=d.pointerId,Mo.set(y,_o(Mo.get(y)||null,n,l,s,c,d)),!0}return!1}function Ah(n){var l=Me(n.target);if(l!==null){var s=f(l);if(s!==null){if(l=s.tag,l===13){if(l=h(s),l!==null){n.blockedOn=l,St(n.priority,function(){if(s.tag===13){var c=jt();c=Ze(c);var d=el(s,c);d!==null&&en(d,s,c),au(s,c)}});return}}else if(l===3&&s.stateNode.current.memoizedState.isDehydrated){n.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}n.blockedOn=null}function zs(n){if(n.blockedOn!==null)return!1;for(var l=n.targetContainers;0<l.length;){var s=uu(n.nativeEvent);if(s===null){s=n.nativeEvent;var c=new s.constructor(s.type,s);ha=c,s.target.dispatchEvent(c),ha=null}else return l=Re(s),l!==null&&Eh(l),n.blockedOn=s,!1;l.shift()}return!0}function Nh(n,l,s){zs(n)&&s.delete(l)}function u0(){fu=!1,hi!==null&&zs(hi)&&(hi=null),mi!==null&&zs(mi)&&(mi=null),gi!==null&&zs(gi)&&(gi=null),Eo.forEach(Nh),Mo.forEach(Nh)}function Fs(n,l){n.blockedOn===l&&(n.blockedOn=null,fu||(fu=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,u0)))}var Os=null;function Rh(n){Os!==n&&(Os=n,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Os===n&&(Os=null);for(var l=0;l<n.length;l+=3){var s=n[l],c=n[l+1],d=n[l+2];if(typeof c!="function"){if(cu(c||s)===null)continue;break}var y=Re(s);y!==null&&(n.splice(l,3),l-=3,cr(y,{pending:!0,data:d,method:s.method,action:c},c,d))}}))}function Ao(n){function l(b){return Fs(b,n)}hi!==null&&Fs(hi,n),mi!==null&&Fs(mi,n),gi!==null&&Fs(gi,n),Eo.forEach(l),Mo.forEach(l);for(var s=0;s<pi.length;s++){var c=pi[s];c.blockedOn===n&&(c.blockedOn=null)}for(;0<pi.length&&(s=pi[0],s.blockedOn===null);)Ah(s),s.blockedOn===null&&pi.shift();if(s=(n.ownerDocument||n).$$reactFormReplay,s!=null)for(c=0;c<s.length;c+=3){var d=s[c],y=s[c+1],C=d[Pe]||null;if(typeof y=="function")C||Rh(s);else if(C){var E=null;if(y&&y.hasAttribute("formAction")){if(d=y,C=y[Pe]||null)E=C.formAction;else if(cu(d)!==null)continue}else E=C.action;typeof E=="function"?s[c+1]=E:(s.splice(c,3),c-=3),Rh(s)}}}function du(n){this._internalRoot=n}Ys.prototype.render=du.prototype.render=function(n){var l=this._internalRoot;if(l===null)throw Error(o(409));var s=l.current,c=jt();Ch(s,c,n,l,null,null)},Ys.prototype.unmount=du.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var l=n.containerInfo;Ch(n.current,2,null,n,null,null),As(),l[A]=null}};function Ys(n){this._internalRoot=n}Ys.prototype.unstable_scheduleHydration=function(n){if(n){var l=ut();n={blockedOn:null,target:n,priority:l};for(var s=0;s<pi.length&&l!==0&&l<pi[s].priority;s++);pi.splice(s,0,n),s===0&&Ah(n)}};var bh=e.version;if(bh!=="19.1.0")throw Error(o(527,bh,"19.1.0"));ae.findDOMNode=function(n){var l=n._reactInternals;if(l===void 0)throw typeof n.render=="function"?Error(o(188)):(n=Object.keys(n).join(","),Error(o(268,n)));return n=p(l),n=n!==null?g(n):null,n=n===null?null:n.stateNode,n};var c0={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:K,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Js=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Js.isDisabled&&Js.supportsFiber)try{bn=Js.inject(c0),bt=Js}catch{}}return Ro.createRoot=function(n,l){if(!a(n))throw Error(o(299));var s=!1,c="",d=Yf,y=Jf,C=$f,E=null;return l!=null&&(l.unstable_strictMode===!0&&(s=!0),l.identifierPrefix!==void 0&&(c=l.identifierPrefix),l.onUncaughtError!==void 0&&(d=l.onUncaughtError),l.onCaughtError!==void 0&&(y=l.onCaughtError),l.onRecoverableError!==void 0&&(C=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(E=l.unstable_transitionCallbacks)),l=Th(n,1,!1,null,null,s,c,d,y,C,E,null),n[A]=l.current,Xr(n),new du(l)},Ro.hydrateRoot=function(n,l,s){if(!a(n))throw Error(o(299));var c=!1,d="",y=Yf,C=Jf,E=$f,b=null,V=null;return s!=null&&(s.unstable_strictMode===!0&&(c=!0),s.identifierPrefix!==void 0&&(d=s.identifierPrefix),s.onUncaughtError!==void 0&&(y=s.onUncaughtError),s.onCaughtError!==void 0&&(C=s.onCaughtError),s.onRecoverableError!==void 0&&(E=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(b=s.unstable_transitionCallbacks),s.formState!==void 0&&(V=s.formState)),l=Th(n,1,!0,l,s??null,c,d,y,C,E,b,V),l.context=xh(null),s=l.current,c=jt(),c=Ze(c),d=jn(c),d.callback=null,ei(s,d,c),s=c,l.current.lanes=s,we(l,s),_n(l),n[A]=l.current,Xr(n),new Ys(l)},Ro.version="19.1.0",Ro}var qh;function C0(){if(qh)return gu.exports;qh=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),gu.exports=x0(),gu.exports}var S0=C0();const E0=xg(S0);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let M0,_0;function A0(){return{geminiUrl:M0,vertexUrl:_0}}function N0(t,e,i,o){var a,f;if(!(t!=null&&t.baseUrl)){const h=A0();return e?(a=h.vertexUrl)!==null&&a!==void 0?a:i:(f=h.geminiUrl)!==null&&f!==void 0?f:o}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Vi{}function xe(t,e){const i=/\{([^}]+)\}/g;return t.replace(i,(o,a)=>{if(Object.prototype.hasOwnProperty.call(e,a)){const f=e[a];return f!=null?String(f):""}else throw new Error(`Key '${a}' not found in valueMap.`)})}function u(t,e,i){for(let f=0;f<e.length-1;f++){const h=e[f];if(h.endsWith("[]")){const m=h.slice(0,-2);if(!(m in t))if(Array.isArray(i))t[m]=Array.from({length:i.length},()=>({}));else throw new Error(`Value must be a list given an array path ${h}`);if(Array.isArray(t[m])){const p=t[m];if(Array.isArray(i))for(let g=0;g<p.length;g++){const v=p[g];u(v,e.slice(f+1),i[g])}else for(const g of p)u(g,e.slice(f+1),i)}return}else if(h.endsWith("[0]")){const m=h.slice(0,-3);m in t||(t[m]=[{}]);const p=t[m];u(p[0],e.slice(f+1),i);return}(!t[h]||typeof t[h]!="object")&&(t[h]={}),t=t[h]}const o=e[e.length-1],a=t[o];if(a!==void 0){if(!i||typeof i=="object"&&Object.keys(i).length===0||i===a)return;if(typeof a=="object"&&typeof i=="object"&&a!==null&&i!==null)Object.assign(a,i);else throw new Error(`Cannot set value for an existing key. Key: ${o}`)}else t[o]=i}function r(t,e){try{if(e.length===1&&e[0]==="_self")return t;for(let i=0;i<e.length;i++){if(typeof t!="object"||t===null)return;const o=e[i];if(o.endsWith("[]")){const a=o.slice(0,-2);if(a in t){const f=t[a];return Array.isArray(f)?f.map(h=>r(h,e.slice(i+1))):void 0}else return}else t=t[o]}return t}catch(i){if(i instanceof TypeError)return;throw i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Nu(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Gh;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Gh||(Gh={}));var Hh;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(Hh||(Hh={}));var vi;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(vi||(vi={}));var zh;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})(zh||(zh={}));var Fh;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(Fh||(Fh={}));var Oh;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(Oh||(Oh={}));var Yh;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Yh||(Yh={}));var Jh;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(Jh||(Jh={}));var $h;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})($h||($h={}));var Xh;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Xh||(Xh={}));var Kh;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR"})(Kh||(Kh={}));var Qh;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(Qh||(Qh={}));var Zh;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(Zh||(Zh={}));var Wh;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Wh||(Wh={}));var jh;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY"})(jh||(jh={}));var em;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(em||(em={}));var Ws;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Ws||(Ws={}));var tm;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(tm||(tm={}));var Ru;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Ru||(Ru={}));var nm;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(nm||(nm={}));var im;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(im||(im={}));var lm;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(lm||(lm={}));var om;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(om||(om={}));var sm;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE"})(sm||(sm={}));var am;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(am||(am={}));var rm;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(rm||(rm={}));var um;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(um||(um={}));var cm;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(cm||(cm={}));var fm;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(fm||(fm={}));var dm;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(dm||(dm={}));var hm;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(hm||(hm={}));var mm;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(mm||(mm={}));var gm;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(gm||(gm={}));var pm;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(pm||(pm={}));var ym;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(ym||(ym={}));var vm;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(vm||(vm={}));var Tm;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Tm||(Tm={}));var xm;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(xm||(xm={}));var Cm;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Cm||(Cm={}));var Sm;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(Sm||(Sm={}));var Em;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Em||(Em={}));var Al;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Al||(Al={}));class bu{constructor(e){const i={};for(const o of e.headers.entries())i[o[0]]=o[1];this.headers=i,this.responseInternal=e}json(){return this.responseInternal.json()}}class bo{get text(){var e,i,o,a,f,h,m,p;if(((a=(o=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let g="",v=!1;const x=[];for(const S of(p=(m=(h=(f=this.candidates)===null||f===void 0?void 0:f[0])===null||h===void 0?void 0:h.content)===null||m===void 0?void 0:m.parts)!==null&&p!==void 0?p:[]){for(const[M,w]of Object.entries(S))M!=="text"&&M!=="thought"&&(w!==null||w!==void 0)&&x.push(M);if(typeof S.text=="string"){if(typeof S.thought=="boolean"&&S.thought)continue;v=!0,g+=S.text}}return x.length>0&&console.warn(`there are non-text parts ${x} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?g:void 0}get data(){var e,i,o,a,f,h,m,p;if(((a=(o=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let g="";const v=[];for(const x of(p=(m=(h=(f=this.candidates)===null||f===void 0?void 0:f[0])===null||h===void 0?void 0:h.content)===null||m===void 0?void 0:m.parts)!==null&&p!==void 0?p:[]){for(const[S,M]of Object.entries(x))S!=="inlineData"&&(M!==null||M!==void 0)&&v.push(S);x.inlineData&&typeof x.inlineData.data=="string"&&(g+=atob(x.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),g.length>0?btoa(g):void 0}get functionCalls(){var e,i,o,a,f,h,m,p;if(((a=(o=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const g=(p=(m=(h=(f=this.candidates)===null||f===void 0?void 0:f[0])===null||h===void 0?void 0:h.content)===null||m===void 0?void 0:m.parts)===null||p===void 0?void 0:p.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((g==null?void 0:g.length)!==0)return g}get executableCode(){var e,i,o,a,f,h,m,p,g;if(((a=(o=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(p=(m=(h=(f=this.candidates)===null||f===void 0?void 0:f[0])===null||h===void 0?void 0:h.content)===null||m===void 0?void 0:m.parts)===null||p===void 0?void 0:p.filter(x=>x.executableCode).map(x=>x.executableCode).filter(x=>x!==void 0);if((v==null?void 0:v.length)!==0)return(g=v==null?void 0:v[0])===null||g===void 0?void 0:g.code}get codeExecutionResult(){var e,i,o,a,f,h,m,p,g;if(((a=(o=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(p=(m=(h=(f=this.candidates)===null||f===void 0?void 0:f[0])===null||h===void 0?void 0:h.content)===null||m===void 0?void 0:m.parts)===null||p===void 0?void 0:p.filter(x=>x.codeExecutionResult).map(x=>x.codeExecutionResult).filter(x=>x!==void 0);if((v==null?void 0:v.length)!==0)return(g=v==null?void 0:v[0])===null||g===void 0?void 0:g.output}}class Mm{}class _m{}class R0{}class b0{}class Am{}class Nm{}class Rm{}class w0{}class bm{}class wm{}class Dm{}class Lm{}class D0{}class L0{}class U0{}class Um{}class I0{get text(){var e,i,o;let a="",f=!1;const h=[];for(const m of(o=(i=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||i===void 0?void 0:i.parts)!==null&&o!==void 0?o:[]){for(const[p,g]of Object.entries(m))p!=="text"&&p!=="thought"&&g!==null&&h.push(p);if(typeof m.text=="string"){if(typeof m.thought=="boolean"&&m.thought)continue;f=!0,a+=m.text}}return h.length>0&&console.warn(`there are non-text parts ${h} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),f?a:void 0}get data(){var e,i,o;let a="";const f=[];for(const h of(o=(i=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||i===void 0?void 0:i.parts)!==null&&o!==void 0?o:[]){for(const[m,p]of Object.entries(h))m!=="inlineData"&&p!==null&&f.push(m);h.inlineData&&typeof h.inlineData.data=="string"&&(a+=atob(h.inlineData.data))}return f.length>0&&console.warn(`there are non-data parts ${f} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),a.length>0?btoa(a):void 0}}class js{_fromAPIResponse({apiResponse:e,isVertexAI:i}){const o=new js;if(o.name=e.name,o.metadata=e.metadata,o.done=e.done,o.error=e.error,i){const a=e.response;if(a){const f=new bm,h=a.videos;f.generatedVideos=h==null?void 0:h.map(m=>({video:{uri:m.gcsUri,videoBytes:m.bytesBase64Encoded?Nu(m.bytesBase64Encoded):void 0,mimeType:m.mimeType}})),f.raiMediaFilteredCount=a.raiMediaFilteredCount,f.raiMediaFilteredReasons=a.raiMediaFilteredReasons,o.response=f}}else{const a=e.response;if(a){const f=new bm,h=a.generateVideoResponse,m=h==null?void 0:h.generatedSamples;f.generatedVideos=m==null?void 0:m.map(p=>{const g=p.video;return{video:{uri:g==null?void 0:g.uri,videoBytes:g!=null&&g.encodedVideo?Nu(g==null?void 0:g.encodedVideo):void 0,mimeType:p.encoding}}}),f.raiMediaFilteredCount=a.raiMediaFilteredCount,f.raiMediaFilteredReasons=a.raiMediaFilteredReasons,o.response=f}}return o}}class k0{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function et(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const i=e.split("/",2);return`publishers/${i[0]}/models/${i[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function Cg(t,e){const i=et(t,e);return i?i.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${i}`:i.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${i}`:i:""}function Sg(t){return Array.isArray(t)?t.map(e=>ea(e)):[ea(t)]}function ea(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function Eg(t){const e=ea(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Mg(t){const e=ea(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Im(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function _g(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>Im(e)):[Im(t)]}function wu(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function km(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function Bm(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function qt(t){if(t==null)throw new Error("ContentUnion is required");return wu(t)?t:{role:"user",parts:_g(t)}}function Ag(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(i=>{const o=qt(i);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]});if(t.isVertexAI()){const i=qt(e);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]}return Array.isArray(e)?e.map(i=>qt(i)):[qt(e)]}function dn(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(km(t)||Bm(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[qt(t)]}const e=[],i=[],o=wu(t[0]);for(const a of t){const f=wu(a);if(f!=o)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(f)e.push(a);else{if(km(a)||Bm(a))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");i.push(a)}}return o||e.push({role:"user",parts:_g(i)}),e}function B0(t,e){t.includes("null")&&(e.nullable=!0);const i=t.filter(o=>o!=="null");if(i.length===1)e.type=Object.values(vi).includes(i[0].toUpperCase())?i[0].toUpperCase():vi.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const o of i)e.anyOf.push({type:Object.values(vi).includes(o.toUpperCase())?o.toUpperCase():vi.TYPE_UNSPECIFIED})}}function Nl(t){const e={},i=["items"],o=["anyOf"],a=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const f=t.anyOf;f!=null&&f.length==2&&(f[0].type==="null"?(e.nullable=!0,t=f[1]):f[1].type==="null"&&(e.nullable=!0,t=f[0])),t.type instanceof Array&&B0(t.type,e);for(const[h,m]of Object.entries(t))if(m!=null)if(h=="type"){if(m==="null")throw new Error("type: null can not be the only possible type for the field.");if(m instanceof Array)continue;e.type=Object.values(vi).includes(m.toUpperCase())?m.toUpperCase():vi.TYPE_UNSPECIFIED}else if(i.includes(h))e[h]=Nl(m);else if(o.includes(h)){const p=[];for(const g of m){if(g.type=="null"){e.nullable=!0;continue}p.push(Nl(g))}e[h]=p}else if(a.includes(h)){const p={};for(const[g,v]of Object.entries(m))p[g]=Nl(v);e[h]=p}else{if(h==="additionalProperties")continue;e[h]=m}return e}function zu(t){return Nl(t)}function Fu(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function Ou(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function wl(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Nl(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Nl(e.response));return t}function Dl(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const i of t)e.push(i);return e}function P0(t,e,i,o=1){const a=!e.startsWith(`${i}/`)&&e.split("/").length===o;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${i}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:a?`projects/${t.getProject()}/locations/${t.getLocation()}/${i}/${e}`:e:a?`${i}/${e}`:e}function $n(t,e){if(typeof e!="string")throw new Error("name must be a string");return P0(t,e,"cachedContents")}function Ng(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function qi(t){return Nu(t)}function V0(t){return t!=null&&typeof t=="object"&&"name"in t}function q0(t){return t!=null&&typeof t=="object"&&"video"in t}function G0(t){return t!=null&&typeof t=="object"&&"uri"in t}function Rg(t){var e;let i;if(V0(t)&&(i=t.name),!(G0(t)&&(i=t.uri,i===void 0))&&!(q0(t)&&(i=(e=t.video)===null||e===void 0?void 0:e.uri,i===void 0))){if(typeof t=="string"&&(i=t),i===void 0)throw new Error("Could not extract file name from the provided input.");if(i.startsWith("https://")){const a=i.split("files/")[1].match(/[a-z0-9]+/);if(a===null)throw new Error(`Could not extract file name from URI ${i}`);i=a[0]}else i.startsWith("files/")&&(i=i.split("files/")[1]);return i}}function bg(t,e){let i;return t.isVertexAI()?i=e?"publishers/google/models":"models":i=e?"models":"tunedModels",i}function wg(t){for(const e of["models","tunedModels","publisherModels"])if(H0(t,e))return t[e];return[]}function H0(t,e){return t!==null&&typeof t=="object"&&e in t}function z0(t,e={}){const i=t,o={name:i.name,description:i.description,parametersJsonSchema:i.inputSchema};return e.behavior&&(o.behavior=e.behavior),{functionDeclarations:[o]}}function F0(t,e={}){const i=[],o=new Set;for(const a of t){const f=a.name;if(o.has(f))throw new Error(`Duplicate function name ${f} found in MCP tools. Please ensure function names are unique.`);o.add(f);const h=z0(a,e);h.functionDeclarations&&i.push(...h.functionDeclarations)}return{functionDeclarations:i}}function Dg(t,e){if(typeof e!="string"&&!Array.isArray(e)){if(t&&t.isVertexAI()){if(e.gcsUri&&e.bigqueryUri)throw new Error("Only one of `gcsUri` or `bigqueryUri` can be set.");if(!e.gcsUri&&!e.bigqueryUri)throw new Error("One of `gcsUri` or `bigqueryUri` must be set.")}else{if(e.inlinedRequests&&e.fileName)throw new Error("Only one of `inlinedRequests` or `fileName` can be set.");if(!e.inlinedRequests&&!e.fileName)throw new Error("One of `inlinedRequests` or `fileName` must be set.")}return e}else{if(Array.isArray(e))return{inlinedRequests:e};if(typeof e=="string"){if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:[e]};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};if(e.startsWith("files/"))return{fileName:e}}}throw new Error(`Unsupported source: ${e}`)}function O0(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function Ll(t,e){const i=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(i))return i.split("/").pop();throw new Error(`Invalid batch job name: ${i}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(i))return i.split("/").pop();if(/^\d+$/.test(i))return i;throw new Error(`Invalid batch job name: ${i}.`)}function Lg(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Y0(t){const e={},i=r(t,["fps"]);i!=null&&u(e,["fps"],i);const o=r(t,["endOffset"]);o!=null&&u(e,["endOffset"],o);const a=r(t,["startOffset"]);return a!=null&&u(e,["startOffset"],a),e}function J0(t){const e={};if(r(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=r(t,["data"]);i!=null&&u(e,["data"],i);const o=r(t,["mimeType"]);return o!=null&&u(e,["mimeType"],o),e}function $0(t){const e={};if(r(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=r(t,["fileUri"]);i!=null&&u(e,["fileUri"],i);const o=r(t,["mimeType"]);return o!=null&&u(e,["mimeType"],o),e}function X0(t){const e={},i=r(t,["videoMetadata"]);i!=null&&u(e,["videoMetadata"],Y0(i));const o=r(t,["thought"]);o!=null&&u(e,["thought"],o);const a=r(t,["inlineData"]);a!=null&&u(e,["inlineData"],J0(a));const f=r(t,["fileData"]);f!=null&&u(e,["fileData"],$0(f));const h=r(t,["thoughtSignature"]);h!=null&&u(e,["thoughtSignature"],h);const m=r(t,["codeExecutionResult"]);m!=null&&u(e,["codeExecutionResult"],m);const p=r(t,["executableCode"]);p!=null&&u(e,["executableCode"],p);const g=r(t,["functionCall"]);g!=null&&u(e,["functionCall"],g);const v=r(t,["functionResponse"]);v!=null&&u(e,["functionResponse"],v);const x=r(t,["text"]);return x!=null&&u(e,["text"],x),e}function Ug(t){const e={},i=r(t,["parts"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(f=>X0(f))),u(e,["parts"],a)}const o=r(t,["role"]);return o!=null&&u(e,["role"],o),e}function K0(t){const e={},i=r(t,["anyOf"]);i!=null&&u(e,["anyOf"],i);const o=r(t,["default"]);o!=null&&u(e,["default"],o);const a=r(t,["description"]);a!=null&&u(e,["description"],a);const f=r(t,["enum"]);f!=null&&u(e,["enum"],f);const h=r(t,["example"]);h!=null&&u(e,["example"],h);const m=r(t,["format"]);m!=null&&u(e,["format"],m);const p=r(t,["items"]);p!=null&&u(e,["items"],p);const g=r(t,["maxItems"]);g!=null&&u(e,["maxItems"],g);const v=r(t,["maxLength"]);v!=null&&u(e,["maxLength"],v);const x=r(t,["maxProperties"]);x!=null&&u(e,["maxProperties"],x);const S=r(t,["maximum"]);S!=null&&u(e,["maximum"],S);const M=r(t,["minItems"]);M!=null&&u(e,["minItems"],M);const w=r(t,["minLength"]);w!=null&&u(e,["minLength"],w);const D=r(t,["minProperties"]);D!=null&&u(e,["minProperties"],D);const k=r(t,["minimum"]);k!=null&&u(e,["minimum"],k);const q=r(t,["nullable"]);q!=null&&u(e,["nullable"],q);const N=r(t,["pattern"]);N!=null&&u(e,["pattern"],N);const F=r(t,["properties"]);F!=null&&u(e,["properties"],F);const X=r(t,["propertyOrdering"]);X!=null&&u(e,["propertyOrdering"],X);const G=r(t,["required"]);G!=null&&u(e,["required"],G);const $=r(t,["title"]);$!=null&&u(e,["title"],$);const ie=r(t,["type"]);return ie!=null&&u(e,["type"],ie),e}function Q0(t){const e={};if(r(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=r(t,["category"]);i!=null&&u(e,["category"],i);const o=r(t,["threshold"]);return o!=null&&u(e,["threshold"],o),e}function Z0(t){const e={},i=r(t,["behavior"]);i!=null&&u(e,["behavior"],i);const o=r(t,["description"]);o!=null&&u(e,["description"],o);const a=r(t,["name"]);a!=null&&u(e,["name"],a);const f=r(t,["parameters"]);f!=null&&u(e,["parameters"],f);const h=r(t,["parametersJsonSchema"]);h!=null&&u(e,["parametersJsonSchema"],h);const m=r(t,["response"]);m!=null&&u(e,["response"],m);const p=r(t,["responseJsonSchema"]);return p!=null&&u(e,["responseJsonSchema"],p),e}function W0(t){const e={},i=r(t,["startTime"]);i!=null&&u(e,["startTime"],i);const o=r(t,["endTime"]);return o!=null&&u(e,["endTime"],o),e}function j0(t){const e={},i=r(t,["timeRangeFilter"]);return i!=null&&u(e,["timeRangeFilter"],W0(i)),e}function ev(t){const e={},i=r(t,["mode"]);i!=null&&u(e,["mode"],i);const o=r(t,["dynamicThreshold"]);return o!=null&&u(e,["dynamicThreshold"],o),e}function tv(t){const e={},i=r(t,["dynamicRetrievalConfig"]);return i!=null&&u(e,["dynamicRetrievalConfig"],ev(i)),e}function nv(){return{}}function iv(t){const e={},i=r(t,["functionDeclarations"]);if(i!=null){let p=i;Array.isArray(p)&&(p=p.map(g=>Z0(g))),u(e,["functionDeclarations"],p)}if(r(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=r(t,["googleSearch"]);o!=null&&u(e,["googleSearch"],j0(o));const a=r(t,["googleSearchRetrieval"]);if(a!=null&&u(e,["googleSearchRetrieval"],tv(a)),r(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(r(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");r(t,["urlContext"])!=null&&u(e,["urlContext"],nv());const h=r(t,["codeExecution"]);h!=null&&u(e,["codeExecution"],h);const m=r(t,["computerUse"]);return m!=null&&u(e,["computerUse"],m),e}function lv(t){const e={},i=r(t,["mode"]);i!=null&&u(e,["mode"],i);const o=r(t,["allowedFunctionNames"]);return o!=null&&u(e,["allowedFunctionNames"],o),e}function ov(t){const e={},i=r(t,["latitude"]);i!=null&&u(e,["latitude"],i);const o=r(t,["longitude"]);return o!=null&&u(e,["longitude"],o),e}function sv(t){const e={},i=r(t,["latLng"]);i!=null&&u(e,["latLng"],ov(i));const o=r(t,["languageCode"]);return o!=null&&u(e,["languageCode"],o),e}function av(t){const e={},i=r(t,["functionCallingConfig"]);i!=null&&u(e,["functionCallingConfig"],lv(i));const o=r(t,["retrievalConfig"]);return o!=null&&u(e,["retrievalConfig"],sv(o)),e}function rv(t){const e={},i=r(t,["voiceName"]);return i!=null&&u(e,["voiceName"],i),e}function Ig(t){const e={},i=r(t,["prebuiltVoiceConfig"]);return i!=null&&u(e,["prebuiltVoiceConfig"],rv(i)),e}function uv(t){const e={},i=r(t,["speaker"]);i!=null&&u(e,["speaker"],i);const o=r(t,["voiceConfig"]);return o!=null&&u(e,["voiceConfig"],Ig(o)),e}function cv(t){const e={},i=r(t,["speakerVoiceConfigs"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>uv(a))),u(e,["speakerVoiceConfigs"],o)}return e}function fv(t){const e={},i=r(t,["voiceConfig"]);i!=null&&u(e,["voiceConfig"],Ig(i));const o=r(t,["multiSpeakerVoiceConfig"]);o!=null&&u(e,["multiSpeakerVoiceConfig"],cv(o));const a=r(t,["languageCode"]);return a!=null&&u(e,["languageCode"],a),e}function dv(t){const e={},i=r(t,["includeThoughts"]);i!=null&&u(e,["includeThoughts"],i);const o=r(t,["thinkingBudget"]);return o!=null&&u(e,["thinkingBudget"],o),e}function hv(t,e,i){const o={},a=r(e,["systemInstruction"]);i!==void 0&&a!=null&&u(i,["systemInstruction"],Ug(qt(a)));const f=r(e,["temperature"]);f!=null&&u(o,["temperature"],f);const h=r(e,["topP"]);h!=null&&u(o,["topP"],h);const m=r(e,["topK"]);m!=null&&u(o,["topK"],m);const p=r(e,["candidateCount"]);p!=null&&u(o,["candidateCount"],p);const g=r(e,["maxOutputTokens"]);g!=null&&u(o,["maxOutputTokens"],g);const v=r(e,["stopSequences"]);v!=null&&u(o,["stopSequences"],v);const x=r(e,["responseLogprobs"]);x!=null&&u(o,["responseLogprobs"],x);const S=r(e,["logprobs"]);S!=null&&u(o,["logprobs"],S);const M=r(e,["presencePenalty"]);M!=null&&u(o,["presencePenalty"],M);const w=r(e,["frequencyPenalty"]);w!=null&&u(o,["frequencyPenalty"],w);const D=r(e,["seed"]);D!=null&&u(o,["seed"],D);const k=r(e,["responseMimeType"]);k!=null&&u(o,["responseMimeType"],k);const q=r(e,["responseSchema"]);q!=null&&u(o,["responseSchema"],K0(zu(q)));const N=r(e,["responseJsonSchema"]);if(N!=null&&u(o,["responseJsonSchema"],N),r(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(r(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const F=r(e,["safetySettings"]);if(i!==void 0&&F!=null){let me=F;Array.isArray(me)&&(me=me.map(pe=>Q0(pe))),u(i,["safetySettings"],me)}const X=r(e,["tools"]);if(i!==void 0&&X!=null){let me=Dl(X);Array.isArray(me)&&(me=me.map(pe=>iv(wl(pe)))),u(i,["tools"],me)}const G=r(e,["toolConfig"]);if(i!==void 0&&G!=null&&u(i,["toolConfig"],av(G)),r(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const $=r(e,["cachedContent"]);i!==void 0&&$!=null&&u(i,["cachedContent"],$n(t,$));const ie=r(e,["responseModalities"]);ie!=null&&u(o,["responseModalities"],ie);const se=r(e,["mediaResolution"]);se!=null&&u(o,["mediaResolution"],se);const ne=r(e,["speechConfig"]);if(ne!=null&&u(o,["speechConfig"],fv(Fu(ne))),r(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const he=r(e,["thinkingConfig"]);return he!=null&&u(o,["thinkingConfig"],dv(he)),o}function mv(t,e){const i={},o=r(e,["model"]);o!=null&&u(i,["request","model"],et(t,o));const a=r(e,["contents"]);if(a!=null){let h=dn(a);Array.isArray(h)&&(h=h.map(m=>Ug(m))),u(i,["request","contents"],h)}const f=r(e,["config"]);return f!=null&&u(i,["request","generationConfig"],hv(t,f,i)),i}function gv(t,e){const i={};if(r(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(r(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(r(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const o=r(e,["fileName"]);o!=null&&u(i,["fileName"],o);const a=r(e,["inlinedRequests"]);if(a!=null){let f=a;Array.isArray(f)&&(f=f.map(h=>mv(t,h))),u(i,["requests","requests"],f)}return i}function pv(t,e){const i={},o=r(t,["displayName"]);if(e!==void 0&&o!=null&&u(e,["batch","displayName"],o),r(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return i}function yv(t,e){const i={},o=r(e,["model"]);o!=null&&u(i,["_url","model"],et(t,o));const a=r(e,["src"]);a!=null&&u(i,["batch","inputConfig"],gv(t,Dg(t,a)));const f=r(e,["config"]);return f!=null&&u(i,["config"],pv(f,i)),i}function vv(t,e){const i={},o=r(e,["name"]);o!=null&&u(i,["_url","name"],Ll(t,o));const a=r(e,["config"]);return a!=null&&u(i,["config"],a),i}function Tv(t,e){const i={},o=r(e,["name"]);o!=null&&u(i,["_url","name"],Ll(t,o));const a=r(e,["config"]);return a!=null&&u(i,["config"],a),i}function xv(t,e){const i={},o=r(t,["pageSize"]);e!==void 0&&o!=null&&u(e,["_query","pageSize"],o);const a=r(t,["pageToken"]);if(e!==void 0&&a!=null&&u(e,["_query","pageToken"],a),r(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return i}function Cv(t){const e={},i=r(t,["config"]);return i!=null&&u(e,["config"],xv(i,e)),e}function Sv(t,e){const i={},o=r(e,["name"]);o!=null&&u(i,["_url","name"],Ll(t,o));const a=r(e,["config"]);return a!=null&&u(i,["config"],a),i}function Ev(t){const e={},i=r(t,["format"]);i!=null&&u(e,["instancesFormat"],i);const o=r(t,["gcsUri"]);o!=null&&u(e,["gcsSource","uris"],o);const a=r(t,["bigqueryUri"]);if(a!=null&&u(e,["bigquerySource","inputUri"],a),r(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(r(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function Mv(t){const e={},i=r(t,["format"]);i!=null&&u(e,["predictionsFormat"],i);const o=r(t,["gcsUri"]);o!=null&&u(e,["gcsDestination","outputUriPrefix"],o);const a=r(t,["bigqueryUri"]);if(a!=null&&u(e,["bigqueryDestination","outputUri"],a),r(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(r(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");return e}function _v(t,e){const i={},o=r(t,["displayName"]);e!==void 0&&o!=null&&u(e,["displayName"],o);const a=r(t,["dest"]);return e!==void 0&&a!=null&&u(e,["outputConfig"],Mv(O0(a))),i}function Av(t,e){const i={},o=r(e,["model"]);o!=null&&u(i,["model"],et(t,o));const a=r(e,["src"]);a!=null&&u(i,["inputConfig"],Ev(Dg(t,a)));const f=r(e,["config"]);return f!=null&&u(i,["config"],_v(f,i)),i}function Nv(t,e){const i={},o=r(e,["name"]);o!=null&&u(i,["_url","name"],Ll(t,o));const a=r(e,["config"]);return a!=null&&u(i,["config"],a),i}function Rv(t,e){const i={},o=r(e,["name"]);o!=null&&u(i,["_url","name"],Ll(t,o));const a=r(e,["config"]);return a!=null&&u(i,["config"],a),i}function bv(t,e){const i={},o=r(t,["pageSize"]);e!==void 0&&o!=null&&u(e,["_query","pageSize"],o);const a=r(t,["pageToken"]);e!==void 0&&a!=null&&u(e,["_query","pageToken"],a);const f=r(t,["filter"]);return e!==void 0&&f!=null&&u(e,["_query","filter"],f),i}function wv(t){const e={},i=r(t,["config"]);return i!=null&&u(e,["config"],bv(i,e)),e}function Dv(t,e){const i={},o=r(e,["name"]);o!=null&&u(i,["_url","name"],Ll(t,o));const a=r(e,["config"]);return a!=null&&u(i,["config"],a),i}function Lv(t){const e={},i=r(t,["fps"]);i!=null&&u(e,["fps"],i);const o=r(t,["endOffset"]);o!=null&&u(e,["endOffset"],o);const a=r(t,["startOffset"]);return a!=null&&u(e,["startOffset"],a),e}function Uv(t){const e={},i=r(t,["data"]);i!=null&&u(e,["data"],i);const o=r(t,["mimeType"]);return o!=null&&u(e,["mimeType"],o),e}function Iv(t){const e={},i=r(t,["fileUri"]);i!=null&&u(e,["fileUri"],i);const o=r(t,["mimeType"]);return o!=null&&u(e,["mimeType"],o),e}function kv(t){const e={},i=r(t,["videoMetadata"]);i!=null&&u(e,["videoMetadata"],Lv(i));const o=r(t,["thought"]);o!=null&&u(e,["thought"],o);const a=r(t,["inlineData"]);a!=null&&u(e,["inlineData"],Uv(a));const f=r(t,["fileData"]);f!=null&&u(e,["fileData"],Iv(f));const h=r(t,["thoughtSignature"]);h!=null&&u(e,["thoughtSignature"],h);const m=r(t,["codeExecutionResult"]);m!=null&&u(e,["codeExecutionResult"],m);const p=r(t,["executableCode"]);p!=null&&u(e,["executableCode"],p);const g=r(t,["functionCall"]);g!=null&&u(e,["functionCall"],g);const v=r(t,["functionResponse"]);v!=null&&u(e,["functionResponse"],v);const x=r(t,["text"]);return x!=null&&u(e,["text"],x),e}function Bv(t){const e={},i=r(t,["parts"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(f=>kv(f))),u(e,["parts"],a)}const o=r(t,["role"]);return o!=null&&u(e,["role"],o),e}function Pv(t){const e={},i=r(t,["citationSources"]);return i!=null&&u(e,["citations"],i),e}function Vv(t){const e={},i=r(t,["retrievedUrl"]);i!=null&&u(e,["retrievedUrl"],i);const o=r(t,["urlRetrievalStatus"]);return o!=null&&u(e,["urlRetrievalStatus"],o),e}function qv(t){const e={},i=r(t,["urlMetadata"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>Vv(a))),u(e,["urlMetadata"],o)}return e}function Gv(t){const e={},i=r(t,["content"]);i!=null&&u(e,["content"],Bv(i));const o=r(t,["citationMetadata"]);o!=null&&u(e,["citationMetadata"],Pv(o));const a=r(t,["tokenCount"]);a!=null&&u(e,["tokenCount"],a);const f=r(t,["finishReason"]);f!=null&&u(e,["finishReason"],f);const h=r(t,["urlContextMetadata"]);h!=null&&u(e,["urlContextMetadata"],qv(h));const m=r(t,["avgLogprobs"]);m!=null&&u(e,["avgLogprobs"],m);const p=r(t,["groundingMetadata"]);p!=null&&u(e,["groundingMetadata"],p);const g=r(t,["index"]);g!=null&&u(e,["index"],g);const v=r(t,["logprobsResult"]);v!=null&&u(e,["logprobsResult"],v);const x=r(t,["safetyRatings"]);return x!=null&&u(e,["safetyRatings"],x),e}function Hv(t){const e={},i=r(t,["sdkHttpResponse"]);i!=null&&u(e,["sdkHttpResponse"],i);const o=r(t,["candidates"]);if(o!=null){let m=o;Array.isArray(m)&&(m=m.map(p=>Gv(p))),u(e,["candidates"],m)}const a=r(t,["modelVersion"]);a!=null&&u(e,["modelVersion"],a);const f=r(t,["promptFeedback"]);f!=null&&u(e,["promptFeedback"],f);const h=r(t,["usageMetadata"]);return h!=null&&u(e,["usageMetadata"],h),e}function kg(t){const e={},i=r(t,["details"]);i!=null&&u(e,["details"],i);const o=r(t,["code"]);o!=null&&u(e,["code"],o);const a=r(t,["message"]);return a!=null&&u(e,["message"],a),e}function zv(t){const e={},i=r(t,["response"]);i!=null&&u(e,["response"],Hv(i));const o=r(t,["error"]);return o!=null&&u(e,["error"],kg(o)),e}function Fv(t){const e={},i=r(t,["responsesFile"]);i!=null&&u(e,["fileName"],i);const o=r(t,["inlinedResponses","inlinedResponses"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(f=>zv(f))),u(e,["inlinedResponses"],a)}return e}function Du(t){const e={},i=r(t,["name"]);i!=null&&u(e,["name"],i);const o=r(t,["metadata","displayName"]);o!=null&&u(e,["displayName"],o);const a=r(t,["metadata","state"]);a!=null&&u(e,["state"],Lg(a));const f=r(t,["metadata","createTime"]);f!=null&&u(e,["createTime"],f);const h=r(t,["metadata","endTime"]);h!=null&&u(e,["endTime"],h);const m=r(t,["metadata","updateTime"]);m!=null&&u(e,["updateTime"],m);const p=r(t,["metadata","model"]);p!=null&&u(e,["model"],p);const g=r(t,["metadata","output"]);return g!=null&&u(e,["dest"],Fv(g)),e}function Ov(t){const e={},i=r(t,["sdkHttpResponse"]);i!=null&&u(e,["sdkHttpResponse"],i);const o=r(t,["nextPageToken"]);o!=null&&u(e,["nextPageToken"],o);const a=r(t,["operations"]);if(a!=null){let f=a;Array.isArray(f)&&(f=f.map(h=>Du(h))),u(e,["batchJobs"],f)}return e}function Yv(t){const e={},i=r(t,["name"]);i!=null&&u(e,["name"],i);const o=r(t,["done"]);o!=null&&u(e,["done"],o);const a=r(t,["error"]);return a!=null&&u(e,["error"],kg(a)),e}function Bg(t){const e={},i=r(t,["details"]);i!=null&&u(e,["details"],i);const o=r(t,["code"]);o!=null&&u(e,["code"],o);const a=r(t,["message"]);return a!=null&&u(e,["message"],a),e}function Jv(t){const e={},i=r(t,["instancesFormat"]);i!=null&&u(e,["format"],i);const o=r(t,["gcsSource","uris"]);o!=null&&u(e,["gcsUri"],o);const a=r(t,["bigquerySource","inputUri"]);return a!=null&&u(e,["bigqueryUri"],a),e}function $v(t){const e={},i=r(t,["predictionsFormat"]);i!=null&&u(e,["format"],i);const o=r(t,["gcsDestination","outputUriPrefix"]);o!=null&&u(e,["gcsUri"],o);const a=r(t,["bigqueryDestination","outputUri"]);return a!=null&&u(e,["bigqueryUri"],a),e}function Lu(t){const e={},i=r(t,["name"]);i!=null&&u(e,["name"],i);const o=r(t,["displayName"]);o!=null&&u(e,["displayName"],o);const a=r(t,["state"]);a!=null&&u(e,["state"],Lg(a));const f=r(t,["error"]);f!=null&&u(e,["error"],Bg(f));const h=r(t,["createTime"]);h!=null&&u(e,["createTime"],h);const m=r(t,["startTime"]);m!=null&&u(e,["startTime"],m);const p=r(t,["endTime"]);p!=null&&u(e,["endTime"],p);const g=r(t,["updateTime"]);g!=null&&u(e,["updateTime"],g);const v=r(t,["model"]);v!=null&&u(e,["model"],v);const x=r(t,["inputConfig"]);x!=null&&u(e,["src"],Jv(x));const S=r(t,["outputConfig"]);return S!=null&&u(e,["dest"],$v(S)),e}function Xv(t){const e={},i=r(t,["sdkHttpResponse"]);i!=null&&u(e,["sdkHttpResponse"],i);const o=r(t,["nextPageToken"]);o!=null&&u(e,["nextPageToken"],o);const a=r(t,["batchPredictionJobs"]);if(a!=null){let f=a;Array.isArray(f)&&(f=f.map(h=>Lu(h))),u(e,["batchJobs"],f)}return e}function Kv(t){const e={},i=r(t,["name"]);i!=null&&u(e,["name"],i);const o=r(t,["done"]);o!=null&&u(e,["done"],o);const a=r(t,["error"]);return a!=null&&u(e,["error"],Bg(a)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Pi;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(Pi||(Pi={}));class Io{constructor(e,i,o,a){this.pageInternal=[],this.paramsInternal={},this.requestInternal=i,this.init(e,o,a)}init(e,i,o){var a,f;this.nameInternal=e,this.pageInternal=i[this.nameInternal]||[],this.sdkHttpResponseInternal=i==null?void 0:i.sdkHttpResponse,this.idxInternal=0;let h={config:{}};!o||Object.keys(o).length===0?h={config:{}}:typeof o=="object"?h=Object.assign({},o):h=o,h.config&&(h.config.pageToken=i.nextPageToken),this.paramsInternal=h,this.pageInternalSize=(f=(a=h.config)===null||a===void 0?void 0:a.pageSize)!==null&&f!==void 0?f:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Qv extends Vi{constructor(e){super(),this.apiClient=e,this.create=async i=>{if(this.apiClient.isVertexAI()){const a=Date.now().toString();if(Array.isArray(i.src))throw new Error("InlinedRequest[] is not supported in Vertex AI. Please use Google Cloud Storage URI or BigQuery URI instead.");if(i.config=i.config||{},i.config.displayName===void 0&&(i.config.displayName="genaiBatchJob_${timestampStr}"),i.config.dest===void 0&&typeof i.src=="string")if(i.src.startsWith("gs://")&&i.src.endsWith(".jsonl"))i.config.dest=`${i.src.slice(0,-6)}/dest`;else if(i.src.startsWith("bq://"))i.config.dest=`${i.src}_dest_${a}`;else throw new Error("Unsupported source:"+i.src)}return await this.createInternal(i)},this.list=async(i={})=>new Io(Pi.PAGED_ITEM_BATCH_JOBS,o=>this.listInternal(o),await this.listInternal(i),i)}async createInternal(e){var i,o,a,f;let h,m="",p={};if(this.apiClient.isVertexAI()){const g=Av(this.apiClient,e);return m=xe("batchPredictionJobs",g._url),p=g._query,delete g.config,delete g._url,delete g._query,h=this.apiClient.request({path:m,queryParams:p,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),h.then(v=>Lu(v))}else{const g=yv(this.apiClient,e);return m=xe("{model}:batchGenerateContent",g._url),p=g._query,delete g.config,delete g._url,delete g._query,h=this.apiClient.request({path:m,queryParams:p,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),h.then(v=>Du(v))}}async get(e){var i,o,a,f;let h,m="",p={};if(this.apiClient.isVertexAI()){const g=Nv(this.apiClient,e);return m=xe("batchPredictionJobs/{name}",g._url),p=g._query,delete g.config,delete g._url,delete g._query,h=this.apiClient.request({path:m,queryParams:p,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),h.then(v=>Lu(v))}else{const g=vv(this.apiClient,e);return m=xe("batches/{name}",g._url),p=g._query,delete g.config,delete g._url,delete g._query,h=this.apiClient.request({path:m,queryParams:p,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),h.then(v=>Du(v))}}async cancel(e){var i,o,a,f;let h="",m={};if(this.apiClient.isVertexAI()){const p=Rv(this.apiClient,e);h=xe("batchPredictionJobs/{name}:cancel",p._url),m=p._query,delete p.config,delete p._url,delete p._query,await this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}else{const p=Tv(this.apiClient,e);h=xe("batches/{name}:cancel",p._url),m=p._query,delete p.config,delete p._url,delete p._query,await this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal})}}async listInternal(e){var i,o,a,f;let h,m="",p={};if(this.apiClient.isVertexAI()){const g=wv(e);return m=xe("batchPredictionJobs",g._url),p=g._query,delete g.config,delete g._url,delete g._query,h=this.apiClient.request({path:m,queryParams:p,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(x=>{const S=x;return S.sdkHttpResponse={headers:v.headers},S})),h.then(v=>{const x=Xv(v),S=new Um;return Object.assign(S,x),S})}else{const g=Cv(e);return m=xe("batches",g._url),p=g._query,delete g.config,delete g._url,delete g._query,h=this.apiClient.request({path:m,queryParams:p,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json().then(x=>{const S=x;return S.sdkHttpResponse={headers:v.headers},S})),h.then(v=>{const x=Ov(v),S=new Um;return Object.assign(S,x),S})}}async delete(e){var i,o,a,f;let h,m="",p={};if(this.apiClient.isVertexAI()){const g=Dv(this.apiClient,e);return m=xe("batchPredictionJobs/{name}",g._url),p=g._query,delete g.config,delete g._url,delete g._query,h=this.apiClient.request({path:m,queryParams:p,body:JSON.stringify(g),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),h.then(v=>Kv(v))}else{const g=Sv(this.apiClient,e);return m=xe("batches/{name}",g._url),p=g._query,delete g.config,delete g._url,delete g._query,h=this.apiClient.request({path:m,queryParams:p,body:JSON.stringify(g),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),h.then(v=>Yv(v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Zv(t){const e={},i=r(t,["fps"]);i!=null&&u(e,["fps"],i);const o=r(t,["endOffset"]);o!=null&&u(e,["endOffset"],o);const a=r(t,["startOffset"]);return a!=null&&u(e,["startOffset"],a),e}function Wv(t){const e={};if(r(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=r(t,["data"]);i!=null&&u(e,["data"],i);const o=r(t,["mimeType"]);return o!=null&&u(e,["mimeType"],o),e}function jv(t){const e={};if(r(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=r(t,["fileUri"]);i!=null&&u(e,["fileUri"],i);const o=r(t,["mimeType"]);return o!=null&&u(e,["mimeType"],o),e}function eT(t){const e={},i=r(t,["videoMetadata"]);i!=null&&u(e,["videoMetadata"],Zv(i));const o=r(t,["thought"]);o!=null&&u(e,["thought"],o);const a=r(t,["inlineData"]);a!=null&&u(e,["inlineData"],Wv(a));const f=r(t,["fileData"]);f!=null&&u(e,["fileData"],jv(f));const h=r(t,["thoughtSignature"]);h!=null&&u(e,["thoughtSignature"],h);const m=r(t,["codeExecutionResult"]);m!=null&&u(e,["codeExecutionResult"],m);const p=r(t,["executableCode"]);p!=null&&u(e,["executableCode"],p);const g=r(t,["functionCall"]);g!=null&&u(e,["functionCall"],g);const v=r(t,["functionResponse"]);v!=null&&u(e,["functionResponse"],v);const x=r(t,["text"]);return x!=null&&u(e,["text"],x),e}function Pm(t){const e={},i=r(t,["parts"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(f=>eT(f))),u(e,["parts"],a)}const o=r(t,["role"]);return o!=null&&u(e,["role"],o),e}function tT(t){const e={},i=r(t,["behavior"]);i!=null&&u(e,["behavior"],i);const o=r(t,["description"]);o!=null&&u(e,["description"],o);const a=r(t,["name"]);a!=null&&u(e,["name"],a);const f=r(t,["parameters"]);f!=null&&u(e,["parameters"],f);const h=r(t,["parametersJsonSchema"]);h!=null&&u(e,["parametersJsonSchema"],h);const m=r(t,["response"]);m!=null&&u(e,["response"],m);const p=r(t,["responseJsonSchema"]);return p!=null&&u(e,["responseJsonSchema"],p),e}function nT(t){const e={},i=r(t,["startTime"]);i!=null&&u(e,["startTime"],i);const o=r(t,["endTime"]);return o!=null&&u(e,["endTime"],o),e}function iT(t){const e={},i=r(t,["timeRangeFilter"]);return i!=null&&u(e,["timeRangeFilter"],nT(i)),e}function lT(t){const e={},i=r(t,["mode"]);i!=null&&u(e,["mode"],i);const o=r(t,["dynamicThreshold"]);return o!=null&&u(e,["dynamicThreshold"],o),e}function oT(t){const e={},i=r(t,["dynamicRetrievalConfig"]);return i!=null&&u(e,["dynamicRetrievalConfig"],lT(i)),e}function sT(){return{}}function aT(t){const e={},i=r(t,["functionDeclarations"]);if(i!=null){let p=i;Array.isArray(p)&&(p=p.map(g=>tT(g))),u(e,["functionDeclarations"],p)}if(r(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=r(t,["googleSearch"]);o!=null&&u(e,["googleSearch"],iT(o));const a=r(t,["googleSearchRetrieval"]);if(a!=null&&u(e,["googleSearchRetrieval"],oT(a)),r(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(r(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");r(t,["urlContext"])!=null&&u(e,["urlContext"],sT());const h=r(t,["codeExecution"]);h!=null&&u(e,["codeExecution"],h);const m=r(t,["computerUse"]);return m!=null&&u(e,["computerUse"],m),e}function rT(t){const e={},i=r(t,["mode"]);i!=null&&u(e,["mode"],i);const o=r(t,["allowedFunctionNames"]);return o!=null&&u(e,["allowedFunctionNames"],o),e}function uT(t){const e={},i=r(t,["latitude"]);i!=null&&u(e,["latitude"],i);const o=r(t,["longitude"]);return o!=null&&u(e,["longitude"],o),e}function cT(t){const e={},i=r(t,["latLng"]);i!=null&&u(e,["latLng"],uT(i));const o=r(t,["languageCode"]);return o!=null&&u(e,["languageCode"],o),e}function fT(t){const e={},i=r(t,["functionCallingConfig"]);i!=null&&u(e,["functionCallingConfig"],rT(i));const o=r(t,["retrievalConfig"]);return o!=null&&u(e,["retrievalConfig"],cT(o)),e}function dT(t,e){const i={},o=r(t,["ttl"]);e!==void 0&&o!=null&&u(e,["ttl"],o);const a=r(t,["expireTime"]);e!==void 0&&a!=null&&u(e,["expireTime"],a);const f=r(t,["displayName"]);e!==void 0&&f!=null&&u(e,["displayName"],f);const h=r(t,["contents"]);if(e!==void 0&&h!=null){let v=dn(h);Array.isArray(v)&&(v=v.map(x=>Pm(x))),u(e,["contents"],v)}const m=r(t,["systemInstruction"]);e!==void 0&&m!=null&&u(e,["systemInstruction"],Pm(qt(m)));const p=r(t,["tools"]);if(e!==void 0&&p!=null){let v=p;Array.isArray(v)&&(v=v.map(x=>aT(x))),u(e,["tools"],v)}const g=r(t,["toolConfig"]);if(e!==void 0&&g!=null&&u(e,["toolConfig"],fT(g)),r(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return i}function hT(t,e){const i={},o=r(e,["model"]);o!=null&&u(i,["model"],Cg(t,o));const a=r(e,["config"]);return a!=null&&u(i,["config"],dT(a,i)),i}function mT(t,e){const i={},o=r(e,["name"]);o!=null&&u(i,["_url","name"],$n(t,o));const a=r(e,["config"]);return a!=null&&u(i,["config"],a),i}function gT(t,e){const i={},o=r(e,["name"]);o!=null&&u(i,["_url","name"],$n(t,o));const a=r(e,["config"]);return a!=null&&u(i,["config"],a),i}function pT(t,e){const i={},o=r(t,["ttl"]);e!==void 0&&o!=null&&u(e,["ttl"],o);const a=r(t,["expireTime"]);return e!==void 0&&a!=null&&u(e,["expireTime"],a),i}function yT(t,e){const i={},o=r(e,["name"]);o!=null&&u(i,["_url","name"],$n(t,o));const a=r(e,["config"]);return a!=null&&u(i,["config"],pT(a,i)),i}function vT(t,e){const i={},o=r(t,["pageSize"]);e!==void 0&&o!=null&&u(e,["_query","pageSize"],o);const a=r(t,["pageToken"]);return e!==void 0&&a!=null&&u(e,["_query","pageToken"],a),i}function TT(t){const e={},i=r(t,["config"]);return i!=null&&u(e,["config"],vT(i,e)),e}function xT(t){const e={},i=r(t,["fps"]);i!=null&&u(e,["fps"],i);const o=r(t,["endOffset"]);o!=null&&u(e,["endOffset"],o);const a=r(t,["startOffset"]);return a!=null&&u(e,["startOffset"],a),e}function CT(t){const e={},i=r(t,["displayName"]);i!=null&&u(e,["displayName"],i);const o=r(t,["data"]);o!=null&&u(e,["data"],o);const a=r(t,["mimeType"]);return a!=null&&u(e,["mimeType"],a),e}function ST(t){const e={},i=r(t,["displayName"]);i!=null&&u(e,["displayName"],i);const o=r(t,["fileUri"]);o!=null&&u(e,["fileUri"],o);const a=r(t,["mimeType"]);return a!=null&&u(e,["mimeType"],a),e}function ET(t){const e={},i=r(t,["videoMetadata"]);i!=null&&u(e,["videoMetadata"],xT(i));const o=r(t,["thought"]);o!=null&&u(e,["thought"],o);const a=r(t,["inlineData"]);a!=null&&u(e,["inlineData"],CT(a));const f=r(t,["fileData"]);f!=null&&u(e,["fileData"],ST(f));const h=r(t,["thoughtSignature"]);h!=null&&u(e,["thoughtSignature"],h);const m=r(t,["codeExecutionResult"]);m!=null&&u(e,["codeExecutionResult"],m);const p=r(t,["executableCode"]);p!=null&&u(e,["executableCode"],p);const g=r(t,["functionCall"]);g!=null&&u(e,["functionCall"],g);const v=r(t,["functionResponse"]);v!=null&&u(e,["functionResponse"],v);const x=r(t,["text"]);return x!=null&&u(e,["text"],x),e}function Vm(t){const e={},i=r(t,["parts"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(f=>ET(f))),u(e,["parts"],a)}const o=r(t,["role"]);return o!=null&&u(e,["role"],o),e}function MT(t){const e={};if(r(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const i=r(t,["description"]);i!=null&&u(e,["description"],i);const o=r(t,["name"]);o!=null&&u(e,["name"],o);const a=r(t,["parameters"]);a!=null&&u(e,["parameters"],a);const f=r(t,["parametersJsonSchema"]);f!=null&&u(e,["parametersJsonSchema"],f);const h=r(t,["response"]);h!=null&&u(e,["response"],h);const m=r(t,["responseJsonSchema"]);return m!=null&&u(e,["responseJsonSchema"],m),e}function _T(t){const e={},i=r(t,["startTime"]);i!=null&&u(e,["startTime"],i);const o=r(t,["endTime"]);return o!=null&&u(e,["endTime"],o),e}function AT(t){const e={},i=r(t,["timeRangeFilter"]);return i!=null&&u(e,["timeRangeFilter"],_T(i)),e}function NT(t){const e={},i=r(t,["mode"]);i!=null&&u(e,["mode"],i);const o=r(t,["dynamicThreshold"]);return o!=null&&u(e,["dynamicThreshold"],o),e}function RT(t){const e={},i=r(t,["dynamicRetrievalConfig"]);return i!=null&&u(e,["dynamicRetrievalConfig"],NT(i)),e}function bT(){return{}}function wT(t){const e={},i=r(t,["apiKeyString"]);return i!=null&&u(e,["apiKeyString"],i),e}function DT(t){const e={},i=r(t,["apiKeyConfig"]);i!=null&&u(e,["apiKeyConfig"],wT(i));const o=r(t,["authType"]);o!=null&&u(e,["authType"],o);const a=r(t,["googleServiceAccountConfig"]);a!=null&&u(e,["googleServiceAccountConfig"],a);const f=r(t,["httpBasicAuthConfig"]);f!=null&&u(e,["httpBasicAuthConfig"],f);const h=r(t,["oauthConfig"]);h!=null&&u(e,["oauthConfig"],h);const m=r(t,["oidcConfig"]);return m!=null&&u(e,["oidcConfig"],m),e}function LT(t){const e={},i=r(t,["authConfig"]);return i!=null&&u(e,["authConfig"],DT(i)),e}function UT(){return{}}function IT(t){const e={},i=r(t,["functionDeclarations"]);if(i!=null){let x=i;Array.isArray(x)&&(x=x.map(S=>MT(S))),u(e,["functionDeclarations"],x)}const o=r(t,["retrieval"]);o!=null&&u(e,["retrieval"],o);const a=r(t,["googleSearch"]);a!=null&&u(e,["googleSearch"],AT(a));const f=r(t,["googleSearchRetrieval"]);f!=null&&u(e,["googleSearchRetrieval"],RT(f)),r(t,["enterpriseWebSearch"])!=null&&u(e,["enterpriseWebSearch"],bT());const m=r(t,["googleMaps"]);m!=null&&u(e,["googleMaps"],LT(m)),r(t,["urlContext"])!=null&&u(e,["urlContext"],UT());const g=r(t,["codeExecution"]);g!=null&&u(e,["codeExecution"],g);const v=r(t,["computerUse"]);return v!=null&&u(e,["computerUse"],v),e}function kT(t){const e={},i=r(t,["mode"]);i!=null&&u(e,["mode"],i);const o=r(t,["allowedFunctionNames"]);return o!=null&&u(e,["allowedFunctionNames"],o),e}function BT(t){const e={},i=r(t,["latitude"]);i!=null&&u(e,["latitude"],i);const o=r(t,["longitude"]);return o!=null&&u(e,["longitude"],o),e}function PT(t){const e={},i=r(t,["latLng"]);i!=null&&u(e,["latLng"],BT(i));const o=r(t,["languageCode"]);return o!=null&&u(e,["languageCode"],o),e}function VT(t){const e={},i=r(t,["functionCallingConfig"]);i!=null&&u(e,["functionCallingConfig"],kT(i));const o=r(t,["retrievalConfig"]);return o!=null&&u(e,["retrievalConfig"],PT(o)),e}function qT(t,e){const i={},o=r(t,["ttl"]);e!==void 0&&o!=null&&u(e,["ttl"],o);const a=r(t,["expireTime"]);e!==void 0&&a!=null&&u(e,["expireTime"],a);const f=r(t,["displayName"]);e!==void 0&&f!=null&&u(e,["displayName"],f);const h=r(t,["contents"]);if(e!==void 0&&h!=null){let x=dn(h);Array.isArray(x)&&(x=x.map(S=>Vm(S))),u(e,["contents"],x)}const m=r(t,["systemInstruction"]);e!==void 0&&m!=null&&u(e,["systemInstruction"],Vm(qt(m)));const p=r(t,["tools"]);if(e!==void 0&&p!=null){let x=p;Array.isArray(x)&&(x=x.map(S=>IT(S))),u(e,["tools"],x)}const g=r(t,["toolConfig"]);e!==void 0&&g!=null&&u(e,["toolConfig"],VT(g));const v=r(t,["kmsKeyName"]);return e!==void 0&&v!=null&&u(e,["encryption_spec","kmsKeyName"],v),i}function GT(t,e){const i={},o=r(e,["model"]);o!=null&&u(i,["model"],Cg(t,o));const a=r(e,["config"]);return a!=null&&u(i,["config"],qT(a,i)),i}function HT(t,e){const i={},o=r(e,["name"]);o!=null&&u(i,["_url","name"],$n(t,o));const a=r(e,["config"]);return a!=null&&u(i,["config"],a),i}function zT(t,e){const i={},o=r(e,["name"]);o!=null&&u(i,["_url","name"],$n(t,o));const a=r(e,["config"]);return a!=null&&u(i,["config"],a),i}function FT(t,e){const i={},o=r(t,["ttl"]);e!==void 0&&o!=null&&u(e,["ttl"],o);const a=r(t,["expireTime"]);return e!==void 0&&a!=null&&u(e,["expireTime"],a),i}function OT(t,e){const i={},o=r(e,["name"]);o!=null&&u(i,["_url","name"],$n(t,o));const a=r(e,["config"]);return a!=null&&u(i,["config"],FT(a,i)),i}function YT(t,e){const i={},o=r(t,["pageSize"]);e!==void 0&&o!=null&&u(e,["_query","pageSize"],o);const a=r(t,["pageToken"]);return e!==void 0&&a!=null&&u(e,["_query","pageToken"],a),i}function JT(t){const e={},i=r(t,["config"]);return i!=null&&u(e,["config"],YT(i,e)),e}function Qs(t){const e={},i=r(t,["name"]);i!=null&&u(e,["name"],i);const o=r(t,["displayName"]);o!=null&&u(e,["displayName"],o);const a=r(t,["model"]);a!=null&&u(e,["model"],a);const f=r(t,["createTime"]);f!=null&&u(e,["createTime"],f);const h=r(t,["updateTime"]);h!=null&&u(e,["updateTime"],h);const m=r(t,["expireTime"]);m!=null&&u(e,["expireTime"],m);const p=r(t,["usageMetadata"]);return p!=null&&u(e,["usageMetadata"],p),e}function $T(){return{}}function XT(t){const e={},i=r(t,["sdkHttpResponse"]);i!=null&&u(e,["sdkHttpResponse"],i);const o=r(t,["nextPageToken"]);o!=null&&u(e,["nextPageToken"],o);const a=r(t,["cachedContents"]);if(a!=null){let f=a;Array.isArray(f)&&(f=f.map(h=>Qs(h))),u(e,["cachedContents"],f)}return e}function Zs(t){const e={},i=r(t,["name"]);i!=null&&u(e,["name"],i);const o=r(t,["displayName"]);o!=null&&u(e,["displayName"],o);const a=r(t,["model"]);a!=null&&u(e,["model"],a);const f=r(t,["createTime"]);f!=null&&u(e,["createTime"],f);const h=r(t,["updateTime"]);h!=null&&u(e,["updateTime"],h);const m=r(t,["expireTime"]);m!=null&&u(e,["expireTime"],m);const p=r(t,["usageMetadata"]);return p!=null&&u(e,["usageMetadata"],p),e}function KT(){return{}}function QT(t){const e={},i=r(t,["sdkHttpResponse"]);i!=null&&u(e,["sdkHttpResponse"],i);const o=r(t,["nextPageToken"]);o!=null&&u(e,["nextPageToken"],o);const a=r(t,["cachedContents"]);if(a!=null){let f=a;Array.isArray(f)&&(f=f.map(h=>Zs(h))),u(e,["cachedContents"],f)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ZT extends Vi{constructor(e){super(),this.apiClient=e,this.list=async(i={})=>new Io(Pi.PAGED_ITEM_CACHED_CONTENTS,o=>this.listInternal(o),await this.listInternal(i),i)}async create(e){var i,o,a,f;let h,m="",p={};if(this.apiClient.isVertexAI()){const g=GT(this.apiClient,e);return m=xe("cachedContents",g._url),p=g._query,delete g.config,delete g._url,delete g._query,h=this.apiClient.request({path:m,queryParams:p,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),h.then(v=>Zs(v))}else{const g=hT(this.apiClient,e);return m=xe("cachedContents",g._url),p=g._query,delete g.config,delete g._url,delete g._query,h=this.apiClient.request({path:m,queryParams:p,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),h.then(v=>Qs(v))}}async get(e){var i,o,a,f;let h,m="",p={};if(this.apiClient.isVertexAI()){const g=HT(this.apiClient,e);return m=xe("{name}",g._url),p=g._query,delete g.config,delete g._url,delete g._query,h=this.apiClient.request({path:m,queryParams:p,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),h.then(v=>Zs(v))}else{const g=mT(this.apiClient,e);return m=xe("{name}",g._url),p=g._query,delete g.config,delete g._url,delete g._query,h=this.apiClient.request({path:m,queryParams:p,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),h.then(v=>Qs(v))}}async delete(e){var i,o,a,f;let h,m="",p={};if(this.apiClient.isVertexAI()){const g=zT(this.apiClient,e);return m=xe("{name}",g._url),p=g._query,delete g.config,delete g._url,delete g._query,h=this.apiClient.request({path:m,queryParams:p,body:JSON.stringify(g),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),h.then(()=>{const v=KT(),x=new Dm;return Object.assign(x,v),x})}else{const g=gT(this.apiClient,e);return m=xe("{name}",g._url),p=g._query,delete g.config,delete g._url,delete g._query,h=this.apiClient.request({path:m,queryParams:p,body:JSON.stringify(g),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),h.then(()=>{const v=$T(),x=new Dm;return Object.assign(x,v),x})}}async update(e){var i,o,a,f;let h,m="",p={};if(this.apiClient.isVertexAI()){const g=OT(this.apiClient,e);return m=xe("{name}",g._url),p=g._query,delete g.config,delete g._url,delete g._query,h=this.apiClient.request({path:m,queryParams:p,body:JSON.stringify(g),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),h.then(v=>Zs(v))}else{const g=yT(this.apiClient,e);return m=xe("{name}",g._url),p=g._query,delete g.config,delete g._url,delete g._query,h=this.apiClient.request({path:m,queryParams:p,body:JSON.stringify(g),httpMethod:"PATCH",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),h.then(v=>Qs(v))}}async listInternal(e){var i,o,a,f;let h,m="",p={};if(this.apiClient.isVertexAI()){const g=JT(e);return m=xe("cachedContents",g._url),p=g._query,delete g.config,delete g._url,delete g._query,h=this.apiClient.request({path:m,queryParams:p,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(x=>{const S=x;return S.sdkHttpResponse={headers:v.headers},S})),h.then(v=>{const x=QT(v),S=new Lm;return Object.assign(S,x),S})}else{const g=TT(e);return m=xe("cachedContents",g._url),p=g._query,delete g.config,delete g._url,delete g._query,h=this.apiClient.request({path:m,queryParams:p,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json().then(x=>{const S=x;return S.sdkHttpResponse={headers:v.headers},S})),h.then(v=>{const x=XT(v),S=new Lm;return Object.assign(S,x),S})}}}function qm(t){var e=typeof Symbol=="function"&&Symbol.iterator,i=e&&t[e],o=0;if(i)return i.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ct(t){return this instanceof ct?(this.v=t,this):new ct(t)}function Rl(t,e,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=i.apply(t,e||[]),a,f=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),m("next"),m("throw"),m("return",h),a[Symbol.asyncIterator]=function(){return this},a;function h(M){return function(w){return Promise.resolve(w).then(M,x)}}function m(M,w){o[M]&&(a[M]=function(D){return new Promise(function(k,q){f.push([M,D,k,q])>1||p(M,D)})},w&&(a[M]=w(a[M])))}function p(M,w){try{g(o[M](w))}catch(D){S(f[0][3],D)}}function g(M){M.value instanceof ct?Promise.resolve(M.value.v).then(v,x):S(f[0][2],M)}function v(M){p("next",M)}function x(M){p("throw",M)}function S(M,w){M(w),f.shift(),f.length&&p(f[0][0],f[0][1])}}function Lo(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],i;return e?e.call(t):(t=typeof qm=="function"?qm(t):t[Symbol.iterator](),i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i);function o(f){i[f]=t[f]&&function(h){return new Promise(function(m,p){h=t[f](h),a(m,p,h.done,h.value)})}}function a(f,h,m,p){Promise.resolve(p).then(function(g){f({value:g,done:m})},h)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function WT(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const i=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return i===void 0?!1:Pg(i)}function Pg(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0||!e.thought&&e.text!==void 0&&e.text==="")return!1;return!0}function jT(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Gm(t){if(t===void 0||t.length===0)return[];const e=[],i=t.length;let o=0;for(;o<i;)if(t[o].role==="user")e.push(t[o]),o++;else{const a=[];let f=!0;for(;o<i&&t[o].role==="model";)a.push(t[o]),f&&!Pg(t[o])&&(f=!1),o++;f?e.push(...a):e.pop()}return e}class ex{constructor(e,i){this.modelsModule=e,this.apiClient=i}create(e){return new tx(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class tx{constructor(e,i,o,a={},f=[]){this.apiClient=e,this.modelsModule=i,this.model=o,this.config=a,this.history=f,this.sendPromise=Promise.resolve(),jT(f)}async sendMessage(e){var i;await this.sendPromise;const o=qt(e.message),a=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(o),config:(i=e.config)!==null&&i!==void 0?i:this.config});return this.sendPromise=(async()=>{var f,h,m;const p=await a,g=(h=(f=p.candidates)===null||f===void 0?void 0:f[0])===null||h===void 0?void 0:h.content,v=p.automaticFunctionCallingHistory,x=this.getHistory(!0).length;let S=[];v!=null&&(S=(m=v.slice(x))!==null&&m!==void 0?m:[]);const M=g?[g]:[];this.recordHistory(o,M,S)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),a}async sendMessageStream(e){var i;await this.sendPromise;const o=qt(e.message),a=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(o),config:(i=e.config)!==null&&i!==void 0?i:this.config});this.sendPromise=a.then(()=>{}).catch(()=>{});const f=await a;return this.processStreamResponse(f,o)}getHistory(e=!1){const i=e?Gm(this.history):this.history;return structuredClone(i)}processStreamResponse(e,i){var o,a;return Rl(this,arguments,function*(){var h,m,p,g;const v=[];try{for(var x=!0,S=Lo(e),M;M=yield ct(S.next()),h=M.done,!h;x=!0){g=M.value,x=!1;const w=g;if(WT(w)){const D=(a=(o=w.candidates)===null||o===void 0?void 0:o[0])===null||a===void 0?void 0:a.content;D!==void 0&&v.push(D)}yield yield ct(w)}}catch(w){m={error:w}}finally{try{!x&&!h&&(p=S.return)&&(yield ct(p.call(S)))}finally{if(m)throw m.error}}this.recordHistory(i,v)})}recordHistory(e,i,o){let a=[];i.length>0&&i.every(f=>f.role!==void 0)?a=i:a.push({role:"model",parts:[]}),o&&o.length>0?this.history.push(...Gm(o)):this.history.push(e),this.history.push(...a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class la extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,la.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function nx(t,e){const i={},o=r(t,["pageSize"]);e!==void 0&&o!=null&&u(e,["_query","pageSize"],o);const a=r(t,["pageToken"]);return e!==void 0&&a!=null&&u(e,["_query","pageToken"],a),i}function ix(t){const e={},i=r(t,["config"]);return i!=null&&u(e,["config"],nx(i,e)),e}function lx(t){const e={},i=r(t,["details"]);i!=null&&u(e,["details"],i);const o=r(t,["message"]);o!=null&&u(e,["message"],o);const a=r(t,["code"]);return a!=null&&u(e,["code"],a),e}function ox(t){const e={},i=r(t,["name"]);i!=null&&u(e,["name"],i);const o=r(t,["displayName"]);o!=null&&u(e,["displayName"],o);const a=r(t,["mimeType"]);a!=null&&u(e,["mimeType"],a);const f=r(t,["sizeBytes"]);f!=null&&u(e,["sizeBytes"],f);const h=r(t,["createTime"]);h!=null&&u(e,["createTime"],h);const m=r(t,["expirationTime"]);m!=null&&u(e,["expirationTime"],m);const p=r(t,["updateTime"]);p!=null&&u(e,["updateTime"],p);const g=r(t,["sha256Hash"]);g!=null&&u(e,["sha256Hash"],g);const v=r(t,["uri"]);v!=null&&u(e,["uri"],v);const x=r(t,["downloadUri"]);x!=null&&u(e,["downloadUri"],x);const S=r(t,["state"]);S!=null&&u(e,["state"],S);const M=r(t,["source"]);M!=null&&u(e,["source"],M);const w=r(t,["videoMetadata"]);w!=null&&u(e,["videoMetadata"],w);const D=r(t,["error"]);return D!=null&&u(e,["error"],lx(D)),e}function sx(t){const e={},i=r(t,["file"]);i!=null&&u(e,["file"],ox(i));const o=r(t,["config"]);return o!=null&&u(e,["config"],o),e}function ax(t){const e={},i=r(t,["name"]);i!=null&&u(e,["_url","file"],Rg(i));const o=r(t,["config"]);return o!=null&&u(e,["config"],o),e}function rx(t){const e={},i=r(t,["name"]);i!=null&&u(e,["_url","file"],Rg(i));const o=r(t,["config"]);return o!=null&&u(e,["config"],o),e}function ux(t){const e={},i=r(t,["details"]);i!=null&&u(e,["details"],i);const o=r(t,["message"]);o!=null&&u(e,["message"],o);const a=r(t,["code"]);return a!=null&&u(e,["code"],a),e}function Uu(t){const e={},i=r(t,["name"]);i!=null&&u(e,["name"],i);const o=r(t,["displayName"]);o!=null&&u(e,["displayName"],o);const a=r(t,["mimeType"]);a!=null&&u(e,["mimeType"],a);const f=r(t,["sizeBytes"]);f!=null&&u(e,["sizeBytes"],f);const h=r(t,["createTime"]);h!=null&&u(e,["createTime"],h);const m=r(t,["expirationTime"]);m!=null&&u(e,["expirationTime"],m);const p=r(t,["updateTime"]);p!=null&&u(e,["updateTime"],p);const g=r(t,["sha256Hash"]);g!=null&&u(e,["sha256Hash"],g);const v=r(t,["uri"]);v!=null&&u(e,["uri"],v);const x=r(t,["downloadUri"]);x!=null&&u(e,["downloadUri"],x);const S=r(t,["state"]);S!=null&&u(e,["state"],S);const M=r(t,["source"]);M!=null&&u(e,["source"],M);const w=r(t,["videoMetadata"]);w!=null&&u(e,["videoMetadata"],w);const D=r(t,["error"]);return D!=null&&u(e,["error"],ux(D)),e}function cx(t){const e={},i=r(t,["sdkHttpResponse"]);i!=null&&u(e,["sdkHttpResponse"],i);const o=r(t,["nextPageToken"]);o!=null&&u(e,["nextPageToken"],o);const a=r(t,["files"]);if(a!=null){let f=a;Array.isArray(f)&&(f=f.map(h=>Uu(h))),u(e,["files"],f)}return e}function fx(t){const e={},i=r(t,["sdkHttpResponse"]);return i!=null&&u(e,["sdkHttpResponse"],i),e}function dx(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class hx extends Vi{constructor(e){super(),this.apiClient=e,this.list=async(i={})=>new Io(Pi.PAGED_ITEM_FILES,o=>this.listInternal(o),await this.listInternal(i),i)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(i=>Uu(i))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var i,o;let a,f="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const m=ix(e);return f=xe("files",m._url),h=m._query,delete m.config,delete m._url,delete m._query,a=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(g=>{const v=g;return v.sdkHttpResponse={headers:p.headers},v})),a.then(p=>{const g=cx(p),v=new D0;return Object.assign(v,g),v})}}async createInternal(e){var i,o;let a,f="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const m=sx(e);return f=xe("upload/v1beta/files",m._url),h=m._query,delete m.config,delete m._url,delete m._query,a=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),a.then(p=>{const g=fx(p),v=new L0;return Object.assign(v,g),v})}}async get(e){var i,o;let a,f="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const m=ax(e);return f=xe("files/{file}",m._url),h=m._query,delete m.config,delete m._url,delete m._query,a=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),a.then(p=>Uu(p))}}async delete(e){var i,o;let a,f="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const m=rx(e);return f=xe("files/{file}",m._url),h=m._query,delete m.config,delete m._url,delete m._query,a=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),a.then(()=>{const p=dx(),g=new U0;return Object.assign(g,p),g})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mx(t){const e={},i=r(t,["voiceName"]);return i!=null&&u(e,["voiceName"],i),e}function Vg(t){const e={},i=r(t,["prebuiltVoiceConfig"]);return i!=null&&u(e,["prebuiltVoiceConfig"],mx(i)),e}function gx(t){const e={},i=r(t,["speaker"]);i!=null&&u(e,["speaker"],i);const o=r(t,["voiceConfig"]);return o!=null&&u(e,["voiceConfig"],Vg(o)),e}function px(t){const e={},i=r(t,["speakerVoiceConfigs"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>gx(a))),u(e,["speakerVoiceConfigs"],o)}return e}function yx(t){const e={},i=r(t,["voiceConfig"]);i!=null&&u(e,["voiceConfig"],Vg(i));const o=r(t,["multiSpeakerVoiceConfig"]);o!=null&&u(e,["multiSpeakerVoiceConfig"],px(o));const a=r(t,["languageCode"]);return a!=null&&u(e,["languageCode"],a),e}function vx(t){const e={},i=r(t,["fps"]);i!=null&&u(e,["fps"],i);const o=r(t,["endOffset"]);o!=null&&u(e,["endOffset"],o);const a=r(t,["startOffset"]);return a!=null&&u(e,["startOffset"],a),e}function Tx(t){const e={};if(r(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=r(t,["data"]);i!=null&&u(e,["data"],i);const o=r(t,["mimeType"]);return o!=null&&u(e,["mimeType"],o),e}function xx(t){const e={};if(r(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=r(t,["fileUri"]);i!=null&&u(e,["fileUri"],i);const o=r(t,["mimeType"]);return o!=null&&u(e,["mimeType"],o),e}function Cx(t){const e={},i=r(t,["videoMetadata"]);i!=null&&u(e,["videoMetadata"],vx(i));const o=r(t,["thought"]);o!=null&&u(e,["thought"],o);const a=r(t,["inlineData"]);a!=null&&u(e,["inlineData"],Tx(a));const f=r(t,["fileData"]);f!=null&&u(e,["fileData"],xx(f));const h=r(t,["thoughtSignature"]);h!=null&&u(e,["thoughtSignature"],h);const m=r(t,["codeExecutionResult"]);m!=null&&u(e,["codeExecutionResult"],m);const p=r(t,["executableCode"]);p!=null&&u(e,["executableCode"],p);const g=r(t,["functionCall"]);g!=null&&u(e,["functionCall"],g);const v=r(t,["functionResponse"]);v!=null&&u(e,["functionResponse"],v);const x=r(t,["text"]);return x!=null&&u(e,["text"],x),e}function Sx(t){const e={},i=r(t,["parts"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(f=>Cx(f))),u(e,["parts"],a)}const o=r(t,["role"]);return o!=null&&u(e,["role"],o),e}function Ex(t){const e={},i=r(t,["behavior"]);i!=null&&u(e,["behavior"],i);const o=r(t,["description"]);o!=null&&u(e,["description"],o);const a=r(t,["name"]);a!=null&&u(e,["name"],a);const f=r(t,["parameters"]);f!=null&&u(e,["parameters"],f);const h=r(t,["parametersJsonSchema"]);h!=null&&u(e,["parametersJsonSchema"],h);const m=r(t,["response"]);m!=null&&u(e,["response"],m);const p=r(t,["responseJsonSchema"]);return p!=null&&u(e,["responseJsonSchema"],p),e}function Mx(t){const e={},i=r(t,["startTime"]);i!=null&&u(e,["startTime"],i);const o=r(t,["endTime"]);return o!=null&&u(e,["endTime"],o),e}function _x(t){const e={},i=r(t,["timeRangeFilter"]);return i!=null&&u(e,["timeRangeFilter"],Mx(i)),e}function Ax(t){const e={},i=r(t,["mode"]);i!=null&&u(e,["mode"],i);const o=r(t,["dynamicThreshold"]);return o!=null&&u(e,["dynamicThreshold"],o),e}function Nx(t){const e={},i=r(t,["dynamicRetrievalConfig"]);return i!=null&&u(e,["dynamicRetrievalConfig"],Ax(i)),e}function Rx(){return{}}function bx(t){const e={},i=r(t,["functionDeclarations"]);if(i!=null){let p=i;Array.isArray(p)&&(p=p.map(g=>Ex(g))),u(e,["functionDeclarations"],p)}if(r(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=r(t,["googleSearch"]);o!=null&&u(e,["googleSearch"],_x(o));const a=r(t,["googleSearchRetrieval"]);if(a!=null&&u(e,["googleSearchRetrieval"],Nx(a)),r(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(r(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");r(t,["urlContext"])!=null&&u(e,["urlContext"],Rx());const h=r(t,["codeExecution"]);h!=null&&u(e,["codeExecution"],h);const m=r(t,["computerUse"]);return m!=null&&u(e,["computerUse"],m),e}function wx(t){const e={},i=r(t,["handle"]);if(i!=null&&u(e,["handle"],i),r(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Hm(){return{}}function Dx(t){const e={},i=r(t,["disabled"]);i!=null&&u(e,["disabled"],i);const o=r(t,["startOfSpeechSensitivity"]);o!=null&&u(e,["startOfSpeechSensitivity"],o);const a=r(t,["endOfSpeechSensitivity"]);a!=null&&u(e,["endOfSpeechSensitivity"],a);const f=r(t,["prefixPaddingMs"]);f!=null&&u(e,["prefixPaddingMs"],f);const h=r(t,["silenceDurationMs"]);return h!=null&&u(e,["silenceDurationMs"],h),e}function Lx(t){const e={},i=r(t,["automaticActivityDetection"]);i!=null&&u(e,["automaticActivityDetection"],Dx(i));const o=r(t,["activityHandling"]);o!=null&&u(e,["activityHandling"],o);const a=r(t,["turnCoverage"]);return a!=null&&u(e,["turnCoverage"],a),e}function Ux(t){const e={},i=r(t,["targetTokens"]);return i!=null&&u(e,["targetTokens"],i),e}function Ix(t){const e={},i=r(t,["triggerTokens"]);i!=null&&u(e,["triggerTokens"],i);const o=r(t,["slidingWindow"]);return o!=null&&u(e,["slidingWindow"],Ux(o)),e}function kx(t){const e={},i=r(t,["proactiveAudio"]);return i!=null&&u(e,["proactiveAudio"],i),e}function Bx(t,e){const i={},o=r(t,["generationConfig"]);e!==void 0&&o!=null&&u(e,["setup","generationConfig"],o);const a=r(t,["responseModalities"]);e!==void 0&&a!=null&&u(e,["setup","generationConfig","responseModalities"],a);const f=r(t,["temperature"]);e!==void 0&&f!=null&&u(e,["setup","generationConfig","temperature"],f);const h=r(t,["topP"]);e!==void 0&&h!=null&&u(e,["setup","generationConfig","topP"],h);const m=r(t,["topK"]);e!==void 0&&m!=null&&u(e,["setup","generationConfig","topK"],m);const p=r(t,["maxOutputTokens"]);e!==void 0&&p!=null&&u(e,["setup","generationConfig","maxOutputTokens"],p);const g=r(t,["mediaResolution"]);e!==void 0&&g!=null&&u(e,["setup","generationConfig","mediaResolution"],g);const v=r(t,["seed"]);e!==void 0&&v!=null&&u(e,["setup","generationConfig","seed"],v);const x=r(t,["speechConfig"]);e!==void 0&&x!=null&&u(e,["setup","generationConfig","speechConfig"],yx(Ou(x)));const S=r(t,["enableAffectiveDialog"]);e!==void 0&&S!=null&&u(e,["setup","generationConfig","enableAffectiveDialog"],S);const M=r(t,["systemInstruction"]);e!==void 0&&M!=null&&u(e,["setup","systemInstruction"],Sx(qt(M)));const w=r(t,["tools"]);if(e!==void 0&&w!=null){let G=Dl(w);Array.isArray(G)&&(G=G.map($=>bx(wl($)))),u(e,["setup","tools"],G)}const D=r(t,["sessionResumption"]);e!==void 0&&D!=null&&u(e,["setup","sessionResumption"],wx(D));const k=r(t,["inputAudioTranscription"]);e!==void 0&&k!=null&&u(e,["setup","inputAudioTranscription"],Hm());const q=r(t,["outputAudioTranscription"]);e!==void 0&&q!=null&&u(e,["setup","outputAudioTranscription"],Hm());const N=r(t,["realtimeInputConfig"]);e!==void 0&&N!=null&&u(e,["setup","realtimeInputConfig"],Lx(N));const F=r(t,["contextWindowCompression"]);e!==void 0&&F!=null&&u(e,["setup","contextWindowCompression"],Ix(F));const X=r(t,["proactivity"]);return e!==void 0&&X!=null&&u(e,["setup","proactivity"],kx(X)),i}function Px(t,e){const i={},o=r(e,["model"]);o!=null&&u(i,["setup","model"],et(t,o));const a=r(e,["config"]);return a!=null&&u(i,["config"],Bx(a,i)),i}function Vx(){return{}}function qx(){return{}}function Gx(t){const e={},i=r(t,["media"]);i!=null&&u(e,["mediaChunks"],Sg(i));const o=r(t,["audio"]);o!=null&&u(e,["audio"],Mg(o));const a=r(t,["audioStreamEnd"]);a!=null&&u(e,["audioStreamEnd"],a);const f=r(t,["video"]);f!=null&&u(e,["video"],Eg(f));const h=r(t,["text"]);return h!=null&&u(e,["text"],h),r(t,["activityStart"])!=null&&u(e,["activityStart"],Vx()),r(t,["activityEnd"])!=null&&u(e,["activityEnd"],qx()),e}function qg(t){const e={},i=r(t,["text"]);i!=null&&u(e,["text"],i);const o=r(t,["weight"]);return o!=null&&u(e,["weight"],o),e}function Hx(t){const e={},i=r(t,["weightedPrompts"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>qg(a))),u(e,["weightedPrompts"],o)}return e}function Gg(t){const e={},i=r(t,["temperature"]);i!=null&&u(e,["temperature"],i);const o=r(t,["topK"]);o!=null&&u(e,["topK"],o);const a=r(t,["seed"]);a!=null&&u(e,["seed"],a);const f=r(t,["guidance"]);f!=null&&u(e,["guidance"],f);const h=r(t,["bpm"]);h!=null&&u(e,["bpm"],h);const m=r(t,["density"]);m!=null&&u(e,["density"],m);const p=r(t,["brightness"]);p!=null&&u(e,["brightness"],p);const g=r(t,["scale"]);g!=null&&u(e,["scale"],g);const v=r(t,["muteBass"]);v!=null&&u(e,["muteBass"],v);const x=r(t,["muteDrums"]);x!=null&&u(e,["muteDrums"],x);const S=r(t,["onlyBassAndDrums"]);return S!=null&&u(e,["onlyBassAndDrums"],S),e}function zx(t){const e={},i=r(t,["musicGenerationConfig"]);return i!=null&&u(e,["musicGenerationConfig"],Gg(i)),e}function Hg(t){const e={},i=r(t,["model"]);return i!=null&&u(e,["model"],i),e}function zg(t){const e={},i=r(t,["weightedPrompts"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>qg(a))),u(e,["weightedPrompts"],o)}return e}function Iu(t){const e={},i=r(t,["setup"]);i!=null&&u(e,["setup"],Hg(i));const o=r(t,["clientContent"]);o!=null&&u(e,["clientContent"],zg(o));const a=r(t,["musicGenerationConfig"]);a!=null&&u(e,["musicGenerationConfig"],Gg(a));const f=r(t,["playbackControl"]);return f!=null&&u(e,["playbackControl"],f),e}function Fx(t){const e={},i=r(t,["voiceName"]);return i!=null&&u(e,["voiceName"],i),e}function Ox(t){const e={},i=r(t,["prebuiltVoiceConfig"]);return i!=null&&u(e,["prebuiltVoiceConfig"],Fx(i)),e}function Yx(t){const e={},i=r(t,["voiceConfig"]);if(i!=null&&u(e,["voiceConfig"],Ox(i)),r(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const o=r(t,["languageCode"]);return o!=null&&u(e,["languageCode"],o),e}function Jx(t){const e={},i=r(t,["fps"]);i!=null&&u(e,["fps"],i);const o=r(t,["endOffset"]);o!=null&&u(e,["endOffset"],o);const a=r(t,["startOffset"]);return a!=null&&u(e,["startOffset"],a),e}function $x(t){const e={},i=r(t,["displayName"]);i!=null&&u(e,["displayName"],i);const o=r(t,["data"]);o!=null&&u(e,["data"],o);const a=r(t,["mimeType"]);return a!=null&&u(e,["mimeType"],a),e}function Xx(t){const e={},i=r(t,["displayName"]);i!=null&&u(e,["displayName"],i);const o=r(t,["fileUri"]);o!=null&&u(e,["fileUri"],o);const a=r(t,["mimeType"]);return a!=null&&u(e,["mimeType"],a),e}function Kx(t){const e={},i=r(t,["videoMetadata"]);i!=null&&u(e,["videoMetadata"],Jx(i));const o=r(t,["thought"]);o!=null&&u(e,["thought"],o);const a=r(t,["inlineData"]);a!=null&&u(e,["inlineData"],$x(a));const f=r(t,["fileData"]);f!=null&&u(e,["fileData"],Xx(f));const h=r(t,["thoughtSignature"]);h!=null&&u(e,["thoughtSignature"],h);const m=r(t,["codeExecutionResult"]);m!=null&&u(e,["codeExecutionResult"],m);const p=r(t,["executableCode"]);p!=null&&u(e,["executableCode"],p);const g=r(t,["functionCall"]);g!=null&&u(e,["functionCall"],g);const v=r(t,["functionResponse"]);v!=null&&u(e,["functionResponse"],v);const x=r(t,["text"]);return x!=null&&u(e,["text"],x),e}function Qx(t){const e={},i=r(t,["parts"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(f=>Kx(f))),u(e,["parts"],a)}const o=r(t,["role"]);return o!=null&&u(e,["role"],o),e}function Zx(t){const e={};if(r(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const i=r(t,["description"]);i!=null&&u(e,["description"],i);const o=r(t,["name"]);o!=null&&u(e,["name"],o);const a=r(t,["parameters"]);a!=null&&u(e,["parameters"],a);const f=r(t,["parametersJsonSchema"]);f!=null&&u(e,["parametersJsonSchema"],f);const h=r(t,["response"]);h!=null&&u(e,["response"],h);const m=r(t,["responseJsonSchema"]);return m!=null&&u(e,["responseJsonSchema"],m),e}function Wx(t){const e={},i=r(t,["startTime"]);i!=null&&u(e,["startTime"],i);const o=r(t,["endTime"]);return o!=null&&u(e,["endTime"],o),e}function jx(t){const e={},i=r(t,["timeRangeFilter"]);return i!=null&&u(e,["timeRangeFilter"],Wx(i)),e}function eC(t){const e={},i=r(t,["mode"]);i!=null&&u(e,["mode"],i);const o=r(t,["dynamicThreshold"]);return o!=null&&u(e,["dynamicThreshold"],o),e}function tC(t){const e={},i=r(t,["dynamicRetrievalConfig"]);return i!=null&&u(e,["dynamicRetrievalConfig"],eC(i)),e}function nC(){return{}}function iC(t){const e={},i=r(t,["apiKeyString"]);return i!=null&&u(e,["apiKeyString"],i),e}function lC(t){const e={},i=r(t,["apiKeyConfig"]);i!=null&&u(e,["apiKeyConfig"],iC(i));const o=r(t,["authType"]);o!=null&&u(e,["authType"],o);const a=r(t,["googleServiceAccountConfig"]);a!=null&&u(e,["googleServiceAccountConfig"],a);const f=r(t,["httpBasicAuthConfig"]);f!=null&&u(e,["httpBasicAuthConfig"],f);const h=r(t,["oauthConfig"]);h!=null&&u(e,["oauthConfig"],h);const m=r(t,["oidcConfig"]);return m!=null&&u(e,["oidcConfig"],m),e}function oC(t){const e={},i=r(t,["authConfig"]);return i!=null&&u(e,["authConfig"],lC(i)),e}function sC(){return{}}function aC(t){const e={},i=r(t,["functionDeclarations"]);if(i!=null){let x=i;Array.isArray(x)&&(x=x.map(S=>Zx(S))),u(e,["functionDeclarations"],x)}const o=r(t,["retrieval"]);o!=null&&u(e,["retrieval"],o);const a=r(t,["googleSearch"]);a!=null&&u(e,["googleSearch"],jx(a));const f=r(t,["googleSearchRetrieval"]);f!=null&&u(e,["googleSearchRetrieval"],tC(f)),r(t,["enterpriseWebSearch"])!=null&&u(e,["enterpriseWebSearch"],nC());const m=r(t,["googleMaps"]);m!=null&&u(e,["googleMaps"],oC(m)),r(t,["urlContext"])!=null&&u(e,["urlContext"],sC());const g=r(t,["codeExecution"]);g!=null&&u(e,["codeExecution"],g);const v=r(t,["computerUse"]);return v!=null&&u(e,["computerUse"],v),e}function rC(t){const e={},i=r(t,["handle"]);i!=null&&u(e,["handle"],i);const o=r(t,["transparent"]);return o!=null&&u(e,["transparent"],o),e}function zm(){return{}}function uC(t){const e={},i=r(t,["disabled"]);i!=null&&u(e,["disabled"],i);const o=r(t,["startOfSpeechSensitivity"]);o!=null&&u(e,["startOfSpeechSensitivity"],o);const a=r(t,["endOfSpeechSensitivity"]);a!=null&&u(e,["endOfSpeechSensitivity"],a);const f=r(t,["prefixPaddingMs"]);f!=null&&u(e,["prefixPaddingMs"],f);const h=r(t,["silenceDurationMs"]);return h!=null&&u(e,["silenceDurationMs"],h),e}function cC(t){const e={},i=r(t,["automaticActivityDetection"]);i!=null&&u(e,["automaticActivityDetection"],uC(i));const o=r(t,["activityHandling"]);o!=null&&u(e,["activityHandling"],o);const a=r(t,["turnCoverage"]);return a!=null&&u(e,["turnCoverage"],a),e}function fC(t){const e={},i=r(t,["targetTokens"]);return i!=null&&u(e,["targetTokens"],i),e}function dC(t){const e={},i=r(t,["triggerTokens"]);i!=null&&u(e,["triggerTokens"],i);const o=r(t,["slidingWindow"]);return o!=null&&u(e,["slidingWindow"],fC(o)),e}function hC(t){const e={},i=r(t,["proactiveAudio"]);return i!=null&&u(e,["proactiveAudio"],i),e}function mC(t,e){const i={},o=r(t,["generationConfig"]);e!==void 0&&o!=null&&u(e,["setup","generationConfig"],o);const a=r(t,["responseModalities"]);e!==void 0&&a!=null&&u(e,["setup","generationConfig","responseModalities"],a);const f=r(t,["temperature"]);e!==void 0&&f!=null&&u(e,["setup","generationConfig","temperature"],f);const h=r(t,["topP"]);e!==void 0&&h!=null&&u(e,["setup","generationConfig","topP"],h);const m=r(t,["topK"]);e!==void 0&&m!=null&&u(e,["setup","generationConfig","topK"],m);const p=r(t,["maxOutputTokens"]);e!==void 0&&p!=null&&u(e,["setup","generationConfig","maxOutputTokens"],p);const g=r(t,["mediaResolution"]);e!==void 0&&g!=null&&u(e,["setup","generationConfig","mediaResolution"],g);const v=r(t,["seed"]);e!==void 0&&v!=null&&u(e,["setup","generationConfig","seed"],v);const x=r(t,["speechConfig"]);e!==void 0&&x!=null&&u(e,["setup","generationConfig","speechConfig"],Yx(Ou(x)));const S=r(t,["enableAffectiveDialog"]);e!==void 0&&S!=null&&u(e,["setup","generationConfig","enableAffectiveDialog"],S);const M=r(t,["systemInstruction"]);e!==void 0&&M!=null&&u(e,["setup","systemInstruction"],Qx(qt(M)));const w=r(t,["tools"]);if(e!==void 0&&w!=null){let G=Dl(w);Array.isArray(G)&&(G=G.map($=>aC(wl($)))),u(e,["setup","tools"],G)}const D=r(t,["sessionResumption"]);e!==void 0&&D!=null&&u(e,["setup","sessionResumption"],rC(D));const k=r(t,["inputAudioTranscription"]);e!==void 0&&k!=null&&u(e,["setup","inputAudioTranscription"],zm());const q=r(t,["outputAudioTranscription"]);e!==void 0&&q!=null&&u(e,["setup","outputAudioTranscription"],zm());const N=r(t,["realtimeInputConfig"]);e!==void 0&&N!=null&&u(e,["setup","realtimeInputConfig"],cC(N));const F=r(t,["contextWindowCompression"]);e!==void 0&&F!=null&&u(e,["setup","contextWindowCompression"],dC(F));const X=r(t,["proactivity"]);return e!==void 0&&X!=null&&u(e,["setup","proactivity"],hC(X)),i}function gC(t,e){const i={},o=r(e,["model"]);o!=null&&u(i,["setup","model"],et(t,o));const a=r(e,["config"]);return a!=null&&u(i,["config"],mC(a,i)),i}function pC(){return{}}function yC(){return{}}function vC(t){const e={},i=r(t,["media"]);i!=null&&u(e,["mediaChunks"],Sg(i));const o=r(t,["audio"]);o!=null&&u(e,["audio"],Mg(o));const a=r(t,["audioStreamEnd"]);a!=null&&u(e,["audioStreamEnd"],a);const f=r(t,["video"]);f!=null&&u(e,["video"],Eg(f));const h=r(t,["text"]);return h!=null&&u(e,["text"],h),r(t,["activityStart"])!=null&&u(e,["activityStart"],pC()),r(t,["activityEnd"])!=null&&u(e,["activityEnd"],yC()),e}function TC(){return{}}function xC(t){const e={},i=r(t,["fps"]);i!=null&&u(e,["fps"],i);const o=r(t,["endOffset"]);o!=null&&u(e,["endOffset"],o);const a=r(t,["startOffset"]);return a!=null&&u(e,["startOffset"],a),e}function CC(t){const e={},i=r(t,["data"]);i!=null&&u(e,["data"],i);const o=r(t,["mimeType"]);return o!=null&&u(e,["mimeType"],o),e}function SC(t){const e={},i=r(t,["fileUri"]);i!=null&&u(e,["fileUri"],i);const o=r(t,["mimeType"]);return o!=null&&u(e,["mimeType"],o),e}function EC(t){const e={},i=r(t,["videoMetadata"]);i!=null&&u(e,["videoMetadata"],xC(i));const o=r(t,["thought"]);o!=null&&u(e,["thought"],o);const a=r(t,["inlineData"]);a!=null&&u(e,["inlineData"],CC(a));const f=r(t,["fileData"]);f!=null&&u(e,["fileData"],SC(f));const h=r(t,["thoughtSignature"]);h!=null&&u(e,["thoughtSignature"],h);const m=r(t,["codeExecutionResult"]);m!=null&&u(e,["codeExecutionResult"],m);const p=r(t,["executableCode"]);p!=null&&u(e,["executableCode"],p);const g=r(t,["functionCall"]);g!=null&&u(e,["functionCall"],g);const v=r(t,["functionResponse"]);v!=null&&u(e,["functionResponse"],v);const x=r(t,["text"]);return x!=null&&u(e,["text"],x),e}function MC(t){const e={},i=r(t,["parts"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(f=>EC(f))),u(e,["parts"],a)}const o=r(t,["role"]);return o!=null&&u(e,["role"],o),e}function Fm(t){const e={},i=r(t,["text"]);i!=null&&u(e,["text"],i);const o=r(t,["finished"]);return o!=null&&u(e,["finished"],o),e}function _C(t){const e={},i=r(t,["retrievedUrl"]);i!=null&&u(e,["retrievedUrl"],i);const o=r(t,["urlRetrievalStatus"]);return o!=null&&u(e,["urlRetrievalStatus"],o),e}function AC(t){const e={},i=r(t,["urlMetadata"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>_C(a))),u(e,["urlMetadata"],o)}return e}function NC(t){const e={},i=r(t,["modelTurn"]);i!=null&&u(e,["modelTurn"],MC(i));const o=r(t,["turnComplete"]);o!=null&&u(e,["turnComplete"],o);const a=r(t,["interrupted"]);a!=null&&u(e,["interrupted"],a);const f=r(t,["groundingMetadata"]);f!=null&&u(e,["groundingMetadata"],f);const h=r(t,["generationComplete"]);h!=null&&u(e,["generationComplete"],h);const m=r(t,["inputTranscription"]);m!=null&&u(e,["inputTranscription"],Fm(m));const p=r(t,["outputTranscription"]);p!=null&&u(e,["outputTranscription"],Fm(p));const g=r(t,["urlContextMetadata"]);return g!=null&&u(e,["urlContextMetadata"],AC(g)),e}function RC(t){const e={},i=r(t,["id"]);i!=null&&u(e,["id"],i);const o=r(t,["args"]);o!=null&&u(e,["args"],o);const a=r(t,["name"]);return a!=null&&u(e,["name"],a),e}function bC(t){const e={},i=r(t,["functionCalls"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>RC(a))),u(e,["functionCalls"],o)}return e}function wC(t){const e={},i=r(t,["ids"]);return i!=null&&u(e,["ids"],i),e}function $s(t){const e={},i=r(t,["modality"]);i!=null&&u(e,["modality"],i);const o=r(t,["tokenCount"]);return o!=null&&u(e,["tokenCount"],o),e}function DC(t){const e={},i=r(t,["promptTokenCount"]);i!=null&&u(e,["promptTokenCount"],i);const o=r(t,["cachedContentTokenCount"]);o!=null&&u(e,["cachedContentTokenCount"],o);const a=r(t,["responseTokenCount"]);a!=null&&u(e,["responseTokenCount"],a);const f=r(t,["toolUsePromptTokenCount"]);f!=null&&u(e,["toolUsePromptTokenCount"],f);const h=r(t,["thoughtsTokenCount"]);h!=null&&u(e,["thoughtsTokenCount"],h);const m=r(t,["totalTokenCount"]);m!=null&&u(e,["totalTokenCount"],m);const p=r(t,["promptTokensDetails"]);if(p!=null){let S=p;Array.isArray(S)&&(S=S.map(M=>$s(M))),u(e,["promptTokensDetails"],S)}const g=r(t,["cacheTokensDetails"]);if(g!=null){let S=g;Array.isArray(S)&&(S=S.map(M=>$s(M))),u(e,["cacheTokensDetails"],S)}const v=r(t,["responseTokensDetails"]);if(v!=null){let S=v;Array.isArray(S)&&(S=S.map(M=>$s(M))),u(e,["responseTokensDetails"],S)}const x=r(t,["toolUsePromptTokensDetails"]);if(x!=null){let S=x;Array.isArray(S)&&(S=S.map(M=>$s(M))),u(e,["toolUsePromptTokensDetails"],S)}return e}function LC(t){const e={},i=r(t,["timeLeft"]);return i!=null&&u(e,["timeLeft"],i),e}function UC(t){const e={},i=r(t,["newHandle"]);i!=null&&u(e,["newHandle"],i);const o=r(t,["resumable"]);o!=null&&u(e,["resumable"],o);const a=r(t,["lastConsumedClientMessageIndex"]);return a!=null&&u(e,["lastConsumedClientMessageIndex"],a),e}function IC(t){const e={};r(t,["setupComplete"])!=null&&u(e,["setupComplete"],TC());const o=r(t,["serverContent"]);o!=null&&u(e,["serverContent"],NC(o));const a=r(t,["toolCall"]);a!=null&&u(e,["toolCall"],bC(a));const f=r(t,["toolCallCancellation"]);f!=null&&u(e,["toolCallCancellation"],wC(f));const h=r(t,["usageMetadata"]);h!=null&&u(e,["usageMetadata"],DC(h));const m=r(t,["goAway"]);m!=null&&u(e,["goAway"],LC(m));const p=r(t,["sessionResumptionUpdate"]);return p!=null&&u(e,["sessionResumptionUpdate"],UC(p)),e}function kC(){return{}}function BC(t){const e={},i=r(t,["text"]);i!=null&&u(e,["text"],i);const o=r(t,["weight"]);return o!=null&&u(e,["weight"],o),e}function PC(t){const e={},i=r(t,["weightedPrompts"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>BC(a))),u(e,["weightedPrompts"],o)}return e}function VC(t){const e={},i=r(t,["temperature"]);i!=null&&u(e,["temperature"],i);const o=r(t,["topK"]);o!=null&&u(e,["topK"],o);const a=r(t,["seed"]);a!=null&&u(e,["seed"],a);const f=r(t,["guidance"]);f!=null&&u(e,["guidance"],f);const h=r(t,["bpm"]);h!=null&&u(e,["bpm"],h);const m=r(t,["density"]);m!=null&&u(e,["density"],m);const p=r(t,["brightness"]);p!=null&&u(e,["brightness"],p);const g=r(t,["scale"]);g!=null&&u(e,["scale"],g);const v=r(t,["muteBass"]);v!=null&&u(e,["muteBass"],v);const x=r(t,["muteDrums"]);x!=null&&u(e,["muteDrums"],x);const S=r(t,["onlyBassAndDrums"]);return S!=null&&u(e,["onlyBassAndDrums"],S),e}function qC(t){const e={},i=r(t,["clientContent"]);i!=null&&u(e,["clientContent"],PC(i));const o=r(t,["musicGenerationConfig"]);return o!=null&&u(e,["musicGenerationConfig"],VC(o)),e}function GC(t){const e={},i=r(t,["data"]);i!=null&&u(e,["data"],i);const o=r(t,["mimeType"]);o!=null&&u(e,["mimeType"],o);const a=r(t,["sourceMetadata"]);return a!=null&&u(e,["sourceMetadata"],qC(a)),e}function HC(t){const e={},i=r(t,["audioChunks"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>GC(a))),u(e,["audioChunks"],o)}return e}function zC(t){const e={},i=r(t,["text"]);i!=null&&u(e,["text"],i);const o=r(t,["filteredReason"]);return o!=null&&u(e,["filteredReason"],o),e}function FC(t){const e={};r(t,["setupComplete"])!=null&&u(e,["setupComplete"],kC());const o=r(t,["serverContent"]);o!=null&&u(e,["serverContent"],HC(o));const a=r(t,["filteredPrompt"]);return a!=null&&u(e,["filteredPrompt"],zC(a)),e}function OC(t){const e={},i=r(t,["sessionId"]);return i!=null&&u(e,["sessionId"],i),e}function YC(t){const e={},i=r(t,["fps"]);i!=null&&u(e,["fps"],i);const o=r(t,["endOffset"]);o!=null&&u(e,["endOffset"],o);const a=r(t,["startOffset"]);return a!=null&&u(e,["startOffset"],a),e}function JC(t){const e={},i=r(t,["displayName"]);i!=null&&u(e,["displayName"],i);const o=r(t,["data"]);o!=null&&u(e,["data"],o);const a=r(t,["mimeType"]);return a!=null&&u(e,["mimeType"],a),e}function $C(t){const e={},i=r(t,["displayName"]);i!=null&&u(e,["displayName"],i);const o=r(t,["fileUri"]);o!=null&&u(e,["fileUri"],o);const a=r(t,["mimeType"]);return a!=null&&u(e,["mimeType"],a),e}function XC(t){const e={},i=r(t,["videoMetadata"]);i!=null&&u(e,["videoMetadata"],YC(i));const o=r(t,["thought"]);o!=null&&u(e,["thought"],o);const a=r(t,["inlineData"]);a!=null&&u(e,["inlineData"],JC(a));const f=r(t,["fileData"]);f!=null&&u(e,["fileData"],$C(f));const h=r(t,["thoughtSignature"]);h!=null&&u(e,["thoughtSignature"],h);const m=r(t,["codeExecutionResult"]);m!=null&&u(e,["codeExecutionResult"],m);const p=r(t,["executableCode"]);p!=null&&u(e,["executableCode"],p);const g=r(t,["functionCall"]);g!=null&&u(e,["functionCall"],g);const v=r(t,["functionResponse"]);v!=null&&u(e,["functionResponse"],v);const x=r(t,["text"]);return x!=null&&u(e,["text"],x),e}function KC(t){const e={},i=r(t,["parts"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(f=>XC(f))),u(e,["parts"],a)}const o=r(t,["role"]);return o!=null&&u(e,["role"],o),e}function Om(t){const e={},i=r(t,["text"]);i!=null&&u(e,["text"],i);const o=r(t,["finished"]);return o!=null&&u(e,["finished"],o),e}function QC(t){const e={},i=r(t,["modelTurn"]);i!=null&&u(e,["modelTurn"],KC(i));const o=r(t,["turnComplete"]);o!=null&&u(e,["turnComplete"],o);const a=r(t,["interrupted"]);a!=null&&u(e,["interrupted"],a);const f=r(t,["groundingMetadata"]);f!=null&&u(e,["groundingMetadata"],f);const h=r(t,["generationComplete"]);h!=null&&u(e,["generationComplete"],h);const m=r(t,["inputTranscription"]);m!=null&&u(e,["inputTranscription"],Om(m));const p=r(t,["outputTranscription"]);return p!=null&&u(e,["outputTranscription"],Om(p)),e}function ZC(t){const e={},i=r(t,["args"]);i!=null&&u(e,["args"],i);const o=r(t,["name"]);return o!=null&&u(e,["name"],o),e}function WC(t){const e={},i=r(t,["functionCalls"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>ZC(a))),u(e,["functionCalls"],o)}return e}function jC(t){const e={},i=r(t,["ids"]);return i!=null&&u(e,["ids"],i),e}function Xs(t){const e={},i=r(t,["modality"]);i!=null&&u(e,["modality"],i);const o=r(t,["tokenCount"]);return o!=null&&u(e,["tokenCount"],o),e}function e1(t){const e={},i=r(t,["promptTokenCount"]);i!=null&&u(e,["promptTokenCount"],i);const o=r(t,["cachedContentTokenCount"]);o!=null&&u(e,["cachedContentTokenCount"],o);const a=r(t,["candidatesTokenCount"]);a!=null&&u(e,["responseTokenCount"],a);const f=r(t,["toolUsePromptTokenCount"]);f!=null&&u(e,["toolUsePromptTokenCount"],f);const h=r(t,["thoughtsTokenCount"]);h!=null&&u(e,["thoughtsTokenCount"],h);const m=r(t,["totalTokenCount"]);m!=null&&u(e,["totalTokenCount"],m);const p=r(t,["promptTokensDetails"]);if(p!=null){let M=p;Array.isArray(M)&&(M=M.map(w=>Xs(w))),u(e,["promptTokensDetails"],M)}const g=r(t,["cacheTokensDetails"]);if(g!=null){let M=g;Array.isArray(M)&&(M=M.map(w=>Xs(w))),u(e,["cacheTokensDetails"],M)}const v=r(t,["candidatesTokensDetails"]);if(v!=null){let M=v;Array.isArray(M)&&(M=M.map(w=>Xs(w))),u(e,["responseTokensDetails"],M)}const x=r(t,["toolUsePromptTokensDetails"]);if(x!=null){let M=x;Array.isArray(M)&&(M=M.map(w=>Xs(w))),u(e,["toolUsePromptTokensDetails"],M)}const S=r(t,["trafficType"]);return S!=null&&u(e,["trafficType"],S),e}function t1(t){const e={},i=r(t,["timeLeft"]);return i!=null&&u(e,["timeLeft"],i),e}function n1(t){const e={},i=r(t,["newHandle"]);i!=null&&u(e,["newHandle"],i);const o=r(t,["resumable"]);o!=null&&u(e,["resumable"],o);const a=r(t,["lastConsumedClientMessageIndex"]);return a!=null&&u(e,["lastConsumedClientMessageIndex"],a),e}function i1(t){const e={},i=r(t,["setupComplete"]);i!=null&&u(e,["setupComplete"],OC(i));const o=r(t,["serverContent"]);o!=null&&u(e,["serverContent"],QC(o));const a=r(t,["toolCall"]);a!=null&&u(e,["toolCall"],WC(a));const f=r(t,["toolCallCancellation"]);f!=null&&u(e,["toolCallCancellation"],jC(f));const h=r(t,["usageMetadata"]);h!=null&&u(e,["usageMetadata"],e1(h));const m=r(t,["goAway"]);m!=null&&u(e,["goAway"],t1(m));const p=r(t,["sessionResumptionUpdate"]);return p!=null&&u(e,["sessionResumptionUpdate"],n1(p)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function l1(t){const e={},i=r(t,["fps"]);i!=null&&u(e,["fps"],i);const o=r(t,["endOffset"]);o!=null&&u(e,["endOffset"],o);const a=r(t,["startOffset"]);return a!=null&&u(e,["startOffset"],a),e}function o1(t){const e={};if(r(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=r(t,["data"]);i!=null&&u(e,["data"],i);const o=r(t,["mimeType"]);return o!=null&&u(e,["mimeType"],o),e}function s1(t){const e={};if(r(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=r(t,["fileUri"]);i!=null&&u(e,["fileUri"],i);const o=r(t,["mimeType"]);return o!=null&&u(e,["mimeType"],o),e}function a1(t){const e={},i=r(t,["videoMetadata"]);i!=null&&u(e,["videoMetadata"],l1(i));const o=r(t,["thought"]);o!=null&&u(e,["thought"],o);const a=r(t,["inlineData"]);a!=null&&u(e,["inlineData"],o1(a));const f=r(t,["fileData"]);f!=null&&u(e,["fileData"],s1(f));const h=r(t,["thoughtSignature"]);h!=null&&u(e,["thoughtSignature"],h);const m=r(t,["codeExecutionResult"]);m!=null&&u(e,["codeExecutionResult"],m);const p=r(t,["executableCode"]);p!=null&&u(e,["executableCode"],p);const g=r(t,["functionCall"]);g!=null&&u(e,["functionCall"],g);const v=r(t,["functionResponse"]);v!=null&&u(e,["functionResponse"],v);const x=r(t,["text"]);return x!=null&&u(e,["text"],x),e}function oa(t){const e={},i=r(t,["parts"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(f=>a1(f))),u(e,["parts"],a)}const o=r(t,["role"]);return o!=null&&u(e,["role"],o),e}function r1(t){const e={},i=r(t,["anyOf"]);i!=null&&u(e,["anyOf"],i);const o=r(t,["default"]);o!=null&&u(e,["default"],o);const a=r(t,["description"]);a!=null&&u(e,["description"],a);const f=r(t,["enum"]);f!=null&&u(e,["enum"],f);const h=r(t,["example"]);h!=null&&u(e,["example"],h);const m=r(t,["format"]);m!=null&&u(e,["format"],m);const p=r(t,["items"]);p!=null&&u(e,["items"],p);const g=r(t,["maxItems"]);g!=null&&u(e,["maxItems"],g);const v=r(t,["maxLength"]);v!=null&&u(e,["maxLength"],v);const x=r(t,["maxProperties"]);x!=null&&u(e,["maxProperties"],x);const S=r(t,["maximum"]);S!=null&&u(e,["maximum"],S);const M=r(t,["minItems"]);M!=null&&u(e,["minItems"],M);const w=r(t,["minLength"]);w!=null&&u(e,["minLength"],w);const D=r(t,["minProperties"]);D!=null&&u(e,["minProperties"],D);const k=r(t,["minimum"]);k!=null&&u(e,["minimum"],k);const q=r(t,["nullable"]);q!=null&&u(e,["nullable"],q);const N=r(t,["pattern"]);N!=null&&u(e,["pattern"],N);const F=r(t,["properties"]);F!=null&&u(e,["properties"],F);const X=r(t,["propertyOrdering"]);X!=null&&u(e,["propertyOrdering"],X);const G=r(t,["required"]);G!=null&&u(e,["required"],G);const $=r(t,["title"]);$!=null&&u(e,["title"],$);const ie=r(t,["type"]);return ie!=null&&u(e,["type"],ie),e}function u1(t){const e={};if(r(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=r(t,["category"]);i!=null&&u(e,["category"],i);const o=r(t,["threshold"]);return o!=null&&u(e,["threshold"],o),e}function c1(t){const e={},i=r(t,["behavior"]);i!=null&&u(e,["behavior"],i);const o=r(t,["description"]);o!=null&&u(e,["description"],o);const a=r(t,["name"]);a!=null&&u(e,["name"],a);const f=r(t,["parameters"]);f!=null&&u(e,["parameters"],f);const h=r(t,["parametersJsonSchema"]);h!=null&&u(e,["parametersJsonSchema"],h);const m=r(t,["response"]);m!=null&&u(e,["response"],m);const p=r(t,["responseJsonSchema"]);return p!=null&&u(e,["responseJsonSchema"],p),e}function f1(t){const e={},i=r(t,["startTime"]);i!=null&&u(e,["startTime"],i);const o=r(t,["endTime"]);return o!=null&&u(e,["endTime"],o),e}function d1(t){const e={},i=r(t,["timeRangeFilter"]);return i!=null&&u(e,["timeRangeFilter"],f1(i)),e}function h1(t){const e={},i=r(t,["mode"]);i!=null&&u(e,["mode"],i);const o=r(t,["dynamicThreshold"]);return o!=null&&u(e,["dynamicThreshold"],o),e}function m1(t){const e={},i=r(t,["dynamicRetrievalConfig"]);return i!=null&&u(e,["dynamicRetrievalConfig"],h1(i)),e}function g1(){return{}}function p1(t){const e={},i=r(t,["functionDeclarations"]);if(i!=null){let p=i;Array.isArray(p)&&(p=p.map(g=>c1(g))),u(e,["functionDeclarations"],p)}if(r(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=r(t,["googleSearch"]);o!=null&&u(e,["googleSearch"],d1(o));const a=r(t,["googleSearchRetrieval"]);if(a!=null&&u(e,["googleSearchRetrieval"],m1(a)),r(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(r(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");r(t,["urlContext"])!=null&&u(e,["urlContext"],g1());const h=r(t,["codeExecution"]);h!=null&&u(e,["codeExecution"],h);const m=r(t,["computerUse"]);return m!=null&&u(e,["computerUse"],m),e}function y1(t){const e={},i=r(t,["mode"]);i!=null&&u(e,["mode"],i);const o=r(t,["allowedFunctionNames"]);return o!=null&&u(e,["allowedFunctionNames"],o),e}function v1(t){const e={},i=r(t,["latitude"]);i!=null&&u(e,["latitude"],i);const o=r(t,["longitude"]);return o!=null&&u(e,["longitude"],o),e}function T1(t){const e={},i=r(t,["latLng"]);i!=null&&u(e,["latLng"],v1(i));const o=r(t,["languageCode"]);return o!=null&&u(e,["languageCode"],o),e}function x1(t){const e={},i=r(t,["functionCallingConfig"]);i!=null&&u(e,["functionCallingConfig"],y1(i));const o=r(t,["retrievalConfig"]);return o!=null&&u(e,["retrievalConfig"],T1(o)),e}function C1(t){const e={},i=r(t,["voiceName"]);return i!=null&&u(e,["voiceName"],i),e}function Fg(t){const e={},i=r(t,["prebuiltVoiceConfig"]);return i!=null&&u(e,["prebuiltVoiceConfig"],C1(i)),e}function S1(t){const e={},i=r(t,["speaker"]);i!=null&&u(e,["speaker"],i);const o=r(t,["voiceConfig"]);return o!=null&&u(e,["voiceConfig"],Fg(o)),e}function E1(t){const e={},i=r(t,["speakerVoiceConfigs"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>S1(a))),u(e,["speakerVoiceConfigs"],o)}return e}function M1(t){const e={},i=r(t,["voiceConfig"]);i!=null&&u(e,["voiceConfig"],Fg(i));const o=r(t,["multiSpeakerVoiceConfig"]);o!=null&&u(e,["multiSpeakerVoiceConfig"],E1(o));const a=r(t,["languageCode"]);return a!=null&&u(e,["languageCode"],a),e}function _1(t){const e={},i=r(t,["includeThoughts"]);i!=null&&u(e,["includeThoughts"],i);const o=r(t,["thinkingBudget"]);return o!=null&&u(e,["thinkingBudget"],o),e}function A1(t,e,i){const o={},a=r(e,["systemInstruction"]);i!==void 0&&a!=null&&u(i,["systemInstruction"],oa(qt(a)));const f=r(e,["temperature"]);f!=null&&u(o,["temperature"],f);const h=r(e,["topP"]);h!=null&&u(o,["topP"],h);const m=r(e,["topK"]);m!=null&&u(o,["topK"],m);const p=r(e,["candidateCount"]);p!=null&&u(o,["candidateCount"],p);const g=r(e,["maxOutputTokens"]);g!=null&&u(o,["maxOutputTokens"],g);const v=r(e,["stopSequences"]);v!=null&&u(o,["stopSequences"],v);const x=r(e,["responseLogprobs"]);x!=null&&u(o,["responseLogprobs"],x);const S=r(e,["logprobs"]);S!=null&&u(o,["logprobs"],S);const M=r(e,["presencePenalty"]);M!=null&&u(o,["presencePenalty"],M);const w=r(e,["frequencyPenalty"]);w!=null&&u(o,["frequencyPenalty"],w);const D=r(e,["seed"]);D!=null&&u(o,["seed"],D);const k=r(e,["responseMimeType"]);k!=null&&u(o,["responseMimeType"],k);const q=r(e,["responseSchema"]);q!=null&&u(o,["responseSchema"],r1(zu(q)));const N=r(e,["responseJsonSchema"]);if(N!=null&&u(o,["responseJsonSchema"],N),r(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(r(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const F=r(e,["safetySettings"]);if(i!==void 0&&F!=null){let me=F;Array.isArray(me)&&(me=me.map(pe=>u1(pe))),u(i,["safetySettings"],me)}const X=r(e,["tools"]);if(i!==void 0&&X!=null){let me=Dl(X);Array.isArray(me)&&(me=me.map(pe=>p1(wl(pe)))),u(i,["tools"],me)}const G=r(e,["toolConfig"]);if(i!==void 0&&G!=null&&u(i,["toolConfig"],x1(G)),r(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const $=r(e,["cachedContent"]);i!==void 0&&$!=null&&u(i,["cachedContent"],$n(t,$));const ie=r(e,["responseModalities"]);ie!=null&&u(o,["responseModalities"],ie);const se=r(e,["mediaResolution"]);se!=null&&u(o,["mediaResolution"],se);const ne=r(e,["speechConfig"]);if(ne!=null&&u(o,["speechConfig"],M1(Fu(ne))),r(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const he=r(e,["thinkingConfig"]);return he!=null&&u(o,["thinkingConfig"],_1(he)),o}function Ym(t,e){const i={},o=r(e,["model"]);o!=null&&u(i,["_url","model"],et(t,o));const a=r(e,["contents"]);if(a!=null){let h=dn(a);Array.isArray(h)&&(h=h.map(m=>oa(m))),u(i,["contents"],h)}const f=r(e,["config"]);return f!=null&&u(i,["generationConfig"],A1(t,f,i)),i}function N1(t,e){const i={},o=r(t,["taskType"]);e!==void 0&&o!=null&&u(e,["requests[]","taskType"],o);const a=r(t,["title"]);e!==void 0&&a!=null&&u(e,["requests[]","title"],a);const f=r(t,["outputDimensionality"]);if(e!==void 0&&f!=null&&u(e,["requests[]","outputDimensionality"],f),r(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(r(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return i}function R1(t,e){const i={},o=r(e,["model"]);o!=null&&u(i,["_url","model"],et(t,o));const a=r(e,["contents"]);a!=null&&u(i,["requests[]","content"],Ag(t,a));const f=r(e,["config"]);f!=null&&u(i,["config"],N1(f,i));const h=r(e,["model"]);return h!==void 0&&u(i,["requests[]","model"],et(t,h)),i}function b1(t,e){const i={};if(r(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(r(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const o=r(t,["numberOfImages"]);e!==void 0&&o!=null&&u(e,["parameters","sampleCount"],o);const a=r(t,["aspectRatio"]);e!==void 0&&a!=null&&u(e,["parameters","aspectRatio"],a);const f=r(t,["guidanceScale"]);if(e!==void 0&&f!=null&&u(e,["parameters","guidanceScale"],f),r(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const h=r(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&u(e,["parameters","safetySetting"],h);const m=r(t,["personGeneration"]);e!==void 0&&m!=null&&u(e,["parameters","personGeneration"],m);const p=r(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&u(e,["parameters","includeSafetyAttributes"],p);const g=r(t,["includeRaiReason"]);e!==void 0&&g!=null&&u(e,["parameters","includeRaiReason"],g);const v=r(t,["language"]);e!==void 0&&v!=null&&u(e,["parameters","language"],v);const x=r(t,["outputMimeType"]);e!==void 0&&x!=null&&u(e,["parameters","outputOptions","mimeType"],x);const S=r(t,["outputCompressionQuality"]);if(e!==void 0&&S!=null&&u(e,["parameters","outputOptions","compressionQuality"],S),r(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(r(t,["imageSize"])!==void 0)throw new Error("imageSize parameter is not supported in Gemini API.");if(r(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return i}function w1(t,e){const i={},o=r(e,["model"]);o!=null&&u(i,["_url","model"],et(t,o));const a=r(e,["prompt"]);a!=null&&u(i,["instances[0]","prompt"],a);const f=r(e,["config"]);return f!=null&&u(i,["config"],b1(f,i)),i}function D1(t,e){const i={},o=r(e,["model"]);o!=null&&u(i,["_url","name"],et(t,o));const a=r(e,["config"]);return a!=null&&u(i,["config"],a),i}function L1(t,e,i){const o={},a=r(e,["pageSize"]);i!==void 0&&a!=null&&u(i,["_query","pageSize"],a);const f=r(e,["pageToken"]);i!==void 0&&f!=null&&u(i,["_query","pageToken"],f);const h=r(e,["filter"]);i!==void 0&&h!=null&&u(i,["_query","filter"],h);const m=r(e,["queryBase"]);return i!==void 0&&m!=null&&u(i,["_url","models_url"],bg(t,m)),o}function U1(t,e){const i={},o=r(e,["config"]);return o!=null&&u(i,["config"],L1(t,o,i)),i}function I1(t,e){const i={},o=r(t,["displayName"]);e!==void 0&&o!=null&&u(e,["displayName"],o);const a=r(t,["description"]);e!==void 0&&a!=null&&u(e,["description"],a);const f=r(t,["defaultCheckpointId"]);return e!==void 0&&f!=null&&u(e,["defaultCheckpointId"],f),i}function k1(t,e){const i={},o=r(e,["model"]);o!=null&&u(i,["_url","name"],et(t,o));const a=r(e,["config"]);return a!=null&&u(i,["config"],I1(a,i)),i}function B1(t,e){const i={},o=r(e,["model"]);o!=null&&u(i,["_url","name"],et(t,o));const a=r(e,["config"]);return a!=null&&u(i,["config"],a),i}function P1(t){const e={};if(r(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(r(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(r(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function V1(t,e){const i={},o=r(e,["model"]);o!=null&&u(i,["_url","model"],et(t,o));const a=r(e,["contents"]);if(a!=null){let h=dn(a);Array.isArray(h)&&(h=h.map(m=>oa(m))),u(i,["contents"],h)}const f=r(e,["config"]);return f!=null&&u(i,["config"],P1(f)),i}function q1(t){const e={};if(r(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const i=r(t,["imageBytes"]);i!=null&&u(e,["bytesBase64Encoded"],qi(i));const o=r(t,["mimeType"]);return o!=null&&u(e,["mimeType"],o),e}function G1(t,e){const i={},o=r(t,["numberOfVideos"]);if(e!==void 0&&o!=null&&u(e,["parameters","sampleCount"],o),r(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(r(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const a=r(t,["durationSeconds"]);if(e!==void 0&&a!=null&&u(e,["parameters","durationSeconds"],a),r(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const f=r(t,["aspectRatio"]);if(e!==void 0&&f!=null&&u(e,["parameters","aspectRatio"],f),r(t,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const h=r(t,["personGeneration"]);if(e!==void 0&&h!=null&&u(e,["parameters","personGeneration"],h),r(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const m=r(t,["negativePrompt"]);e!==void 0&&m!=null&&u(e,["parameters","negativePrompt"],m);const p=r(t,["enhancePrompt"]);if(e!==void 0&&p!=null&&u(e,["parameters","enhancePrompt"],p),r(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");if(r(t,["lastFrame"])!==void 0)throw new Error("lastFrame parameter is not supported in Gemini API.");if(r(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return i}function H1(t,e){const i={},o=r(e,["model"]);o!=null&&u(i,["_url","model"],et(t,o));const a=r(e,["prompt"]);a!=null&&u(i,["instances[0]","prompt"],a);const f=r(e,["image"]);if(f!=null&&u(i,["instances[0]","image"],q1(f)),r(e,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");const h=r(e,["config"]);return h!=null&&u(i,["config"],G1(h,i)),i}function z1(t){const e={},i=r(t,["fps"]);i!=null&&u(e,["fps"],i);const o=r(t,["endOffset"]);o!=null&&u(e,["endOffset"],o);const a=r(t,["startOffset"]);return a!=null&&u(e,["startOffset"],a),e}function F1(t){const e={},i=r(t,["displayName"]);i!=null&&u(e,["displayName"],i);const o=r(t,["data"]);o!=null&&u(e,["data"],o);const a=r(t,["mimeType"]);return a!=null&&u(e,["mimeType"],a),e}function O1(t){const e={},i=r(t,["displayName"]);i!=null&&u(e,["displayName"],i);const o=r(t,["fileUri"]);o!=null&&u(e,["fileUri"],o);const a=r(t,["mimeType"]);return a!=null&&u(e,["mimeType"],a),e}function Y1(t){const e={},i=r(t,["videoMetadata"]);i!=null&&u(e,["videoMetadata"],z1(i));const o=r(t,["thought"]);o!=null&&u(e,["thought"],o);const a=r(t,["inlineData"]);a!=null&&u(e,["inlineData"],F1(a));const f=r(t,["fileData"]);f!=null&&u(e,["fileData"],O1(f));const h=r(t,["thoughtSignature"]);h!=null&&u(e,["thoughtSignature"],h);const m=r(t,["codeExecutionResult"]);m!=null&&u(e,["codeExecutionResult"],m);const p=r(t,["executableCode"]);p!=null&&u(e,["executableCode"],p);const g=r(t,["functionCall"]);g!=null&&u(e,["functionCall"],g);const v=r(t,["functionResponse"]);v!=null&&u(e,["functionResponse"],v);const x=r(t,["text"]);return x!=null&&u(e,["text"],x),e}function Ul(t){const e={},i=r(t,["parts"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(f=>Y1(f))),u(e,["parts"],a)}const o=r(t,["role"]);return o!=null&&u(e,["role"],o),e}function J1(t){const e={},i=r(t,["anyOf"]);i!=null&&u(e,["anyOf"],i);const o=r(t,["default"]);o!=null&&u(e,["default"],o);const a=r(t,["description"]);a!=null&&u(e,["description"],a);const f=r(t,["enum"]);f!=null&&u(e,["enum"],f);const h=r(t,["example"]);h!=null&&u(e,["example"],h);const m=r(t,["format"]);m!=null&&u(e,["format"],m);const p=r(t,["items"]);p!=null&&u(e,["items"],p);const g=r(t,["maxItems"]);g!=null&&u(e,["maxItems"],g);const v=r(t,["maxLength"]);v!=null&&u(e,["maxLength"],v);const x=r(t,["maxProperties"]);x!=null&&u(e,["maxProperties"],x);const S=r(t,["maximum"]);S!=null&&u(e,["maximum"],S);const M=r(t,["minItems"]);M!=null&&u(e,["minItems"],M);const w=r(t,["minLength"]);w!=null&&u(e,["minLength"],w);const D=r(t,["minProperties"]);D!=null&&u(e,["minProperties"],D);const k=r(t,["minimum"]);k!=null&&u(e,["minimum"],k);const q=r(t,["nullable"]);q!=null&&u(e,["nullable"],q);const N=r(t,["pattern"]);N!=null&&u(e,["pattern"],N);const F=r(t,["properties"]);F!=null&&u(e,["properties"],F);const X=r(t,["propertyOrdering"]);X!=null&&u(e,["propertyOrdering"],X);const G=r(t,["required"]);G!=null&&u(e,["required"],G);const $=r(t,["title"]);$!=null&&u(e,["title"],$);const ie=r(t,["type"]);return ie!=null&&u(e,["type"],ie),e}function $1(t){const e={},i=r(t,["featureSelectionPreference"]);return i!=null&&u(e,["featureSelectionPreference"],i),e}function X1(t){const e={},i=r(t,["method"]);i!=null&&u(e,["method"],i);const o=r(t,["category"]);o!=null&&u(e,["category"],o);const a=r(t,["threshold"]);return a!=null&&u(e,["threshold"],a),e}function K1(t){const e={};if(r(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const i=r(t,["description"]);i!=null&&u(e,["description"],i);const o=r(t,["name"]);o!=null&&u(e,["name"],o);const a=r(t,["parameters"]);a!=null&&u(e,["parameters"],a);const f=r(t,["parametersJsonSchema"]);f!=null&&u(e,["parametersJsonSchema"],f);const h=r(t,["response"]);h!=null&&u(e,["response"],h);const m=r(t,["responseJsonSchema"]);return m!=null&&u(e,["responseJsonSchema"],m),e}function Q1(t){const e={},i=r(t,["startTime"]);i!=null&&u(e,["startTime"],i);const o=r(t,["endTime"]);return o!=null&&u(e,["endTime"],o),e}function Z1(t){const e={},i=r(t,["timeRangeFilter"]);return i!=null&&u(e,["timeRangeFilter"],Q1(i)),e}function W1(t){const e={},i=r(t,["mode"]);i!=null&&u(e,["mode"],i);const o=r(t,["dynamicThreshold"]);return o!=null&&u(e,["dynamicThreshold"],o),e}function j1(t){const e={},i=r(t,["dynamicRetrievalConfig"]);return i!=null&&u(e,["dynamicRetrievalConfig"],W1(i)),e}function eS(){return{}}function tS(t){const e={},i=r(t,["apiKeyString"]);return i!=null&&u(e,["apiKeyString"],i),e}function nS(t){const e={},i=r(t,["apiKeyConfig"]);i!=null&&u(e,["apiKeyConfig"],tS(i));const o=r(t,["authType"]);o!=null&&u(e,["authType"],o);const a=r(t,["googleServiceAccountConfig"]);a!=null&&u(e,["googleServiceAccountConfig"],a);const f=r(t,["httpBasicAuthConfig"]);f!=null&&u(e,["httpBasicAuthConfig"],f);const h=r(t,["oauthConfig"]);h!=null&&u(e,["oauthConfig"],h);const m=r(t,["oidcConfig"]);return m!=null&&u(e,["oidcConfig"],m),e}function iS(t){const e={},i=r(t,["authConfig"]);return i!=null&&u(e,["authConfig"],nS(i)),e}function lS(){return{}}function Og(t){const e={},i=r(t,["functionDeclarations"]);if(i!=null){let x=i;Array.isArray(x)&&(x=x.map(S=>K1(S))),u(e,["functionDeclarations"],x)}const o=r(t,["retrieval"]);o!=null&&u(e,["retrieval"],o);const a=r(t,["googleSearch"]);a!=null&&u(e,["googleSearch"],Z1(a));const f=r(t,["googleSearchRetrieval"]);f!=null&&u(e,["googleSearchRetrieval"],j1(f)),r(t,["enterpriseWebSearch"])!=null&&u(e,["enterpriseWebSearch"],eS());const m=r(t,["googleMaps"]);m!=null&&u(e,["googleMaps"],iS(m)),r(t,["urlContext"])!=null&&u(e,["urlContext"],lS());const g=r(t,["codeExecution"]);g!=null&&u(e,["codeExecution"],g);const v=r(t,["computerUse"]);return v!=null&&u(e,["computerUse"],v),e}function oS(t){const e={},i=r(t,["mode"]);i!=null&&u(e,["mode"],i);const o=r(t,["allowedFunctionNames"]);return o!=null&&u(e,["allowedFunctionNames"],o),e}function sS(t){const e={},i=r(t,["latitude"]);i!=null&&u(e,["latitude"],i);const o=r(t,["longitude"]);return o!=null&&u(e,["longitude"],o),e}function aS(t){const e={},i=r(t,["latLng"]);i!=null&&u(e,["latLng"],sS(i));const o=r(t,["languageCode"]);return o!=null&&u(e,["languageCode"],o),e}function rS(t){const e={},i=r(t,["functionCallingConfig"]);i!=null&&u(e,["functionCallingConfig"],oS(i));const o=r(t,["retrievalConfig"]);return o!=null&&u(e,["retrievalConfig"],aS(o)),e}function uS(t){const e={},i=r(t,["voiceName"]);return i!=null&&u(e,["voiceName"],i),e}function cS(t){const e={},i=r(t,["prebuiltVoiceConfig"]);return i!=null&&u(e,["prebuiltVoiceConfig"],uS(i)),e}function fS(t){const e={},i=r(t,["voiceConfig"]);if(i!=null&&u(e,["voiceConfig"],cS(i)),r(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const o=r(t,["languageCode"]);return o!=null&&u(e,["languageCode"],o),e}function dS(t){const e={},i=r(t,["includeThoughts"]);i!=null&&u(e,["includeThoughts"],i);const o=r(t,["thinkingBudget"]);return o!=null&&u(e,["thinkingBudget"],o),e}function hS(t,e,i){const o={},a=r(e,["systemInstruction"]);i!==void 0&&a!=null&&u(i,["systemInstruction"],Ul(qt(a)));const f=r(e,["temperature"]);f!=null&&u(o,["temperature"],f);const h=r(e,["topP"]);h!=null&&u(o,["topP"],h);const m=r(e,["topK"]);m!=null&&u(o,["topK"],m);const p=r(e,["candidateCount"]);p!=null&&u(o,["candidateCount"],p);const g=r(e,["maxOutputTokens"]);g!=null&&u(o,["maxOutputTokens"],g);const v=r(e,["stopSequences"]);v!=null&&u(o,["stopSequences"],v);const x=r(e,["responseLogprobs"]);x!=null&&u(o,["responseLogprobs"],x);const S=r(e,["logprobs"]);S!=null&&u(o,["logprobs"],S);const M=r(e,["presencePenalty"]);M!=null&&u(o,["presencePenalty"],M);const w=r(e,["frequencyPenalty"]);w!=null&&u(o,["frequencyPenalty"],w);const D=r(e,["seed"]);D!=null&&u(o,["seed"],D);const k=r(e,["responseMimeType"]);k!=null&&u(o,["responseMimeType"],k);const q=r(e,["responseSchema"]);q!=null&&u(o,["responseSchema"],J1(zu(q)));const N=r(e,["responseJsonSchema"]);N!=null&&u(o,["responseJsonSchema"],N);const F=r(e,["routingConfig"]);F!=null&&u(o,["routingConfig"],F);const X=r(e,["modelSelectionConfig"]);X!=null&&u(o,["modelConfig"],$1(X));const G=r(e,["safetySettings"]);if(i!==void 0&&G!=null){let qe=G;Array.isArray(qe)&&(qe=qe.map(K=>X1(K))),u(i,["safetySettings"],qe)}const $=r(e,["tools"]);if(i!==void 0&&$!=null){let qe=Dl($);Array.isArray(qe)&&(qe=qe.map(K=>Og(wl(K)))),u(i,["tools"],qe)}const ie=r(e,["toolConfig"]);i!==void 0&&ie!=null&&u(i,["toolConfig"],rS(ie));const se=r(e,["labels"]);i!==void 0&&se!=null&&u(i,["labels"],se);const ne=r(e,["cachedContent"]);i!==void 0&&ne!=null&&u(i,["cachedContent"],$n(t,ne));const he=r(e,["responseModalities"]);he!=null&&u(o,["responseModalities"],he);const me=r(e,["mediaResolution"]);me!=null&&u(o,["mediaResolution"],me);const pe=r(e,["speechConfig"]);pe!=null&&u(o,["speechConfig"],fS(Fu(pe)));const Oe=r(e,["audioTimestamp"]);Oe!=null&&u(o,["audioTimestamp"],Oe);const ye=r(e,["thinkingConfig"]);return ye!=null&&u(o,["thinkingConfig"],dS(ye)),o}function Jm(t,e){const i={},o=r(e,["model"]);o!=null&&u(i,["_url","model"],et(t,o));const a=r(e,["contents"]);if(a!=null){let h=dn(a);Array.isArray(h)&&(h=h.map(m=>Ul(m))),u(i,["contents"],h)}const f=r(e,["config"]);return f!=null&&u(i,["generationConfig"],hS(t,f,i)),i}function mS(t,e){const i={},o=r(t,["taskType"]);e!==void 0&&o!=null&&u(e,["instances[]","task_type"],o);const a=r(t,["title"]);e!==void 0&&a!=null&&u(e,["instances[]","title"],a);const f=r(t,["outputDimensionality"]);e!==void 0&&f!=null&&u(e,["parameters","outputDimensionality"],f);const h=r(t,["mimeType"]);e!==void 0&&h!=null&&u(e,["instances[]","mimeType"],h);const m=r(t,["autoTruncate"]);return e!==void 0&&m!=null&&u(e,["parameters","autoTruncate"],m),i}function gS(t,e){const i={},o=r(e,["model"]);o!=null&&u(i,["_url","model"],et(t,o));const a=r(e,["contents"]);a!=null&&u(i,["instances[]","content"],Ag(t,a));const f=r(e,["config"]);return f!=null&&u(i,["config"],mS(f,i)),i}function pS(t,e){const i={},o=r(t,["outputGcsUri"]);e!==void 0&&o!=null&&u(e,["parameters","storageUri"],o);const a=r(t,["negativePrompt"]);e!==void 0&&a!=null&&u(e,["parameters","negativePrompt"],a);const f=r(t,["numberOfImages"]);e!==void 0&&f!=null&&u(e,["parameters","sampleCount"],f);const h=r(t,["aspectRatio"]);e!==void 0&&h!=null&&u(e,["parameters","aspectRatio"],h);const m=r(t,["guidanceScale"]);e!==void 0&&m!=null&&u(e,["parameters","guidanceScale"],m);const p=r(t,["seed"]);e!==void 0&&p!=null&&u(e,["parameters","seed"],p);const g=r(t,["safetyFilterLevel"]);e!==void 0&&g!=null&&u(e,["parameters","safetySetting"],g);const v=r(t,["personGeneration"]);e!==void 0&&v!=null&&u(e,["parameters","personGeneration"],v);const x=r(t,["includeSafetyAttributes"]);e!==void 0&&x!=null&&u(e,["parameters","includeSafetyAttributes"],x);const S=r(t,["includeRaiReason"]);e!==void 0&&S!=null&&u(e,["parameters","includeRaiReason"],S);const M=r(t,["language"]);e!==void 0&&M!=null&&u(e,["parameters","language"],M);const w=r(t,["outputMimeType"]);e!==void 0&&w!=null&&u(e,["parameters","outputOptions","mimeType"],w);const D=r(t,["outputCompressionQuality"]);e!==void 0&&D!=null&&u(e,["parameters","outputOptions","compressionQuality"],D);const k=r(t,["addWatermark"]);e!==void 0&&k!=null&&u(e,["parameters","addWatermark"],k);const q=r(t,["imageSize"]);e!==void 0&&q!=null&&u(e,["parameters","sampleImageSize"],q);const N=r(t,["enhancePrompt"]);return e!==void 0&&N!=null&&u(e,["parameters","enhancePrompt"],N),i}function yS(t,e){const i={},o=r(e,["model"]);o!=null&&u(i,["_url","model"],et(t,o));const a=r(e,["prompt"]);a!=null&&u(i,["instances[0]","prompt"],a);const f=r(e,["config"]);return f!=null&&u(i,["config"],pS(f,i)),i}function sa(t){const e={},i=r(t,["gcsUri"]);i!=null&&u(e,["gcsUri"],i);const o=r(t,["imageBytes"]);o!=null&&u(e,["bytesBase64Encoded"],qi(o));const a=r(t,["mimeType"]);return a!=null&&u(e,["mimeType"],a),e}function vS(t){const e={},i=r(t,["maskMode"]);i!=null&&u(e,["maskMode"],i);const o=r(t,["segmentationClasses"]);o!=null&&u(e,["maskClasses"],o);const a=r(t,["maskDilation"]);return a!=null&&u(e,["dilation"],a),e}function TS(t){const e={},i=r(t,["controlType"]);i!=null&&u(e,["controlType"],i);const o=r(t,["enableControlImageComputation"]);return o!=null&&u(e,["computeControl"],o),e}function xS(t){const e={},i=r(t,["styleDescription"]);return i!=null&&u(e,["styleDescription"],i),e}function CS(t){const e={},i=r(t,["subjectType"]);i!=null&&u(e,["subjectType"],i);const o=r(t,["subjectDescription"]);return o!=null&&u(e,["subjectDescription"],o),e}function SS(t){const e={},i=r(t,["referenceImage"]);i!=null&&u(e,["referenceImage"],sa(i));const o=r(t,["referenceId"]);o!=null&&u(e,["referenceId"],o);const a=r(t,["referenceType"]);a!=null&&u(e,["referenceType"],a);const f=r(t,["maskImageConfig"]);f!=null&&u(e,["maskImageConfig"],vS(f));const h=r(t,["controlImageConfig"]);h!=null&&u(e,["controlImageConfig"],TS(h));const m=r(t,["styleImageConfig"]);m!=null&&u(e,["styleImageConfig"],xS(m));const p=r(t,["subjectImageConfig"]);return p!=null&&u(e,["subjectImageConfig"],CS(p)),e}function ES(t,e){const i={},o=r(t,["outputGcsUri"]);e!==void 0&&o!=null&&u(e,["parameters","storageUri"],o);const a=r(t,["negativePrompt"]);e!==void 0&&a!=null&&u(e,["parameters","negativePrompt"],a);const f=r(t,["numberOfImages"]);e!==void 0&&f!=null&&u(e,["parameters","sampleCount"],f);const h=r(t,["aspectRatio"]);e!==void 0&&h!=null&&u(e,["parameters","aspectRatio"],h);const m=r(t,["guidanceScale"]);e!==void 0&&m!=null&&u(e,["parameters","guidanceScale"],m);const p=r(t,["seed"]);e!==void 0&&p!=null&&u(e,["parameters","seed"],p);const g=r(t,["safetyFilterLevel"]);e!==void 0&&g!=null&&u(e,["parameters","safetySetting"],g);const v=r(t,["personGeneration"]);e!==void 0&&v!=null&&u(e,["parameters","personGeneration"],v);const x=r(t,["includeSafetyAttributes"]);e!==void 0&&x!=null&&u(e,["parameters","includeSafetyAttributes"],x);const S=r(t,["includeRaiReason"]);e!==void 0&&S!=null&&u(e,["parameters","includeRaiReason"],S);const M=r(t,["language"]);e!==void 0&&M!=null&&u(e,["parameters","language"],M);const w=r(t,["outputMimeType"]);e!==void 0&&w!=null&&u(e,["parameters","outputOptions","mimeType"],w);const D=r(t,["outputCompressionQuality"]);e!==void 0&&D!=null&&u(e,["parameters","outputOptions","compressionQuality"],D);const k=r(t,["addWatermark"]);e!==void 0&&k!=null&&u(e,["parameters","addWatermark"],k);const q=r(t,["editMode"]);e!==void 0&&q!=null&&u(e,["parameters","editMode"],q);const N=r(t,["baseSteps"]);return e!==void 0&&N!=null&&u(e,["parameters","editConfig","baseSteps"],N),i}function MS(t,e){const i={},o=r(e,["model"]);o!=null&&u(i,["_url","model"],et(t,o));const a=r(e,["prompt"]);a!=null&&u(i,["instances[0]","prompt"],a);const f=r(e,["referenceImages"]);if(f!=null){let m=f;Array.isArray(m)&&(m=m.map(p=>SS(p))),u(i,["instances[0]","referenceImages"],m)}const h=r(e,["config"]);return h!=null&&u(i,["config"],ES(h,i)),i}function _S(t,e){const i={},o=r(t,["includeRaiReason"]);e!==void 0&&o!=null&&u(e,["parameters","includeRaiReason"],o);const a=r(t,["outputMimeType"]);e!==void 0&&a!=null&&u(e,["parameters","outputOptions","mimeType"],a);const f=r(t,["outputCompressionQuality"]);e!==void 0&&f!=null&&u(e,["parameters","outputOptions","compressionQuality"],f);const h=r(t,["enhanceInputImage"]);e!==void 0&&h!=null&&u(e,["parameters","upscaleConfig","enhanceInputImage"],h);const m=r(t,["imagePreservationFactor"]);e!==void 0&&m!=null&&u(e,["parameters","upscaleConfig","imagePreservationFactor"],m);const p=r(t,["numberOfImages"]);e!==void 0&&p!=null&&u(e,["parameters","sampleCount"],p);const g=r(t,["mode"]);return e!==void 0&&g!=null&&u(e,["parameters","mode"],g),i}function AS(t,e){const i={},o=r(e,["model"]);o!=null&&u(i,["_url","model"],et(t,o));const a=r(e,["image"]);a!=null&&u(i,["instances[0]","image"],sa(a));const f=r(e,["upscaleFactor"]);f!=null&&u(i,["parameters","upscaleConfig","upscaleFactor"],f);const h=r(e,["config"]);return h!=null&&u(i,["config"],_S(h,i)),i}function NS(t,e){const i={},o=r(e,["model"]);o!=null&&u(i,["_url","name"],et(t,o));const a=r(e,["config"]);return a!=null&&u(i,["config"],a),i}function RS(t,e,i){const o={},a=r(e,["pageSize"]);i!==void 0&&a!=null&&u(i,["_query","pageSize"],a);const f=r(e,["pageToken"]);i!==void 0&&f!=null&&u(i,["_query","pageToken"],f);const h=r(e,["filter"]);i!==void 0&&h!=null&&u(i,["_query","filter"],h);const m=r(e,["queryBase"]);return i!==void 0&&m!=null&&u(i,["_url","models_url"],bg(t,m)),o}function bS(t,e){const i={},o=r(e,["config"]);return o!=null&&u(i,["config"],RS(t,o,i)),i}function wS(t,e){const i={},o=r(t,["displayName"]);e!==void 0&&o!=null&&u(e,["displayName"],o);const a=r(t,["description"]);e!==void 0&&a!=null&&u(e,["description"],a);const f=r(t,["defaultCheckpointId"]);return e!==void 0&&f!=null&&u(e,["defaultCheckpointId"],f),i}function DS(t,e){const i={},o=r(e,["model"]);o!=null&&u(i,["_url","model"],et(t,o));const a=r(e,["config"]);return a!=null&&u(i,["config"],wS(a,i)),i}function LS(t,e){const i={},o=r(e,["model"]);o!=null&&u(i,["_url","name"],et(t,o));const a=r(e,["config"]);return a!=null&&u(i,["config"],a),i}function US(t,e){const i={},o=r(t,["systemInstruction"]);e!==void 0&&o!=null&&u(e,["systemInstruction"],Ul(qt(o)));const a=r(t,["tools"]);if(e!==void 0&&a!=null){let h=a;Array.isArray(h)&&(h=h.map(m=>Og(m))),u(e,["tools"],h)}const f=r(t,["generationConfig"]);return e!==void 0&&f!=null&&u(e,["generationConfig"],f),i}function IS(t,e){const i={},o=r(e,["model"]);o!=null&&u(i,["_url","model"],et(t,o));const a=r(e,["contents"]);if(a!=null){let h=dn(a);Array.isArray(h)&&(h=h.map(m=>Ul(m))),u(i,["contents"],h)}const f=r(e,["config"]);return f!=null&&u(i,["config"],US(f,i)),i}function kS(t,e){const i={},o=r(e,["model"]);o!=null&&u(i,["_url","model"],et(t,o));const a=r(e,["contents"]);if(a!=null){let h=dn(a);Array.isArray(h)&&(h=h.map(m=>Ul(m))),u(i,["contents"],h)}const f=r(e,["config"]);return f!=null&&u(i,["config"],f),i}function BS(t){const e={},i=r(t,["uri"]);i!=null&&u(e,["gcsUri"],i);const o=r(t,["videoBytes"]);o!=null&&u(e,["bytesBase64Encoded"],qi(o));const a=r(t,["mimeType"]);return a!=null&&u(e,["mimeType"],a),e}function PS(t,e){const i={},o=r(t,["numberOfVideos"]);e!==void 0&&o!=null&&u(e,["parameters","sampleCount"],o);const a=r(t,["outputGcsUri"]);e!==void 0&&a!=null&&u(e,["parameters","storageUri"],a);const f=r(t,["fps"]);e!==void 0&&f!=null&&u(e,["parameters","fps"],f);const h=r(t,["durationSeconds"]);e!==void 0&&h!=null&&u(e,["parameters","durationSeconds"],h);const m=r(t,["seed"]);e!==void 0&&m!=null&&u(e,["parameters","seed"],m);const p=r(t,["aspectRatio"]);e!==void 0&&p!=null&&u(e,["parameters","aspectRatio"],p);const g=r(t,["resolution"]);e!==void 0&&g!=null&&u(e,["parameters","resolution"],g);const v=r(t,["personGeneration"]);e!==void 0&&v!=null&&u(e,["parameters","personGeneration"],v);const x=r(t,["pubsubTopic"]);e!==void 0&&x!=null&&u(e,["parameters","pubsubTopic"],x);const S=r(t,["negativePrompt"]);e!==void 0&&S!=null&&u(e,["parameters","negativePrompt"],S);const M=r(t,["enhancePrompt"]);e!==void 0&&M!=null&&u(e,["parameters","enhancePrompt"],M);const w=r(t,["generateAudio"]);e!==void 0&&w!=null&&u(e,["parameters","generateAudio"],w);const D=r(t,["lastFrame"]);e!==void 0&&D!=null&&u(e,["instances[0]","lastFrame"],sa(D));const k=r(t,["compressionQuality"]);return e!==void 0&&k!=null&&u(e,["parameters","compressionQuality"],k),i}function VS(t,e){const i={},o=r(e,["model"]);o!=null&&u(i,["_url","model"],et(t,o));const a=r(e,["prompt"]);a!=null&&u(i,["instances[0]","prompt"],a);const f=r(e,["image"]);f!=null&&u(i,["instances[0]","image"],sa(f));const h=r(e,["video"]);h!=null&&u(i,["instances[0]","video"],BS(h));const m=r(e,["config"]);return m!=null&&u(i,["config"],PS(m,i)),i}function qS(t){const e={},i=r(t,["fps"]);i!=null&&u(e,["fps"],i);const o=r(t,["endOffset"]);o!=null&&u(e,["endOffset"],o);const a=r(t,["startOffset"]);return a!=null&&u(e,["startOffset"],a),e}function GS(t){const e={},i=r(t,["data"]);i!=null&&u(e,["data"],i);const o=r(t,["mimeType"]);return o!=null&&u(e,["mimeType"],o),e}function HS(t){const e={},i=r(t,["fileUri"]);i!=null&&u(e,["fileUri"],i);const o=r(t,["mimeType"]);return o!=null&&u(e,["mimeType"],o),e}function zS(t){const e={},i=r(t,["videoMetadata"]);i!=null&&u(e,["videoMetadata"],qS(i));const o=r(t,["thought"]);o!=null&&u(e,["thought"],o);const a=r(t,["inlineData"]);a!=null&&u(e,["inlineData"],GS(a));const f=r(t,["fileData"]);f!=null&&u(e,["fileData"],HS(f));const h=r(t,["thoughtSignature"]);h!=null&&u(e,["thoughtSignature"],h);const m=r(t,["codeExecutionResult"]);m!=null&&u(e,["codeExecutionResult"],m);const p=r(t,["executableCode"]);p!=null&&u(e,["executableCode"],p);const g=r(t,["functionCall"]);g!=null&&u(e,["functionCall"],g);const v=r(t,["functionResponse"]);v!=null&&u(e,["functionResponse"],v);const x=r(t,["text"]);return x!=null&&u(e,["text"],x),e}function FS(t){const e={},i=r(t,["parts"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(f=>zS(f))),u(e,["parts"],a)}const o=r(t,["role"]);return o!=null&&u(e,["role"],o),e}function OS(t){const e={},i=r(t,["citationSources"]);return i!=null&&u(e,["citations"],i),e}function YS(t){const e={},i=r(t,["retrievedUrl"]);i!=null&&u(e,["retrievedUrl"],i);const o=r(t,["urlRetrievalStatus"]);return o!=null&&u(e,["urlRetrievalStatus"],o),e}function JS(t){const e={},i=r(t,["urlMetadata"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>YS(a))),u(e,["urlMetadata"],o)}return e}function $S(t){const e={},i=r(t,["content"]);i!=null&&u(e,["content"],FS(i));const o=r(t,["citationMetadata"]);o!=null&&u(e,["citationMetadata"],OS(o));const a=r(t,["tokenCount"]);a!=null&&u(e,["tokenCount"],a);const f=r(t,["finishReason"]);f!=null&&u(e,["finishReason"],f);const h=r(t,["urlContextMetadata"]);h!=null&&u(e,["urlContextMetadata"],JS(h));const m=r(t,["avgLogprobs"]);m!=null&&u(e,["avgLogprobs"],m);const p=r(t,["groundingMetadata"]);p!=null&&u(e,["groundingMetadata"],p);const g=r(t,["index"]);g!=null&&u(e,["index"],g);const v=r(t,["logprobsResult"]);v!=null&&u(e,["logprobsResult"],v);const x=r(t,["safetyRatings"]);return x!=null&&u(e,["safetyRatings"],x),e}function $m(t){const e={},i=r(t,["sdkHttpResponse"]);i!=null&&u(e,["sdkHttpResponse"],i);const o=r(t,["candidates"]);if(o!=null){let m=o;Array.isArray(m)&&(m=m.map(p=>$S(p))),u(e,["candidates"],m)}const a=r(t,["modelVersion"]);a!=null&&u(e,["modelVersion"],a);const f=r(t,["promptFeedback"]);f!=null&&u(e,["promptFeedback"],f);const h=r(t,["usageMetadata"]);return h!=null&&u(e,["usageMetadata"],h),e}function XS(t){const e={},i=r(t,["values"]);return i!=null&&u(e,["values"],i),e}function KS(){return{}}function QS(t){const e={},i=r(t,["embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(f=>XS(f))),u(e,["embeddings"],a)}return r(t,["metadata"])!=null&&u(e,["metadata"],KS()),e}function ZS(t){const e={},i=r(t,["bytesBase64Encoded"]);i!=null&&u(e,["imageBytes"],qi(i));const o=r(t,["mimeType"]);return o!=null&&u(e,["mimeType"],o),e}function Yg(t){const e={},i=r(t,["safetyAttributes","categories"]);i!=null&&u(e,["categories"],i);const o=r(t,["safetyAttributes","scores"]);o!=null&&u(e,["scores"],o);const a=r(t,["contentType"]);return a!=null&&u(e,["contentType"],a),e}function WS(t){const e={},i=r(t,["_self"]);i!=null&&u(e,["image"],ZS(i));const o=r(t,["raiFilteredReason"]);o!=null&&u(e,["raiFilteredReason"],o);const a=r(t,["_self"]);return a!=null&&u(e,["safetyAttributes"],Yg(a)),e}function jS(t){const e={},i=r(t,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(f=>WS(f))),u(e,["generatedImages"],a)}const o=r(t,["positivePromptSafetyAttributes"]);return o!=null&&u(e,["positivePromptSafetyAttributes"],Yg(o)),e}function eE(t){const e={},i=r(t,["baseModel"]);i!=null&&u(e,["baseModel"],i);const o=r(t,["createTime"]);o!=null&&u(e,["createTime"],o);const a=r(t,["updateTime"]);return a!=null&&u(e,["updateTime"],a),e}function ku(t){const e={},i=r(t,["name"]);i!=null&&u(e,["name"],i);const o=r(t,["displayName"]);o!=null&&u(e,["displayName"],o);const a=r(t,["description"]);a!=null&&u(e,["description"],a);const f=r(t,["version"]);f!=null&&u(e,["version"],f);const h=r(t,["_self"]);h!=null&&u(e,["tunedModelInfo"],eE(h));const m=r(t,["inputTokenLimit"]);m!=null&&u(e,["inputTokenLimit"],m);const p=r(t,["outputTokenLimit"]);p!=null&&u(e,["outputTokenLimit"],p);const g=r(t,["supportedGenerationMethods"]);return g!=null&&u(e,["supportedActions"],g),e}function tE(t){const e={},i=r(t,["sdkHttpResponse"]);i!=null&&u(e,["sdkHttpResponse"],i);const o=r(t,["nextPageToken"]);o!=null&&u(e,["nextPageToken"],o);const a=r(t,["_self"]);if(a!=null){let f=wg(a);Array.isArray(f)&&(f=f.map(h=>ku(h))),u(e,["models"],f)}return e}function nE(){return{}}function iE(t){const e={},i=r(t,["totalTokens"]);i!=null&&u(e,["totalTokens"],i);const o=r(t,["cachedContentTokenCount"]);return o!=null&&u(e,["cachedContentTokenCount"],o),e}function lE(t){const e={},i=r(t,["video","uri"]);i!=null&&u(e,["uri"],i);const o=r(t,["video","encodedVideo"]);o!=null&&u(e,["videoBytes"],qi(o));const a=r(t,["encoding"]);return a!=null&&u(e,["mimeType"],a),e}function oE(t){const e={},i=r(t,["_self"]);return i!=null&&u(e,["video"],lE(i)),e}function sE(t){const e={},i=r(t,["generatedSamples"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(h=>oE(h))),u(e,["generatedVideos"],f)}const o=r(t,["raiMediaFilteredCount"]);o!=null&&u(e,["raiMediaFilteredCount"],o);const a=r(t,["raiMediaFilteredReasons"]);return a!=null&&u(e,["raiMediaFilteredReasons"],a),e}function aE(t){const e={},i=r(t,["name"]);i!=null&&u(e,["name"],i);const o=r(t,["metadata"]);o!=null&&u(e,["metadata"],o);const a=r(t,["done"]);a!=null&&u(e,["done"],a);const f=r(t,["error"]);f!=null&&u(e,["error"],f);const h=r(t,["response","generateVideoResponse"]);return h!=null&&u(e,["response"],sE(h)),e}function rE(t){const e={},i=r(t,["fps"]);i!=null&&u(e,["fps"],i);const o=r(t,["endOffset"]);o!=null&&u(e,["endOffset"],o);const a=r(t,["startOffset"]);return a!=null&&u(e,["startOffset"],a),e}function uE(t){const e={},i=r(t,["displayName"]);i!=null&&u(e,["displayName"],i);const o=r(t,["data"]);o!=null&&u(e,["data"],o);const a=r(t,["mimeType"]);return a!=null&&u(e,["mimeType"],a),e}function cE(t){const e={},i=r(t,["displayName"]);i!=null&&u(e,["displayName"],i);const o=r(t,["fileUri"]);o!=null&&u(e,["fileUri"],o);const a=r(t,["mimeType"]);return a!=null&&u(e,["mimeType"],a),e}function fE(t){const e={},i=r(t,["videoMetadata"]);i!=null&&u(e,["videoMetadata"],rE(i));const o=r(t,["thought"]);o!=null&&u(e,["thought"],o);const a=r(t,["inlineData"]);a!=null&&u(e,["inlineData"],uE(a));const f=r(t,["fileData"]);f!=null&&u(e,["fileData"],cE(f));const h=r(t,["thoughtSignature"]);h!=null&&u(e,["thoughtSignature"],h);const m=r(t,["codeExecutionResult"]);m!=null&&u(e,["codeExecutionResult"],m);const p=r(t,["executableCode"]);p!=null&&u(e,["executableCode"],p);const g=r(t,["functionCall"]);g!=null&&u(e,["functionCall"],g);const v=r(t,["functionResponse"]);v!=null&&u(e,["functionResponse"],v);const x=r(t,["text"]);return x!=null&&u(e,["text"],x),e}function dE(t){const e={},i=r(t,["parts"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(f=>fE(f))),u(e,["parts"],a)}const o=r(t,["role"]);return o!=null&&u(e,["role"],o),e}function hE(t){const e={},i=r(t,["citations"]);return i!=null&&u(e,["citations"],i),e}function mE(t){const e={},i=r(t,["retrievedUrl"]);i!=null&&u(e,["retrievedUrl"],i);const o=r(t,["urlRetrievalStatus"]);return o!=null&&u(e,["urlRetrievalStatus"],o),e}function gE(t){const e={},i=r(t,["urlMetadata"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>mE(a))),u(e,["urlMetadata"],o)}return e}function pE(t){const e={},i=r(t,["content"]);i!=null&&u(e,["content"],dE(i));const o=r(t,["citationMetadata"]);o!=null&&u(e,["citationMetadata"],hE(o));const a=r(t,["finishMessage"]);a!=null&&u(e,["finishMessage"],a);const f=r(t,["finishReason"]);f!=null&&u(e,["finishReason"],f);const h=r(t,["urlContextMetadata"]);h!=null&&u(e,["urlContextMetadata"],gE(h));const m=r(t,["avgLogprobs"]);m!=null&&u(e,["avgLogprobs"],m);const p=r(t,["groundingMetadata"]);p!=null&&u(e,["groundingMetadata"],p);const g=r(t,["index"]);g!=null&&u(e,["index"],g);const v=r(t,["logprobsResult"]);v!=null&&u(e,["logprobsResult"],v);const x=r(t,["safetyRatings"]);return x!=null&&u(e,["safetyRatings"],x),e}function Xm(t){const e={},i=r(t,["sdkHttpResponse"]);i!=null&&u(e,["sdkHttpResponse"],i);const o=r(t,["candidates"]);if(o!=null){let g=o;Array.isArray(g)&&(g=g.map(v=>pE(v))),u(e,["candidates"],g)}const a=r(t,["createTime"]);a!=null&&u(e,["createTime"],a);const f=r(t,["responseId"]);f!=null&&u(e,["responseId"],f);const h=r(t,["modelVersion"]);h!=null&&u(e,["modelVersion"],h);const m=r(t,["promptFeedback"]);m!=null&&u(e,["promptFeedback"],m);const p=r(t,["usageMetadata"]);return p!=null&&u(e,["usageMetadata"],p),e}function yE(t){const e={},i=r(t,["truncated"]);i!=null&&u(e,["truncated"],i);const o=r(t,["token_count"]);return o!=null&&u(e,["tokenCount"],o),e}function vE(t){const e={},i=r(t,["values"]);i!=null&&u(e,["values"],i);const o=r(t,["statistics"]);return o!=null&&u(e,["statistics"],yE(o)),e}function TE(t){const e={},i=r(t,["billableCharacterCount"]);return i!=null&&u(e,["billableCharacterCount"],i),e}function xE(t){const e={},i=r(t,["predictions[]","embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(f=>vE(f))),u(e,["embeddings"],a)}const o=r(t,["metadata"]);return o!=null&&u(e,["metadata"],TE(o)),e}function CE(t){const e={},i=r(t,["gcsUri"]);i!=null&&u(e,["gcsUri"],i);const o=r(t,["bytesBase64Encoded"]);o!=null&&u(e,["imageBytes"],qi(o));const a=r(t,["mimeType"]);return a!=null&&u(e,["mimeType"],a),e}function Jg(t){const e={},i=r(t,["safetyAttributes","categories"]);i!=null&&u(e,["categories"],i);const o=r(t,["safetyAttributes","scores"]);o!=null&&u(e,["scores"],o);const a=r(t,["contentType"]);return a!=null&&u(e,["contentType"],a),e}function Yu(t){const e={},i=r(t,["_self"]);i!=null&&u(e,["image"],CE(i));const o=r(t,["raiFilteredReason"]);o!=null&&u(e,["raiFilteredReason"],o);const a=r(t,["_self"]);a!=null&&u(e,["safetyAttributes"],Jg(a));const f=r(t,["prompt"]);return f!=null&&u(e,["enhancedPrompt"],f),e}function SE(t){const e={},i=r(t,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(f=>Yu(f))),u(e,["generatedImages"],a)}const o=r(t,["positivePromptSafetyAttributes"]);return o!=null&&u(e,["positivePromptSafetyAttributes"],Jg(o)),e}function EE(t){const e={},i=r(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>Yu(a))),u(e,["generatedImages"],o)}return e}function ME(t){const e={},i=r(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>Yu(a))),u(e,["generatedImages"],o)}return e}function _E(t){const e={},i=r(t,["endpoint"]);i!=null&&u(e,["name"],i);const o=r(t,["deployedModelId"]);return o!=null&&u(e,["deployedModelId"],o),e}function AE(t){const e={},i=r(t,["labels","google-vertex-llm-tuning-base-model-id"]);i!=null&&u(e,["baseModel"],i);const o=r(t,["createTime"]);o!=null&&u(e,["createTime"],o);const a=r(t,["updateTime"]);return a!=null&&u(e,["updateTime"],a),e}function NE(t){const e={},i=r(t,["checkpointId"]);i!=null&&u(e,["checkpointId"],i);const o=r(t,["epoch"]);o!=null&&u(e,["epoch"],o);const a=r(t,["step"]);return a!=null&&u(e,["step"],a),e}function Bu(t){const e={},i=r(t,["name"]);i!=null&&u(e,["name"],i);const o=r(t,["displayName"]);o!=null&&u(e,["displayName"],o);const a=r(t,["description"]);a!=null&&u(e,["description"],a);const f=r(t,["versionId"]);f!=null&&u(e,["version"],f);const h=r(t,["deployedModels"]);if(h!=null){let x=h;Array.isArray(x)&&(x=x.map(S=>_E(S))),u(e,["endpoints"],x)}const m=r(t,["labels"]);m!=null&&u(e,["labels"],m);const p=r(t,["_self"]);p!=null&&u(e,["tunedModelInfo"],AE(p));const g=r(t,["defaultCheckpointId"]);g!=null&&u(e,["defaultCheckpointId"],g);const v=r(t,["checkpoints"]);if(v!=null){let x=v;Array.isArray(x)&&(x=x.map(S=>NE(S))),u(e,["checkpoints"],x)}return e}function RE(t){const e={},i=r(t,["sdkHttpResponse"]);i!=null&&u(e,["sdkHttpResponse"],i);const o=r(t,["nextPageToken"]);o!=null&&u(e,["nextPageToken"],o);const a=r(t,["_self"]);if(a!=null){let f=wg(a);Array.isArray(f)&&(f=f.map(h=>Bu(h))),u(e,["models"],f)}return e}function bE(){return{}}function wE(t){const e={},i=r(t,["totalTokens"]);return i!=null&&u(e,["totalTokens"],i),e}function DE(t){const e={},i=r(t,["tokensInfo"]);return i!=null&&u(e,["tokensInfo"],i),e}function LE(t){const e={},i=r(t,["gcsUri"]);i!=null&&u(e,["uri"],i);const o=r(t,["bytesBase64Encoded"]);o!=null&&u(e,["videoBytes"],qi(o));const a=r(t,["mimeType"]);return a!=null&&u(e,["mimeType"],a),e}function UE(t){const e={},i=r(t,["_self"]);return i!=null&&u(e,["video"],LE(i)),e}function IE(t){const e={},i=r(t,["videos"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(h=>UE(h))),u(e,["generatedVideos"],f)}const o=r(t,["raiMediaFilteredCount"]);o!=null&&u(e,["raiMediaFilteredCount"],o);const a=r(t,["raiMediaFilteredReasons"]);return a!=null&&u(e,["raiMediaFilteredReasons"],a),e}function kE(t){const e={},i=r(t,["name"]);i!=null&&u(e,["name"],i);const o=r(t,["metadata"]);o!=null&&u(e,["metadata"],o);const a=r(t,["done"]);a!=null&&u(e,["done"],a);const f=r(t,["error"]);f!=null&&u(e,["error"],f);const h=r(t,["response"]);return h!=null&&u(e,["response"],IE(h)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const BE="Content-Type",PE="X-Server-Timeout",VE="User-Agent",Pu="x-goog-api-client",qE="1.11.0",GE=`google-genai-sdk/${qE}`,HE="v1beta1",zE="v1beta",Km=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class FE{constructor(e){var i,o;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const a={};this.clientOptions.vertexai?(a.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:HE,a.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(a.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:zE,a.baseUrl="https://generativelanguage.googleapis.com/"),a.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=a,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(a,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const o=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&o.push(e.apiVersion),o.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),i=new URL(e);return i.protocol=i.protocol=="http:"?"ws":"wss",i.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,i,o){const a=[this.getRequestUrlInternal(i)];return o&&a.push(this.getBaseResourcePath()),e!==""&&a.push(e),new URL(`${a.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let i=this.clientOptions.httpOptions;e.httpOptions&&(i=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e),a=this.constructUrl(e.path,i,o);if(e.queryParams)for(const[h,m]of Object.entries(e.queryParams))a.searchParams.append(h,String(m));let f={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else f.body=e.body;return f=await this.includeExtraHttpOptionsToRequestInit(f,i,e.abortSignal),this.unaryApiCall(a,f,e.httpMethod)}patchHttpOptions(e,i){const o=JSON.parse(JSON.stringify(e));for(const[a,f]of Object.entries(i))typeof f=="object"?o[a]=Object.assign(Object.assign({},o[a]),f):f!==void 0&&(o[a]=f);return o}async requestStream(e){let i=this.clientOptions.httpOptions;e.httpOptions&&(i=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e),a=this.constructUrl(e.path,i,o);(!a.searchParams.has("alt")||a.searchParams.get("alt")!=="sse")&&a.searchParams.set("alt","sse");let f={};return f.body=e.body,f=await this.includeExtraHttpOptionsToRequestInit(f,i,e.abortSignal),this.streamApiCall(a,f,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,i,o){if(i&&i.timeout||o){const a=new AbortController,f=a.signal;if(i.timeout&&(i==null?void 0:i.timeout)>0){const h=setTimeout(()=>a.abort(),i.timeout);h&&typeof h.unref=="function"&&h.unref()}o&&o.addEventListener("abort",()=>{a.abort()}),e.signal=f}return i&&i.extraBody!==null&&OE(e,i.extraBody),e.headers=await this.getHeadersInternal(i),e}async unaryApiCall(e,i,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},i),{method:o})).then(async a=>(await Qm(a),new bu(a))).catch(a=>{throw a instanceof Error?a:new Error(JSON.stringify(a))})}async streamApiCall(e,i,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},i),{method:o})).then(async a=>(await Qm(a),this.processStreamResponse(a))).catch(a=>{throw a instanceof Error?a:new Error(JSON.stringify(a))})}processStreamResponse(e){var i;return Rl(this,arguments,function*(){const a=(i=e==null?void 0:e.body)===null||i===void 0?void 0:i.getReader(),f=new TextDecoder("utf-8");if(!a)throw new Error("Response body is empty");try{let h="";for(;;){const{done:m,value:p}=yield ct(a.read());if(m){if(h.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const g=f.decode(p,{stream:!0});try{const x=JSON.parse(g);if("error"in x){const S=JSON.parse(JSON.stringify(x.error)),M=S.status,w=S.code,D=`got status: ${M}. ${JSON.stringify(x)}`;if(w>=400&&w<600)throw new la({message:D,status:w})}}catch(x){if(x.name==="ApiError")throw x}h+=g;let v=h.match(Km);for(;v;){const x=v[1];try{const S=new Response(x,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield ct(new bu(S)),h=h.slice(v[0].length),v=h.match(Km)}catch(S){throw new Error(`exception parsing stream chunk ${x}. ${S}`)}}}}finally{a.releaseLock()}})}async apiCall(e,i){return fetch(e,i).catch(o=>{throw new Error(`exception ${o} sending request`)})}getDefaultHeaders(){const e={},i=GE+" "+this.clientOptions.userAgentExtra;return e[VE]=i,e[Pu]=i,e[BE]="application/json",e}async getHeadersInternal(e){const i=new Headers;if(e&&e.headers){for(const[o,a]of Object.entries(e.headers))i.append(o,a);e.timeout&&e.timeout>0&&i.append(PE,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i),i}async uploadFile(e,i){var o;const a={};i!=null&&(a.mimeType=i.mimeType,a.name=i.name,a.displayName=i.displayName),a.name&&!a.name.startsWith("files/")&&(a.name=`files/${a.name}`);const f=this.clientOptions.uploader,h=await f.stat(e);a.sizeBytes=String(h.size);const m=(o=i==null?void 0:i.mimeType)!==null&&o!==void 0?o:h.type;if(m===void 0||m==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");a.mimeType=m;const p=await this.fetchUploadUrl(a,i);return f.upload(e,p,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,i){var o;let a={};i!=null&&i.httpOptions?a=i.httpOptions:a={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const f={file:e},h=await this.request({path:xe("upload/v1beta/files",f._url),body:JSON.stringify(f),httpMethod:"POST",httpOptions:a});if(!h||!(h!=null&&h.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const m=(o=h==null?void 0:h.headers)===null||o===void 0?void 0:o["x-goog-upload-url"];if(m===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return m}}async function Qm(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const i=t.status;let o;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?o=await t.json():o={error:{message:await t.text(),code:t.status,status:t.statusText}};const a=JSON.stringify(o);throw i>=400&&i<600?new la({message:a,status:i}):new Error(a)}}function OE(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let i={};if(typeof t.body=="string"&&t.body.length>0)try{const f=JSON.parse(t.body);if(typeof f=="object"&&f!==null&&!Array.isArray(f))i=f;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function o(f,h){const m=Object.assign({},f);for(const p in h)if(Object.prototype.hasOwnProperty.call(h,p)){const g=h[p],v=m[p];g&&typeof g=="object"&&!Array.isArray(g)&&v&&typeof v=="object"&&!Array.isArray(v)?m[p]=o(v,g):(v&&g&&typeof v!=typeof g&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${p}". Original type: ${typeof v}, New type: ${typeof g}. Overwriting.`),m[p]=g)}return m}const a=o(i,e);t.body=JSON.stringify(a)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const YE="mcp_used/unknown";let JE=!1;function $g(t){for(const e of t)if($E(e)||typeof e=="object"&&"inputSchema"in e)return!0;return JE}function Xg(t){var e;const i=(e=t[Pu])!==null&&e!==void 0?e:"";t[Pu]=(i+` ${YE}`).trimStart()}function $E(t){return t!==null&&typeof t=="object"&&t instanceof Ju}function XE(t,e=100){return Rl(this,arguments,function*(){let o,a=0;for(;a<e;){const f=yield ct(t.listTools({cursor:o}));for(const h of f.tools)yield yield ct(h),a++;if(!f.nextCursor)break;o=f.nextCursor}})}class Ju{constructor(e=[],i){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=i}static create(e,i){return new Ju(e,i)}async initialize(){var e,i,o,a;if(this.mcpTools.length>0)return;const f={},h=[];for(const v of this.mcpClients)try{for(var m=!0,p=(i=void 0,Lo(XE(v))),g;g=await p.next(),e=g.done,!e;m=!0){a=g.value,m=!1;const x=a;h.push(x);const S=x.name;if(f[S])throw new Error(`Duplicate function name ${S} found in MCP tools. Please ensure function names are unique.`);f[S]=v}}catch(x){i={error:x}}finally{try{!m&&!e&&(o=p.return)&&await o.call(p)}finally{if(i)throw i.error}}this.mcpTools=h,this.functionNameToMcpClient=f}async tool(){return await this.initialize(),F0(this.mcpTools,this.config)}async callTool(e){await this.initialize();const i=[];for(const o of e)if(o.name in this.functionNameToMcpClient){const a=this.functionNameToMcpClient[o.name];let f;this.config.timeout&&(f={timeout:this.config.timeout});const h=await a.callTool({name:o.name,arguments:o.args},void 0,f);i.push({functionResponse:{name:o.name,response:h.isError?{error:h}:h}})}return i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function KE(t,e,i){const o=new k0;let a;i.data instanceof Blob?a=JSON.parse(await i.data.text()):a=JSON.parse(i.data);const f=FC(a);Object.assign(o,f),e(o)}class QE{constructor(e,i,o){this.apiClient=e,this.auth=i,this.webSocketFactory=o}async connect(e){var i,o;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const a=this.apiClient.getWebsocketBaseUrl(),f=this.apiClient.getApiVersion(),h=jE(this.apiClient.getDefaultHeaders()),m=this.apiClient.getApiKey(),p=`${a}/ws/google.ai.generativelanguage.${f}.GenerativeService.BidiGenerateMusic?key=${m}`;let g=()=>{};const v=new Promise(F=>{g=F}),x=e.callbacks,S=function(){g({})},M=this.apiClient,w={onopen:S,onmessage:F=>{KE(M,x.onmessage,F)},onerror:(i=x==null?void 0:x.onerror)!==null&&i!==void 0?i:function(F){},onclose:(o=x==null?void 0:x.onclose)!==null&&o!==void 0?o:function(F){}},D=this.webSocketFactory.create(p,WE(h),w);D.connect(),await v;const k=et(this.apiClient,e.model),q=Hg({model:k}),N=Iu({setup:q});return D.send(JSON.stringify(N)),new ZE(D,this.apiClient)}}class ZE{constructor(e,i){this.conn=e,this.apiClient=i}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const i=Hx(e),o=zg(i);this.conn.send(JSON.stringify({clientContent:o}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const i=zx(e),o=Iu(i);this.conn.send(JSON.stringify(o))}sendPlaybackControl(e){const i=Iu({playbackControl:e});this.conn.send(JSON.stringify(i))}play(){this.sendPlaybackControl(Al.PLAY)}pause(){this.sendPlaybackControl(Al.PAUSE)}stop(){this.sendPlaybackControl(Al.STOP)}resetContext(){this.sendPlaybackControl(Al.RESET_CONTEXT)}close(){this.conn.close()}}function WE(t){const e={};return t.forEach((i,o)=>{e[o]=i}),e}function jE(t){const e=new Headers;for(const[i,o]of Object.entries(t))e.append(i,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const eM="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function tM(t,e,i){const o=new I0;let a;i.data instanceof Blob?a=await i.data.text():i.data instanceof ArrayBuffer?a=new TextDecoder().decode(i.data):a=i.data;const f=JSON.parse(a);if(t.isVertexAI()){const h=i1(f);Object.assign(o,h)}else{const h=IC(f);Object.assign(o,h)}e(o)}class nM{constructor(e,i,o){this.apiClient=e,this.auth=i,this.webSocketFactory=o,this.music=new QE(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var i,o,a,f,h,m;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const p=this.apiClient.getWebsocketBaseUrl(),g=this.apiClient.getApiVersion();let v;const x=this.apiClient.getDefaultHeaders();e.config&&e.config.tools&&$g(e.config.tools)&&Xg(x);const S=sM(x);if(this.apiClient.isVertexAI())v=`${p}/ws/google.cloud.aiplatform.${g}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(S);else{const ne=this.apiClient.getApiKey();let he="BidiGenerateContent",me="key";ne!=null&&ne.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),g!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),he="BidiGenerateContentConstrained",me="access_token"),v=`${p}/ws/google.ai.generativelanguage.${g}.GenerativeService.${he}?${me}=${ne}`}let M=()=>{};const w=new Promise(ne=>{M=ne}),D=e.callbacks,k=function(){var ne;(ne=D==null?void 0:D.onopen)===null||ne===void 0||ne.call(D),M({})},q=this.apiClient,N={onopen:k,onmessage:ne=>{tM(q,D.onmessage,ne)},onerror:(i=D==null?void 0:D.onerror)!==null&&i!==void 0?i:function(ne){},onclose:(o=D==null?void 0:D.onclose)!==null&&o!==void 0?o:function(ne){}},F=this.webSocketFactory.create(v,oM(S),N);F.connect(),await w;let X=et(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&X.startsWith("publishers/")){const ne=this.apiClient.getProject(),he=this.apiClient.getLocation();X=`projects/${ne}/locations/${he}/`+X}let G={};this.apiClient.isVertexAI()&&((a=e.config)===null||a===void 0?void 0:a.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Ws.AUDIO]}:e.config.responseModalities=[Ws.AUDIO]),!((f=e.config)===null||f===void 0)&&f.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const $=(m=(h=e.config)===null||h===void 0?void 0:h.tools)!==null&&m!==void 0?m:[],ie=[];for(const ne of $)if(this.isCallableTool(ne)){const he=ne;ie.push(await he.tool())}else ie.push(ne);ie.length>0&&(e.config.tools=ie);const se={model:X,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?G=gC(this.apiClient,se):G=Px(this.apiClient,se),delete G.config,F.send(JSON.stringify(G)),new lM(F,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const iM={turnComplete:!0};class lM{constructor(e,i){this.conn=e,this.apiClient=i}tLiveClientContent(e,i){if(i.turns!==null&&i.turns!==void 0){let o=[];try{o=dn(i.turns),e.isVertexAI()?o=o.map(a=>Ul(a)):o=o.map(a=>oa(a))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof i.turns}'`)}return{clientContent:{turns:o,turnComplete:i.turnComplete}}}return{clientContent:{turnComplete:i.turnComplete}}}tLiveClienttToolResponse(e,i){let o=[];if(i.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(i.functionResponses)?o=i.functionResponses:o=[i.functionResponses],o.length===0)throw new Error("functionResponses is required.");for(const f of o){if(typeof f!="object"||f===null||!("name"in f)||!("response"in f))throw new Error(`Could not parse function response, type '${typeof f}'.`);if(!e.isVertexAI()&&!("id"in f))throw new Error(eM)}return{toolResponse:{functionResponses:o}}}sendClientContent(e){e=Object.assign(Object.assign({},iM),e);const i=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(i))}sendRealtimeInput(e){let i={};this.apiClient.isVertexAI()?i={realtimeInput:vC(e)}:i={realtimeInput:Gx(e)},this.conn.send(JSON.stringify(i))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const i=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(i))}close(){this.conn.close()}}function oM(t){const e={};return t.forEach((i,o)=>{e[o]=i}),e}function sM(t){const e=new Headers;for(const[i,o]of Object.entries(t))e.append(i,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Zm=10;function Wm(t){var e,i,o;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let a=!1;for(const h of(i=t==null?void 0:t.tools)!==null&&i!==void 0?i:[])if(bl(h)){a=!0;break}if(!a)return!0;const f=(o=t==null?void 0:t.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls;return f&&(f<0||!Number.isInteger(f))||f==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",f),!0):!1}function bl(t){return"callTool"in t&&typeof t.callTool=="function"}function aM(t){var e,i,o;return(o=(i=(e=t.config)===null||e===void 0?void 0:e.tools)===null||i===void 0?void 0:i.some(a=>bl(a)))!==null&&o!==void 0?o:!1}function rM(t){var e,i,o;return(o=(i=(e=t.config)===null||e===void 0?void 0:e.tools)===null||i===void 0?void 0:i.some(a=>!bl(a)))!==null&&o!==void 0?o:!1}function jm(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class uM extends Vi{constructor(e){super(),this.apiClient=e,this.generateContent=async i=>{var o,a,f,h,m;const p=await this.processParamsMaybeAddMcpUsage(i);if(this.maybeMoveToResponseJsonSchem(i),!aM(i)||Wm(i.config))return await this.generateContentInternal(p);if(rM(i))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let g,v;const x=dn(p.contents),S=(f=(a=(o=p.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||a===void 0?void 0:a.maximumRemoteCalls)!==null&&f!==void 0?f:Zm;let M=0;for(;M<S&&(g=await this.generateContentInternal(p),!(!g.functionCalls||g.functionCalls.length===0));){const w=g.candidates[0].content,D=[];for(const k of(m=(h=i.config)===null||h===void 0?void 0:h.tools)!==null&&m!==void 0?m:[])if(bl(k)){const N=await k.callTool(g.functionCalls);D.push(...N)}M++,v={role:"user",parts:D},p.contents=dn(p.contents),p.contents.push(w),p.contents.push(v),jm(p.config)&&(x.push(w),x.push(v))}return jm(p.config)&&(g.automaticFunctionCallingHistory=x),g},this.generateContentStream=async i=>{if(this.maybeMoveToResponseJsonSchem(i),Wm(i.config)){const o=await this.processParamsMaybeAddMcpUsage(i);return await this.generateContentStreamInternal(o)}else return await this.processAfcStream(i)},this.generateImages=async i=>await this.generateImagesInternal(i).then(o=>{var a;let f;const h=[];if(o!=null&&o.generatedImages)for(const p of o.generatedImages)p&&(p!=null&&p.safetyAttributes)&&((a=p==null?void 0:p.safetyAttributes)===null||a===void 0?void 0:a.contentType)==="Positive Prompt"?f=p==null?void 0:p.safetyAttributes:h.push(p);let m;return f?m={generatedImages:h,positivePromptSafetyAttributes:f}:m={generatedImages:h},m}),this.list=async i=>{var o;const h={config:Object.assign(Object.assign({},{queryBase:!0}),i==null?void 0:i.config)};if(this.apiClient.isVertexAI()&&!h.config.queryBase){if(!((o=h.config)===null||o===void 0)&&o.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");h.config.filter="labels.tune-type:*"}return new Io(Pi.PAGED_ITEM_MODELS,m=>this.listInternal(m),await this.listInternal(h),h)},this.editImage=async i=>{const o={model:i.model,prompt:i.prompt,referenceImages:[],config:i.config};return i.referenceImages&&i.referenceImages&&(o.referenceImages=i.referenceImages.map(a=>a.toReferenceImageAPI())),await this.editImageInternal(o)},this.upscaleImage=async i=>{let o={numberOfImages:1,mode:"upscale"};i.config&&(o=Object.assign(Object.assign({},o),i.config));const a={model:i.model,image:i.image,upscaleFactor:i.upscaleFactor,config:o};return await this.upscaleImageInternal(a)},this.generateVideos=async i=>await this.generateVideosInternal(i)}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var i,o,a;const f=(i=e.config)===null||i===void 0?void 0:i.tools;if(!f)return e;const h=await Promise.all(f.map(async p=>bl(p)?await p.tool():p)),m={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:h})};if(m.config.tools=h,e.config&&e.config.tools&&$g(e.config.tools)){const p=(a=(o=e.config.httpOptions)===null||o===void 0?void 0:o.headers)!==null&&a!==void 0?a:{};let g=Object.assign({},p);Object.keys(g).length===0&&(g=this.apiClient.getDefaultHeaders()),Xg(g),m.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:g})}return m}async initAfcToolsMap(e){var i,o,a;const f=new Map;for(const h of(o=(i=e.config)===null||i===void 0?void 0:i.tools)!==null&&o!==void 0?o:[])if(bl(h)){const m=h,p=await m.tool();for(const g of(a=p.functionDeclarations)!==null&&a!==void 0?a:[]){if(!g.name)throw new Error("Function declaration name is required.");if(f.has(g.name))throw new Error(`Duplicate tool declaration name: ${g.name}`);f.set(g.name,m)}}return f}async processAfcStream(e){var i,o,a;const f=(a=(o=(i=e.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&a!==void 0?a:Zm;let h=!1,m=0;const p=await this.initAfcToolsMap(e);return function(g,v,x){var S,M;return Rl(this,arguments,function*(){for(var w,D,k,q;m<f;){h&&(m++,h=!1);const G=yield ct(g.processParamsMaybeAddMcpUsage(x)),$=yield ct(g.generateContentStreamInternal(G)),ie=[],se=[];try{for(var N=!0,F=(D=void 0,Lo($)),X;X=yield ct(F.next()),w=X.done,!w;N=!0){q=X.value,N=!1;const ne=q;if(yield yield ct(ne),ne.candidates&&(!((S=ne.candidates[0])===null||S===void 0)&&S.content)){se.push(ne.candidates[0].content);for(const he of(M=ne.candidates[0].content.parts)!==null&&M!==void 0?M:[])if(m<f&&he.functionCall){if(!he.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(he.functionCall.name)){const me=yield ct(v.get(he.functionCall.name).callTool([he.functionCall]));ie.push(...me)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${he.functionCall.name}`)}}}}catch(ne){D={error:ne}}finally{try{!N&&!w&&(k=F.return)&&(yield ct(k.call(F)))}finally{if(D)throw D.error}}if(ie.length>0){h=!0;const ne=new bo;ne.candidates=[{content:{role:"user",parts:ie}}],yield yield ct(ne);const he=[];he.push(...se),he.push({role:"user",parts:ie});const me=dn(x.contents).concat(he);x.contents=me}else break}})}(this,p,e)}async generateContentInternal(e){var i,o,a,f;let h,m="",p={};if(this.apiClient.isVertexAI()){const g=Jm(this.apiClient,e);return m=xe("{model}:generateContent",g._url),p=g._query,delete g.config,delete g._url,delete g._query,h=this.apiClient.request({path:m,queryParams:p,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(x=>{const S=x;return S.sdkHttpResponse={headers:v.headers},S})),h.then(v=>{const x=Xm(v),S=new bo;return Object.assign(S,x),S})}else{const g=Ym(this.apiClient,e);return m=xe("{model}:generateContent",g._url),p=g._query,delete g.config,delete g._url,delete g._query,h=this.apiClient.request({path:m,queryParams:p,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json().then(x=>{const S=x;return S.sdkHttpResponse={headers:v.headers},S})),h.then(v=>{const x=$m(v),S=new bo;return Object.assign(S,x),S})}}async generateContentStreamInternal(e){var i,o,a,f;let h,m="",p={};if(this.apiClient.isVertexAI()){const g=Jm(this.apiClient,e);return m=xe("{model}:streamGenerateContent?alt=sse",g._url),p=g._query,delete g.config,delete g._url,delete g._query,h=this.apiClient.requestStream({path:m,queryParams:p,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),h.then(function(x){return Rl(this,arguments,function*(){var S,M,w,D;try{for(var k=!0,q=Lo(x),N;N=yield ct(q.next()),S=N.done,!S;k=!0){D=N.value,k=!1;const F=D,X=Xm(yield ct(F.json()));X.sdkHttpResponse={headers:F.headers};const G=new bo;Object.assign(G,X),yield yield ct(G)}}catch(F){M={error:F}}finally{try{!k&&!S&&(w=q.return)&&(yield ct(w.call(q)))}finally{if(M)throw M.error}}})})}else{const g=Ym(this.apiClient,e);return m=xe("{model}:streamGenerateContent?alt=sse",g._url),p=g._query,delete g.config,delete g._url,delete g._query,h=this.apiClient.requestStream({path:m,queryParams:p,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}),h.then(function(x){return Rl(this,arguments,function*(){var S,M,w,D;try{for(var k=!0,q=Lo(x),N;N=yield ct(q.next()),S=N.done,!S;k=!0){D=N.value,k=!1;const F=D,X=$m(yield ct(F.json()));X.sdkHttpResponse={headers:F.headers};const G=new bo;Object.assign(G,X),yield yield ct(G)}}catch(F){M={error:F}}finally{try{!k&&!S&&(w=q.return)&&(yield ct(w.call(q)))}finally{if(M)throw M.error}}})})}}async embedContent(e){var i,o,a,f;let h,m="",p={};if(this.apiClient.isVertexAI()){const g=gS(this.apiClient,e);return m=xe("{model}:predict",g._url),p=g._query,delete g.config,delete g._url,delete g._query,h=this.apiClient.request({path:m,queryParams:p,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),h.then(v=>{const x=xE(v),S=new Mm;return Object.assign(S,x),S})}else{const g=R1(this.apiClient,e);return m=xe("{model}:batchEmbedContents",g._url),p=g._query,delete g.config,delete g._url,delete g._query,h=this.apiClient.request({path:m,queryParams:p,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),h.then(v=>{const x=QS(v),S=new Mm;return Object.assign(S,x),S})}}async generateImagesInternal(e){var i,o,a,f;let h,m="",p={};if(this.apiClient.isVertexAI()){const g=yS(this.apiClient,e);return m=xe("{model}:predict",g._url),p=g._query,delete g.config,delete g._url,delete g._query,h=this.apiClient.request({path:m,queryParams:p,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),h.then(v=>{const x=SE(v),S=new _m;return Object.assign(S,x),S})}else{const g=w1(this.apiClient,e);return m=xe("{model}:predict",g._url),p=g._query,delete g.config,delete g._url,delete g._query,h=this.apiClient.request({path:m,queryParams:p,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),h.then(v=>{const x=jS(v),S=new _m;return Object.assign(S,x),S})}}async editImageInternal(e){var i,o;let a,f="",h={};if(this.apiClient.isVertexAI()){const m=MS(this.apiClient,e);return f=xe("{model}:predict",m._url),h=m._query,delete m.config,delete m._url,delete m._query,a=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),a.then(p=>{const g=EE(p),v=new R0;return Object.assign(v,g),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var i,o;let a,f="",h={};if(this.apiClient.isVertexAI()){const m=AS(this.apiClient,e);return f=xe("{model}:predict",m._url),h=m._query,delete m.config,delete m._url,delete m._query,a=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),a.then(p=>{const g=ME(p),v=new b0;return Object.assign(v,g),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var i,o,a,f;let h,m="",p={};if(this.apiClient.isVertexAI()){const g=NS(this.apiClient,e);return m=xe("{name}",g._url),p=g._query,delete g.config,delete g._url,delete g._query,h=this.apiClient.request({path:m,queryParams:p,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),h.then(v=>Bu(v))}else{const g=D1(this.apiClient,e);return m=xe("{name}",g._url),p=g._query,delete g.config,delete g._url,delete g._query,h=this.apiClient.request({path:m,queryParams:p,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),h.then(v=>ku(v))}}async listInternal(e){var i,o,a,f;let h,m="",p={};if(this.apiClient.isVertexAI()){const g=bS(this.apiClient,e);return m=xe("{models_url}",g._url),p=g._query,delete g.config,delete g._url,delete g._query,h=this.apiClient.request({path:m,queryParams:p,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(x=>{const S=x;return S.sdkHttpResponse={headers:v.headers},S})),h.then(v=>{const x=RE(v),S=new Am;return Object.assign(S,x),S})}else{const g=U1(this.apiClient,e);return m=xe("{models_url}",g._url),p=g._query,delete g.config,delete g._url,delete g._query,h=this.apiClient.request({path:m,queryParams:p,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json().then(x=>{const S=x;return S.sdkHttpResponse={headers:v.headers},S})),h.then(v=>{const x=tE(v),S=new Am;return Object.assign(S,x),S})}}async update(e){var i,o,a,f;let h,m="",p={};if(this.apiClient.isVertexAI()){const g=DS(this.apiClient,e);return m=xe("{model}",g._url),p=g._query,delete g.config,delete g._url,delete g._query,h=this.apiClient.request({path:m,queryParams:p,body:JSON.stringify(g),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),h.then(v=>Bu(v))}else{const g=k1(this.apiClient,e);return m=xe("{name}",g._url),p=g._query,delete g.config,delete g._url,delete g._query,h=this.apiClient.request({path:m,queryParams:p,body:JSON.stringify(g),httpMethod:"PATCH",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),h.then(v=>ku(v))}}async delete(e){var i,o,a,f;let h,m="",p={};if(this.apiClient.isVertexAI()){const g=LS(this.apiClient,e);return m=xe("{name}",g._url),p=g._query,delete g.config,delete g._url,delete g._query,h=this.apiClient.request({path:m,queryParams:p,body:JSON.stringify(g),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),h.then(()=>{const v=bE(),x=new Nm;return Object.assign(x,v),x})}else{const g=B1(this.apiClient,e);return m=xe("{name}",g._url),p=g._query,delete g.config,delete g._url,delete g._query,h=this.apiClient.request({path:m,queryParams:p,body:JSON.stringify(g),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),h.then(()=>{const v=nE(),x=new Nm;return Object.assign(x,v),x})}}async countTokens(e){var i,o,a,f;let h,m="",p={};if(this.apiClient.isVertexAI()){const g=IS(this.apiClient,e);return m=xe("{model}:countTokens",g._url),p=g._query,delete g.config,delete g._url,delete g._query,h=this.apiClient.request({path:m,queryParams:p,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),h.then(v=>{const x=wE(v),S=new Rm;return Object.assign(S,x),S})}else{const g=V1(this.apiClient,e);return m=xe("{model}:countTokens",g._url),p=g._query,delete g.config,delete g._url,delete g._query,h=this.apiClient.request({path:m,queryParams:p,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),h.then(v=>{const x=iE(v),S=new Rm;return Object.assign(S,x),S})}}async computeTokens(e){var i,o;let a,f="",h={};if(this.apiClient.isVertexAI()){const m=kS(this.apiClient,e);return f=xe("{model}:computeTokens",m._url),h=m._query,delete m.config,delete m._url,delete m._query,a=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),a.then(p=>{const g=DE(p),v=new w0;return Object.assign(v,g),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var i,o,a,f;let h,m="",p={};if(this.apiClient.isVertexAI()){const g=VS(this.apiClient,e);return m=xe("{model}:predictLongRunning",g._url),p=g._query,delete g.config,delete g._url,delete g._query,h=this.apiClient.request({path:m,queryParams:p,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),h.then(v=>{const x=kE(v),S=new js;return Object.assign(S,x),S})}else{const g=H1(this.apiClient,e);return m=xe("{model}:predictLongRunning",g._url),p=g._query,delete g.config,delete g._url,delete g._query,h=this.apiClient.request({path:m,queryParams:p,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),h.then(v=>{const x=aE(v),S=new js;return Object.assign(S,x),S})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cM(t){const e={},i=r(t,["operationName"]);i!=null&&u(e,["_url","operationName"],i);const o=r(t,["config"]);return o!=null&&u(e,["config"],o),e}function fM(t){const e={},i=r(t,["operationName"]);i!=null&&u(e,["_url","operationName"],i);const o=r(t,["config"]);return o!=null&&u(e,["config"],o),e}function dM(t){const e={},i=r(t,["operationName"]);i!=null&&u(e,["operationName"],i);const o=r(t,["resourceName"]);o!=null&&u(e,["_url","resourceName"],o);const a=r(t,["config"]);return a!=null&&u(e,["config"],a),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class hM extends Vi{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const i=e.operation,o=e.config;if(i.name===void 0||i.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const a=i.name.split("/operations/")[0];let f;o&&"httpOptions"in o&&(f=o.httpOptions);const h=await this.fetchPredictVideosOperationInternal({operationName:i.name,resourceName:a,config:{httpOptions:f}});return i._fromAPIResponse({apiResponse:h,isVertexAI:!0})}else{const a=await this.getVideosOperationInternal({operationName:i.name,config:o});return i._fromAPIResponse({apiResponse:a,isVertexAI:!1})}}async get(e){const i=e.operation,o=e.config;if(i.name===void 0||i.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const a=i.name.split("/operations/")[0];let f;o&&"httpOptions"in o&&(f=o.httpOptions);const h=await this.fetchPredictVideosOperationInternal({operationName:i.name,resourceName:a,config:{httpOptions:f}});return i._fromAPIResponse({apiResponse:h,isVertexAI:!0})}else{const a=await this.getVideosOperationInternal({operationName:i.name,config:o});return i._fromAPIResponse({apiResponse:a,isVertexAI:!1})}}async getVideosOperationInternal(e){var i,o,a,f;let h,m="",p={};if(this.apiClient.isVertexAI()){const g=fM(e);return m=xe("{operationName}",g._url),p=g._query,delete g.config,delete g._url,delete g._query,h=this.apiClient.request({path:m,queryParams:p,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),h}else{const g=cM(e);return m=xe("{operationName}",g._url),p=g._query,delete g.config,delete g._url,delete g._query,h=this.apiClient.request({path:m,queryParams:p,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),h}}async fetchPredictVideosOperationInternal(e){var i,o;let a,f="",h={};if(this.apiClient.isVertexAI()){const m=dM(e);return f=xe("{resourceName}:fetchPredictOperation",m._url),h=m._query,delete m.config,delete m._url,delete m._query,a=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),a}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mM(t){const e={},i=r(t,["voiceName"]);return i!=null&&u(e,["voiceName"],i),e}function Kg(t){const e={},i=r(t,["prebuiltVoiceConfig"]);return i!=null&&u(e,["prebuiltVoiceConfig"],mM(i)),e}function gM(t){const e={},i=r(t,["speaker"]);i!=null&&u(e,["speaker"],i);const o=r(t,["voiceConfig"]);return o!=null&&u(e,["voiceConfig"],Kg(o)),e}function pM(t){const e={},i=r(t,["speakerVoiceConfigs"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>gM(a))),u(e,["speakerVoiceConfigs"],o)}return e}function yM(t){const e={},i=r(t,["voiceConfig"]);i!=null&&u(e,["voiceConfig"],Kg(i));const o=r(t,["multiSpeakerVoiceConfig"]);o!=null&&u(e,["multiSpeakerVoiceConfig"],pM(o));const a=r(t,["languageCode"]);return a!=null&&u(e,["languageCode"],a),e}function vM(t){const e={},i=r(t,["fps"]);i!=null&&u(e,["fps"],i);const o=r(t,["endOffset"]);o!=null&&u(e,["endOffset"],o);const a=r(t,["startOffset"]);return a!=null&&u(e,["startOffset"],a),e}function TM(t){const e={};if(r(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=r(t,["data"]);i!=null&&u(e,["data"],i);const o=r(t,["mimeType"]);return o!=null&&u(e,["mimeType"],o),e}function xM(t){const e={};if(r(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=r(t,["fileUri"]);i!=null&&u(e,["fileUri"],i);const o=r(t,["mimeType"]);return o!=null&&u(e,["mimeType"],o),e}function CM(t){const e={},i=r(t,["videoMetadata"]);i!=null&&u(e,["videoMetadata"],vM(i));const o=r(t,["thought"]);o!=null&&u(e,["thought"],o);const a=r(t,["inlineData"]);a!=null&&u(e,["inlineData"],TM(a));const f=r(t,["fileData"]);f!=null&&u(e,["fileData"],xM(f));const h=r(t,["thoughtSignature"]);h!=null&&u(e,["thoughtSignature"],h);const m=r(t,["codeExecutionResult"]);m!=null&&u(e,["codeExecutionResult"],m);const p=r(t,["executableCode"]);p!=null&&u(e,["executableCode"],p);const g=r(t,["functionCall"]);g!=null&&u(e,["functionCall"],g);const v=r(t,["functionResponse"]);v!=null&&u(e,["functionResponse"],v);const x=r(t,["text"]);return x!=null&&u(e,["text"],x),e}function SM(t){const e={},i=r(t,["parts"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(f=>CM(f))),u(e,["parts"],a)}const o=r(t,["role"]);return o!=null&&u(e,["role"],o),e}function EM(t){const e={},i=r(t,["behavior"]);i!=null&&u(e,["behavior"],i);const o=r(t,["description"]);o!=null&&u(e,["description"],o);const a=r(t,["name"]);a!=null&&u(e,["name"],a);const f=r(t,["parameters"]);f!=null&&u(e,["parameters"],f);const h=r(t,["parametersJsonSchema"]);h!=null&&u(e,["parametersJsonSchema"],h);const m=r(t,["response"]);m!=null&&u(e,["response"],m);const p=r(t,["responseJsonSchema"]);return p!=null&&u(e,["responseJsonSchema"],p),e}function MM(t){const e={},i=r(t,["startTime"]);i!=null&&u(e,["startTime"],i);const o=r(t,["endTime"]);return o!=null&&u(e,["endTime"],o),e}function _M(t){const e={},i=r(t,["timeRangeFilter"]);return i!=null&&u(e,["timeRangeFilter"],MM(i)),e}function AM(t){const e={},i=r(t,["mode"]);i!=null&&u(e,["mode"],i);const o=r(t,["dynamicThreshold"]);return o!=null&&u(e,["dynamicThreshold"],o),e}function NM(t){const e={},i=r(t,["dynamicRetrievalConfig"]);return i!=null&&u(e,["dynamicRetrievalConfig"],AM(i)),e}function RM(){return{}}function bM(t){const e={},i=r(t,["functionDeclarations"]);if(i!=null){let p=i;Array.isArray(p)&&(p=p.map(g=>EM(g))),u(e,["functionDeclarations"],p)}if(r(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=r(t,["googleSearch"]);o!=null&&u(e,["googleSearch"],_M(o));const a=r(t,["googleSearchRetrieval"]);if(a!=null&&u(e,["googleSearchRetrieval"],NM(a)),r(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(r(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");r(t,["urlContext"])!=null&&u(e,["urlContext"],RM());const h=r(t,["codeExecution"]);h!=null&&u(e,["codeExecution"],h);const m=r(t,["computerUse"]);return m!=null&&u(e,["computerUse"],m),e}function wM(t){const e={},i=r(t,["handle"]);if(i!=null&&u(e,["handle"],i),r(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function eg(){return{}}function DM(t){const e={},i=r(t,["disabled"]);i!=null&&u(e,["disabled"],i);const o=r(t,["startOfSpeechSensitivity"]);o!=null&&u(e,["startOfSpeechSensitivity"],o);const a=r(t,["endOfSpeechSensitivity"]);a!=null&&u(e,["endOfSpeechSensitivity"],a);const f=r(t,["prefixPaddingMs"]);f!=null&&u(e,["prefixPaddingMs"],f);const h=r(t,["silenceDurationMs"]);return h!=null&&u(e,["silenceDurationMs"],h),e}function LM(t){const e={},i=r(t,["automaticActivityDetection"]);i!=null&&u(e,["automaticActivityDetection"],DM(i));const o=r(t,["activityHandling"]);o!=null&&u(e,["activityHandling"],o);const a=r(t,["turnCoverage"]);return a!=null&&u(e,["turnCoverage"],a),e}function UM(t){const e={},i=r(t,["targetTokens"]);return i!=null&&u(e,["targetTokens"],i),e}function IM(t){const e={},i=r(t,["triggerTokens"]);i!=null&&u(e,["triggerTokens"],i);const o=r(t,["slidingWindow"]);return o!=null&&u(e,["slidingWindow"],UM(o)),e}function kM(t){const e={},i=r(t,["proactiveAudio"]);return i!=null&&u(e,["proactiveAudio"],i),e}function BM(t,e){const i={},o=r(t,["generationConfig"]);e!==void 0&&o!=null&&u(e,["setup","generationConfig"],o);const a=r(t,["responseModalities"]);e!==void 0&&a!=null&&u(e,["setup","generationConfig","responseModalities"],a);const f=r(t,["temperature"]);e!==void 0&&f!=null&&u(e,["setup","generationConfig","temperature"],f);const h=r(t,["topP"]);e!==void 0&&h!=null&&u(e,["setup","generationConfig","topP"],h);const m=r(t,["topK"]);e!==void 0&&m!=null&&u(e,["setup","generationConfig","topK"],m);const p=r(t,["maxOutputTokens"]);e!==void 0&&p!=null&&u(e,["setup","generationConfig","maxOutputTokens"],p);const g=r(t,["mediaResolution"]);e!==void 0&&g!=null&&u(e,["setup","generationConfig","mediaResolution"],g);const v=r(t,["seed"]);e!==void 0&&v!=null&&u(e,["setup","generationConfig","seed"],v);const x=r(t,["speechConfig"]);e!==void 0&&x!=null&&u(e,["setup","generationConfig","speechConfig"],yM(Ou(x)));const S=r(t,["enableAffectiveDialog"]);e!==void 0&&S!=null&&u(e,["setup","generationConfig","enableAffectiveDialog"],S);const M=r(t,["systemInstruction"]);e!==void 0&&M!=null&&u(e,["setup","systemInstruction"],SM(qt(M)));const w=r(t,["tools"]);if(e!==void 0&&w!=null){let G=Dl(w);Array.isArray(G)&&(G=G.map($=>bM(wl($)))),u(e,["setup","tools"],G)}const D=r(t,["sessionResumption"]);e!==void 0&&D!=null&&u(e,["setup","sessionResumption"],wM(D));const k=r(t,["inputAudioTranscription"]);e!==void 0&&k!=null&&u(e,["setup","inputAudioTranscription"],eg());const q=r(t,["outputAudioTranscription"]);e!==void 0&&q!=null&&u(e,["setup","outputAudioTranscription"],eg());const N=r(t,["realtimeInputConfig"]);e!==void 0&&N!=null&&u(e,["setup","realtimeInputConfig"],LM(N));const F=r(t,["contextWindowCompression"]);e!==void 0&&F!=null&&u(e,["setup","contextWindowCompression"],IM(F));const X=r(t,["proactivity"]);return e!==void 0&&X!=null&&u(e,["setup","proactivity"],kM(X)),i}function PM(t,e){const i={},o=r(e,["model"]);o!=null&&u(i,["setup","model"],et(t,o));const a=r(e,["config"]);return a!=null&&u(i,["config"],BM(a,i)),i}function VM(t,e,i){const o={},a=r(e,["expireTime"]);i!==void 0&&a!=null&&u(i,["expireTime"],a);const f=r(e,["newSessionExpireTime"]);i!==void 0&&f!=null&&u(i,["newSessionExpireTime"],f);const h=r(e,["uses"]);i!==void 0&&h!=null&&u(i,["uses"],h);const m=r(e,["liveConnectConstraints"]);i!==void 0&&m!=null&&u(i,["bidiGenerateContentSetup"],PM(t,m));const p=r(e,["lockAdditionalFields"]);return i!==void 0&&p!=null&&u(i,["fieldMask"],p),o}function qM(t,e){const i={},o=r(e,["config"]);return o!=null&&u(i,["config"],VM(t,o,i)),i}function GM(t){const e={},i=r(t,["name"]);return i!=null&&u(e,["name"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function HM(t){const e=[];for(const i in t)if(Object.prototype.hasOwnProperty.call(t,i)){const o=t[i];if(typeof o=="object"&&o!=null&&Object.keys(o).length>0){const a=Object.keys(o).map(f=>`${i}.${f}`);e.push(...a)}else e.push(i)}return e.join(",")}function zM(t,e){let i=null;const o=t.bidiGenerateContentSetup;if(typeof o=="object"&&o!==null&&"setup"in o){const f=o.setup;typeof f=="object"&&f!==null?(t.bidiGenerateContentSetup=f,i=f):delete t.bidiGenerateContentSetup}else o!==void 0&&delete t.bidiGenerateContentSetup;const a=t.fieldMask;if(i){const f=HM(i);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)f?t.fieldMask=f:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&a!==null&&Array.isArray(a)&&a.length>0){const h=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let m=[];a.length>0&&(m=a.map(g=>h.includes(g)?`generationConfig.${g}`:g));const p=[];f&&p.push(f),m.length>0&&p.push(...m),p.length>0?t.fieldMask=p.join(","):delete t.fieldMask}else delete t.fieldMask}else a!==null&&Array.isArray(a)&&a.length>0?t.fieldMask=a.join(","):delete t.fieldMask;return t}class FM extends Vi{constructor(e){super(),this.apiClient=e}async create(e){var i,o;let a,f="",h={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const m=qM(this.apiClient,e);f=xe("auth_tokens",m._url),h=m._query,delete m.config,delete m._url,delete m._query;const p=zM(m,e.config);return a=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),a.then(g=>GM(g))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function OM(t){const e={},i=r(t,["name"]);i!=null&&u(e,["_url","name"],i);const o=r(t,["config"]);return o!=null&&u(e,["config"],o),e}function YM(t,e){const i={},o=r(t,["pageSize"]);e!==void 0&&o!=null&&u(e,["_query","pageSize"],o);const a=r(t,["pageToken"]);e!==void 0&&a!=null&&u(e,["_query","pageToken"],a);const f=r(t,["filter"]);return e!==void 0&&f!=null&&u(e,["_query","filter"],f),i}function JM(t){const e={},i=r(t,["config"]);return i!=null&&u(e,["config"],YM(i,e)),e}function $M(t){const e={},i=r(t,["textInput"]);i!=null&&u(e,["textInput"],i);const o=r(t,["output"]);return o!=null&&u(e,["output"],o),e}function XM(t){const e={};if(r(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(r(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=r(t,["examples"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>$M(a))),u(e,["examples","examples"],o)}return e}function KM(t,e){const i={};if(r(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const o=r(t,["tunedModelDisplayName"]);if(e!==void 0&&o!=null&&u(e,["displayName"],o),r(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=r(t,["epochCount"]);e!==void 0&&a!=null&&u(e,["tuningTask","hyperparameters","epochCount"],a);const f=r(t,["learningRateMultiplier"]);if(f!=null&&u(i,["tuningTask","hyperparameters","learningRateMultiplier"],f),r(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(r(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const h=r(t,["batchSize"]);e!==void 0&&h!=null&&u(e,["tuningTask","hyperparameters","batchSize"],h);const m=r(t,["learningRate"]);return e!==void 0&&m!=null&&u(e,["tuningTask","hyperparameters","learningRate"],m),i}function QM(t){const e={},i=r(t,["baseModel"]);i!=null&&u(e,["baseModel"],i);const o=r(t,["trainingDataset"]);o!=null&&u(e,["tuningTask","trainingData"],XM(o));const a=r(t,["config"]);return a!=null&&u(e,["config"],KM(a,e)),e}function ZM(t){const e={},i=r(t,["name"]);i!=null&&u(e,["_url","name"],i);const o=r(t,["config"]);return o!=null&&u(e,["config"],o),e}function WM(t,e){const i={},o=r(t,["pageSize"]);e!==void 0&&o!=null&&u(e,["_query","pageSize"],o);const a=r(t,["pageToken"]);e!==void 0&&a!=null&&u(e,["_query","pageToken"],a);const f=r(t,["filter"]);return e!==void 0&&f!=null&&u(e,["_query","filter"],f),i}function jM(t){const e={},i=r(t,["config"]);return i!=null&&u(e,["config"],WM(i,e)),e}function e_(t,e){const i={},o=r(t,["gcsUri"]);e!==void 0&&o!=null&&u(e,["supervisedTuningSpec","trainingDatasetUri"],o);const a=r(t,["vertexDatasetResource"]);if(e!==void 0&&a!=null&&u(e,["supervisedTuningSpec","trainingDatasetUri"],a),r(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function t_(t,e){const i={},o=r(t,["gcsUri"]);o!=null&&u(i,["validationDatasetUri"],o);const a=r(t,["vertexDatasetResource"]);return e!==void 0&&a!=null&&u(e,["supervisedTuningSpec","trainingDatasetUri"],a),i}function n_(t,e){const i={},o=r(t,["validationDataset"]);e!==void 0&&o!=null&&u(e,["supervisedTuningSpec"],t_(o,i));const a=r(t,["tunedModelDisplayName"]);e!==void 0&&a!=null&&u(e,["tunedModelDisplayName"],a);const f=r(t,["description"]);e!==void 0&&f!=null&&u(e,["description"],f);const h=r(t,["epochCount"]);e!==void 0&&h!=null&&u(e,["supervisedTuningSpec","hyperParameters","epochCount"],h);const m=r(t,["learningRateMultiplier"]);e!==void 0&&m!=null&&u(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],m);const p=r(t,["exportLastCheckpointOnly"]);e!==void 0&&p!=null&&u(e,["supervisedTuningSpec","exportLastCheckpointOnly"],p);const g=r(t,["adapterSize"]);if(e!==void 0&&g!=null&&u(e,["supervisedTuningSpec","hyperParameters","adapterSize"],g),r(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(r(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return i}function i_(t){const e={},i=r(t,["baseModel"]);i!=null&&u(e,["baseModel"],i);const o=r(t,["trainingDataset"]);o!=null&&u(e,["supervisedTuningSpec","trainingDatasetUri"],e_(o,e));const a=r(t,["config"]);return a!=null&&u(e,["config"],n_(a,e)),e}function l_(t){const e={},i=r(t,["name"]);i!=null&&u(e,["model"],i);const o=r(t,["name"]);return o!=null&&u(e,["endpoint"],o),e}function Qg(t){const e={},i=r(t,["name"]);i!=null&&u(e,["name"],i);const o=r(t,["state"]);o!=null&&u(e,["state"],Ng(o));const a=r(t,["createTime"]);a!=null&&u(e,["createTime"],a);const f=r(t,["tuningTask","startTime"]);f!=null&&u(e,["startTime"],f);const h=r(t,["tuningTask","completeTime"]);h!=null&&u(e,["endTime"],h);const m=r(t,["updateTime"]);m!=null&&u(e,["updateTime"],m);const p=r(t,["description"]);p!=null&&u(e,["description"],p);const g=r(t,["baseModel"]);g!=null&&u(e,["baseModel"],g);const v=r(t,["_self"]);v!=null&&u(e,["tunedModel"],l_(v));const x=r(t,["distillationSpec"]);x!=null&&u(e,["distillationSpec"],x);const S=r(t,["experiment"]);S!=null&&u(e,["experiment"],S);const M=r(t,["labels"]);M!=null&&u(e,["labels"],M);const w=r(t,["pipelineJob"]);w!=null&&u(e,["pipelineJob"],w);const D=r(t,["satisfiesPzi"]);D!=null&&u(e,["satisfiesPzi"],D);const k=r(t,["satisfiesPzs"]);k!=null&&u(e,["satisfiesPzs"],k);const q=r(t,["serviceAccount"]);q!=null&&u(e,["serviceAccount"],q);const N=r(t,["tunedModelDisplayName"]);return N!=null&&u(e,["tunedModelDisplayName"],N),e}function o_(t){const e={},i=r(t,["sdkHttpResponse"]);i!=null&&u(e,["sdkHttpResponse"],i);const o=r(t,["nextPageToken"]);o!=null&&u(e,["nextPageToken"],o);const a=r(t,["tunedModels"]);if(a!=null){let f=a;Array.isArray(f)&&(f=f.map(h=>Qg(h))),u(e,["tuningJobs"],f)}return e}function s_(t){const e={},i=r(t,["name"]);i!=null&&u(e,["name"],i);const o=r(t,["metadata"]);o!=null&&u(e,["metadata"],o);const a=r(t,["done"]);a!=null&&u(e,["done"],a);const f=r(t,["error"]);return f!=null&&u(e,["error"],f),e}function a_(t){const e={},i=r(t,["checkpointId"]);i!=null&&u(e,["checkpointId"],i);const o=r(t,["epoch"]);o!=null&&u(e,["epoch"],o);const a=r(t,["step"]);a!=null&&u(e,["step"],a);const f=r(t,["endpoint"]);return f!=null&&u(e,["endpoint"],f),e}function r_(t){const e={},i=r(t,["model"]);i!=null&&u(e,["model"],i);const o=r(t,["endpoint"]);o!=null&&u(e,["endpoint"],o);const a=r(t,["checkpoints"]);if(a!=null){let f=a;Array.isArray(f)&&(f=f.map(h=>a_(h))),u(e,["checkpoints"],f)}return e}function Vu(t){const e={},i=r(t,["name"]);i!=null&&u(e,["name"],i);const o=r(t,["state"]);o!=null&&u(e,["state"],Ng(o));const a=r(t,["createTime"]);a!=null&&u(e,["createTime"],a);const f=r(t,["startTime"]);f!=null&&u(e,["startTime"],f);const h=r(t,["endTime"]);h!=null&&u(e,["endTime"],h);const m=r(t,["updateTime"]);m!=null&&u(e,["updateTime"],m);const p=r(t,["error"]);p!=null&&u(e,["error"],p);const g=r(t,["description"]);g!=null&&u(e,["description"],g);const v=r(t,["baseModel"]);v!=null&&u(e,["baseModel"],v);const x=r(t,["tunedModel"]);x!=null&&u(e,["tunedModel"],r_(x));const S=r(t,["supervisedTuningSpec"]);S!=null&&u(e,["supervisedTuningSpec"],S);const M=r(t,["tuningDataStats"]);M!=null&&u(e,["tuningDataStats"],M);const w=r(t,["encryptionSpec"]);w!=null&&u(e,["encryptionSpec"],w);const D=r(t,["partnerModelTuningSpec"]);D!=null&&u(e,["partnerModelTuningSpec"],D);const k=r(t,["distillationSpec"]);k!=null&&u(e,["distillationSpec"],k);const q=r(t,["experiment"]);q!=null&&u(e,["experiment"],q);const N=r(t,["labels"]);N!=null&&u(e,["labels"],N);const F=r(t,["pipelineJob"]);F!=null&&u(e,["pipelineJob"],F);const X=r(t,["satisfiesPzi"]);X!=null&&u(e,["satisfiesPzi"],X);const G=r(t,["satisfiesPzs"]);G!=null&&u(e,["satisfiesPzs"],G);const $=r(t,["serviceAccount"]);$!=null&&u(e,["serviceAccount"],$);const ie=r(t,["tunedModelDisplayName"]);return ie!=null&&u(e,["tunedModelDisplayName"],ie),e}function u_(t){const e={},i=r(t,["sdkHttpResponse"]);i!=null&&u(e,["sdkHttpResponse"],i);const o=r(t,["nextPageToken"]);o!=null&&u(e,["nextPageToken"],o);const a=r(t,["tuningJobs"]);if(a!=null){let f=a;Array.isArray(f)&&(f=f.map(h=>Vu(h))),u(e,["tuningJobs"],f)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class c_ extends Vi{constructor(e){super(),this.apiClient=e,this.get=async i=>await this.getInternal(i),this.list=async(i={})=>new Io(Pi.PAGED_ITEM_TUNING_JOBS,o=>this.listInternal(o),await this.listInternal(i),i),this.tune=async i=>{if(this.apiClient.isVertexAI())return await this.tuneInternal(i);{const o=await this.tuneMldevInternal(i);let a="";return o.metadata!==void 0&&o.metadata.tunedModel!==void 0?a=o.metadata.tunedModel:o.name!==void 0&&o.name.includes("/operations/")&&(a=o.name.split("/operations/")[0]),{name:a,state:Ru.JOB_STATE_QUEUED}}}}async getInternal(e){var i,o,a,f;let h,m="",p={};if(this.apiClient.isVertexAI()){const g=ZM(e);return m=xe("{name}",g._url),p=g._query,delete g.config,delete g._url,delete g._query,h=this.apiClient.request({path:m,queryParams:p,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),h.then(v=>Vu(v))}else{const g=OM(e);return m=xe("{name}",g._url),p=g._query,delete g.config,delete g._url,delete g._query,h=this.apiClient.request({path:m,queryParams:p,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),h.then(v=>Qg(v))}}async listInternal(e){var i,o,a,f;let h,m="",p={};if(this.apiClient.isVertexAI()){const g=jM(e);return m=xe("tuningJobs",g._url),p=g._query,delete g.config,delete g._url,delete g._query,h=this.apiClient.request({path:m,queryParams:p,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(x=>{const S=x;return S.sdkHttpResponse={headers:v.headers},S})),h.then(v=>{const x=u_(v),S=new wm;return Object.assign(S,x),S})}else{const g=JM(e);return m=xe("tunedModels",g._url),p=g._query,delete g.config,delete g._url,delete g._query,h=this.apiClient.request({path:m,queryParams:p,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json().then(x=>{const S=x;return S.sdkHttpResponse={headers:v.headers},S})),h.then(v=>{const x=o_(v),S=new wm;return Object.assign(S,x),S})}}async tuneInternal(e){var i,o;let a,f="",h={};if(this.apiClient.isVertexAI()){const m=i_(e);return f=xe("tuningJobs",m._url),h=m._query,delete m.config,delete m._url,delete m._query,a=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),a.then(p=>Vu(p))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var i,o;let a,f="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const m=QM(e);return f=xe("tunedModels",m._url),h=m._query,delete m.config,delete m._url,delete m._query,a=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),a.then(p=>s_(p))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class f_{async download(e,i){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const d_=1024*1024*8,h_=3,m_=1e3,g_=2,Tu="x-goog-upload-status";async function p_(t,e,i){var o,a,f;let h=0,m=0,p=new bu(new Response),g="upload";for(h=t.size;m<h;){const x=Math.min(d_,h-m),S=t.slice(m,m+x);m+x>=h&&(g+=", finalize");let M=0,w=m_;for(;M<h_&&(p=await i.request({path:"",body:S,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":g,"X-Goog-Upload-Offset":String(m),"Content-Length":String(x)}}}),!(!((o=p==null?void 0:p.headers)===null||o===void 0)&&o[Tu]));)M++,await v_(w),w=w*g_;if(m+=x,((a=p==null?void 0:p.headers)===null||a===void 0?void 0:a[Tu])!=="active")break;if(h<=m)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const v=await(p==null?void 0:p.json());if(((f=p==null?void 0:p.headers)===null||f===void 0?void 0:f[Tu])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return v.file}async function y_(t){return{size:t.size,type:t.type}}function v_(t){return new Promise(e=>setTimeout(e,t))}class T_{async upload(e,i,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await p_(e,i,o)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await y_(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class x_{create(e,i,o){return new C_(e,i,o)}}class C_{constructor(e,i,o){this.url=e,this.headers=i,this.callbacks=o}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const tg="x-goog-api-key";class S_{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(tg)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(tg,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const E_="gl-node/";class M_{constructor(e){var i;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(i=e.vertexai)!==null&&i!==void 0?i:!1,this.apiKey=e.apiKey;const o=N0(e.httpOptions,e.vertexai,void 0,void 0);o&&(e.httpOptions?e.httpOptions.baseUrl=o:e.httpOptions={baseUrl:o}),this.apiVersion=e.apiVersion;const a=new S_(this.apiKey);this.apiClient=new FE({auth:a,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:E_+"web",uploader:new T_,downloader:new f_}),this.models=new uM(this.apiClient),this.live=new nM(this.apiClient,a,new x_),this.batches=new Qv(this.apiClient),this.chats=new ex(this.models,this.apiClient),this.caches=new ZT(this.apiClient),this.files=new hx(this.apiClient),this.operations=new hM(this.apiClient),this.authTokens=new FM(this.apiClient),this.tunings=new c_(this.apiClient)}}const xt=[{name:"Luyn Kh",minCultivation:0,maxAge:100},{name:"Trc C",minCultivation:1e3,maxAge:200},{name:"Kt an",minCultivation:5e3,maxAge:500},{name:"Nguyn Anh",minCultivation:25e3,maxAge:1500},{name:"Ha Thn",minCultivation:1e5,maxAge:5e3},{name:"i Tha",minCultivation:5e5,maxAge:1e4}],An=[{name:"Ngoi Mn  T",realmRequired:"Luyn Kh",salary:25},{name:"Ni Mn  T",realmRequired:"Trc C",salary:100},{name:"Trng Lo",realmRequired:"Kt an",salary:500},{name:"Ph Tng Ch",realmRequired:"Nguyn Anh",salary:2500},{name:"Tng Ch",realmRequired:"Ha Thn",salary:1e4}],ta=[{name:"Nguyn Kh Chn Quyt",rank:"Linh phm",description:"Cng php chnh thng ca tng mn, trung bnh nhng n nh.",effects:{cultivationBonus:6}},{name:"Linh Ha Quyt",rank:"Linh phm",description:"Hp th ha linh kh, tu luyn nhanh nhng b o.",effects:{cultivationBonus:8}},{name:"Huyn Bng Lc",rank:"Linh phm",description:"Hp th thy linh kh, tm cnh thanh minh, tu vi vng chc.",effects:{cultivationBonus:7.5}},{name:"Vn Kim Quy Tng",rank:"Tin phm",description:"Cng php kim tu thng tha, nghe n c th chm rch khng gian.",effects:{cultivationBonus:15}}],Jn={"Linh Cn (Bt buc)":[{id:"thin",name:"Thin Linh Cn",description:"+20 TV/lt",effects:{cultivationBonus:40}},{id:"song",name:"Song Linh Cn",description:"+15 TV/lt",effects:{cultivationBonus:30}},{id:"tam",name:"Tam Linh Cn",description:"+10 TV/lt",effects:{cultivationBonus:20}},{id:"t",name:"T Linh Cn",description:"+5 TV/lt",effects:{cultivationBonus:10}},{id:"ngu",name:"Ngu Linh Cn",description:"+0 TV/lt",effects:{cultivationBonus:0}}],"Th Cht (Ty chn)":[{id:"long_toc",name:"Dng Mu Long Tc",description:"+10% HP ti a",effects:{maxHealthModifier:.1}},{id:"kiem_the",name:"Kim Th",description:"+10 Cng khi im",effects:{attackBonus:10}},{id:"van_doc",name:"Vn c Bt Xm",description:"+10 Th khi im",effects:{defenseBonus:10}}],"Vn Mnh (Ty chn)":[{id:"than_may_man",name:"Thn May Mn",description:"+10% Linh Thch nhn c",effects:{linhThachGainModifier:.1}},{id:"van_rui",name:"K Vn Ri",description:"Tu vi nhn -10%, +5 Cng & Th",effects:{cultivationGainModifier:-.1,attackBonus:5,defenseBonus:5}}]},Yn={"thin kim":{id:"thien-kiem",name:"Thin Kim Tng",description:"Ni danh vi kim php v song.  t tp trung vo tn cng thun ty, nhng phng th yu hn.",bonuses:{attack:10,defense:-5,initialItems:[{id:"kiem_tan_thu",name:"Kim Tn Th",type:"weapon",description:"Mt thanh kim sc bn cho ngi mi bt u.",effects:{attack:5}}],startingTechniqueName:"Thin Kim Quyt"}},"vn dc":{id:"van-duoc",name:"Vn Dc Cc",description:"Cc bc thy v luyn an v cha tr. Am hiu su sc v linh tho, c li th v sinh tn.",bonuses:{maxHealth:10,initialItems:[{id:"hoi_mau_dan_1",name:"Hi Mu an",type:"consumable",description:"Phc hi 30 sinh mnh.",effects:{health:30}},{id:"hoi_mau_dan_2",name:"Hi Mu an",type:"consumable",description:"Phc hi 30 sinh mnh.",effects:{health:30}}]}},"huyn ph":{id:"huyen-phu",name:"Huyn Ph Mn",description:"S dng ngh thut Ph Ch b truyn. Khi u vi ti chnh di do hn  mua sm vt t.",bonuses:{linhThach:150,initialItems:[{id:"cong_kich_phu",name:"Cng Kch Ph",type:"consumable",description:"To ra mt qu cu la gy st thng.",effects:{}},{id:"phong_ngu_phu",name:"Phng Ng Ph",type:"consumable",description:"To ra mt l chn nh sng tm thi.",effects:{}}]}}},na=[{id:"forest",name:"Rng Rm",description:"Mt khu rng c xa y ry yu th v c duyn."},{id:"city",name:"Thnh Trn",description:"Mt trung tm bun bn sm ut, ni c th tm thy mi th."},{id:"sea",name:"Bin C",description:"Vng bin su thm n cha nhiu b mt v kho bu."},{id:"cave",name:"Hang ng",description:"Mt hang ng ti tm, m t, c th tm thy khong thch qu him."},{id:"thien-kiem",name:"Thin Kim Tng",description:"Ni cc kim tu mi gia kim  ca mnh."},{id:"van-duoc",name:"Vn Dc Cc",description:"Khng kh trn ngp mi thuc, l thnh a ca cc luyn an s."},{id:"huyen-phu",name:"Huyn Ph Mn",description:"Nhng ngn ni l lng c kt ni bng cc cy cu nh sng."},{id:"giao_luu_phuong",name:"Giao Lu Phng",description:"Mt khu ch trung lp ni cc tu s t cc tng mn khc nhau t hp."}],ng=[{id:"npc_lam_van",name:"Lam Vn",gender:"N",description:" t chn truyn ca Thin Kim Tng. Lnh lng nh bng, kim php sc bn v tnh, nhng su trong ni tm l mt tri tim gi vng chnh ngha v mt ni c n khng ai thu.",realm:"Trc C",cultivation:1100,relationshipPoints:0,status:"Xa l",isLover:!1,avatarUrl:"https://i.pinimg.com/736x/a6/06/87/a606871c577037f94191bec853f7c223.jpg"},{id:"npc_thach_nghi",name:"Thch Ngh",gender:"Nam",description:"Thiu ch ca Thch gia, mt gia tc luyn th c xa. Tnh cch b o, t ph, coi tri bng vung. Mc tiu duy nht l tr thnh k mnh nht, vt qua ci bng ca t ph.",realm:"Trc C",cultivation:1250,relationshipPoints:-10,status:"Xa l",isLover:!1,avatarUrl:"https://i.pinimg.com/736x/87/c1/67/87c167e93ead41b8a892b67f18544e3f.jpg"},{id:"npc_tieu_y_tien",name:"Tiu Y Tin",gender:"N",description:"Tn tu b n, ni danh vi y thut v c thut song tuyt. Tnh cch tht thng, lc cu ngi, lc hi ngi, hnh tung bt nh, khng ai bit c qu kh ca nng.",realm:"Kt an",cultivation:5500,relationshipPoints:5,status:"Ngi quen",isLover:!1,avatarUrl:"https://i.pinimg.com/originals/a9/a7/a7/a9a7a7d432b508f6575971a24d5d85c8.jpg"},{id:"npc_han_thien",name:"Hn Thin",gender:"Nam",description:"Mt tn tu c v ngoi bnh thng nhng tm t su nh bin. Hnh s cn trng n mc ng s, dng nh lun tnh trc ba bc. Che giu mt b mt ng tri.",realm:"Trc C",cultivation:1500,relationshipPoints:0,status:"Xa l",isLover:!1,avatarUrl:"https://i.pinimg.com/736x/67/6f/30/676f30d0725a3962639080b031b2a95c.jpg"},{id:"npc_diep_thanh_ca",name:"Dip Thanh Ca",gender:"N",description:"Tiu s mui c yu qu nht ca Vn Dc Cc. Ngy th, trong sng, c ti nng luyn an him c. Lun mang theo mnh mt gi linh tho v n ci m p.",realm:"Luyn Kh",cultivation:800,relationshipPoints:15,status:"Ngi quen",isLover:!1,avatarUrl:"https://i.pinimg.com/736x/21/24/a7/2124a7731758c035b3d0d346757b01d3.jpg"},{id:"npc_lieu_nhu_yen",name:"Liu Nh Yn",gender:"N",description:"Thnh n ca Hp Hoan Phi, v p yu kiu, quyn r cht ngi. Mi li ni, c ch u mang theo m lc kh cng. Nguy him v y cm d.",realm:"Kt an",cultivation:6e3,relationshipPoints:-5,status:"Xa l",isLover:!1,avatarUrl:"https://i.pinimg.com/originals/77/b1/d6/77b1d620579a7774785499092497645f.jpg"},{id:"npc_moc_nguyet_anh",name:"Mc Nguyt Anh",gender:"N",description:"N tu ca Huyn Ph Mn, chuyn v trn php v ph lc. Trm tnh, t ni, thch nghin cu cc c t v trn  hn l giao tip vi ngi khc.",realm:"Trc C",cultivation:1300,relationshipPoints:0,status:"Xa l",isLover:!1,avatarUrl:"https://i.pinimg.com/originals/a4/0c/ac/a40cac5a557d342398ef364e7828033c.jpg"},{id:"npc_tuu_kiem_tien",name:"Tu Kim Tin",gender:"Nam",description:"Lo gi say xn bn tnh c gp  Thnh Trn, lng eo h l ru, tay cm kim g. Trng c v li thi nhng i khi li ni ra nhng li y trit l v kim  su xa.",realm:"Khng r",cultivation:99999,relationshipPoints:0,status:"Xa l",isLover:!1,avatarUrl:"https://i.pinimg.com/736x/d4/3b/b1/d43bb1342f1f4e1577c21950e7b8c7e0.jpg"}],__=[{name:"Thit Qung",type:"material",description:"Qung st th, dng  rn trang b.",cost:15,effects:{}},{name:"Linh Thch Th",type:"material",description:" cha linh kh cha c tinh luyn, c th dng trong trn php.",cost:40,effects:{}},{name:"Huyn Thit Qung",type:"material",description:"Mt loi khong thch qu him, cc k cng rn.",cost:120,effects:{}},{name:"Yu an (H phm)",type:"material",description:"Ni an ca yu th cp thp, cha ng yu lc.",cost:200,effects:{}},{name:"Hi Phc an (H phm)",type:"consumable",description:"Hi phc 50 HP.",effects:{health:50},cost:20},{name:"Hi Phc an (H phm)",type:"consumable",description:"Hi phc 50 HP.",effects:{health:50},cost:20},{name:"Hi Phc an (Trung phm)",type:"consumable",description:"Hi phc 200 HP.",effects:{health:200},cost:80},{name:"Hi Phc an (Trung phm)",type:"consumable",description:"Hi phc 200 HP.",effects:{health:200},cost:80},{name:"Bch Tho L",type:"consumable",description:"Tinh hoa trm loi linh tho, hi phc 500 HP.",effects:{health:500},cost:250},{name:"Ngc Ty Cao",type:"consumable",description:"Cao dc qu him, hi phc 1500 HP.",effects:{health:1500},cost:800},{name:"T Linh an",type:"consumable",description:"Tng 50 Tu vi.",effects:{cultivation:50},cost:150},{name:"Trc C an",type:"consumable",description:"H tr t ph Trc C, tng 250 Tu vi.",effects:{cultivation:250},cost:800},{name:"Ngng Nguyn an",type:"consumable",description:"Tng 1000 Tu vi.",effects:{cultivation:1e3},cost:3500},{name:"Ph Anh an",type:"consumable",description:"Tng 5000 Tu vi.",effects:{cultivation:5e3},cost:18e3},{name:"Thit Kim",type:"weapon",description:"Mt thanh kim st bnh thng.",effects:{attack:8},cost:50},{name:"Bch Ngc Kim",type:"weapon",description:"Kim lm t bch ngc, va p va sc.",effects:{attack:25},cost:300},{name:"Huyn Thit Trng Kim",type:"weapon",description:"Cc k nng, uy lc kinh ngi.",effects:{attack:80},cost:2e3},{name:"T in ao",type:"weapon",description:"Li ao n cha li in chi lc.",effects:{attack:200},cost:8e3},{name:"Da Th Gip",type:"armor",description:"Gip lm t da yu th cp thp.",effects:{defense:10},cost:40},{name:"Thit Gip",type:"armor",description:"Mt b gip st chc chn.",effects:{defense:30},cost:250},{name:"Linh Tm Bo Gip",type:"armor",description:"Dt t t linh tm, nh m bn.",effects:{defense:90},cost:2200},{name:"Long Ln Gip",type:"armor",description:"Ch t vy ca mt loi Giao Long.",effects:{defense:220},cost:9e3},{name:"B tch: Linh Ha Quyt",type:"techniqueScroll",description:"Ghi li cng php Linh Ha Quyt. c  hc.",cost:2e4,technique:ta[1],effects:{}},{name:"B tch: Huyn Bng Lc",type:"techniqueScroll",description:"Ghi li cng php Huyn Bng Lc. c  hc.",cost:18e3,technique:ta[2],effects:{}}],A_=[{name:"B tch: Vn Kim Quy Tng",type:"techniqueScroll",description:"Cng php kim tu thng tha, nghe n c th chm rch khng gian.",cost:15e4,technique:ta[3],effects:{}},{name:"Ph Gii an",type:"consumable",description:"an dc cc phm, tng mnh tu vi, h tr ph cnh gii.",effects:{cultivation:2e4},cost:8e4},{name:"Huyt Long Gip",type:"armor",description:"Gip c rn t vy v mu ca Huyt Long, phng ng v song.",effects:{defense:500},cost:12e4},{name:"Th Thn Thng",type:"weapon",description:"Mt cy thng c xa n cha st kh kinh thin.",effects:{attack:450},cost:12e4},{name:"Cu Chuyn Hon Hn an",type:"consumable",description:"Tin an trong truyn thuyt, c th ci t hi sinh (hi y HP v tng ti a HP).",effects:{health:99999},cost:2e5},{name:"Khng Gian Gii Ch",type:"accessory",description:"Mt chic nhn cha khng gian ring, tng sc tn cng v phng th.",effects:{attack:50,defense:50},cost:9e4}];function N_(t){const e=xt.findIndex(f=>f.name===t),i=[],o=3+Math.floor(Math.random()*2),a=[...A_].filter(f=>!(e<2&&f.cost>1e5||e<3&&f.cost>16e4));for(;i.length<o&&a.length>0;){const f=a.splice(Math.floor(Math.random()*a.length),1)[0],h=Math.round((f.cost??5e4)*.7);i.push({item:{...f,cost:f.cost,id:`${Date.now()}-auction-${i.length}`},startingBid:h,currentBid:h,highestBidderId:null,highestBidderName:null,status:"ongoing"})}return i}function R_(t){const e=xt.findIndex(h=>h.name===t);let i=[];const o=8+Math.floor(Math.random()*5),a=__.filter(h=>{const m=h.cost??0;return e<=1?m<500:e<=2?m<4e3:e<=3?m<25e3:!0}),f=a.filter(h=>h.type==="consumable"&&h.effects.health);for(let h=0;h<2&&f.length>0;h++){const m=f[Math.floor(Math.random()*f.length)],p=Math.round((m.cost??0)*1.5);i.push({...m,cost:p,id:`${Date.now()}-shop-${i.length}`})}for(;i.length<o&&a.length>0;){const h=a[Math.floor(Math.random()*a.length)];if(i.filter(m=>m.name===h.name).length<2){const m=Math.round((h.cost??0)*1.5);i.push({...h,cost:m,id:`${Date.now()}-shop-${i.length}`})}}return i.sort((h,m)=>(h.cost??0)-(m.cost??0))}class b_{constructor(e){if(!e)throw new Error("API Key is required to initialize GeminiService.");this.ai=new M_({apiKey:e})}async startNewGame(e){const i=Object.values(Jn).flat(),o=Yn[e.sect];let a={name:e.name.trim()||"V Danh",gender:e.gender,age:16,health:100,maxHealth:100,realm:xt[0].name,cultivation:0,cultivationForNextRealm:xt[1].minCultivation,stats:{attack:5,defense:5},inventory:[],equipment:{weapon:null,armor:null,accessory:null},linhThach:10,cultivationTechnique:{name:"Dn Kh Quyt",rank:"Phm phm",description:"Cng php c bn  dn linh kh vo c th.",effects:{cultivationBonus:2.5}},currentLocation:o.name,activeQuest:null,talents:e.talents,avatarUrl:e.avatarUrl,spouseId:null,sect:o.name,family:e.family,sectRank:An[0].name,pets:[],linhThachGainModifier:1,cultivationGainModifier:1};switch(e.talents.forEach(h=>{const m=i.find(p=>p.id===h);if(m){const p=m.effects;p.maxHealthModifier&&(a.maxHealth*=1+p.maxHealthModifier),p.attackBonus&&(a.stats.attack+=p.attackBonus),p.defenseBonus&&(a.stats.defense+=p.defenseBonus),p.linhThachGainModifier&&(a.linhThachGainModifier+=p.linhThachGainModifier),p.cultivationGainModifier&&(a.cultivationGainModifier+=p.cultivationGainModifier)}}),a.maxHealth=Math.round(a.maxHealth),a.health=a.maxHealth,e.family){case"thng nhn":a.linhThach+=500;break;case"v gia":a.maxHealth=Math.round(a.maxHealth*1.1),a.health=a.maxHealth;break;case"suy tn":a.cultivationTechnique={name:"Cng Php Gia Truyn",rank:"Phm phm",description:"Mt cng php c xa t gia tc  suy tn, hiu qu hn bnh thng.",effects:{cultivationBonus:4}};break}const f=o.bonuses;if(f.attack&&(a.stats.attack+=f.attack),f.defense&&(a.stats.defense+=f.defense),f.maxHealth&&(a.maxHealth+=f.maxHealth,a.health=a.maxHealth),f.linhThach&&(a.linhThach+=f.linhThach),f.initialItems){const h=f.initialItems.map((m,p)=>({...m,id:`${m.id}_${Date.now()}_${p}`,effects:m.effects||{},type:m.type,cost:0}));a.inventory.push(...h),e.sect==="thin kim"&&h[0].type==="weapon"&&(a.equipment.weapon=h[0],a.inventory=a.inventory.filter(m=>m.id!==h[0].id))}return f.startingTechniqueName==="Thin Kim Quyt"&&(a.cultivationTechnique={name:"Thin Kim Quyt",rank:"Phm phm",description:"Cng php nhp mn ca Thin Kim Tng, tng cng s sc bn ca linh kh.",effects:{cultivationBonus:3.5}}),{player:a}}async getYearlyEventChoice(e,i,o){var D,k,q,N;const a=((D=na.find(F=>F.name===e.currentLocation))==null?void 0:D.description)??"mt ni v nh",f=Object.keys(Yn).find(F=>Yn[F].name===e.sect),h=f?Yn[f].description:"mt tng mn v danh",m=e.activeQuest?`Ngi chi ang c nhim v: "${e.activeQuest.title}" (${e.activeQuest.description}). Nhim v ny cn tng cng ${e.activeQuest.duration} lt  hon thnh,  qua ${e.activeQuest.progress} lt.`:"Ngi chi hin khng c nhim v no.",p=i.length>0?`Cc NPC quan trng trong i bn: ${i.map(F=>`${F.name} (${F.gender}, ${F.status}: ${F.relationshipPoints} im)`).join(", ")}.`:"Hin ti khng c NPC quan trng no.",g=o?"LU : Ty chn ni dung ngi ln (18+) ang BT. Bn c th to ra cc s kin c ch  trng thnh hn, bao gm bo lc, m mu en ti, v cc mi quan h phc tp.":"LU : Ty chn ni dung ngi ln (18+) ang TT. Gi cho tt c cc s kin ph hp vi mi la tui, tp trung vo tu luyn, phiu lu v tnh bn trong sng.",v=na.map(F=>`'${F.name}'`).join(", "),x=Object.values(Jn).flat(),S=e.talents.map(F=>{var X;return(X=x.find(G=>G.id===F))==null?void 0:X.name}).filter(Boolean).join(", "),M=`Bn l ngi qun tr cho mt tr chi m phng 'Tu Tin'. Da vo trng thi ca ngi chi, hy to mt s kin c 2-4 la chn. Ch tr li bng mt i tng JSON hp l, khng c markdown.
        - ${g}
        - Ngi chi l mt  t ${e.gender==="N"?"n":"nam"} ca **${e.sect}** vi chc v l **${e.sectRank}**. c im ca tng mn: ${h}.
        - Gia tc ngi chi: **${e.family}**.
        - Cc thin ph ca ngi chi: ${S||"Khng c"}.
        - ${m}
        - V tr hin ti ca ngi chi l '${e.currentLocation}', ni c m t l: '${a}'.
        - ${p}
        - **LUT CHI QUAN TRNG**: Game c h thng i Hi Thin Kiu, u Gi Hi v gii hn tui. Bn khng cn to s kin cho chng.
        
        QUY TC TO S KIN:
        0.  **Sng To & a Dng:** Hy sng to! To ra nhng tnh hung bt ng, nhng c duyn l lng, nhng m mu phc tp, hoc nhng khonh khc i thng  ngha. Khai thc su hn vo bi cnh ca tng mn, gia tc, v cc mi quan h NPC. ng lp li cc loi s kin qu thng xuyn.
        1.  **S kin NPC:** Thnh thong (khong 30% c hi), to s kin lin quan n mt trong cc NPC. S kin c th tng tc vi NPC khc gii tnh v to c hi pht trin tnh cm nu hp l. **Gim tn sut:** Nhn vt Tiu Y Tin l mt ngi b n, hy  c y xut hin vi tn sut thp hn ng k so vi cc NPC khc.
        2.  **Truyn m Ph (NPC ch ng):** Nu mt NPC c im ho cm >= 100 v cha phi l o l, c 15% c hi to mt s kin h ch ng gi tin nhn cho bn. 'description' nn l: 'Bn nhn c truyn m ph t [NPC Name]: "[Ni dung tin nhn]"'. Cc la chn l li p li ca ngi chi, c hiu ng tng ho cm nh.
        3.  **Tnh Cm Su Sc:**
            - **T Tnh:** Nu mt NPC c im ho cm > 200 v ngi chi cha c o l, bn c th to s kin NPC  t tnh. La chn ng  PHI c hiu ng \`"newSpouse": { "npcId": "..." }\`.
            - **Song Tu (18+):** Nu ngi chi  C o l v ty chn 18+ ang BT, bn c th to ra cc s kin lng mn, thn mt dn n "Song Tu". La chn ny NN c hiu ng \`"dualCultivation": true\`  thng mt lng ln tu vi. M t s kin c th trng thnh hn.
        4.  **La Chn May Ri:** i vi cc la chn c kt qu khng chc chn (v d: t ph mo him, trm cp, thuyt phc mt nhn vt kh tnh, khm ph mt ni nguy him), bn c th ty chn thm trng \`"successChance": <s_nguyn_t_1_n_100>\`. V d: \`"text": "Th t nhp vo kho tng", "successChance": 40, "effects": { "newItem": ... }\`. **Hiu ng trong 'effects' ch p dng khi thnh cng.** Game s t x l hu qu khi tht bi. Nu bn khng cung cp, la chn c coi l thnh cng 100%.
        5.  **X l Nhim v:** Nu ngi chi ang  sai v tr nhim v, to s kin nhc nh h di chuyn n ${((k=e.activeQuest)==null?void 0:k.location)??"a im nhim v"}.
        6.  **Nhn Nhim v mi:** Nu ngi chi ang  trong tng mn ca h (${e.sect}) v khng c nhim v, u tin to s kin nhn nhim v mi.
            - **Yu cu Nhim v:** Mi i tng \`newQuest\` BT BUC phi c mt trng \`title\` l mt chui vn bn ngn gn, hp dn, khng c  trng hoc l "undefined". V d: "Thu Thp Huyt Tinh Tho", "Dit Tr Lang Yu". Ngoi ra, phi c \`description\`, \`location\`, \`difficulty\`, \`duration\`, \`reward\` v \`healthCostPerTurn\`.
            - **V tr & Thi gian:** Trng "location" cho nhim v mi PHI L MT trong cc a im hp l sau: ${v}. Thi gian (\`duration\`) tnh bng LT (mi lt l 6 thng).
            - **Ri ro & Tn tht:** Bt buc thm trng \`"healthCostPerTurn"\` vo mi nhim v. y l lng HP ngi chi mt MI LT lm nhim v. Chi ph ny phi hp l: nhim v an ton (giao hng, a th) mt 0-5 HP; nhim v thu thp (hi thuc  ni nguy him) mt 5-15 HP; nhim v chin u (sn yu th, dit tr ma tu) mt 10-30 HP.
        7.  **Vt Phm Mi:** 'newItem' l mt i tng. N c th l trang b, an dc, b tch hoc nguyn liu. Khi to 'newItem', nu  l vt phm c th mua bn, hy ty chn thm trng "cost" l gi tr c bn ca n bng linh thch.
            - \`type\`: 'weapon', 'armor', 'accessory', 'consumable', 'techniqueScroll', 'material'.
            - \`effects\`: Mt i tng cha \`attack\`, \`defense\`, \`health\`, \`cultivation\`. Ch p dng cho trang b v an dc. i vi 'material', hy  \`effects\` l mt i tng trng.
            - \`technique\`: Mt i tng \`CultivationTechnique\`. Ch p dng cho \`techniqueScroll\`.
            - **Hy to ra cc loi an dc mnh hn v trang b a dng hn, c bit khi ngi chi  cnh gii cao. Lng tu vi nhn c nn hp l, trnh cho qu nhiu.**
        8.  **Sng Vt Mi:** 'newPet' l mt i tng  ban thng sng vt ng hnh.
            - \`name\`, \`species\`, \`description\`: M t v sng vt.
            - \`effects\`: Bt buc phi c \`cultivationBonusPerYear\`  tng tu vi mi nm cho ngi chi.
        9.  **B Cnh:** 'startSecretRealm' l mt i tng  bt u mt cuc thm him ln.
            - S kin ny PHI him.
            - \`name\`, \`description\`, \`duration\` (s lt), \`reward\` (phn thng ln khi hon thnh).
        10. **KHNG S DNG:** Tuyt i khng to hiu ng "questProgress", "breakthroughAttempt", "auctionAction". Khng t to trng "id" cho cc vt phm, nhim v, hoc b cnh mi; h thng s t x l.

        CU TRC JSON:
        { 
          "description": "M t s kin", 
          "choices": [ 
            { 
              "text": "M t la chn chc chn", 
              "effects": { "cultivationGained": 5, "healthChange": -5 } 
            },
            {
              "text": "La chn nhn nhim v",
              "effects": {
                 "newQuest": {
                   "title": "Thu Thp Tho Dc",
                   "description": "Mt trng lo cn bn thu thp 10 cy Huyt Linh Chi.",
                   "location": "Rng Rm",
                   "difficulty": "n gin",
                   "duration": 2,
                   "healthCostPerTurn": 5,
                   "reward": { "linhThach": 100, "cultivation": 50 }
                 }
              }
            }
          ] 
        }
        - Cc kha trong 'effects' v 'successChance' l ty chn.`,w=`Trng thi ngi chi: Gii tnh=${e.gender}, Tui=${e.age}, V tr=${e.currentLocation}, Tng mn=${e.sect}, Chc v=${e.sectRank}, Cnh gii=${e.realm}, Linh thch=${e.linhThach}. Nhim v: ${((q=e.activeQuest)==null?void 0:q.title)??"Khng"}. To mt s kin.`;try{let X=(await this.ai.models.generateContent({model:"gemini-2.5-flash-preview-04-17",contents:`${M}

${w}`,config:{temperature:1,responseMimeType:"application/json"}})).text.trim();const G=/^```(\w*)?\s*\n?(.*?)\n?\s*```$/s,$=X.match(G);$&&$[2]&&(X=$[2].trim()),X=X.replace(/,\s*([}\]])/g,"$1");const ie=JSON.parse(X);if(!ie.description||!ie.choices||ie.choices.length===0)throw new Error("Invalid event structure from AI.");return ie.choices.forEach((se,ne)=>{se.text||(se.text=`La chn ${ne+1}`),se.effects||(se.effects={})}),ie}catch(F){console.error("Failed to parse AI response into JSON or invalid structure:",F);const X=Object.values(Jn).flat(),G=e.talents.reduce(($,ie)=>{const se=X.find(ne=>ne.id===ie);return $+((se==null?void 0:se.effects.cultivationBonus)??0)},0);return{description:"Na nm tri qua trong tnh lng khi bn ang  "+e.currentLocation+". Bn quyt nh tp trung vo vic g?",choices:[{text:"Chuyn tm tu luyn.",effects:{cultivationGained:6+(((N=e.cultivationTechnique)==null?void 0:N.effects.cultivationBonus)??0)/2+G/2}},{text:"Tnh dng, phc hi.",effects:{healthChange:10}}]}}}async getNpcConversation(e,i){const o=`Bn l ngi qun tr (GM) cho mt tr chi m phng 'Tu Tin'. Ngi chi ang ch ng gi "Truyn m Ph" (tin nhn) n mt NPC thn thit. Hy to ra mt cuc hi thoi ngn.

        **Bi cnh:**
        - Ngi gi: ${e.name} (${e.gender}, ${e.realm})
        - Ngi nhn: ${i.name} (${i.gender}, ${i.realm}), m t: "${i.description}"
        - Mi quan h hin ti: ${i.status} (${i.relationshipPoints} im)

        **Yu cu:**
        1.  To mt on m t ngn v vic NPC nhn c tin nhn v phn hi ban u. y l trng "description".
        2.  To 2-3 la chn ("choices") cho ngi chi  p li.
        3.  Mi la chn phi c hiu ng "relationshipChange"  tng mt cht im ho cm (v d: 3-10 im).
        4.  Ch tr li bng mt i tng JSON hp l, khng markdown, theo cu trc bn di.

        **Cu trc JSON:**
        {
          "description": "NPC nhn c tin nhn v ni g ...",
          "choices": [
            {
              "text": "Li p li 1 ca ngi chi (v d: hi thm sc khe)",
              "effects": { "relationshipChange": { "npcId": "${i.id}", "points": 5 } }
            },
            {
              "text": "Li p li 2 ca ngi chi (v d: r i do)",
              "effects": { "relationshipChange": { "npcId": "${i.id}", "points": 8 } }
            }
          ]
        }`,a=`To mt cuc hi thoi cho ${e.name} gi n ${i.name}.`;try{let h=(await this.ai.models.generateContent({model:"gemini-2.5-flash-preview-04-17",contents:`${o}

${a}`,config:{temperature:.9,responseMimeType:"application/json"}})).text.trim();const m=/^```(\w*)?\s*\n?(.*?)\n?\s*```$/s,p=h.match(m);p&&p[2]&&(h=p[2].trim());const g=JSON.parse(h);if(!g.description||!g.choices||g.choices.length===0)throw new Error("Invalid conversation structure from AI.");return g.choices.forEach(v=>{v.effects||(v.effects={})}),g}catch(f){return console.error("Failed to generate conversation:",f),{description:`Truyn m ph ca bn  c gi i, nhng khng c hi m. C l ${i.name} ang bn.`,choices:[{text:"ng",effects:{}}]}}}async generateLocationImage(e,i,o){const a=`Ethereal wuxia digital painting of a vast landscape, anime key visual style. The scene is of "${e}" - ${i}. A lone cultivator, ${o.gender==="Nam"?"a man":"a woman"}, is present, observing the scene. The atmosphere should be mystical and grand. Cinematic lighting, highly detailed, epic scale.`;try{const f=await this.ai.models.generateImages({model:"imagen-3.0-generate-002",prompt:a,config:{numberOfImages:1,outputMimeType:"image/jpeg"}});if(f.generatedImages&&f.generatedImages.length>0)return`data:image/jpeg;base64,${f.generatedImages[0].image.imageBytes}`;throw new Error("No image was generated.")}catch(f){return console.error(`Failed to generate image for ${e}:`,f),""}}}const w_=({eventLog:t})=>{const e=Ee.useRef(null);return Ee.useEffect(()=>{var i;(i=e.current)==null||i.scrollIntoView({behavior:"smooth"})},[t]),T.jsxs("div",{className:"flex-grow min-h-0 overflow-y-auto p-4 space-y-4 custom-scrollbar bg-black/20 rounded-lg border border-gray-700/50",children:[t.map(i=>T.jsxs("div",{className:"animate-slide-up",children:[T.jsxs("p",{className:`text-sm ${i.isMajor?"text-cyan-400 font-semibold":"text-gray-400"}`,children:["Nm ",i.year]}),T.jsx("p",{className:`leading-relaxed ${i.isMajor?"text-lg text-yellow-300":"text-gray-200"}`,dangerouslySetInnerHTML:{__html:i.text.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>")}})]},i.id)).reverse(),T.jsx("div",{ref:e}),T.jsx("style",{children:`
        @keyframes slideUp {
          from { opacity: 0; transform: translateY(10px); }
          to { opacity: 1; transform: translateY(0); }
        }
        .animate-slide-up {
          animation: slideUp 0.5s ease-out forwards;
        }
        .custom-scrollbar::-webkit-scrollbar {
          width: 6px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
          background: transparent;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
          background-color: #4b5563;
          border-radius: 20px;
        }
      `})]})},D_=({onNextYear:t,onTravel:e,onOpenShop:i,isLoading:o,error:a,disabled:f,hasTraveledThisYear:h,player:m,activeSecretRealm:p})=>{let g="Tri qua na nm";if(p)g=`Thm Him (${p.progress+1}/${p.duration} lt)`;else if(m!=null&&m.activeQuest&&m.currentLocation===m.activeQuest.location){const x=m.activeQuest;g=`Lm nhim v (${x.progress+1}/${x.duration} lt)`}const v=(m==null?void 0:m.currentLocation)==="Thnh Trn";return T.jsxs("div",{className:"pt-4 border-t border-gray-700/50",children:[a&&T.jsx("p",{className:"text-red-400 text-sm mb-2 text-center animate-pulse",children:a}),T.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:[T.jsx("button",{onClick:e,disabled:o||f||h||!!p,className:"btn btn-warning w-full sm:w-auto",children:"Di Chuyn"}),v&&T.jsx("button",{onClick:i,disabled:o||f||!!p,className:"btn btn-shop w-full sm:w-auto",children:"Ca Hng"}),T.jsx("button",{onClick:t,disabled:o||f,className:"btn btn-primary w-full sm:w-auto flex-grow max-w-xs text-lg",children:o?T.jsxs("div",{className:"flex items-center justify-center",children:[T.jsxs("svg",{className:"animate-spin h-5 w-5 mr-3",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[T.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),T.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),"Kin to..."]}):g})]})]})},L_=({onClick:t,disabled:e,children:i})=>T.jsx("button",{onClick:t,disabled:e,className:"bg-gradient-to-r from-cyan-500 to-blue-600 text-white font-bold py-3 px-8 rounded-lg text-xl hover:from-cyan-400 hover:to-blue-500 focus:ring-4 focus:ring-cyan-400/50 focus:outline-none transition-all duration-300 transform hover:scale-105 disabled:from-gray-600 disabled:to-gray-700 disabled:cursor-not-allowed flex items-center justify-center min-w-[250px] shadow-lg hover:shadow-cyan-500/30",children:e?T.jsxs("svg",{className:"animate-spin h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[T.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),T.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):i}),U_=({isGameOver:t,isLoading:e,onStart:i})=>{const o=t?"Lun Hi Kt Thc":"Tu tin 1 click",a=t?"Huyn thoi ca bn  kt thc, nhng o l vnh cu. Mt hnh trnh mi c th li bt u.":"Mt th gii ca linh kh, yu th c i v nhng s tht n giu ang ch i. Hy thc hin bc u tin trn con ng tu luyn ca bn.",f=t?"Tu Luyn Ln Na":"Bt u Hnh Trnh";return T.jsxs("div",{className:"flex-grow flex items-center justify-center w-full",children:[T.jsxs("div",{className:"text-center bg-gray-900/60 backdrop-blur-md p-10 rounded-xl shadow-2xl shadow-cyan-500/20 border border-cyan-500/20 max-w-2xl animate-fade-in",children:[T.jsx("h2",{className:"text-5xl font-bold text-cyan-300 mb-4",style:{fontFamily:"'Noto Serif', serif"},children:o}),T.jsx("p",{className:"text-gray-300 text-lg mb-8",children:a}),T.jsx(L_,{onClick:i,disabled:e,children:f})]}),T.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; transform: translateY(20px); }
          to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in {
          animation: fadeIn 1s ease-out forwards;
        }
      `})]})},I_=({item:t,onClose:e,onEquip:i,onUnequip:o,onUse:a,onLearn:f,onDrop:h,isEquipped:m=!1})=>{const p=()=>{const v=[];return t.effects.attack&&v.push(`Cng: +${t.effects.attack}`),t.effects.defense&&v.push(`Th: +${t.effects.defense}`),t.effects.health&&v.push(`Hi phc: +${t.effects.health} HP`),t.effects.cultivation&&v.push(`Tu vi: +${t.effects.cultivation}`),t.technique&&v.push(`Hc c: "${t.technique.name}"`),v.length===0?null:T.jsx("div",{className:"mt-2 text-green-400 text-sm space-y-1",children:v.map((x,S)=>T.jsx("p",{children:x},S))})},g=v=>v.replace(/([A-Z])/g," $1").replace(/^./,x=>x.toUpperCase());return T.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-[60] animate-fade-in-fast",onClick:e,children:T.jsxs("div",{className:"panel-bg p-6 max-w-sm w-full mx-4",onClick:v=>v.stopPropagation(),children:[T.jsx("h3",{className:"text-2xl font-serif text-yellow-300",children:t.name}),T.jsxs("p",{className:"text-sm text-cyan-400 mb-1",children:["[",g(t.type),"]"]}),T.jsxs("p",{className:"text-gray-300 italic mb-4",children:['"',t.description,'"']}),p(),T.jsxs("div",{className:"mt-6 space-y-2",children:[m&&o&&T.jsx("button",{onClick:()=>{o(t),e()},className:"w-full btn btn-warning",children:"G Trang B"}),!m&&i&&(t.type==="weapon"||t.type==="armor"||t.type==="accessory")&&T.jsx("button",{onClick:()=>{i(t),e()},className:"w-full btn btn-primary",children:"Trang B"}),!m&&a&&t.type==="consumable"&&T.jsx("button",{onClick:()=>{a(t),e()},className:"w-full btn btn-secondary",children:"S Dng"}),!m&&f&&t.type==="techniqueScroll"&&T.jsx("button",{onClick:()=>{f(t),e()},className:"w-full btn btn-secondary",children:"Hc"}),!m&&T.jsx("button",{onClick:()=>{h(t),e()},className:"w-full btn btn-dark",children:"Vt B"})]}),T.jsx("button",{onClick:e,className:"mt-4 w-full text-gray-400 hover:text-white transition py-1",children:"ng"})]})})},k_=()=>T.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-900/50 backdrop-blur-sm",children:T.jsxs("svg",{className:"animate-spin h-10 w-10 text-cyan-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[T.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),T.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),Zg=({imageUrl:t,isLoading:e,altText:i})=>{const[o,a]=Ee.useState(!1);Ee.useEffect(()=>{a(!1)},[t]);const f=(h="")=>{if(!h)return"?";const m=h.trim().split(" ");return m.length>1?(m[0].charAt(0)+m[m.length-1].charAt(0)).toUpperCase():h.charAt(0).toUpperCase()};return T.jsxs("div",{className:"relative w-full h-full bg-black rounded-full shadow-2xl overflow-hidden border-4 border-cyan-500/50 transition-all duration-500 flex items-center justify-center text-center",children:[t&&!o?T.jsx("img",{src:t,alt:i||"Chn dung nhn vt",className:"w-full h-full object-cover animate-fade-in",onError:()=>a(!0)},t):T.jsx("span",{className:"font-serif text-3xl text-cyan-300 select-none",children:f(i)}),e&&T.jsx(k_,{}),T.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent rounded-full pointer-events-none"}),T.jsx("style",{children:`
        @keyframes fadeIn {
          0% { opacity: 0; transform: scale(0.95); }
          100% { opacity: 1; transform: scale(1); }
        }
        .animate-fade-in {
          animation: fadeIn 1s ease-in-out;
        }
      `})]})},B_=({imageUrl:t,isLoading:e})=>T.jsxs("div",{className:"absolute inset-0 w-full h-full overflow-hidden -z-10",children:[T.jsx("style",{children:`
        @keyframes kenburns-top {
          0% { transform: scale(1) translateY(0); transform-origin: 50% 16%; }
          100% { transform: scale(1.1) translateY(-10px); transform-origin: top; }
        }
        .animate-kenburns {
          animation: kenburns-top 40s ease-out both infinite alternate;
        }
        .image-overlay {
          background: linear-gradient(to bottom, rgba(6, 9, 19, 0.8) 0%, rgba(6, 9, 19, 0.4) 50%, rgba(6, 9, 19, 0.9) 100%), radial-gradient(ellipse at 50% 50%, rgba(20, 30, 60, 0) 0%, #060913 100%);
        }
      `}),e&&T.jsxs("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-900/50 z-20 animate-fade-in-fast",children:[T.jsxs("svg",{className:"animate-spin h-10 w-10 text-cyan-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[T.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),T.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),T.jsx("p",{className:"ml-4 text-cyan-200",children:"V ln khung cnh..."})]}),t&&T.jsx("img",{src:t,alt:"Bi cnh",className:"absolute inset-0 w-full h-full object-cover animate-fade-in-fast animate-kenburns"},t),T.jsx("div",{className:"absolute inset-0 image-overlay"})]}),ko=({title:t,children:e,onClose:i,className:o=""})=>T.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 animate-fade-in-fast",onClick:i,children:T.jsxs("div",{className:`panel-bg p-4 sm:p-6 w-full mx-2 sm:mx-4 ${o}`,onClick:a=>a.stopPropagation(),children:[T.jsx("h2",{className:"text-2xl sm:text-3xl font-serif text-cyan-300 text-center mb-4 sm:mb-6",children:t}),T.jsx("div",{className:"text-gray-300 space-y-4 max-h-[75vh] overflow-y-auto custom-scrollbar pr-2 sm:pr-3",children:e}),T.jsx("button",{onClick:i,className:"mt-4 sm:mt-6 w-full bg-gray-700/80 text-white py-2 rounded-md hover:bg-gray-600/80 transition-colors",children:"ng"})]})}),P_=({onStart:t,onContinue:e,onImport:i,onShowInstructions:o,onShowUpdateLog:a,onShowApiKeySetup:f,hasLocalSave:h,apiKeySet:m})=>T.jsx("div",{className:"flex-grow flex items-center justify-center w-full",children:T.jsxs("div",{className:"text-center bg-gray-900/60 backdrop-blur-md p-6 sm:p-10 rounded-xl shadow-2xl shadow-cyan-500/20 border border-cyan-500/20 w-full max-w-md animate-fade-in",children:[T.jsx("h1",{className:"text-4xl sm:text-6xl font-bold text-cyan-300 mb-2 font-serif",children:"Tu tin 1 click"}),T.jsx("p",{className:"text-gray-400 text-base sm:text-lg mb-8",children:"Rn luyn con ng n s bt t"}),T.jsxs("div",{className:"space-y-3 flex flex-col items-center",children:[T.jsx("button",{onClick:t,disabled:!m,className:"btn btn-primary w-full max-w-xs",children:"Bt u tr chi"}),T.jsx("button",{onClick:e,disabled:!h||!m,className:"btn btn-secondary w-full max-w-xs",children:"Chi tip"}),T.jsx("button",{onClick:i,disabled:!m,className:"btn btn-secondary w-full max-w-xs",children:"Nhp file"}),T.jsxs("div",{className:"pt-4 w-full",children:[T.jsx("button",{onClick:o,className:"btn btn-dark w-full max-w-xs",children:"Hng dn"}),T.jsx("button",{onClick:a,className:"btn btn-dark w-full max-w-xs mt-2",children:"Cp nht"}),T.jsx("button",{onClick:f,className:"btn btn-warning w-full max-w-xs mt-2",children:"Thit lp API Key"})]}),!m&&T.jsx("p",{className:"text-yellow-400 text-xs pt-2",children:"Vui lng thit lp API Key  bt u!"}),T.jsx("p",{className:"text-gray-500 text-xs pt-4",children:"game c lm ra bi Tiu Sch, chi free thoi mi, c donate th mnh cm n"})]})]})}),V_=({onStartGame:t,onBack:e})=>{const[i,o]=Ee.useState(""),[a,f]=Ee.useState("Nam"),[h,m]=Ee.useState("trung bnh"),[p,g]=Ee.useState({[Object.keys(Jn)[0]]:"tam"}),[v,x]=Ee.useState("thng nhn"),[S,M]=Ee.useState(""),[w,D]=Ee.useState("thin kim"),[k,q]=Ee.useState(!1),N=($,ie)=>{g(se=>{const ne=$.includes("(Bt buc)"),he=se[$];let me=ne?ie:he===ie?null:ie;return{...se,[$]:me}})},F=()=>{const $=["n gin","trung bnh","kh","c mng"],ie=["thng nhn","v gia","suy tn"],se=["thin kim","vn dc","huyn ph"];m($[Math.floor(Math.random()*$.length)]),x(ie[Math.floor(Math.random()*ie.length)]),D(se[Math.floor(Math.random()*se.length)]);const ne={};Object.entries(Jn).forEach(([he,me])=>{const pe=he.includes("(Bt buc)");ne[he]=pe||Math.random()>.5?me[Math.floor(Math.random()*me.length)].id:null}),g(ne)},X=({title:$,description:ie,isSelected:se,onClick:ne,className:he=""})=>T.jsxs("button",{onClick:ne,className:`p-3 text-left rounded-lg border-2 w-full transition-all duration-200 h-full ${se?"bg-cyan-900/70 border-cyan-400 shadow-cyan-500/20 shadow-md":"bg-gray-800/60 border-gray-600 hover:bg-gray-700/70"} ${he}`,children:[T.jsx("h4",{className:`font-bold ${se?"text-cyan-300":"text-white"}`,children:$}),T.jsx("p",{className:"text-xs text-gray-400",children:ie})]}),G=()=>{const $=Object.values(p).filter(Boolean);t({name:i||"V Danh",gender:a,difficulty:h,talents:$,family:v,avatarUrl:S,sect:w,nsfwAllowed:k})};return T.jsxs("div",{className:"w-full max-w-7xl mx-auto panel-bg p-4 sm:p-8 animate-fade-in",children:[T.jsxs("div",{className:"flex flex-col sm:flex-row justify-center items-center mb-6 gap-4",children:[T.jsx("h2",{className:"text-3xl sm:text-4xl font-serif text-cyan-300 text-center",children:"To Ha Chi L"}),T.jsx("button",{onClick:F,className:"btn btn-warning py-1 px-3 text-sm",title:"Ngu nhin ha cc la chn li chi",children:"Thin Mnh An Bi"})]}),T.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[T.jsxs("div",{className:"space-y-6",children:[T.jsxs("fieldset",{className:"p-4",children:[T.jsx("legend",{children:"Thn Phn"}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-lg font-semibold text-yellow-300 mb-2",children:"Tn"}),T.jsx("input",{type:"text",value:i,onChange:$=>o($.target.value),placeholder:"Nhp tn ca bn",className:"w-full input-base"})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-lg font-semibold text-yellow-300 mb-2 mt-4",children:"nh i Din"}),T.jsx("input",{type:"text",value:S,onChange:$=>M($.target.value),placeholder:"Dn URL hnh nh (ty chn)",className:"w-full input-base"})]}),T.jsxs("div",{children:[T.jsx("h3",{className:"text-lg font-semibold text-yellow-300 mb-2 mt-4",children:"Gii Tnh"}),T.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[T.jsx(X,{title:"Nam",description:"Nhn vt nam",isSelected:a==="Nam",onClick:()=>f("Nam")}),T.jsx(X,{title:"N",description:"Nhn vt n",isSelected:a==="N",onClick:()=>f("N")})]})]})]}),T.jsxs("fieldset",{className:"p-4",children:[T.jsx("legend",{children:"Tng Mn"}),T.jsx("div",{className:"grid grid-cols-1 gap-3",children:Object.keys(Yn).map($=>T.jsx(X,{title:Yn[$].name,description:Yn[$].description,isSelected:w===$,onClick:()=>D($)},$))})]})]}),T.jsx("div",{className:"space-y-6",children:T.jsxs("fieldset",{className:"p-4",children:[T.jsx("legend",{children:"Li Chi"}),T.jsxs("div",{children:[T.jsx("h3",{className:"font-semibold text-gray-300 mb-2",children:" Kh"}),T.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[T.jsx(X,{title:"n gin",description:"Ti nguyn x1.2",isSelected:h==="n gin",onClick:()=>m("n gin")}),T.jsx(X,{title:"Trung bnh",description:"Tri nghim gc",isSelected:h==="trung bnh",onClick:()=>m("trung bnh")}),T.jsx(X,{title:"Kh",description:"Ti nguyn x0.8",isSelected:h==="kh",onClick:()=>m("kh")}),T.jsx(X,{title:"c mng",description:"Ti nguyn x0.6",isSelected:h==="c mng",onClick:()=>m("c mng")})]})]}),T.jsxs("div",{className:"mt-4",children:[T.jsx("h3",{className:"font-semibold text-gray-300 mb-2",children:"Gia Tc"}),T.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[T.jsx(X,{title:"Thng Nhn",description:"+500 Linh thch",isSelected:v==="thng nhn",onClick:()=>x("thng nhn")}),T.jsx(X,{title:"V Gia",description:"+10% HP ti a",isSelected:v==="v gia",onClick:()=>x("v gia")}),T.jsx(X,{title:"Suy Tn",description:"Cng php mnh hn",isSelected:v==="suy tn",onClick:()=>x("suy tn")})]})]}),T.jsx("div",{className:"pt-4",children:T.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer p-2 bg-gray-800/60 rounded-lg hover:bg-gray-700/70",children:[T.jsx("input",{type:"checkbox",checked:k,onChange:$=>q($.target.checked),className:"h-5 w-5 bg-gray-700 border-gray-600 rounded text-cyan-500 focus:ring-cyan-500"}),T.jsx("span",{className:"text-gray-300",children:"Bt ni dung 18+"})]})})]})}),T.jsx("div",{className:"space-y-4",children:T.jsxs("fieldset",{className:"p-4 h-full",children:[T.jsx("legend",{children:"Thin Ph"}),Object.entries(Jn).map(([$,ie])=>T.jsxs("div",{className:"mb-4",children:[T.jsx("h3",{className:"font-semibold text-gray-300 mb-2",children:$}),T.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:ie.map(se=>T.jsx(X,{title:se.name,description:se.description,isSelected:p[$]===se.id,onClick:()=>N($,se.id)},se.id))})]},$))]})})]}),T.jsxs("div",{className:"mt-8 flex flex-col sm:flex-row justify-between items-center gap-4",children:[T.jsx("button",{onClick:e,className:"btn btn-dark py-3 px-6 w-full sm:w-auto",children:"Quay li"}),T.jsx("button",{onClick:G,className:"btn btn-primary py-3 px-8 text-lg w-full sm:w-auto",children:"Bt u Tu Luyn"})]})]})},q_=({onSave:t,onClose:e})=>{const[i,o]=Ee.useState("");return T.jsxs(ko,{title:"Thit lp API Key",onClose:e,className:"max-w-lg",children:[T.jsx("p",{children:" chi, bn cn cung cp Google AI API Key. Key ca bn s c lu tr an ton trn trnh duyt ny v khng c gi i bt c u ngoi Google."}),T.jsxs("p",{children:["Bn c th nhn key min ph ti: ",T.jsx("a",{href:"https://aistudio.google.com/app/apikey",target:"_blank",rel:"noopener noreferrer",className:"text-cyan-400 underline hover:text-cyan-300",children:"Google AI Studio"})]}),T.jsx("input",{type:"password",value:i,onChange:a=>o(a.target.value),placeholder:"Dn API Key ca bn vo y",className:"w-full input-base mt-4"}),T.jsx("button",{onClick:()=>t(i),className:"mt-4 w-full btn btn-secondary",children:"Lu v ng"})]})},G_=({onClose:t})=>T.jsxs(ko,{title:"Hng dn",onClose:t,className:"max-w-2xl",children:[T.jsx("h3",{className:"text-xl font-semibold text-yellow-300",children:"Mc Tiu"}),T.jsx("p",{children:"Bt u t mt tu s Luyn Kh, mc tiu ca bn l tu luyn  t ph qua cc cnh gii cao hn, tr thnh mt tn ti bt t."}),T.jsx("h3",{className:"text-xl font-semibold text-yellow-300 mt-4",children:"t Ph Cnh Gii"}),T.jsx("p",{children:"Khi tu vi ca bn t n gii hn, bn s c c hi i mt vi Li Kip  t ph. y l mt qu trnh y ri ro vi t l thnh cng nht nh. Thnh cng s a bn ln mt tm cao mi, nhng tht bi s khin tu vi ca bn b tht li v bn thn b trng thng. Hy chun b k lng!"}),T.jsx("h3",{className:"text-xl font-semibold text-yellow-300 mt-4",children:"u Gi Hi"}),T.jsx("p",{children:"C 20 nm mt ln, u Gi Hi s c t chc ti Giao Lu Phng. y l ni bn c th tm thy nhng vt phm cc k qu him khng c  ca hng thng thng. Hy chun b linh thch v cnh tranh vi cc tu s khc  s hu chng."}),T.jsx("h3",{className:"text-xl font-semibold text-yellow-300 mt-4",children:"Th Nguyn & i Hi"}),T.jsx("p",{children:"Mi cnh gii c mt gii hn tui th (th nguyn). Hy ch  t ph trc khi th nguyn cn kit! Ngoi ra, i Hi Thin Kiu din ra mi 50 nm l c hi  bn khng nh tn tui v ginh phn thng ln."})]}),H_=({onClose:t})=>T.jsxs(ko,{title:"Nht K Cp Nht",onClose:t,className:"max-w-2xl",children:[T.jsx("h3",{className:"text-xl font-semibold text-yellow-300",children:'Phin bn 16.0.0 - "Ti u & Sa Li"'}),T.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[T.jsxs("li",{children:[T.jsx("strong",{children:"Sa li quan trng:"})," Khc phc li khin b m thi gian lm mi ca hng v cc s kin khc c th hin th s m."]}),T.jsxs("li",{children:[T.jsx("strong",{children:"Ti u Ha Giao Din Di ng:"}),T.jsxs("ul",{className:"list-disc pl-5",children:[T.jsx("li",{children:"- Giao din ngi dng  c ti u ha ton din  m bo tri nghim mt m v trc quan trn cc thit b di ng."}),T.jsx("li",{children:"- Cc mn hnh chnh, to nhn vt, bn , ca hng v cc bng thng tin khc  c iu chnh  hin th tt trn mn hnh nh."}),T.jsx("li",{children:"- Ci thin b cc v kh nng tng tc trn cc thit b cm ng."})]})]})]}),T.jsx("h3",{className:"text-xl font-semibold text-yellow-300 mt-4",children:'Phin bn 15.0.0 - "Truyn m Ph"'}),T.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[T.jsxs("li",{children:[T.jsx("strong",{children:"H thng Truyn m Ph:"})," Thm tnh nng cho php ngi chi v cc NPC thn thit (",">","100 ho cm) ch ng lin lc vi nhau qua tin nhn."]}),T.jsxs("li",{children:[T.jsx("strong",{children:"Tng tc mi:"}),' Trong bng "Nhn Mch", bn c th ch ng "Gi Truyn m"  bt u hi thoi, tng cng mi quan h.']}),T.jsxs("li",{children:[T.jsx("strong",{children:"S kin ngu nhin mi:"})," Cc NPC thn thit gi y c th ngu nhin gi tin nhn cho bn, to ra cc s kin i thng v c hi pht trin tnh cm."]})]}),T.jsx("h3",{className:"text-xl font-semibold text-yellow-300 mt-4",children:'Phin bn 14.0.0 - "Nhn Duyn & Giao Din"'}),T.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[T.jsxs("li",{children:[T.jsx("strong",{children:"NPC Chi Tit Hn:"})," 4 NPC ban u  c vit li vi ct truyn v tnh cch su sc hn."]}),T.jsxs("li",{children:[T.jsx("strong",{children:"Thm 4 NPC Mi:"})," Th gii tu tin cho n 4 thin kiu mi (3 n, 1 nam), mi ngi mt v, mang n nhng mi quan h v c duyn mi."]}),T.jsxs("li",{children:[T.jsx("strong",{children:"Ti u Giao Din:"}),T.jsxs("ul",{className:"list-disc pl-5",children:[T.jsxs("li",{children:["- ",T.jsx("strong",{children:"To Nhn Vt:"})," Mn hnh to nhn vt c thit k li hon ton, khoa hc v p mt hn."]}),T.jsxs("li",{children:["- ",T.jsx("strong",{children:"Nhn Mch:"})," Giao din qun l mi quan h c nng cp thnh dng th bi hin i, c nh i din v thanh trng thi, gip theo di trc quan hn."]}),T.jsxs("li",{children:["- ",T.jsx("strong",{children:"Bng Thng Tin:"})," Ti u ha bng thng tin nhn vt trong game, gip d c v theo di cc ch s hn."]})]})]})]})]}),z_=({ranking:t,onClose:e})=>T.jsx(ko,{title:"Bng Xp Hng Thin Kiu",onClose:e,className:"max-w-2xl",children:t.length===0?T.jsx("p",{children:"Cha c ai c ghi danh trn Bng Xp Hng Thin Kiu. Hy tr thnh nh v ch u tin!"}):T.jsx("div",{className:"overflow-x-auto",children:T.jsxs("table",{className:"w-full text-left border-collapse min-w-[400px]",children:[T.jsx("thead",{children:T.jsxs("tr",{className:"border-b border-yellow-400/30",children:[T.jsx("th",{className:"p-2 text-yellow-300",children:"Hng"}),T.jsx("th",{className:"p-2 text-yellow-300",children:"Tn"}),T.jsx("th",{className:"p-2 text-yellow-300",children:"Thnh Tu"})]})}),T.jsx("tbody",{children:t.map(i=>T.jsxs("tr",{className:"border-b border-gray-700",children:[T.jsx("td",{className:"p-2 font-bold",children:i.rank}),T.jsx("td",{className:"p-2",children:i.name}),T.jsxs("td",{className:"p-2 text-sm",children:[i.achievement," (Nm ",Math.floor(i.year-15),")"]})]},i.rank))})]})})}),F_=({points:t})=>{const a=(Math.max(-100,Math.min(t,250))- -100)/350*100;let f="bg-gray-400";return t>=200?f="bg-rose-500":t>=100?f="bg-sky-400":t>=75?f="bg-green-500":t>=25?f="bg-teal-400":t<=-75?f="bg-purple-600":t<=-25&&(f="bg-red-500"),T.jsx("div",{className:"w-full bg-slate-700 rounded-full h-2",children:T.jsx("div",{className:`${f} h-2 rounded-full`,style:{width:`${a}%`}})})},O_=({npcs:t,player:e,onClose:i,onUpdateAvatar:o,onStartConversation:a})=>{const[f,h]=Ee.useState(null),[m,p]=Ee.useState(""),g=M=>{h(M.id),p(M.avatarUrl||"")},v=()=>{f&&(o(f,m),h(null))},x=()=>{h(null)},S=(M,w)=>{if(w)return"text-rose-400";switch(M){case"T ch":return"text-purple-400";case"K th":return"text-red-400";case"Bn b":return"text-teal-400";case"Thn thit":return"text-green-400";case"Tri k":case"Bn i":return"text-sky-400";default:return"text-gray-400"}};return T.jsx(ko,{title:"Nhn Mch",onClose:i,className:"max-w-4xl",children:t.length===0&&e.pets.length===0?T.jsx("p",{children:"Bn cha c mi quan h hay ng hnh no ng ch ."}):T.jsxs(T.Fragment,{children:[t.length>0&&T.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:t.map(M=>T.jsxs("div",{className:"flex items-start gap-4 p-4 bg-slate-800/60 rounded-lg border border-cyan-400/20",children:[T.jsx("div",{className:"w-20 h-20 shrink-0",children:f===M.id?T.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center bg-slate-900 rounded-lg p-1 gap-1",children:[T.jsx("input",{type:"text",value:m,onChange:w=>p(w.target.value),className:"w-full text-xs p-1 rounded bg-gray-700 border border-gray-500 text-white",placeholder:"URL nh",autoFocus:!0,onKeyDown:w=>w.key==="Enter"&&v()}),T.jsxs("div",{className:"flex gap-1",children:[T.jsx("button",{onClick:v,className:"text-xs px-2 py-0.5 bg-green-600 hover:bg-green-500 rounded text-white",children:"Lu"}),T.jsx("button",{onClick:x,className:"text-xs px-2 py-0.5 bg-red-600 hover:bg-red-500 rounded text-white",children:"Hy"})]})]}):T.jsxs("div",{className:"relative group w-full h-full",children:[T.jsx(Zg,{imageUrl:M.avatarUrl||"",isLoading:!1,altText:M.name}),T.jsx("button",{onClick:()=>g(M),className:"absolute inset-0 bg-black/60 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity","aria-label":`Chnh sa nh ca ${M.name}`,children:T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.5L14.732 3.732z"})})})]})}),T.jsxs("div",{className:"flex-grow min-w-0",children:[T.jsxs("div",{className:"flex justify-between items-start",children:[T.jsxs("div",{children:[T.jsx("h4",{className:"text-xl font-semibold text-yellow-300",children:M.name}),T.jsxs("p",{className:"text-sm text-cyan-400 mb-1",children:[M.realm," (",M.gender,")"]})]}),T.jsx("span",{className:`font-bold ${S(M.status,M.isLover)}`,children:e.spouseId===M.id?"Bn i":M.status})]}),T.jsx(F_,{points:M.relationshipPoints}),T.jsxs("p",{className:"text-xs italic text-gray-500 mt-2 h-16 overflow-y-auto custom-scrollbar pr-2",children:['"',M.description,'"']}),M.relationshipPoints>=100&&T.jsx("button",{onClick:()=>a(M.id),className:"mt-2 text-xs py-1 px-3 bg-cyan-600/50 hover:bg-cyan-500/60 border border-cyan-400/30 rounded-full text-cyan-200 transition-colors",children:"Gi Truyn m"})]})]},M.id))}),e.pets.length>0&&T.jsxs(T.Fragment,{children:[T.jsx("h3",{className:"text-2xl font-serif text-cyan-300 mt-6 border-t border-cyan-400/20 pt-4",children:"Sng Vt"}),T.jsx("div",{className:"space-y-4",children:e.pets.map(M=>T.jsxs("div",{className:"p-3 bg-gray-800/60 rounded-lg border border-cyan-400/20",children:[T.jsxs("h4",{className:"text-xl font-semibold text-yellow-300",children:[M.name," ",T.jsxs("span",{className:"text-base font-normal text-gray-400",children:["(",M.species,")"]})]}),T.jsxs("p",{className:"text-sm italic text-gray-400 mb-2",children:['"',M.description,'"']}),M.effects.cultivationBonusPerYear&&T.jsxs("p",{className:"text-sm text-green-400",children:["+ ",M.effects.cultivationBonusPerYear*2," Tu vi mi nm"]})]},M.id))})]})]})})},Y_=()=>T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:T.jsx("path",{fillRule:"evenodd",d:"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z",clipRule:"evenodd"})}),J_=()=>T.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[T.jsx("path",{d:"M8.433 7.418c.158-.103.346-.196.567-.267v1.698a2.5 2.5 0 00-.567-.267z"}),T.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a1 1 0 10-2 0v.092a4.535 4.535 0 00-1.676.662C6.602 6.234 6 7.009 6 8c0 .99.602 1.766 1.324 2.242.28.182.566.324.876.434v1.698a2.5 2.5 0 001.676-.662C11.398 11.766 12 11.009 12 10c0-.99-.602-1.766-1.324-2.242A4.535 4.535 0 0010 7.092V5z",clipRule:"evenodd"})]}),$_=()=>T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v1m6 11h2m-6.598 4.002l-1.03-4.002m-1.03 4.002l1.03-4.002m1.164 2.002H9.25M15 21h-3.25m-.836-5.002l-3.21-3.21m3.21 3.21l3.21-3.21m0 0l-3.21-3.21m3.21 3.21L21 12.75M4 11.25l1.03 4.002m1.03-4.002L4 11.25m0 0l-1.03-4.002M4 11.25h2.5m-2.5 0l-1.03-4.002m9.402-1.164A2.5 2.5 0 0013 5.5a2.5 2.5 0 00-2.5 2.5 2.5 2.5 0 002.5 2.5 2.5 2.5 0 002.5-2.5c0-.17-.017-.336-.05-.495l1.101 1.101m-1.101-1.101L13 8m2.5-2.5l-1.101 1.101"})}),X_=()=>T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75l3 3m0 0l3-3m-3 3v-7.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),K_=()=>T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),Q_=()=>T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),Z_=({nextTournamentIn:t,nextAuctionIn:e,nextShopRefreshIn:i})=>{const[o,a]=Ee.useState(!1);return T.jsxs("div",{className:"panel-bg p-3 mt-4 text-sm shrink-0",children:[T.jsxs("button",{onClick:()=>a(!o),className:"w-full flex justify-between items-center text-left font-serif text-cyan-300","aria-expanded":o,children:[T.jsx("h4",{className:"text-lg",children:"S Kin Sp Ti"}),T.jsx("svg",{className:`w-5 h-5 transform transition-transform ${o?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),o&&T.jsxs("div",{className:"space-y-1 text-gray-300 animate-fade-in-fast mt-2",children:[T.jsxs("div",{className:"flex justify-between",children:[T.jsx("span",{children:"i Hi Thin Kiu:"}),T.jsxs("span",{className:"font-bold text-amber-300",children:[Math.ceil(t)," nm"]})]}),T.jsxs("div",{className:"flex justify-between",children:[T.jsx("span",{children:"u Gi Hi:"}),T.jsxs("span",{className:"font-bold text-yellow-300",children:[Math.ceil(e)," nm"]})]}),T.jsxs("div",{className:"flex justify-between",children:[T.jsx("span",{children:"Lm mi Ca Hng:"}),T.jsxs("span",{className:"font-bold text-purple-300",children:[Math.ceil(i)," nm"]})]})]})]})},W_=({quest:t})=>{const e=t.duration>0?t.progress/t.duration*100:0;return T.jsxs("div",{className:"p-3 bg-gray-900/60 rounded-lg border border-yellow-500/30",children:[T.jsx("h4",{className:"text-yellow-300 font-semibold text-center font-serif",children:"Nhim V"}),T.jsx("p",{className:"text-lg text-white font-bold text-center",children:t.title}),T.jsxs("p",{className:"text-sm text-gray-400 italic text-center mb-2",children:['"',t.description,'"']}),T.jsxs("div",{className:"text-sm",children:[T.jsxs("p",{children:[T.jsx("strong",{children:"Tin :"})," ",t.progress," / ",t.duration," lt"]}),T.jsx("div",{className:"w-full bg-gray-700/80 rounded-full h-3 my-1 border border-yellow-500/30 overflow-hidden",children:T.jsx("div",{className:"bg-yellow-500 h-full rounded-full",style:{width:`${e}%`}})}),T.jsxs("p",{children:[T.jsx("strong",{children:"Phn thng:"})," ",t.reward.linhThach??0," Linh Thch"]})]})]})},j_=({realm:t})=>{const e=t.duration>0?t.progress/t.duration*100:0;return T.jsxs("div",{className:"p-3 bg-gray-900/60 rounded-lg border border-purple-500/30",children:[T.jsx("h4",{className:"text-purple-300 font-semibold text-center font-serif",children:"B Cnh"}),T.jsx("p",{className:"text-lg text-white font-bold text-center",children:t.name}),T.jsxs("p",{className:"text-sm text-gray-400 italic text-center mb-2",children:['"',t.description,'"']}),T.jsxs("div",{className:"text-sm",children:[T.jsxs("p",{children:[T.jsx("strong",{children:"Tin :"})," ",t.progress," / ",t.duration," lt"]}),T.jsx("div",{className:"w-full bg-gray-700/80 rounded-full h-3 my-1 border border-purple-500/30 overflow-hidden",children:T.jsx("div",{className:"bg-purple-500 h-full rounded-full",style:{width:`${e}%`}})}),T.jsxs("p",{children:[T.jsx("strong",{children:"Phn thng khi hon thnh:"})," ",t.reward.cultivation??0," Tu vi, ",t.reward.linhThach??0," Linh Thch"]})]})]})},eA=({currentLocation:t,onTravel:e,onClose:i})=>T.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 animate-fade-in-fast",onClick:i,children:T.jsxs("div",{className:"panel-bg p-4 sm:p-6 max-w-lg w-full mx-4 flex flex-col max-h-[90vh]",onClick:o=>o.stopPropagation(),children:[T.jsx("h2",{className:"text-3xl font-serif text-cyan-300 text-center mb-4 shrink-0",children:"Bn "}),T.jsx("div",{className:"flex-grow overflow-y-auto custom-scrollbar -mr-2 pr-2",children:T.jsx("div",{className:"space-y-3",children:na.map(o=>{const a=t===o.name;return T.jsxs("button",{onClick:()=>e(o.name),disabled:a,className:`p-4 w-full bg-gray-800/60 rounded-lg border-2 text-left transition-all duration-200
                                    ${a?"border-cyan-400 bg-cyan-900/50 cursor-default":"border-gray-700 hover:border-cyan-500 hover:bg-gray-700/80"}
                                `,children:[T.jsxs("div",{className:"flex justify-between items-center",children:[T.jsx("h3",{className:`text-xl font-semibold ${a?"text-cyan-300":"text-yellow-300"}`,children:o.name}),a&&T.jsx("span",{className:"text-xs font-bold bg-cyan-500 text-black px-2 py-1 rounded-full",children:"Hin ti"})]}),T.jsx("p",{className:"text-gray-400 text-sm mt-1",children:o.description})]},o.id)})})}),T.jsx("button",{onClick:i,className:"mt-4 w-full btn btn-dark shrink-0",children:"ng"})]})}),xu=({icon:t,label:e,value:i,className:o=""})=>T.jsxs("div",{className:`flex items-center space-x-2 bg-slate-800/50 p-2 rounded-lg flex-grow ${o}`,children:[T.jsx("div",{className:"text-cyan-300",children:t}),T.jsxs("div",{children:[T.jsx("div",{className:"text-xs text-gray-400",children:e}),T.jsx("div",{className:"text-md font-bold text-white",children:i})]})]}),tA=({player:t})=>{const e=t.maxHealth>0?t.health/t.maxHealth*100:100,i=t.cultivationForNextRealm>0?t.cultivation/t.cultivationForNextRealm*100:100;return T.jsxs("div",{className:"space-y-2",children:[T.jsxs("div",{title:"Sinh mnh",children:[T.jsx("div",{className:"w-full bg-slate-900 rounded-full h-5 border border-red-500/30 overflow-hidden flex items-center",children:T.jsx("div",{className:"bg-red-500 h-full",style:{width:`${e}%`},children:T.jsx("div",{className:"h-full flex items-center justify-end px-2",children:T.jsx(Y_,{})})})}),T.jsxs("p",{className:"text-xs text-center text-red-200 mt-1",children:[t.health," / ",t.maxHealth]})]}),T.jsxs("div",{title:"Tu vi",children:[T.jsx("div",{className:"w-full bg-slate-900 rounded-full h-2.5 border border-cyan-500/30 overflow-hidden",children:T.jsx("div",{className:"bg-cyan-500 h-full",style:{width:`${i}%`}})}),T.jsxs("p",{className:"text-xs text-center text-cyan-200 mt-1",children:[Math.floor(t.cultivation)," / ",t.cultivationForNextRealm," (cnh gii k)"]})]})]})},nA=({player:t,npcs:e,activeSecretRealm:i})=>{const o=xt.find(g=>g.name===t.realm),a=o?o.maxAge-t.age:1/0,f=t.spouseId?e.find(g=>g.id===t.spouseId):null,h=a<10?"text-red-400 animate-pulse":a<50?"text-yellow-400":"text-gray-400",m=Object.values(Jn).flat(),p=t.talents.map(g=>{var v;return(v=m.find(x=>x.id===g))==null?void 0:v.name}).filter(Boolean);return T.jsxs("div",{className:"space-y-4 text-sm",children:[T.jsxs("div",{className:"flex flex-wrap gap-2",children:[T.jsx(xu,{icon:T.jsx($_,{}),label:"Cng",value:t.stats.attack}),T.jsx(xu,{icon:T.jsx(X_,{}),label:"Th",value:t.stats.defense}),T.jsx(xu,{icon:T.jsx(J_,{}),label:"Linh Thch",value:t.linhThach})]}),T.jsxs("div",{className:"space-y-2 text-base",children:[T.jsxs("p",{children:[T.jsx("span",{className:"font-semibold text-gray-400",children:"Tng Mn:"})," ",t.sect," - ",T.jsx("span",{className:"text-amber-300",children:t.sectRank})]}),T.jsxs("p",{children:[T.jsx("span",{className:"font-semibold text-gray-400",children:"V tr:"})," ",t.currentLocation]}),T.jsxs("p",{children:[T.jsx("span",{className:"font-semibold text-gray-400",children:"Tui:"})," ",t.age," ",T.jsxs("span",{className:`text-xs ${h}`,children:["(",a<1/0?`cn ${Math.ceil(a)} nm`:"v hn",")"]})]}),f&&T.jsxs("p",{children:[T.jsx("span",{className:"font-semibold text-gray-400",children:"o L:"})," ",T.jsx("span",{className:"text-pink-400",children:f.name})]}),T.jsxs("div",{className:"pt-2",children:[T.jsx("p",{className:"font-semibold text-gray-400",children:"Thin ph:"}),T.jsx("p",{className:"text-xs text-purple-300",children:p.join(" | ")})]}),t.cultivationTechnique&&T.jsxs("div",{children:[T.jsx("p",{className:"font-semibold text-gray-400",children:"Cng Php:"}),T.jsxs("p",{className:"text-xs text-green-300",title:t.cultivationTechnique.description,children:[t.cultivationTechnique.name," (",t.cultivationTechnique.rank,")"]})]})]}),T.jsx("div",{className:"min-h-[124px] pt-2",children:i?T.jsx(j_,{realm:i}):t.activeQuest&&T.jsx(W_,{quest:t.activeQuest})})]})},Cu=({item:t,label:e,onClick:i})=>T.jsxs("div",{className:"flex items-center justify-between p-2 bg-slate-800/50 rounded-md",children:[T.jsxs("span",{className:"text-gray-400 font-semibold",children:[e,":"]}),t?T.jsx("button",{onClick:()=>i(t),className:"text-left text-green-300 hover:text-green-200 hover:underline truncate ml-2 flex-1",children:t.name}):T.jsx("span",{className:"text-gray-500 italic ml-2",children:"Khng c"})]}),iA=({player:t,onItemClick:e})=>T.jsx("div",{className:"space-y-3",children:T.jsxs("div",{children:[T.jsxs("h4",{className:"text-gray-400 font-semibold pt-2",children:["Ti  (",t.inventory.length,")"]}),T.jsx("div",{className:"space-y-1 text-sm mt-2 pr-1",children:t.inventory.length>0?t.inventory.map(i=>T.jsxs("button",{onClick:()=>e(i),className:"w-full text-left p-2 rounded-md bg-slate-800/50 hover:bg-slate-700 transition-colors block",children:[T.jsx("p",{className:"text-gray-300 font-medium",children:i.name}),T.jsx("p",{className:"text-xs text-gray-500 capitalize",children:i.type.replace(/([A-Z])/g," $1")})]},i.id)):T.jsx("p",{className:"text-gray-500 italic mt-2",children:"Trng"})})]})}),lA=({player:t,npcs:e,onItemClick:i,activeSecretRealm:o})=>{const[a,f]=Ee.useState("info"),h=({label:m,name:p,icon:g})=>T.jsxs("button",{onClick:()=>f(p),className:`flex-1 flex items-center justify-center gap-2 py-2 font-semibold transition-all duration-300 border-b-4 ${a===p?"text-cyan-300 border-cyan-400":"text-gray-500 border-transparent hover:text-cyan-400 hover:border-cyan-400/50"}`,children:[g,T.jsx("span",{children:m})]});return T.jsxs("div",{className:"panel-bg flex flex-col flex-grow min-h-0",children:[T.jsxs("div",{className:"p-4 space-y-3",children:[T.jsxs("div",{className:"flex flex-row gap-4 items-center",children:[T.jsx("div",{className:"relative w-20 h-20 shrink-0",children:T.jsx(Zg,{imageUrl:t.avatarUrl,isLoading:!1,altText:t.name})}),T.jsxs("div",{className:"flex-grow min-w-0",children:[T.jsx("h2",{className:"text-2xl text-yellow-300 font-serif truncate",title:t.name,children:t.name}),T.jsxs("p",{className:"text-md text-cyan-200",children:[t.realm," ",T.jsxs("span",{className:"text-gray-400",children:["(",t.gender,")"]})]})]})]}),T.jsx(tA,{player:t})]}),T.jsxs("div",{className:"flex-grow flex flex-col min-h-0",children:[T.jsxs("div",{className:"flex border-b border-white/10 mx-4",children:[T.jsx(h,{label:"Thng Tin",name:"info",icon:T.jsx(K_,{})}),T.jsx(h,{label:"Hnh Trang",name:"inventory",icon:T.jsx(Q_,{})})]}),T.jsx("div",{className:"flex-grow p-4 overflow-y-auto custom-scrollbar",children:a==="info"?T.jsx(nA,{player:t,npcs:e,activeSecretRealm:o}):T.jsxs("div",{children:[T.jsx("h4",{className:"text-gray-400 font-semibold mb-2",children:"Trang b"}),T.jsxs("div",{className:"space-y-2",children:[T.jsx(Cu,{item:t.equipment.weapon,label:"V kh",onClick:m=>i(m,!0)}),T.jsx(Cu,{item:t.equipment.armor,label:"Gip",onClick:m=>i(m,!0)}),T.jsx(Cu,{item:t.equipment.accessory,label:"Ph kin",onClick:m=>i(m,!0)})]}),T.jsx(iA,{player:t,onItemClick:m=>i(m,!1)})]})})]})]})},Wg=({event:t,onSelectChoice:e})=>T.jsxs("div",{className:"pt-4 border-t border-gray-700/50 animate-fade-in",children:[T.jsx("p",{className:"text-gray-300 mb-4 text-center italic",dangerouslySetInnerHTML:{__html:t.description}}),T.jsx("div",{className:"grid grid-cols-1 gap-3",children:t.choices.map((i,o)=>T.jsxs("button",{onClick:()=>e(i),className:"w-full btn btn-event",children:[i.text,i.successChance!==void 0&&T.jsxs("span",{className:"text-xs font-normal ml-2 px-2 py-0.5 rounded-full bg-yellow-500/20 text-yellow-300",children:[i.successChance,"% Thnh Cng"]})]},o))})]}),oA=({conversation:t,onClose:e,onSelectChoice:i})=>T.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-[60] animate-fade-in-fast",onClick:e,children:T.jsxs("div",{className:"panel-bg p-6 max-w-lg w-full mx-4",onClick:o=>o.stopPropagation(),children:[T.jsx("h3",{className:"text-2xl font-serif text-cyan-300 mb-4 text-center",children:"Truyn m Ph"}),T.jsxs("div",{className:"pt-4 border-t border-gray-700/50",children:[T.jsx("p",{className:"text-gray-300 mb-4 text-center italic",dangerouslySetInnerHTML:{__html:t.event.description}}),T.jsx("div",{className:"grid grid-cols-1 gap-3",children:t.event.choices.map((o,a)=>T.jsx("button",{onClick:()=>i(o),className:"w-full btn btn-event",children:o.text},a))})]})]})}),sA=({tournament:t,player:e,event:i,onSelectChoice:o})=>{const a=["T kt","Bn kt","Chung kt"],f=h=>"title"in h?`${h.name} - ${h.title}`:h.name;return T.jsxs("div",{className:"panel-bg flex flex-col flex-grow min-h-0 p-6 animate-fade-in",children:[T.jsxs("h2",{className:"text-4xl font-serif text-yellow-300 text-center mb-4",children:["i Hi Thin Kiu - Nm ",Math.floor(t.year-15)]}),T.jsxs("div",{className:"flex-grow flex md:flex-row flex-col gap-4",children:[T.jsx("div",{className:"flex-1 space-y-4 overflow-y-auto custom-scrollbar pr-2",children:t.bracket.map((h,m)=>T.jsxs("div",{children:[T.jsx("h3",{className:"text-lg text-yellow-200 font-semibold mb-2",children:a[m]}),T.jsx("div",{className:"space-y-2",children:h.map((p,g)=>{const v=p.winner==="player1",x=p.winner==="player2";return T.jsxs("div",{className:"bg-gray-800/50 p-2 rounded-md text-sm flex justify-between items-center",children:[T.jsxs("div",{children:[T.jsx("p",{className:v?"font-bold text-green-400":x?"text-gray-500 line-through":"",children:f(p.player1)}),T.jsx("p",{className:x?"font-bold text-green-400":v?"text-gray-500 line-through":"",children:f(p.player2)})]}),p.winner&&T.jsx("span",{className:"text-xs font-bold text-green-400",children:""})]},g)})})]},m))}),T.jsx("div",{className:"flex-1 flex flex-col justify-center items-center md:border-l-2 border-yellow-500/20 md:pl-4",children:i&&T.jsx(Wg,{event:i,onSelectChoice:o})})]})]})},aA=({player:t,inventory:e,onClose:i,onBuy:o,onSell:a})=>{const[f,h]=Ee.useState("buy"),m=t.inventory.filter(v=>!Object.values(t.equipment).filter(Boolean).map(S=>S.id).includes(v.id)),p=({label:v,name:x})=>T.jsx("button",{onClick:()=>h(x),className:`flex-1 py-2 text-lg font-semibold transition-colors duration-300 border-b-4 ${f===x?"text-cyan-300 border-cyan-400":"text-gray-500 border-transparent hover:text-cyan-400 hover:border-cyan-400/30"}`,children:v}),g=({item:v,isBuying:x})=>{const S=x&&v.cost?t.linhThach>=v.cost:!0,M=Math.floor((v.cost??10)*.4);return T.jsxs("div",{className:"flex items-center p-3 bg-gray-800/60 rounded-lg border border-cyan-400/10 flex-wrap sm:flex-nowrap",children:[T.jsxs("div",{className:"flex-grow mb-2 sm:mb-0",children:[T.jsx("p",{className:"font-semibold text-white",children:v.name}),T.jsxs("p",{className:"text-sm text-gray-400 italic",children:['"',v.description,'"']})]}),T.jsxs("div",{className:"text-right ml-0 sm:ml-4 shrink-0 w-full sm:w-auto",children:[T.jsxs("p",{className:"font-bold text-yellow-300",children:[x?v.cost:M," Linh Thch"]}),T.jsx("button",{onClick:()=>x?o(v):a(v),disabled:!S,className:`mt-1 text-sm py-1 px-3 rounded-md transition-colors w-full sm:w-auto ${x?"btn-secondary":"btn-warning"} disabled:bg-gray-600 disabled:text-gray-400 disabled:cursor-not-allowed`,children:x?"Mua":"Bn"})]})]})};return T.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 animate-fade-in-fast",onClick:i,children:T.jsxs("div",{className:"panel-bg p-0 max-w-3xl w-full mx-4 flex flex-col",style:{height:"90vh"},onClick:v=>v.stopPropagation(),children:[T.jsxs("div",{className:"p-4 sm:p-6",children:[T.jsx("h2",{className:"text-3xl sm:text-4xl font-serif text-cyan-300 text-center",children:"Ca Hng Thnh Trn"}),T.jsxs("p",{className:"text-center text-yellow-300",children:["Linh Thch: ",t.linhThach]})]}),T.jsxs("div",{className:"flex border-b border-white/10 px-4 sm:px-6",children:[T.jsx(p,{label:"Mua",name:"buy"}),T.jsx(p,{label:"Bn",name:"sell"})]}),T.jsx("div",{className:"flex-grow p-4 sm:p-6 overflow-y-auto custom-scrollbar",children:T.jsxs("div",{className:"space-y-3",children:[f==="buy"&&(e.length>0?e.map(v=>T.jsx(g,{item:v,isBuying:!0},v.id)):T.jsx("p",{className:"text-center text-gray-500 italic",children:"Ca hng hin khng c g  bn."})),f==="sell"&&(m.length>0?m.map(v=>T.jsx(g,{item:v,isBuying:!1},v.id)):T.jsx("p",{className:"text-center text-gray-500 italic",children:"Ti  ca bn trng rng."}))]})}),T.jsx("div",{className:"p-4 sm:p-6 border-t border-white/10",children:T.jsx("button",{onClick:i,className:"w-full btn btn-dark",children:"Ri khi"})})]})})},rA=({player:t,auction:e,onClose:i,onPlaceBid:o,onPass:a})=>{const f=e.items[e.currentItemIndex],h=Ee.useRef(null);if(Ee.useEffect(()=>{var v;(v=h.current)==null||v.scrollIntoView({behavior:"smooth"})},[e.log]),!f)return null;const m=v=>{const x=[];return v.effects.attack&&x.push(`Cng: +${v.effects.attack}`),v.effects.defense&&x.push(`Th: +${v.effects.defense}`),v.effects.health&&x.push(`Hi phc: +${v.effects.health} HP`),v.effects.cultivation&&x.push(`Tu vi: +${v.effects.cultivation}`),v.technique&&x.push(`Hc c: "${v.technique.name}"`),x.length===0?null:T.jsx("div",{className:"mt-2 text-sm space-y-1 text-green-300",children:x.map((S,M)=>T.jsx("p",{children:S},M))})},p=Math.ceil(f.currentBid*1.1),g=t.linhThach>=p;return T.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-lg flex items-center justify-center z-50 animate-fade-in-fast",onClick:i,children:T.jsxs("div",{className:"panel-bg max-w-4xl w-full mx-2 flex flex-col",style:{height:"90vh"},onClick:v=>v.stopPropagation(),children:[T.jsxs("div",{className:"p-4 text-center border-b-2 border-yellow-500/30",children:[T.jsx("h2",{className:"text-3xl md:text-4xl font-serif text-yellow-300",children:"u Gi Hi"}),T.jsxs("p",{className:"text-base md:text-lg text-cyan-200",children:["Nm ",Math.floor(e.year-15)]}),T.jsxs("p",{className:"text-yellow-200 mt-1",children:["Linh thch: ",t.linhThach]})]}),T.jsxs("div",{className:"flex-grow grid md:grid-cols-2 grid-cols-1 min-h-0",children:[T.jsxs("div",{className:"p-4 md:p-6 border-b md:border-b-0 md:border-r border-cyan-400/20 flex flex-col",children:[T.jsxs("h3",{className:"text-xl md:text-2xl text-cyan-300 font-semibold",children:["Vt phm ",e.currentItemIndex+1," / ",e.items.length]}),T.jsxs("div",{className:"mt-4 p-4 rounded-lg bg-black/20 flex-grow",children:[T.jsx("h4",{className:"text-2xl md:text-3xl font-serif text-yellow-300",children:f.item.name}),T.jsxs("p",{className:"italic text-gray-400 mt-1 mb-3",children:['"',f.item.description,'"']}),m(f.item)]})]}),T.jsxs("div",{className:"p-4 md:p-6 flex flex-col",children:[T.jsxs("div",{className:"flex-grow space-y-4",children:[T.jsxs("div",{children:[T.jsx("p",{className:"text-gray-400",children:"Gi khi im"}),T.jsxs("p",{className:"text-2xl text-white",children:[f.startingBid," Linh Thch"]})]}),T.jsxs("div",{children:[T.jsx("p",{className:"text-gray-400",children:"Gi hin ti"}),T.jsxs("p",{className:"text-3xl md:text-4xl font-bold text-yellow-300",children:[f.currentBid," Linh Thch"]}),T.jsx("p",{className:"text-sm text-cyan-200",children:f.highestBidderName?`Gi gi: ${f.highestBidderName}`:"Cha c ai ra gi"})]}),T.jsxs("div",{className:"h-32 bg-black/30 rounded-lg p-2 overflow-y-auto custom-scrollbar flex flex-col-reverse",children:[T.jsx("div",{ref:h}),T.jsx("div",{className:"space-y-1 text-sm",children:e.log.slice().reverse().map((v,x)=>T.jsx("p",{children:v},x))})]})]}),T.jsxs("div",{className:"mt-auto pt-4 border-t border-cyan-400/20 space-y-2",children:[T.jsxs("button",{onClick:o,disabled:!g,className:"w-full btn btn-primary text-lg",children:["Ra gi (",p,")"]}),T.jsx("button",{onClick:a,className:"w-full btn btn-dark",children:"B qua vt phm ny"})]})]})]})]})})};function uA(){return{id:-1,texcoordX:0,texcoordY:0,prevTexcoordX:0,prevTexcoordY:0,deltaX:0,deltaY:0,down:!1,moved:!1,color:{r:0,g:0,b:0}}}function cA({SIM_RESOLUTION:t=128,DYE_RESOLUTION:e=1440,CAPTURE_RESOLUTION:i=512,DENSITY_DISSIPATION:o=3.5,VELOCITY_DISSIPATION:a=2,PRESSURE:f=.1,PRESSURE_ITERATIONS:h=20,CURL:m=3,SPLAT_RADIUS:p=.2,SPLAT_FORCE:g=6e3,SHADING:v=!0,COLOR_UPDATE_SPEED:x=10,BACK_COLOR:S={r:.5,g:0,b:0},TRANSPARENT:M=!0}){const w=Ee.useRef(null);return Ee.useEffect(()=>{const D=w.current;if(!D)return;let k=[uA()],q={SIM_RESOLUTION:t,DYE_RESOLUTION:e,DENSITY_DISSIPATION:o,VELOCITY_DISSIPATION:a,PRESSURE:f,PRESSURE_ITERATIONS:h,CURL:m,SPLAT_RADIUS:p,SPLAT_FORCE:g,SHADING:v,COLOR_UPDATE_SPEED:x};const{gl:N,ext:F}=X(D);if(!N||!F)return;F.supportLinearFiltering||(q.DYE_RESOLUTION=256,q.SHADING=!1);function X(A){const P={alpha:!0,depth:!1,stencil:!1,antialias:!1,preserveDrawingBuffer:!1};let z=A.getContext("webgl2",P);if(z||(z=A.getContext("webgl",P)||A.getContext("experimental-webgl",P)),!z)throw new Error("Unable to initialize WebGL.");const W="drawBuffers"in z;let ue=!1,ve=null;W?(z.getExtension("EXT_color_buffer_float"),ue=!!z.getExtension("OES_texture_float_linear")):(ve=z.getExtension("OES_texture_half_float"),ue=!!z.getExtension("OES_texture_half_float_linear")),z.clearColor(0,0,0,1);const De=W?z.HALF_FLOAT:ve&&ve.HALF_FLOAT_OES||0;let Me,Re,dt;return W?(Me=G(z,z.RGBA16F,z.RGBA,De),Re=G(z,z.RG16F,z.RG,De),dt=G(z,z.R16F,z.RED,De)):(Me=G(z,z.RGBA,z.RGBA,De),Re=G(z,z.RGBA,z.RGBA,De),dt=G(z,z.RGBA,z.RGBA,De)),{gl:z,ext:{formatRGBA:Me,formatRG:Re,formatR:dt,halfFloatTexType:De,supportLinearFiltering:ue}}}function G(A,P,z,W){if(!$(A,P,z,W)){if("drawBuffers"in A){const ue=A;switch(P){case ue.R16F:return G(ue,ue.RG16F,ue.RG,W);case ue.RG16F:return G(ue,ue.RGBA16F,ue.RGBA,W);default:return null}}return null}return{internalFormat:P,format:z}}function $(A,P,z,W){const ue=A.createTexture();if(!ue)return!1;A.bindTexture(A.TEXTURE_2D,ue),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_MIN_FILTER,A.NEAREST),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_MAG_FILTER,A.NEAREST),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_WRAP_S,A.CLAMP_TO_EDGE),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_WRAP_T,A.CLAMP_TO_EDGE),A.texImage2D(A.TEXTURE_2D,0,P,4,4,0,z,W,null);const ve=A.createFramebuffer();return ve?(A.bindFramebuffer(A.FRAMEBUFFER,ve),A.framebufferTexture2D(A.FRAMEBUFFER,A.COLOR_ATTACHMENT0,A.TEXTURE_2D,ue,0),A.checkFramebufferStatus(A.FRAMEBUFFER)===A.FRAMEBUFFER_COMPLETE):!1}function ie(A){if(!A.length)return 0;let P=0;for(let z=0;z<A.length;z++)P=(P<<5)-P+A.charCodeAt(z),P|=0;return P}function se(A,P){if(!P)return A;let z="";for(const W of P)z+=`#define ${W}
`;return z+A}function ne(A,P,z=null){const W=se(P,z),ue=N.createShader(A);return ue?(N.shaderSource(ue,W),N.compileShader(ue),N.getShaderParameter(ue,N.COMPILE_STATUS)||console.trace(N.getShaderInfoLog(ue)),ue):null}function he(A,P){if(!A||!P)return null;const z=N.createProgram();return z?(N.attachShader(z,A),N.attachShader(z,P),N.linkProgram(z),N.getProgramParameter(z,N.LINK_STATUS)||console.trace(N.getProgramInfoLog(z)),z):null}function me(A){let P={};const z=N.getProgramParameter(A,N.ACTIVE_UNIFORMS);for(let W=0;W<z;W++){const ue=N.getActiveUniform(A,W);ue&&(P[ue.name]=N.getUniformLocation(A,ue.name))}return P}class pe{constructor(P,z){this.program=he(P,z),this.uniforms=this.program?me(this.program):{}}bind(){this.program&&N.useProgram(this.program)}}class Oe{constructor(P,z){this.vertexShader=P,this.fragmentShaderSource=z,this.programs={},this.activeProgram=null,this.uniforms={}}setKeywords(P){let z=0;for(const ue of P)z+=ie(ue);let W=this.programs[z];if(W==null){const ue=ne(N.FRAGMENT_SHADER,this.fragmentShaderSource,P);W=he(this.vertexShader,ue),this.programs[z]=W}W!==this.activeProgram&&(W&&(this.uniforms=me(W)),this.activeProgram=W)}bind(){this.activeProgram&&N.useProgram(this.activeProgram)}}const ye=ne(N.VERTEX_SHADER,`
      precision highp float;
      attribute vec2 aPosition;
      varying vec2 vUv;
      varying vec2 vL;
      varying vec2 vR;
      varying vec2 vT;
      varying vec2 vB;
      uniform vec2 texelSize;

      void main () {
        vUv = aPosition * 0.5 + 0.5;
        vL = vUv - vec2(texelSize.x, 0.0);
        vR = vUv + vec2(texelSize.x, 0.0);
        vT = vUv + vec2(0.0, texelSize.y);
        vB = vUv - vec2(0.0, texelSize.y);
        gl_Position = vec4(aPosition, 0.0, 1.0);
      }
    `),qe=ne(N.FRAGMENT_SHADER,`
      precision mediump float;
      precision mediump sampler2D;
      varying highp vec2 vUv;
      uniform sampler2D uTexture;

      void main () {
          gl_FragColor = texture2D(uTexture, vUv);
      }
    `),K=ne(N.FRAGMENT_SHADER,`
      precision mediump float;
      precision mediump sampler2D;
      varying highp vec2 vUv;
      uniform sampler2D uTexture;
      uniform float value;

      void main () {
          gl_FragColor = value * texture2D(uTexture, vUv);
      }
    `),ae=`
      precision highp float;
      precision highp sampler2D;
      varying vec2 vUv;
      varying vec2 vL;
      varying vec2 vR;
      varying vec2 vT;
      varying vec2 vB;
      uniform sampler2D uTexture;
      uniform sampler2D uDithering;
      uniform vec2 ditherScale;
      uniform vec2 texelSize;

      vec3 linearToGamma (vec3 color) {
          color = max(color, vec3(0));
          return max(1.055 * pow(color, vec3(0.416666667)) - 0.055, vec3(0));
      }

      void main () {
          vec3 c = texture2D(uTexture, vUv).rgb;
          #ifdef SHADING
              vec3 lc = texture2D(uTexture, vL).rgb;
              vec3 rc = texture2D(uTexture, vR).rgb;
              vec3 tc = texture2D(uTexture, vT).rgb;
              vec3 bc = texture2D(uTexture, vB).rgb;

              float dx = length(rc) - length(lc);
              float dy = length(tc) - length(bc);

              vec3 n = normalize(vec3(dx, dy, length(texelSize)));
              vec3 l = vec3(0.0, 0.0, 1.0);

              float diffuse = clamp(dot(n, l) + 0.7, 0.7, 1.0);
              c *= diffuse;
          #endif

          float a = max(c.r, max(c.g, c.b));
          gl_FragColor = vec4(c, a);
      }
    `,_e=ne(N.FRAGMENT_SHADER,`
      precision highp float;
      precision highp sampler2D;
      varying vec2 vUv;
      uniform sampler2D uTarget;
      uniform float aspectRatio;
      uniform vec3 color;
      uniform vec2 point;
      uniform float radius;

      void main () {
          vec2 p = vUv - point.xy;
          p.x *= aspectRatio;
          vec3 splat = exp(-dot(p, p) / radius) * color;
          vec3 base = texture2D(uTarget, vUv).xyz;
          gl_FragColor = vec4(base + splat, 1.0);
      }
    `),Xe=ne(N.FRAGMENT_SHADER,`
      precision highp float;
      precision highp sampler2D;
      varying vec2 vUv;
      uniform sampler2D uVelocity;
      uniform sampler2D uSource;
      uniform vec2 texelSize;
      uniform vec2 dyeTexelSize;
      uniform float dt;
      uniform float dissipation;

      vec4 bilerp (sampler2D sam, vec2 uv, vec2 tsize) {
          vec2 st = uv / tsize - 0.5;
          vec2 iuv = floor(st);
          vec2 fuv = fract(st);

          vec4 a = texture2D(sam, (iuv + vec2(0.5, 0.5)) * tsize);
          vec4 b = texture2D(sam, (iuv + vec2(1.5, 0.5)) * tsize);
          vec4 c = texture2D(sam, (iuv + vec2(0.5, 1.5)) * tsize);
          vec4 d = texture2D(sam, (iuv + vec2(1.5, 1.5)) * tsize);

          return mix(mix(a, b, fuv.x), mix(c, d, fuv.x), fuv.y);
      }

      void main () {
          #ifdef MANUAL_FILTERING
              vec2 coord = vUv - dt * bilerp(uVelocity, vUv, texelSize).xy * texelSize;
              vec4 result = bilerp(uSource, coord, dyeTexelSize);
          #else
              vec2 coord = vUv - dt * texture2D(uVelocity, vUv).xy * texelSize;
              vec4 result = texture2D(uSource, coord);
          #endif
          float decay = 1.0 + dissipation * dt;
          gl_FragColor = result / decay;
      }
    `,F.supportLinearFiltering?null:["MANUAL_FILTERING"]),L=ne(N.FRAGMENT_SHADER,`
      precision mediump float;
      precision mediump sampler2D;
      varying highp vec2 vUv;
      varying highp vec2 vL;
      varying highp vec2 vR;
      varying highp vec2 vT;
      varying highp vec2 vB;
      uniform sampler2D uVelocity;

      void main () {
          float L = texture2D(uVelocity, vL).x;
          float R = texture2D(uVelocity, vR).x;
          float T = texture2D(uVelocity, vT).y;
          float B = texture2D(uVelocity, vB).y;

          vec2 C = texture2D(uVelocity, vUv).xy;
          if (vL.x < 0.0) { L = -C.x; }
          if (vR.x > 1.0) { R = -C.x; }
          if (vT.y > 1.0) { T = -C.y; }
          if (vB.y < 0.0) { B = -C.y; }

          float div = 0.5 * (R - L + T - B);
          gl_FragColor = vec4(div, 0.0, 0.0, 1.0);
      }
    `),te=ne(N.FRAGMENT_SHADER,`
      precision mediump float;
      precision mediump sampler2D;
      varying highp vec2 vUv;
      varying highp vec2 vL;
      varying highp vec2 vR;
      varying highp vec2 vT;
      varying highp vec2 vB;
      uniform sampler2D uVelocity;

      void main () {
          float L = texture2D(uVelocity, vL).y;
          float R = texture2D(uVelocity, vR).y;
          float T = texture2D(uVelocity, vT).x;
          float B = texture2D(uVelocity, vB).x;
          float vorticity = R - L - T + B;
          gl_FragColor = vec4(0.5 * vorticity, 0.0, 0.0, 1.0);
      }
    `),de=ne(N.FRAGMENT_SHADER,`
      precision highp float;
      precision highp sampler2D;
      varying vec2 vUv;
      varying vec2 vL;
      varying vec2 vR;
      varying vec2 vT;
      varying vec2 vB;
      uniform sampler2D uVelocity;
      uniform sampler2D uCurl;
      uniform float curl;
      uniform float dt;

      void main () {
          float L = texture2D(uCurl, vL).x;
          float R = texture2D(uCurl, vR).x;
          float T = texture2D(uCurl, vT).x;
          float B = texture2D(uCurl, vB).x;
          float C = texture2D(uCurl, vUv).x;

          vec2 force = 0.5 * vec2(abs(T) - abs(B), abs(R) - abs(L));
          force /= length(force) + 0.0001;
          force *= curl * C;
          force.y *= -1.0;

          vec2 velocity = texture2D(uVelocity, vUv).xy;
          velocity += force * dt;
          velocity = min(max(velocity, -1000.0), 1000.0);
          gl_FragColor = vec4(velocity, 0.0, 1.0);
      }
    `),re=ne(N.FRAGMENT_SHADER,`
      precision mediump float;
      precision mediump sampler2D;
      varying highp vec2 vUv;
      varying highp vec2 vL;
      varying highp vec2 vR;
      varying highp vec2 vT;
      varying highp vec2 vB;
      uniform sampler2D uPressure;
      uniform sampler2D uDivergence;

      void main () {
          float L = texture2D(uPressure, vL).x;
          float R = texture2D(uPressure, vR).x;
          float T = texture2D(uPressure, vT).x;
          float B = texture2D(uPressure, vB).x;
          float C = texture2D(uPressure, vUv).x;
          float divergence = texture2D(uDivergence, vUv).x;
          float pressure = (L + R + B + T - divergence) * 0.25;
          gl_FragColor = vec4(pressure, 0.0, 0.0, 1.0);
      }
    `),Se=ne(N.FRAGMENT_SHADER,`
      precision mediump float;
      precision mediump sampler2D;
      varying highp vec2 vUv;
      varying highp vec2 vL;
      varying highp vec2 vR;
      varying highp vec2 vT;
      varying highp vec2 vB;
      uniform sampler2D uPressure;
      uniform sampler2D uVelocity;

      void main () {
          float L = texture2D(uPressure, vL).x;
          float R = texture2D(uPressure, vR).x;
          float T = texture2D(uPressure, vT).x;
          float B = texture2D(uPressure, vB).x;
          vec2 velocity = texture2D(uVelocity, vUv).xy;
          velocity.xy -= vec2(R - L, T - B);
          gl_FragColor = vec4(velocity, 0.0, 1.0);
      }
    `),Ue=(()=>{const A=N.createBuffer();N.bindBuffer(N.ARRAY_BUFFER,A),N.bufferData(N.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),N.STATIC_DRAW);const P=N.createBuffer();return N.bindBuffer(N.ELEMENT_ARRAY_BUFFER,P),N.bufferData(N.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,0,2,3]),N.STATIC_DRAW),N.vertexAttribPointer(0,2,N.FLOAT,!1,0,0),N.enableVertexAttribArray(0),(z,W=!1)=>{N&&(z?(N.viewport(0,0,z.width,z.height),N.bindFramebuffer(N.FRAMEBUFFER,z.fbo)):(N.viewport(0,0,N.drawingBufferWidth,N.drawingBufferHeight),N.bindFramebuffer(N.FRAMEBUFFER,null)),W&&(N.clearColor(0,0,0,1),N.clear(N.COLOR_BUFFER_BIT)),N.drawElements(N.TRIANGLES,6,N.UNSIGNED_SHORT,0))}})();let Te,Ae,Ke,Ht,zt;const hn=new pe(ye,qe),mn=new pe(ye,K),Ct=new pe(ye,_e),lt=new pe(ye,Xe),Nn=new pe(ye,L),Rn=new pe(ye,te),ft=new pe(ye,de),gn=new pe(ye,re),tn=new pe(ye,Se),pn=new Oe(ye,ae);function $t(A,P,z,W,ue,ve){N.activeTexture(N.TEXTURE0);const De=N.createTexture();N.bindTexture(N.TEXTURE_2D,De),N.texParameteri(N.TEXTURE_2D,N.TEXTURE_MIN_FILTER,ve),N.texParameteri(N.TEXTURE_2D,N.TEXTURE_MAG_FILTER,ve),N.texParameteri(N.TEXTURE_2D,N.TEXTURE_WRAP_S,N.CLAMP_TO_EDGE),N.texParameteri(N.TEXTURE_2D,N.TEXTURE_WRAP_T,N.CLAMP_TO_EDGE),N.texImage2D(N.TEXTURE_2D,0,z,A,P,0,W,ue,null);const Me=N.createFramebuffer();N.bindFramebuffer(N.FRAMEBUFFER,Me),N.framebufferTexture2D(N.FRAMEBUFFER,N.COLOR_ATTACHMENT0,N.TEXTURE_2D,De,0),N.viewport(0,0,A,P),N.clear(N.COLOR_BUFFER_BIT);const Re=1/A,dt=1/P;return{texture:De,fbo:Me,width:A,height:P,texelSizeX:Re,texelSizeY:dt,attach(mt){return N.activeTexture(N.TEXTURE0+mt),N.bindTexture(N.TEXTURE_2D,De),mt}}}function Ti(A,P,z,W,ue,ve){const De=$t(A,P,z,W,ue,ve),Me=$t(A,P,z,W,ue,ve);return{width:A,height:P,texelSizeX:De.texelSizeX,texelSizeY:De.texelSizeY,read:De,write:Me,swap(){const Re=this.read;this.read=this.write,this.write=Re}}}function Gi(A,P,z,W,ue,ve,De){const Me=$t(P,z,W,ue,ve,De);return hn.bind(),hn.uniforms.uTexture&&N.uniform1i(hn.uniforms.uTexture,A.attach(0)),Ue(Me,!1),Me}function Hi(A,P,z,W,ue,ve,De){return A.width===P&&A.height===z||(A.read=Gi(A.read,P,z,W,ue,ve,De),A.write=$t(P,z,W,ue,ve,De),A.width=P,A.height=z,A.texelSizeX=1/P,A.texelSizeY=1/z),A}function zi(){const A=bt(q.SIM_RESOLUTION),P=bt(q.DYE_RESOLUTION),z=F.halfFloatTexType,W=F.formatRGBA,ue=F.formatRG,ve=F.formatR,De=F.supportLinearFiltering?N.LINEAR:N.NEAREST;N.disable(N.BLEND),Te?Te=Hi(Te,P.width,P.height,W.internalFormat,W.format,z,De):Te=Ti(P.width,P.height,W.internalFormat,W.format,z,De),Ae?Ae=Hi(Ae,A.width,A.height,ue.internalFormat,ue.format,z,De):Ae=Ti(A.width,A.height,ue.internalFormat,ue.format,z,De),Ke=$t(A.width,A.height,ve.internalFormat,ve.format,z,N.NEAREST),Ht=$t(A.width,A.height,ve.internalFormat,ve.format,z,N.NEAREST),zt=Ti(A.width,A.height,ve.internalFormat,ve.format,z,N.NEAREST)}function bn(){const A=[];q.SHADING&&A.push("SHADING"),pn.setKeywords(A)}function bt(A){const P=N.drawingBufferWidth,z=N.drawingBufferHeight,W=P/z;let ue=W<1?1/W:W;const ve=Math.round(A),De=Math.round(A*ue);return P>z?{width:De,height:ve}:{width:ve,height:De}}function at(A){const P=window.devicePixelRatio||1;return Math.floor(A*P)}bn(),zi();let wt=Date.now(),Xn=0;function Kn(){const A=Fi();_()&&zi(),R(A),Y(),J(A),le(null),requestAnimationFrame(Kn)}function Fi(){const A=Date.now();let P=(A-wt)/1e3;return P=Math.min(P,.016666),wt=A,P}function _(){const A=at(D.clientWidth),P=at(D.clientHeight);return D.width!==A||D.height!==P?(D.width=A,D.height=P,!0):!1}function R(A){Xn+=A*q.COLOR_UPDATE_SPEED,Xn>=1&&(Xn=Ye(Xn,0,1),k.forEach(P=>{P.color=ut()}))}function Y(){for(const A of k)A.moved&&(A.moved=!1,j(A))}function J(A){N.disable(N.BLEND),Rn.bind(),Rn.uniforms.texelSize&&N.uniform2f(Rn.uniforms.texelSize,Ae.texelSizeX,Ae.texelSizeY),Rn.uniforms.uVelocity&&N.uniform1i(Rn.uniforms.uVelocity,Ae.read.attach(0)),Ue(Ht),ft.bind(),ft.uniforms.texelSize&&N.uniform2f(ft.uniforms.texelSize,Ae.texelSizeX,Ae.texelSizeY),ft.uniforms.uVelocity&&N.uniform1i(ft.uniforms.uVelocity,Ae.read.attach(0)),ft.uniforms.uCurl&&N.uniform1i(ft.uniforms.uCurl,Ht.attach(1)),ft.uniforms.curl&&N.uniform1f(ft.uniforms.curl,q.CURL),ft.uniforms.dt&&N.uniform1f(ft.uniforms.dt,A),Ue(Ae.write),Ae.swap(),Nn.bind(),Nn.uniforms.texelSize&&N.uniform2f(Nn.uniforms.texelSize,Ae.texelSizeX,Ae.texelSizeY),Nn.uniforms.uVelocity&&N.uniform1i(Nn.uniforms.uVelocity,Ae.read.attach(0)),Ue(Ke),mn.bind(),mn.uniforms.uTexture&&N.uniform1i(mn.uniforms.uTexture,zt.read.attach(0)),mn.uniforms.value&&N.uniform1f(mn.uniforms.value,q.PRESSURE),Ue(zt.write),zt.swap(),gn.bind(),gn.uniforms.texelSize&&N.uniform2f(gn.uniforms.texelSize,Ae.texelSizeX,Ae.texelSizeY),gn.uniforms.uDivergence&&N.uniform1i(gn.uniforms.uDivergence,Ke.attach(0));for(let z=0;z<q.PRESSURE_ITERATIONS;z++)gn.uniforms.uPressure&&N.uniform1i(gn.uniforms.uPressure,zt.read.attach(1)),Ue(zt.write),zt.swap();tn.bind(),tn.uniforms.texelSize&&N.uniform2f(tn.uniforms.texelSize,Ae.texelSizeX,Ae.texelSizeY),tn.uniforms.uPressure&&N.uniform1i(tn.uniforms.uPressure,zt.read.attach(0)),tn.uniforms.uVelocity&&N.uniform1i(tn.uniforms.uVelocity,Ae.read.attach(1)),Ue(Ae.write),Ae.swap(),lt.bind(),lt.uniforms.texelSize&&N.uniform2f(lt.uniforms.texelSize,Ae.texelSizeX,Ae.texelSizeY),!F.supportLinearFiltering&&lt.uniforms.dyeTexelSize&&N.uniform2f(lt.uniforms.dyeTexelSize,Ae.texelSizeX,Ae.texelSizeY);const P=Ae.read.attach(0);lt.uniforms.uVelocity&&N.uniform1i(lt.uniforms.uVelocity,P),lt.uniforms.uSource&&N.uniform1i(lt.uniforms.uSource,P),lt.uniforms.dt&&N.uniform1f(lt.uniforms.dt,A),lt.uniforms.dissipation&&N.uniform1f(lt.uniforms.dissipation,q.VELOCITY_DISSIPATION),Ue(Ae.write),Ae.swap(),!F.supportLinearFiltering&&lt.uniforms.dyeTexelSize&&N.uniform2f(lt.uniforms.dyeTexelSize,Te.texelSizeX,Te.texelSizeY),lt.uniforms.uVelocity&&N.uniform1i(lt.uniforms.uVelocity,Ae.read.attach(0)),lt.uniforms.uSource&&N.uniform1i(lt.uniforms.uSource,Te.read.attach(1)),lt.uniforms.dissipation&&N.uniform1f(lt.uniforms.dissipation,q.DENSITY_DISSIPATION),Ue(Te.write),Te.swap()}function le(A){N.blendFunc(N.ONE,N.ONE_MINUS_SRC_ALPHA),N.enable(N.BLEND),oe(A)}function oe(A){const P=N.drawingBufferWidth,z=N.drawingBufferHeight;pn.bind(),q.SHADING&&pn.uniforms.texelSize&&N.uniform2f(pn.uniforms.texelSize,1/P,1/z),pn.uniforms.uTexture&&N.uniform1i(pn.uniforms.uTexture,Te.read.attach(0)),Ue(A,!1)}function j(A){const P=A.deltaX*q.SPLAT_FORCE,z=A.deltaY*q.SPLAT_FORCE;fe(A.texcoordX,A.texcoordY,P,z,A.color)}function ce(A){const P=ut();P.r*=10,P.g*=10,P.b*=10;const z=10*(Math.random()-.5),W=30*(Math.random()-.5);fe(A.texcoordX,A.texcoordY,z,W,P)}function fe(A,P,z,W,ue){Ct.bind(),Ct.uniforms.uTarget&&N.uniform1i(Ct.uniforms.uTarget,Ae.read.attach(0)),Ct.uniforms.aspectRatio&&N.uniform1f(Ct.uniforms.aspectRatio,D.width/D.height),Ct.uniforms.point&&N.uniform2f(Ct.uniforms.point,A,P),Ct.uniforms.color&&N.uniform3f(Ct.uniforms.color,z,W,0),Ct.uniforms.radius&&N.uniform1f(Ct.uniforms.radius,we(q.SPLAT_RADIUS/100)),Ue(Ae.write),Ae.swap(),Ct.uniforms.uTarget&&N.uniform1i(Ct.uniforms.uTarget,Te.read.attach(0)),Ct.uniforms.color&&N.uniform3f(Ct.uniforms.color,ue.r,ue.g,ue.b),Ue(Te.write),Te.swap()}function we(A){const P=D.width/D.height;return P>1&&(A*=P),A}function Je(A,P,z,W){A.id=P,A.down=!0,A.moved=!1,A.texcoordX=z/D.width,A.texcoordY=1-W/D.height,A.prevTexcoordX=A.texcoordX,A.prevTexcoordY=A.texcoordY,A.deltaX=0,A.deltaY=0,A.color=ut()}function Ie(A,P,z,W){A.prevTexcoordX=A.texcoordX,A.prevTexcoordY=A.texcoordY,A.texcoordX=P/D.width,A.texcoordY=1-z/D.height,A.deltaX=Ze(A.texcoordX-A.prevTexcoordX),A.deltaY=yt(A.texcoordY-A.prevTexcoordY),A.moved=Math.abs(A.deltaX)>0||Math.abs(A.deltaY)>0,A.color=W}function rt(A){A.down=!1}function Ze(A){const P=D.width/D.height;return P<1&&(A*=P),A}function yt(A){const P=D.width/D.height;return P>1&&(A/=P),A}function ut(){const A=St(Math.random(),1,1);return A.r*=.15,A.g*=.15,A.b*=.15,A}function St(A,P,z){let W=0,ue=0,ve=0;const De=Math.floor(A*6),Me=A*6-De,Re=z*(1-P),dt=z*(1-Me*P),mt=z*(1-(1-Me)*P);switch(De%6){case 0:W=z,ue=mt,ve=Re;break;case 1:W=dt,ue=z,ve=Re;break;case 2:W=Re,ue=z,ve=mt;break;case 3:W=Re,ue=dt,ve=z;break;case 4:W=mt,ue=Re,ve=z;break;case 5:W=z,ue=Re,ve=dt;break}return{r:W,g:ue,b:ve}}function Ye(A,P,z){const W=z-P;return(A-P)%W+P}window.addEventListener("mousedown",A=>{const P=k[0],z=at(A.clientX),W=at(A.clientY);Je(P,-1,z,W),ce(P)});function ze(A){const P=k[0],z=at(A.clientX),W=at(A.clientY),ue=ut();Kn(),Ie(P,z,W,ue),document.body.removeEventListener("mousemove",ze)}document.body.addEventListener("mousemove",ze),window.addEventListener("mousemove",A=>{const P=k[0],z=at(A.clientX),W=at(A.clientY),ue=P.color;Ie(P,z,W,ue)});function Pe(A){const P=A.targetTouches,z=k[0];for(let W=0;W<P.length;W++){const ue=at(P[W].clientX),ve=at(P[W].clientY);Kn(),Je(z,P[W].identifier,ue,ve)}document.body.removeEventListener("touchstart",Pe)}document.body.addEventListener("touchstart",Pe),window.addEventListener("touchstart",A=>{const P=A.targetTouches,z=k[0];for(let W=0;W<P.length;W++){const ue=at(P[W].clientX),ve=at(P[W].clientY);Je(z,P[W].identifier,ue,ve)}},!1),window.addEventListener("touchmove",A=>{const P=A.targetTouches,z=k[0];for(let W=0;W<P.length;W++){const ue=at(P[W].clientX),ve=at(P[W].clientY);Ie(z,ue,ve,z.color)}},!1),window.addEventListener("touchend",A=>{const P=A.changedTouches,z=k[0];for(let W=0;W<P.length;W++)rt(z)})},[t,e,i,o,a,f,h,m,p,g,v,x,S,M]),T.jsx("div",{style:{position:"fixed",top:0,left:0,zIndex:50,pointerEvents:"none",width:"100%",height:"100%"},children:T.jsx("canvas",{ref:w,id:"fluid",style:{width:"100vw",height:"100vh",display:"block"}})})}function Uo(t){let e=t[0],i=t[1],o=t[2];return Math.sqrt(e*e+i*i+o*o)}function qu(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function fA(t,e,i,o){return t[0]=e,t[1]=i,t[2]=o,t}function ig(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t}function lg(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t}function dA(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t}function hA(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t[2]=e[2]/i[2],t}function Su(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t}function mA(t,e){let i=e[0]-t[0],o=e[1]-t[1],a=e[2]-t[2];return Math.sqrt(i*i+o*o+a*a)}function gA(t,e){let i=e[0]-t[0],o=e[1]-t[1],a=e[2]-t[2];return i*i+o*o+a*a}function og(t){let e=t[0],i=t[1],o=t[2];return e*e+i*i+o*o}function pA(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function yA(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function Gu(t,e){let i=e[0],o=e[1],a=e[2],f=i*i+o*o+a*a;return f>0&&(f=1/Math.sqrt(f)),t[0]=e[0]*f,t[1]=e[1]*f,t[2]=e[2]*f,t}function jg(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function sg(t,e,i){let o=e[0],a=e[1],f=e[2],h=i[0],m=i[1],p=i[2];return t[0]=a*p-f*m,t[1]=f*h-o*p,t[2]=o*m-a*h,t}function vA(t,e,i,o){let a=e[0],f=e[1],h=e[2];return t[0]=a+o*(i[0]-a),t[1]=f+o*(i[1]-f),t[2]=h+o*(i[2]-h),t}function TA(t,e,i,o,a){const f=Math.exp(-o*a);let h=e[0],m=e[1],p=e[2];return t[0]=i[0]+(h-i[0])*f,t[1]=i[1]+(m-i[1])*f,t[2]=i[2]+(p-i[2])*f,t}function xA(t,e,i){let o=e[0],a=e[1],f=e[2],h=i[3]*o+i[7]*a+i[11]*f+i[15];return h=h||1,t[0]=(i[0]*o+i[4]*a+i[8]*f+i[12])/h,t[1]=(i[1]*o+i[5]*a+i[9]*f+i[13])/h,t[2]=(i[2]*o+i[6]*a+i[10]*f+i[14])/h,t}function CA(t,e,i){let o=e[0],a=e[1],f=e[2],h=i[3]*o+i[7]*a+i[11]*f+i[15];return h=h||1,t[0]=(i[0]*o+i[4]*a+i[8]*f)/h,t[1]=(i[1]*o+i[5]*a+i[9]*f)/h,t[2]=(i[2]*o+i[6]*a+i[10]*f)/h,t}function SA(t,e,i){let o=e[0],a=e[1],f=e[2];return t[0]=o*i[0]+a*i[3]+f*i[6],t[1]=o*i[1]+a*i[4]+f*i[7],t[2]=o*i[2]+a*i[5]+f*i[8],t}function EA(t,e,i){let o=e[0],a=e[1],f=e[2],h=i[0],m=i[1],p=i[2],g=i[3],v=m*f-p*a,x=p*o-h*f,S=h*a-m*o,M=m*S-p*x,w=p*v-h*S,D=h*x-m*v,k=g*2;return v*=k,x*=k,S*=k,M*=2,w*=2,D*=2,t[0]=o+v+M,t[1]=a+x+w,t[2]=f+S+D,t}const MA=function(){const t=[0,0,0],e=[0,0,0];return function(i,o){qu(t,i),qu(e,o),Gu(t,t),Gu(e,e);let a=jg(t,e);return a>1?0:a<-1?Math.PI:Math.acos(a)}}();function _A(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}class xn extends Array{constructor(e=0,i=e,o=e){return super(e,i,o),this}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}set x(e){this[0]=e}set y(e){this[1]=e}set z(e){this[2]=e}set(e,i=e,o=e){return e.length?this.copy(e):(fA(this,e,i,o),this)}copy(e){return qu(this,e),this}add(e,i){return i?ig(this,e,i):ig(this,this,e),this}sub(e,i){return i?lg(this,e,i):lg(this,this,e),this}multiply(e){return e.length?dA(this,this,e):Su(this,this,e),this}divide(e){return e.length?hA(this,this,e):Su(this,this,1/e),this}inverse(e=this){return yA(this,e),this}len(){return Uo(this)}distance(e){return e?mA(this,e):Uo(this)}squaredLen(){return og(this)}squaredDistance(e){return e?gA(this,e):og(this)}negate(e=this){return pA(this,e),this}cross(e,i){return i?sg(this,e,i):sg(this,this,e),this}scale(e){return Su(this,this,e),this}normalize(){return Gu(this,this),this}dot(e){return jg(this,e)}equals(e){return _A(this,e)}applyMatrix3(e){return SA(this,this,e),this}applyMatrix4(e){return xA(this,this,e),this}scaleRotateMatrix4(e){return CA(this,this,e),this}applyQuaternion(e){return EA(this,this,e),this}angle(e){return MA(this,e)}lerp(e,i){return vA(this,this,e,i),this}smoothLerp(e,i,o){return TA(this,this,e,i,o),this}clone(){return new xn(this[0],this[1],this[2])}fromArray(e,i=0){return this[0]=e[i],this[1]=e[i+1],this[2]=e[i+2],this}toArray(e=[],i=0){return e[i]=this[0],e[i+1]=this[1],e[i+2]=this[2],e}transformDirection(e){const i=this[0],o=this[1],a=this[2];return this[0]=e[0]*i+e[4]*o+e[8]*a,this[1]=e[1]*i+e[5]*o+e[9]*a,this[2]=e[2]*i+e[6]*o+e[10]*a,this.normalize()}}const ag=new xn;let AA=1,NA=1,rg=!1;class RA{constructor(e,i={}){e.canvas||console.error("gl not passed as first argument to Geometry"),this.gl=e,this.attributes=i,this.id=AA++,this.VAOs={},this.drawRange={start:0,count:0},this.instancedCount=0,this.gl.renderer.bindVertexArray(null),this.gl.renderer.currentGeometry=null,this.glState=this.gl.renderer.state;for(let o in i)this.addAttribute(o,i[o])}addAttribute(e,i){if(this.attributes[e]=i,i.id=NA++,i.size=i.size||1,i.type=i.type||(i.data.constructor===Float32Array?this.gl.FLOAT:i.data.constructor===Uint16Array?this.gl.UNSIGNED_SHORT:this.gl.UNSIGNED_INT),i.target=e==="index"?this.gl.ELEMENT_ARRAY_BUFFER:this.gl.ARRAY_BUFFER,i.normalized=i.normalized||!1,i.stride=i.stride||0,i.offset=i.offset||0,i.count=i.count||(i.stride?i.data.byteLength/i.stride:i.data.length/i.size),i.divisor=i.instanced||0,i.needsUpdate=!1,i.usage=i.usage||this.gl.STATIC_DRAW,i.buffer||this.updateAttribute(i),i.divisor){if(this.isInstanced=!0,this.instancedCount&&this.instancedCount!==i.count*i.divisor)return console.warn("geometry has multiple instanced buffers of different length"),this.instancedCount=Math.min(this.instancedCount,i.count*i.divisor);this.instancedCount=i.count*i.divisor}else e==="index"?this.drawRange.count=i.count:this.attributes.index||(this.drawRange.count=Math.max(this.drawRange.count,i.count))}updateAttribute(e){const i=!e.buffer;i&&(e.buffer=this.gl.createBuffer()),this.glState.boundBuffer!==e.buffer&&(this.gl.bindBuffer(e.target,e.buffer),this.glState.boundBuffer=e.buffer),i?this.gl.bufferData(e.target,e.data,e.usage):this.gl.bufferSubData(e.target,0,e.data),e.needsUpdate=!1}setIndex(e){this.addAttribute("index",e)}setDrawRange(e,i){this.drawRange.start=e,this.drawRange.count=i}setInstancedCount(e){this.instancedCount=e}createVAO(e){this.VAOs[e.attributeOrder]=this.gl.renderer.createVertexArray(),this.gl.renderer.bindVertexArray(this.VAOs[e.attributeOrder]),this.bindAttributes(e)}bindAttributes(e){e.attributeLocations.forEach((i,{name:o,type:a})=>{if(!this.attributes[o]){console.warn(`active attribute ${o} not being supplied`);return}const f=this.attributes[o];this.gl.bindBuffer(f.target,f.buffer),this.glState.boundBuffer=f.buffer;let h=1;a===35674&&(h=2),a===35675&&(h=3),a===35676&&(h=4);const m=f.size/h,p=h===1?0:h*h*4,g=h===1?0:h*4;for(let v=0;v<h;v++)this.gl.vertexAttribPointer(i+v,m,f.type,f.normalized,f.stride+p,f.offset+v*g),this.gl.enableVertexAttribArray(i+v),this.gl.renderer.vertexAttribDivisor(i+v,f.divisor)}),this.attributes.index&&this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.attributes.index.buffer)}draw({program:e,mode:i=this.gl.TRIANGLES}){var a;this.gl.renderer.currentGeometry!==`${this.id}_${e.attributeOrder}`&&(this.VAOs[e.attributeOrder]||this.createVAO(e),this.gl.renderer.bindVertexArray(this.VAOs[e.attributeOrder]),this.gl.renderer.currentGeometry=`${this.id}_${e.attributeOrder}`),e.attributeLocations.forEach((f,{name:h})=>{const m=this.attributes[h];m.needsUpdate&&this.updateAttribute(m)});let o=2;((a=this.attributes.index)==null?void 0:a.type)===this.gl.UNSIGNED_INT&&(o=4),this.isInstanced?this.attributes.index?this.gl.renderer.drawElementsInstanced(i,this.drawRange.count,this.attributes.index.type,this.attributes.index.offset+this.drawRange.start*o,this.instancedCount):this.gl.renderer.drawArraysInstanced(i,this.drawRange.start,this.drawRange.count,this.instancedCount):this.attributes.index?this.gl.drawElements(i,this.drawRange.count,this.attributes.index.type,this.attributes.index.offset+this.drawRange.start*o):this.gl.drawArrays(i,this.drawRange.start,this.drawRange.count)}getPosition(){const e=this.attributes.position;if(e.data)return e;if(!rg)return console.warn("No position buffer data found to compute bounds"),rg=!0}computeBoundingBox(e){e||(e=this.getPosition());const i=e.data,o=e.size;this.bounds||(this.bounds={min:new xn,max:new xn,center:new xn,scale:new xn,radius:1/0});const a=this.bounds.min,f=this.bounds.max,h=this.bounds.center,m=this.bounds.scale;a.set(1/0),f.set(-1/0);for(let p=0,g=i.length;p<g;p+=o){const v=i[p],x=i[p+1],S=i[p+2];a.x=Math.min(v,a.x),a.y=Math.min(x,a.y),a.z=Math.min(S,a.z),f.x=Math.max(v,f.x),f.y=Math.max(x,f.y),f.z=Math.max(S,f.z)}m.sub(f,a),h.add(a,f).divide(2)}computeBoundingSphere(e){e||(e=this.getPosition());const i=e.data,o=e.size;this.bounds||this.computeBoundingBox(e);let a=0;for(let f=0,h=i.length;f<h;f+=o)ag.fromArray(i,f),a=Math.max(a,this.bounds.center.squaredDistance(ag));this.bounds.radius=Math.sqrt(a)}remove(){for(let e in this.VAOs)this.gl.renderer.deleteVertexArray(this.VAOs[e]),delete this.VAOs[e];for(let e in this.attributes)this.gl.deleteBuffer(this.attributes[e].buffer),delete this.attributes[e]}}let bA=1;const ug={};class wA{constructor(e,{vertex:i,fragment:o,uniforms:a={},transparent:f=!1,cullFace:h=e.BACK,frontFace:m=e.CCW,depthTest:p=!0,depthWrite:g=!0,depthFunc:v=e.LEQUAL}={}){e.canvas||console.error("gl not passed as first argument to Program"),this.gl=e,this.uniforms=a,this.id=bA++,i||console.warn("vertex shader not supplied"),o||console.warn("fragment shader not supplied"),this.transparent=f,this.cullFace=h,this.frontFace=m,this.depthTest=p,this.depthWrite=g,this.depthFunc=v,this.blendFunc={},this.blendEquation={},this.stencilFunc={},this.stencilOp={},this.transparent&&!this.blendFunc.src&&(this.gl.renderer.premultipliedAlpha?this.setBlendFunc(this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA):this.setBlendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA)),this.vertexShader=e.createShader(e.VERTEX_SHADER),this.fragmentShader=e.createShader(e.FRAGMENT_SHADER),this.program=e.createProgram(),e.attachShader(this.program,this.vertexShader),e.attachShader(this.program,this.fragmentShader),this.setShaders({vertex:i,fragment:o})}setShaders({vertex:e,fragment:i}){if(e&&(this.gl.shaderSource(this.vertexShader,e),this.gl.compileShader(this.vertexShader),this.gl.getShaderInfoLog(this.vertexShader)!==""&&console.warn(`${this.gl.getShaderInfoLog(this.vertexShader)}
Vertex Shader
${cg(e)}`)),i&&(this.gl.shaderSource(this.fragmentShader,i),this.gl.compileShader(this.fragmentShader),this.gl.getShaderInfoLog(this.fragmentShader)!==""&&console.warn(`${this.gl.getShaderInfoLog(this.fragmentShader)}
Fragment Shader
${cg(i)}`)),this.gl.linkProgram(this.program),!this.gl.getProgramParameter(this.program,this.gl.LINK_STATUS))return console.warn(this.gl.getProgramInfoLog(this.program));this.uniformLocations=new Map;let o=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_UNIFORMS);for(let h=0;h<o;h++){let m=this.gl.getActiveUniform(this.program,h);this.uniformLocations.set(m,this.gl.getUniformLocation(this.program,m.name));const p=m.name.match(/(\w+)/g);m.uniformName=p[0],m.nameComponents=p.slice(1)}this.attributeLocations=new Map;const a=[],f=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES);for(let h=0;h<f;h++){const m=this.gl.getActiveAttrib(this.program,h),p=this.gl.getAttribLocation(this.program,m.name);p!==-1&&(a[p]=m.name,this.attributeLocations.set(m,p))}this.attributeOrder=a.join("")}setBlendFunc(e,i,o,a){this.blendFunc.src=e,this.blendFunc.dst=i,this.blendFunc.srcAlpha=o,this.blendFunc.dstAlpha=a,e&&(this.transparent=!0)}setBlendEquation(e,i){this.blendEquation.modeRGB=e,this.blendEquation.modeAlpha=i}setStencilFunc(e,i,o){this.stencilRef=i,this.stencilFunc.func=e,this.stencilFunc.ref=i,this.stencilFunc.mask=o}setStencilOp(e,i,o){this.stencilOp.stencilFail=e,this.stencilOp.depthFail=i,this.stencilOp.depthPass=o}applyState(){this.depthTest?this.gl.renderer.enable(this.gl.DEPTH_TEST):this.gl.renderer.disable(this.gl.DEPTH_TEST),this.cullFace?this.gl.renderer.enable(this.gl.CULL_FACE):this.gl.renderer.disable(this.gl.CULL_FACE),this.blendFunc.src?this.gl.renderer.enable(this.gl.BLEND):this.gl.renderer.disable(this.gl.BLEND),this.cullFace&&this.gl.renderer.setCullFace(this.cullFace),this.gl.renderer.setFrontFace(this.frontFace),this.gl.renderer.setDepthMask(this.depthWrite),this.gl.renderer.setDepthFunc(this.depthFunc),this.blendFunc.src&&this.gl.renderer.setBlendFunc(this.blendFunc.src,this.blendFunc.dst,this.blendFunc.srcAlpha,this.blendFunc.dstAlpha),this.gl.renderer.setBlendEquation(this.blendEquation.modeRGB,this.blendEquation.modeAlpha),this.stencilFunc.func||this.stencilOp.stencilFail?this.gl.renderer.enable(this.gl.STENCIL_TEST):this.gl.renderer.disable(this.gl.STENCIL_TEST),this.gl.renderer.setStencilFunc(this.stencilFunc.func,this.stencilFunc.ref,this.stencilFunc.mask),this.gl.renderer.setStencilOp(this.stencilOp.stencilFail,this.stencilOp.depthFail,this.stencilOp.depthPass)}use({flipFaces:e=!1}={}){let i=-1;this.gl.renderer.state.currentProgram===this.id||(this.gl.useProgram(this.program),this.gl.renderer.state.currentProgram=this.id),this.uniformLocations.forEach((a,f)=>{let h=this.uniforms[f.uniformName];for(const m of f.nameComponents){if(!h)break;if(m in h)h=h[m];else{if(Array.isArray(h.value))break;h=void 0;break}}if(!h)return fg(`Active uniform ${f.name} has not been supplied`);if(h&&h.value===void 0)return fg(`${f.name} uniform is missing a value parameter`);if(h.value.texture)return i=i+1,h.value.update(i),Eu(this.gl,f.type,a,i);if(h.value.length&&h.value[0].texture){const m=[];return h.value.forEach(p=>{i=i+1,p.update(i),m.push(i)}),Eu(this.gl,f.type,a,m)}Eu(this.gl,f.type,a,h.value)}),this.applyState(),e&&this.gl.renderer.setFrontFace(this.frontFace===this.gl.CCW?this.gl.CW:this.gl.CCW)}remove(){this.gl.deleteProgram(this.program)}}function Eu(t,e,i,o){o=o.length?DA(o):o;const a=t.renderer.state.uniformLocations.get(i);if(o.length)if(a===void 0||a.length!==o.length)t.renderer.state.uniformLocations.set(i,o.slice(0));else{if(LA(a,o))return;a.set?a.set(o):UA(a,o),t.renderer.state.uniformLocations.set(i,a)}else{if(a===o)return;t.renderer.state.uniformLocations.set(i,o)}switch(e){case 5126:return o.length?t.uniform1fv(i,o):t.uniform1f(i,o);case 35664:return t.uniform2fv(i,o);case 35665:return t.uniform3fv(i,o);case 35666:return t.uniform4fv(i,o);case 35670:case 5124:case 35678:case 36306:case 35680:case 36289:return o.length?t.uniform1iv(i,o):t.uniform1i(i,o);case 35671:case 35667:return t.uniform2iv(i,o);case 35672:case 35668:return t.uniform3iv(i,o);case 35673:case 35669:return t.uniform4iv(i,o);case 35674:return t.uniformMatrix2fv(i,!1,o);case 35675:return t.uniformMatrix3fv(i,!1,o);case 35676:return t.uniformMatrix4fv(i,!1,o)}}function cg(t){let e=t.split(`
`);for(let i=0;i<e.length;i++)e[i]=i+1+": "+e[i];return e.join(`
`)}function DA(t){const e=t.length,i=t[0].length;if(i===void 0)return t;const o=e*i;let a=ug[o];a||(ug[o]=a=new Float32Array(o));for(let f=0;f<e;f++)a.set(t[f],f*i);return a}function LA(t,e){if(t.length!==e.length)return!1;for(let i=0,o=t.length;i<o;i++)if(t[i]!==e[i])return!1;return!0}function UA(t,e){for(let i=0,o=t.length;i<o;i++)t[i]=e[i]}let Mu=0;function fg(t){Mu>100||(console.warn(t),Mu++,Mu>100&&console.warn("More than 100 program warnings - stopping logs."))}const _u=new xn;let IA=1;class kA{constructor({canvas:e=document.createElement("canvas"),width:i=300,height:o=150,dpr:a=1,alpha:f=!1,depth:h=!0,stencil:m=!1,antialias:p=!1,premultipliedAlpha:g=!1,preserveDrawingBuffer:v=!1,powerPreference:x="default",autoClear:S=!0,webgl:M=2}={}){const w={alpha:f,depth:h,stencil:m,antialias:p,premultipliedAlpha:g,preserveDrawingBuffer:v,powerPreference:x};this.dpr=a,this.alpha=f,this.color=!0,this.depth=h,this.stencil=m,this.premultipliedAlpha=g,this.autoClear=S,this.id=IA++,M===2&&(this.gl=e.getContext("webgl2",w)),this.isWebgl2=!!this.gl,this.gl||(this.gl=e.getContext("webgl",w)),this.gl||console.error("unable to create webgl context"),this.gl.renderer=this,this.setSize(i,o),this.state={},this.state.blendFunc={src:this.gl.ONE,dst:this.gl.ZERO},this.state.blendEquation={modeRGB:this.gl.FUNC_ADD},this.state.cullFace=!1,this.state.frontFace=this.gl.CCW,this.state.depthMask=!0,this.state.depthFunc=this.gl.LEQUAL,this.state.premultiplyAlpha=!1,this.state.flipY=!1,this.state.unpackAlignment=4,this.state.framebuffer=null,this.state.viewport={x:0,y:0,width:null,height:null},this.state.textureUnits=[],this.state.activeTextureUnit=0,this.state.boundBuffer=null,this.state.uniformLocations=new Map,this.state.currentProgram=null,this.extensions={},this.isWebgl2?(this.getExtension("EXT_color_buffer_float"),this.getExtension("OES_texture_float_linear")):(this.getExtension("OES_texture_float"),this.getExtension("OES_texture_float_linear"),this.getExtension("OES_texture_half_float"),this.getExtension("OES_texture_half_float_linear"),this.getExtension("OES_element_index_uint"),this.getExtension("OES_standard_derivatives"),this.getExtension("EXT_sRGB"),this.getExtension("WEBGL_depth_texture"),this.getExtension("WEBGL_draw_buffers")),this.getExtension("WEBGL_compressed_texture_astc"),this.getExtension("EXT_texture_compression_bptc"),this.getExtension("WEBGL_compressed_texture_s3tc"),this.getExtension("WEBGL_compressed_texture_etc1"),this.getExtension("WEBGL_compressed_texture_pvrtc"),this.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),this.vertexAttribDivisor=this.getExtension("ANGLE_instanced_arrays","vertexAttribDivisor","vertexAttribDivisorANGLE"),this.drawArraysInstanced=this.getExtension("ANGLE_instanced_arrays","drawArraysInstanced","drawArraysInstancedANGLE"),this.drawElementsInstanced=this.getExtension("ANGLE_instanced_arrays","drawElementsInstanced","drawElementsInstancedANGLE"),this.createVertexArray=this.getExtension("OES_vertex_array_object","createVertexArray","createVertexArrayOES"),this.bindVertexArray=this.getExtension("OES_vertex_array_object","bindVertexArray","bindVertexArrayOES"),this.deleteVertexArray=this.getExtension("OES_vertex_array_object","deleteVertexArray","deleteVertexArrayOES"),this.drawBuffers=this.getExtension("WEBGL_draw_buffers","drawBuffers","drawBuffersWEBGL"),this.parameters={},this.parameters.maxTextureUnits=this.gl.getParameter(this.gl.MAX_COMBINED_TEXTURE_IMAGE_UNITS),this.parameters.maxAnisotropy=this.getExtension("EXT_texture_filter_anisotropic")?this.gl.getParameter(this.getExtension("EXT_texture_filter_anisotropic").MAX_TEXTURE_MAX_ANISOTROPY_EXT):0}setSize(e,i){this.width=e,this.height=i,this.gl.canvas.width=e*this.dpr,this.gl.canvas.height=i*this.dpr,this.gl.canvas.style&&Object.assign(this.gl.canvas.style,{width:e+"px",height:i+"px"})}setViewport(e,i,o=0,a=0){this.state.viewport.width===e&&this.state.viewport.height===i||(this.state.viewport.width=e,this.state.viewport.height=i,this.state.viewport.x=o,this.state.viewport.y=a,this.gl.viewport(o,a,e,i))}setScissor(e,i,o=0,a=0){this.gl.scissor(o,a,e,i)}enable(e){this.state[e]!==!0&&(this.gl.enable(e),this.state[e]=!0)}disable(e){this.state[e]!==!1&&(this.gl.disable(e),this.state[e]=!1)}setBlendFunc(e,i,o,a){this.state.blendFunc.src===e&&this.state.blendFunc.dst===i&&this.state.blendFunc.srcAlpha===o&&this.state.blendFunc.dstAlpha===a||(this.state.blendFunc.src=e,this.state.blendFunc.dst=i,this.state.blendFunc.srcAlpha=o,this.state.blendFunc.dstAlpha=a,o!==void 0?this.gl.blendFuncSeparate(e,i,o,a):this.gl.blendFunc(e,i))}setBlendEquation(e,i){e=e||this.gl.FUNC_ADD,!(this.state.blendEquation.modeRGB===e&&this.state.blendEquation.modeAlpha===i)&&(this.state.blendEquation.modeRGB=e,this.state.blendEquation.modeAlpha=i,i!==void 0?this.gl.blendEquationSeparate(e,i):this.gl.blendEquation(e))}setCullFace(e){this.state.cullFace!==e&&(this.state.cullFace=e,this.gl.cullFace(e))}setFrontFace(e){this.state.frontFace!==e&&(this.state.frontFace=e,this.gl.frontFace(e))}setDepthMask(e){this.state.depthMask!==e&&(this.state.depthMask=e,this.gl.depthMask(e))}setDepthFunc(e){this.state.depthFunc!==e&&(this.state.depthFunc=e,this.gl.depthFunc(e))}setStencilMask(e){this.state.stencilMask!==e&&(this.state.stencilMask=e,this.gl.stencilMask(e))}setStencilFunc(e,i,o){this.state.stencilFunc===e&&this.state.stencilRef===i&&this.state.stencilFuncMask===o||(this.state.stencilFunc=e||this.gl.ALWAYS,this.state.stencilRef=i||0,this.state.stencilFuncMask=o||0,this.gl.stencilFunc(e||this.gl.ALWAYS,i||0,o||0))}setStencilOp(e,i,o){this.state.stencilFail===e&&this.state.stencilDepthFail===i&&this.state.stencilDepthPass===o||(this.state.stencilFail=e,this.state.stencilDepthFail=i,this.state.stencilDepthPass=o,this.gl.stencilOp(e,i,o))}activeTexture(e){this.state.activeTextureUnit!==e&&(this.state.activeTextureUnit=e,this.gl.activeTexture(this.gl.TEXTURE0+e))}bindFramebuffer({target:e=this.gl.FRAMEBUFFER,buffer:i=null}={}){this.state.framebuffer!==i&&(this.state.framebuffer=i,this.gl.bindFramebuffer(e,i))}getExtension(e,i,o){return i&&this.gl[i]?this.gl[i].bind(this.gl):(this.extensions[e]||(this.extensions[e]=this.gl.getExtension(e)),i?this.extensions[e]?this.extensions[e][o].bind(this.extensions[e]):null:this.extensions[e])}sortOpaque(e,i){return e.renderOrder!==i.renderOrder?e.renderOrder-i.renderOrder:e.program.id!==i.program.id?e.program.id-i.program.id:e.zDepth!==i.zDepth?e.zDepth-i.zDepth:i.id-e.id}sortTransparent(e,i){return e.renderOrder!==i.renderOrder?e.renderOrder-i.renderOrder:e.zDepth!==i.zDepth?i.zDepth-e.zDepth:i.id-e.id}sortUI(e,i){return e.renderOrder!==i.renderOrder?e.renderOrder-i.renderOrder:e.program.id!==i.program.id?e.program.id-i.program.id:i.id-e.id}getRenderList({scene:e,camera:i,frustumCull:o,sort:a}){let f=[];if(i&&o&&i.updateFrustum(),e.traverse(h=>{if(!h.visible)return!0;h.draw&&(o&&h.frustumCulled&&i&&!i.frustumIntersectsMesh(h)||f.push(h))}),a){const h=[],m=[],p=[];f.forEach(g=>{g.program.transparent?g.program.depthTest?m.push(g):p.push(g):h.push(g),g.zDepth=0,!(g.renderOrder!==0||!g.program.depthTest||!i)&&(g.worldMatrix.getTranslation(_u),_u.applyMatrix4(i.projectionViewMatrix),g.zDepth=_u.z)}),h.sort(this.sortOpaque),m.sort(this.sortTransparent),p.sort(this.sortUI),f=h.concat(m,p)}return f}render({scene:e,camera:i,target:o=null,update:a=!0,sort:f=!0,frustumCull:h=!0,clear:m}){o===null?(this.bindFramebuffer(),this.setViewport(this.width*this.dpr,this.height*this.dpr)):(this.bindFramebuffer(o),this.setViewport(o.width,o.height)),(m||this.autoClear&&m!==!1)&&(this.depth&&(!o||o.depth)&&(this.enable(this.gl.DEPTH_TEST),this.setDepthMask(!0)),(this.stencil||!o||o.stencil)&&(this.enable(this.gl.STENCIL_TEST),this.setStencilMask(255)),this.gl.clear((this.color?this.gl.COLOR_BUFFER_BIT:0)|(this.depth?this.gl.DEPTH_BUFFER_BIT:0)|(this.stencil?this.gl.STENCIL_BUFFER_BIT:0))),a&&e.updateMatrixWorld(),i&&i.updateMatrixWorld(),this.getRenderList({scene:e,camera:i,frustumCull:h,sort:f}).forEach(g=>{g.draw({camera:i})})}}function BA(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function PA(t,e,i,o,a){return t[0]=e,t[1]=i,t[2]=o,t[3]=a,t}function VA(t,e){let i=e[0],o=e[1],a=e[2],f=e[3],h=i*i+o*o+a*a+f*f;return h>0&&(h=1/Math.sqrt(h)),t[0]=i*h,t[1]=o*h,t[2]=a*h,t[3]=f*h,t}function qA(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function GA(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function HA(t,e,i){i=i*.5;let o=Math.sin(i);return t[0]=o*e[0],t[1]=o*e[1],t[2]=o*e[2],t[3]=Math.cos(i),t}function dg(t,e,i){let o=e[0],a=e[1],f=e[2],h=e[3],m=i[0],p=i[1],g=i[2],v=i[3];return t[0]=o*v+h*m+a*g-f*p,t[1]=a*v+h*p+f*m-o*g,t[2]=f*v+h*g+o*p-a*m,t[3]=h*v-o*m-a*p-f*g,t}function zA(t,e,i){i*=.5;let o=e[0],a=e[1],f=e[2],h=e[3],m=Math.sin(i),p=Math.cos(i);return t[0]=o*p+h*m,t[1]=a*p+f*m,t[2]=f*p-a*m,t[3]=h*p-o*m,t}function FA(t,e,i){i*=.5;let o=e[0],a=e[1],f=e[2],h=e[3],m=Math.sin(i),p=Math.cos(i);return t[0]=o*p-f*m,t[1]=a*p+h*m,t[2]=f*p+o*m,t[3]=h*p-a*m,t}function OA(t,e,i){i*=.5;let o=e[0],a=e[1],f=e[2],h=e[3],m=Math.sin(i),p=Math.cos(i);return t[0]=o*p+a*m,t[1]=a*p-o*m,t[2]=f*p+h*m,t[3]=h*p-f*m,t}function YA(t,e,i,o){let a=e[0],f=e[1],h=e[2],m=e[3],p=i[0],g=i[1],v=i[2],x=i[3],S,M,w,D,k;return M=a*p+f*g+h*v+m*x,M<0&&(M=-M,p=-p,g=-g,v=-v,x=-x),1-M>1e-6?(S=Math.acos(M),w=Math.sin(S),D=Math.sin((1-o)*S)/w,k=Math.sin(o*S)/w):(D=1-o,k=o),t[0]=D*a+k*p,t[1]=D*f+k*g,t[2]=D*h+k*v,t[3]=D*m+k*x,t}function JA(t,e){let i=e[0],o=e[1],a=e[2],f=e[3],h=i*i+o*o+a*a+f*f,m=h?1/h:0;return t[0]=-i*m,t[1]=-o*m,t[2]=-a*m,t[3]=f*m,t}function $A(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function XA(t,e){let i=e[0]+e[4]+e[8],o;if(i>0)o=Math.sqrt(i+1),t[3]=.5*o,o=.5/o,t[0]=(e[5]-e[7])*o,t[1]=(e[6]-e[2])*o,t[2]=(e[1]-e[3])*o;else{let a=0;e[4]>e[0]&&(a=1),e[8]>e[a*3+a]&&(a=2);let f=(a+1)%3,h=(a+2)%3;o=Math.sqrt(e[a*3+a]-e[f*3+f]-e[h*3+h]+1),t[a]=.5*o,o=.5/o,t[3]=(e[f*3+h]-e[h*3+f])*o,t[f]=(e[f*3+a]+e[a*3+f])*o,t[h]=(e[h*3+a]+e[a*3+h])*o}return t}function KA(t,e,i="YXZ"){let o=Math.sin(e[0]*.5),a=Math.cos(e[0]*.5),f=Math.sin(e[1]*.5),h=Math.cos(e[1]*.5),m=Math.sin(e[2]*.5),p=Math.cos(e[2]*.5);return i==="XYZ"?(t[0]=o*h*p+a*f*m,t[1]=a*f*p-o*h*m,t[2]=a*h*m+o*f*p,t[3]=a*h*p-o*f*m):i==="YXZ"?(t[0]=o*h*p+a*f*m,t[1]=a*f*p-o*h*m,t[2]=a*h*m-o*f*p,t[3]=a*h*p+o*f*m):i==="ZXY"?(t[0]=o*h*p-a*f*m,t[1]=a*f*p+o*h*m,t[2]=a*h*m+o*f*p,t[3]=a*h*p-o*f*m):i==="ZYX"?(t[0]=o*h*p-a*f*m,t[1]=a*f*p+o*h*m,t[2]=a*h*m-o*f*p,t[3]=a*h*p+o*f*m):i==="YZX"?(t[0]=o*h*p+a*f*m,t[1]=a*f*p+o*h*m,t[2]=a*h*m-o*f*p,t[3]=a*h*p-o*f*m):i==="XZY"&&(t[0]=o*h*p-a*f*m,t[1]=a*f*p-o*h*m,t[2]=a*h*m+o*f*p,t[3]=a*h*p+o*f*m),t}const QA=BA,ZA=PA,WA=qA,jA=VA;class e2 extends Array{constructor(e=0,i=0,o=0,a=1){super(e,i,o,a),this.onChange=()=>{},this._target=this;const f=["0","1","2","3"];return new Proxy(this,{set(h,m){const p=Reflect.set(...arguments);return p&&f.includes(m)&&h.onChange(),p}})}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}get w(){return this[3]}set x(e){this._target[0]=e,this.onChange()}set y(e){this._target[1]=e,this.onChange()}set z(e){this._target[2]=e,this.onChange()}set w(e){this._target[3]=e,this.onChange()}identity(){return GA(this._target),this.onChange(),this}set(e,i,o,a){return e.length?this.copy(e):(ZA(this._target,e,i,o,a),this.onChange(),this)}rotateX(e){return zA(this._target,this._target,e),this.onChange(),this}rotateY(e){return FA(this._target,this._target,e),this.onChange(),this}rotateZ(e){return OA(this._target,this._target,e),this.onChange(),this}inverse(e=this._target){return JA(this._target,e),this.onChange(),this}conjugate(e=this._target){return $A(this._target,e),this.onChange(),this}copy(e){return QA(this._target,e),this.onChange(),this}normalize(e=this._target){return jA(this._target,e),this.onChange(),this}multiply(e,i){return i?dg(this._target,e,i):dg(this._target,this._target,e),this.onChange(),this}dot(e){return WA(this._target,e)}fromMatrix3(e){return XA(this._target,e),this.onChange(),this}fromEuler(e,i){return KA(this._target,e,e.order),i||this.onChange(),this}fromAxisAngle(e,i){return HA(this._target,e,i),this.onChange(),this}slerp(e,i){return YA(this._target,this._target,e,i),this.onChange(),this}fromArray(e,i=0){return this._target[0]=e[i],this._target[1]=e[i+1],this._target[2]=e[i+2],this._target[3]=e[i+3],this.onChange(),this}toArray(e=[],i=0){return e[i]=this[0],e[i+1]=this[1],e[i+2]=this[2],e[i+3]=this[3],e}}const t2=1e-6;function n2(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function i2(t,e,i,o,a,f,h,m,p,g,v,x,S,M,w,D,k){return t[0]=e,t[1]=i,t[2]=o,t[3]=a,t[4]=f,t[5]=h,t[6]=m,t[7]=p,t[8]=g,t[9]=v,t[10]=x,t[11]=S,t[12]=M,t[13]=w,t[14]=D,t[15]=k,t}function l2(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function o2(t,e){let i=e[0],o=e[1],a=e[2],f=e[3],h=e[4],m=e[5],p=e[6],g=e[7],v=e[8],x=e[9],S=e[10],M=e[11],w=e[12],D=e[13],k=e[14],q=e[15],N=i*m-o*h,F=i*p-a*h,X=i*g-f*h,G=o*p-a*m,$=o*g-f*m,ie=a*g-f*p,se=v*D-x*w,ne=v*k-S*w,he=v*q-M*w,me=x*k-S*D,pe=x*q-M*D,Oe=S*q-M*k,ye=N*Oe-F*pe+X*me+G*he-$*ne+ie*se;return ye?(ye=1/ye,t[0]=(m*Oe-p*pe+g*me)*ye,t[1]=(a*pe-o*Oe-f*me)*ye,t[2]=(D*ie-k*$+q*G)*ye,t[3]=(S*$-x*ie-M*G)*ye,t[4]=(p*he-h*Oe-g*ne)*ye,t[5]=(i*Oe-a*he+f*ne)*ye,t[6]=(k*X-w*ie-q*F)*ye,t[7]=(v*ie-S*X+M*F)*ye,t[8]=(h*pe-m*he+g*se)*ye,t[9]=(o*he-i*pe-f*se)*ye,t[10]=(w*$-D*X+q*N)*ye,t[11]=(x*X-v*$-M*N)*ye,t[12]=(m*ne-h*me-p*se)*ye,t[13]=(i*me-o*ne+a*se)*ye,t[14]=(D*F-w*G-k*N)*ye,t[15]=(v*G-x*F+S*N)*ye,t):null}function ep(t){let e=t[0],i=t[1],o=t[2],a=t[3],f=t[4],h=t[5],m=t[6],p=t[7],g=t[8],v=t[9],x=t[10],S=t[11],M=t[12],w=t[13],D=t[14],k=t[15],q=e*h-i*f,N=e*m-o*f,F=e*p-a*f,X=i*m-o*h,G=i*p-a*h,$=o*p-a*m,ie=g*w-v*M,se=g*D-x*M,ne=g*k-S*M,he=v*D-x*w,me=v*k-S*w,pe=x*k-S*D;return q*pe-N*me+F*he+X*ne-G*se+$*ie}function hg(t,e,i){let o=e[0],a=e[1],f=e[2],h=e[3],m=e[4],p=e[5],g=e[6],v=e[7],x=e[8],S=e[9],M=e[10],w=e[11],D=e[12],k=e[13],q=e[14],N=e[15],F=i[0],X=i[1],G=i[2],$=i[3];return t[0]=F*o+X*m+G*x+$*D,t[1]=F*a+X*p+G*S+$*k,t[2]=F*f+X*g+G*M+$*q,t[3]=F*h+X*v+G*w+$*N,F=i[4],X=i[5],G=i[6],$=i[7],t[4]=F*o+X*m+G*x+$*D,t[5]=F*a+X*p+G*S+$*k,t[6]=F*f+X*g+G*M+$*q,t[7]=F*h+X*v+G*w+$*N,F=i[8],X=i[9],G=i[10],$=i[11],t[8]=F*o+X*m+G*x+$*D,t[9]=F*a+X*p+G*S+$*k,t[10]=F*f+X*g+G*M+$*q,t[11]=F*h+X*v+G*w+$*N,F=i[12],X=i[13],G=i[14],$=i[15],t[12]=F*o+X*m+G*x+$*D,t[13]=F*a+X*p+G*S+$*k,t[14]=F*f+X*g+G*M+$*q,t[15]=F*h+X*v+G*w+$*N,t}function s2(t,e,i){let o=i[0],a=i[1],f=i[2],h,m,p,g,v,x,S,M,w,D,k,q;return e===t?(t[12]=e[0]*o+e[4]*a+e[8]*f+e[12],t[13]=e[1]*o+e[5]*a+e[9]*f+e[13],t[14]=e[2]*o+e[6]*a+e[10]*f+e[14],t[15]=e[3]*o+e[7]*a+e[11]*f+e[15]):(h=e[0],m=e[1],p=e[2],g=e[3],v=e[4],x=e[5],S=e[6],M=e[7],w=e[8],D=e[9],k=e[10],q=e[11],t[0]=h,t[1]=m,t[2]=p,t[3]=g,t[4]=v,t[5]=x,t[6]=S,t[7]=M,t[8]=w,t[9]=D,t[10]=k,t[11]=q,t[12]=h*o+v*a+w*f+e[12],t[13]=m*o+x*a+D*f+e[13],t[14]=p*o+S*a+k*f+e[14],t[15]=g*o+M*a+q*f+e[15]),t}function a2(t,e,i){let o=i[0],a=i[1],f=i[2];return t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o,t[3]=e[3]*o,t[4]=e[4]*a,t[5]=e[5]*a,t[6]=e[6]*a,t[7]=e[7]*a,t[8]=e[8]*f,t[9]=e[9]*f,t[10]=e[10]*f,t[11]=e[11]*f,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function r2(t,e,i,o){let a=o[0],f=o[1],h=o[2],m=Math.hypot(a,f,h),p,g,v,x,S,M,w,D,k,q,N,F,X,G,$,ie,se,ne,he,me,pe,Oe,ye,qe;return Math.abs(m)<t2?null:(m=1/m,a*=m,f*=m,h*=m,p=Math.sin(i),g=Math.cos(i),v=1-g,x=e[0],S=e[1],M=e[2],w=e[3],D=e[4],k=e[5],q=e[6],N=e[7],F=e[8],X=e[9],G=e[10],$=e[11],ie=a*a*v+g,se=f*a*v+h*p,ne=h*a*v-f*p,he=a*f*v-h*p,me=f*f*v+g,pe=h*f*v+a*p,Oe=a*h*v+f*p,ye=f*h*v-a*p,qe=h*h*v+g,t[0]=x*ie+D*se+F*ne,t[1]=S*ie+k*se+X*ne,t[2]=M*ie+q*se+G*ne,t[3]=w*ie+N*se+$*ne,t[4]=x*he+D*me+F*pe,t[5]=S*he+k*me+X*pe,t[6]=M*he+q*me+G*pe,t[7]=w*he+N*me+$*pe,t[8]=x*Oe+D*ye+F*qe,t[9]=S*Oe+k*ye+X*qe,t[10]=M*Oe+q*ye+G*qe,t[11]=w*Oe+N*ye+$*qe,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function u2(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function tp(t,e){let i=e[0],o=e[1],a=e[2],f=e[4],h=e[5],m=e[6],p=e[8],g=e[9],v=e[10];return t[0]=Math.hypot(i,o,a),t[1]=Math.hypot(f,h,m),t[2]=Math.hypot(p,g,v),t}function c2(t){let e=t[0],i=t[1],o=t[2],a=t[4],f=t[5],h=t[6],m=t[8],p=t[9],g=t[10];const v=e*e+i*i+o*o,x=a*a+f*f+h*h,S=m*m+p*p+g*g;return Math.sqrt(Math.max(v,x,S))}const np=function(){const t=[1,1,1];return function(e,i){let o=t;tp(o,i);let a=1/o[0],f=1/o[1],h=1/o[2],m=i[0]*a,p=i[1]*f,g=i[2]*h,v=i[4]*a,x=i[5]*f,S=i[6]*h,M=i[8]*a,w=i[9]*f,D=i[10]*h,k=m+x+D,q=0;return k>0?(q=Math.sqrt(k+1)*2,e[3]=.25*q,e[0]=(S-w)/q,e[1]=(M-g)/q,e[2]=(p-v)/q):m>x&&m>D?(q=Math.sqrt(1+m-x-D)*2,e[3]=(S-w)/q,e[0]=.25*q,e[1]=(p+v)/q,e[2]=(M+g)/q):x>D?(q=Math.sqrt(1+x-m-D)*2,e[3]=(M-g)/q,e[0]=(p+v)/q,e[1]=.25*q,e[2]=(S+w)/q):(q=Math.sqrt(1+D-m-x)*2,e[3]=(p-v)/q,e[0]=(M+g)/q,e[1]=(S+w)/q,e[2]=.25*q),e}}();function f2(t,e,i,o){let a=Uo([t[0],t[1],t[2]]);const f=Uo([t[4],t[5],t[6]]),h=Uo([t[8],t[9],t[10]]);ep(t)<0&&(a=-a),i[0]=t[12],i[1]=t[13],i[2]=t[14];const p=t.slice(),g=1/a,v=1/f,x=1/h;p[0]*=g,p[1]*=g,p[2]*=g,p[4]*=v,p[5]*=v,p[6]*=v,p[8]*=x,p[9]*=x,p[10]*=x,np(e,p),o[0]=a,o[1]=f,o[2]=h}function d2(t,e,i,o){const a=t,f=e[0],h=e[1],m=e[2],p=e[3],g=f+f,v=h+h,x=m+m,S=f*g,M=f*v,w=f*x,D=h*v,k=h*x,q=m*x,N=p*g,F=p*v,X=p*x,G=o[0],$=o[1],ie=o[2];return a[0]=(1-(D+q))*G,a[1]=(M+X)*G,a[2]=(w-F)*G,a[3]=0,a[4]=(M-X)*$,a[5]=(1-(S+q))*$,a[6]=(k+N)*$,a[7]=0,a[8]=(w+F)*ie,a[9]=(k-N)*ie,a[10]=(1-(S+D))*ie,a[11]=0,a[12]=i[0],a[13]=i[1],a[14]=i[2],a[15]=1,a}function h2(t,e){let i=e[0],o=e[1],a=e[2],f=e[3],h=i+i,m=o+o,p=a+a,g=i*h,v=o*h,x=o*m,S=a*h,M=a*m,w=a*p,D=f*h,k=f*m,q=f*p;return t[0]=1-x-w,t[1]=v+q,t[2]=S-k,t[3]=0,t[4]=v-q,t[5]=1-g-w,t[6]=M+D,t[7]=0,t[8]=S+k,t[9]=M-D,t[10]=1-g-x,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function m2(t,e,i,o,a){let f=1/Math.tan(e/2),h=1/(o-a);return t[0]=f/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=f,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(a+o)*h,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*a*o*h,t[15]=0,t}function g2(t,e,i,o,a,f,h){let m=1/(e-i),p=1/(o-a),g=1/(f-h);return t[0]=-2*m,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*p,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*g,t[11]=0,t[12]=(e+i)*m,t[13]=(a+o)*p,t[14]=(h+f)*g,t[15]=1,t}function p2(t,e,i,o){let a=e[0],f=e[1],h=e[2],m=o[0],p=o[1],g=o[2],v=a-i[0],x=f-i[1],S=h-i[2],M=v*v+x*x+S*S;M===0?S=1:(M=1/Math.sqrt(M),v*=M,x*=M,S*=M);let w=p*S-g*x,D=g*v-m*S,k=m*x-p*v;return M=w*w+D*D+k*k,M===0&&(g?m+=1e-6:p?g+=1e-6:p+=1e-6,w=p*S-g*x,D=g*v-m*S,k=m*x-p*v,M=w*w+D*D+k*k),M=1/Math.sqrt(M),w*=M,D*=M,k*=M,t[0]=w,t[1]=D,t[2]=k,t[3]=0,t[4]=x*k-S*D,t[5]=S*w-v*k,t[6]=v*D-x*w,t[7]=0,t[8]=v,t[9]=x,t[10]=S,t[11]=0,t[12]=a,t[13]=f,t[14]=h,t[15]=1,t}function mg(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t[6]=e[6]+i[6],t[7]=e[7]+i[7],t[8]=e[8]+i[8],t[9]=e[9]+i[9],t[10]=e[10]+i[10],t[11]=e[11]+i[11],t[12]=e[12]+i[12],t[13]=e[13]+i[13],t[14]=e[14]+i[14],t[15]=e[15]+i[15],t}function gg(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t[6]=e[6]-i[6],t[7]=e[7]-i[7],t[8]=e[8]-i[8],t[9]=e[9]-i[9],t[10]=e[10]-i[10],t[11]=e[11]-i[11],t[12]=e[12]-i[12],t[13]=e[13]-i[13],t[14]=e[14]-i[14],t[15]=e[15]-i[15],t}function y2(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*i,t[9]=e[9]*i,t[10]=e[10]*i,t[11]=e[11]*i,t[12]=e[12]*i,t[13]=e[13]*i,t[14]=e[14]*i,t[15]=e[15]*i,t}class ia extends Array{constructor(e=1,i=0,o=0,a=0,f=0,h=1,m=0,p=0,g=0,v=0,x=1,S=0,M=0,w=0,D=0,k=1){return super(e,i,o,a,f,h,m,p,g,v,x,S,M,w,D,k),this}get x(){return this[12]}get y(){return this[13]}get z(){return this[14]}get w(){return this[15]}set x(e){this[12]=e}set y(e){this[13]=e}set z(e){this[14]=e}set w(e){this[15]=e}set(e,i,o,a,f,h,m,p,g,v,x,S,M,w,D,k){return e.length?this.copy(e):(i2(this,e,i,o,a,f,h,m,p,g,v,x,S,M,w,D,k),this)}translate(e,i=this){return s2(this,i,e),this}rotate(e,i,o=this){return r2(this,o,e,i),this}scale(e,i=this){return a2(this,i,typeof e=="number"?[e,e,e]:e),this}add(e,i){return i?mg(this,e,i):mg(this,this,e),this}sub(e,i){return i?gg(this,e,i):gg(this,this,e),this}multiply(e,i){return e.length?i?hg(this,e,i):hg(this,this,e):y2(this,this,e),this}identity(){return l2(this),this}copy(e){return n2(this,e),this}fromPerspective({fov:e,aspect:i,near:o,far:a}={}){return m2(this,e,i,o,a),this}fromOrthogonal({left:e,right:i,bottom:o,top:a,near:f,far:h}){return g2(this,e,i,o,a,f,h),this}fromQuaternion(e){return h2(this,e),this}setPosition(e){return this.x=e[0],this.y=e[1],this.z=e[2],this}inverse(e=this){return o2(this,e),this}compose(e,i,o){return d2(this,e,i,o),this}decompose(e,i,o){return f2(this,e,i,o),this}getRotation(e){return np(e,this),this}getTranslation(e){return u2(e,this),this}getScaling(e){return tp(e,this),this}getMaxScaleOnAxis(){return c2(this)}lookAt(e,i,o){return p2(this,e,i,o),this}determinant(){return ep(this)}fromArray(e,i=0){return this[0]=e[i],this[1]=e[i+1],this[2]=e[i+2],this[3]=e[i+3],this[4]=e[i+4],this[5]=e[i+5],this[6]=e[i+6],this[7]=e[i+7],this[8]=e[i+8],this[9]=e[i+9],this[10]=e[i+10],this[11]=e[i+11],this[12]=e[i+12],this[13]=e[i+13],this[14]=e[i+14],this[15]=e[i+15],this}toArray(e=[],i=0){return e[i]=this[0],e[i+1]=this[1],e[i+2]=this[2],e[i+3]=this[3],e[i+4]=this[4],e[i+5]=this[5],e[i+6]=this[6],e[i+7]=this[7],e[i+8]=this[8],e[i+9]=this[9],e[i+10]=this[10],e[i+11]=this[11],e[i+12]=this[12],e[i+13]=this[13],e[i+14]=this[14],e[i+15]=this[15],e}}function v2(t,e,i="YXZ"){return i==="XYZ"?(t[1]=Math.asin(Math.min(Math.max(e[8],-1),1)),Math.abs(e[8])<.99999?(t[0]=Math.atan2(-e[9],e[10]),t[2]=Math.atan2(-e[4],e[0])):(t[0]=Math.atan2(e[6],e[5]),t[2]=0)):i==="YXZ"?(t[0]=Math.asin(-Math.min(Math.max(e[9],-1),1)),Math.abs(e[9])<.99999?(t[1]=Math.atan2(e[8],e[10]),t[2]=Math.atan2(e[1],e[5])):(t[1]=Math.atan2(-e[2],e[0]),t[2]=0)):i==="ZXY"?(t[0]=Math.asin(Math.min(Math.max(e[6],-1),1)),Math.abs(e[6])<.99999?(t[1]=Math.atan2(-e[2],e[10]),t[2]=Math.atan2(-e[4],e[5])):(t[1]=0,t[2]=Math.atan2(e[1],e[0]))):i==="ZYX"?(t[1]=Math.asin(-Math.min(Math.max(e[2],-1),1)),Math.abs(e[2])<.99999?(t[0]=Math.atan2(e[6],e[10]),t[2]=Math.atan2(e[1],e[0])):(t[0]=0,t[2]=Math.atan2(-e[4],e[5]))):i==="YZX"?(t[2]=Math.asin(Math.min(Math.max(e[1],-1),1)),Math.abs(e[1])<.99999?(t[0]=Math.atan2(-e[9],e[5]),t[1]=Math.atan2(-e[2],e[0])):(t[0]=0,t[1]=Math.atan2(e[8],e[10]))):i==="XZY"&&(t[2]=Math.asin(-Math.min(Math.max(e[4],-1),1)),Math.abs(e[4])<.99999?(t[0]=Math.atan2(e[6],e[5]),t[1]=Math.atan2(e[8],e[0])):(t[0]=Math.atan2(-e[9],e[10]),t[1]=0)),t}const pg=new ia;class T2 extends Array{constructor(e=0,i=e,o=e,a="YXZ"){super(e,i,o),this.order=a,this.onChange=()=>{},this._target=this;const f=["0","1","2"];return new Proxy(this,{set(h,m){const p=Reflect.set(...arguments);return p&&f.includes(m)&&h.onChange(),p}})}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}set x(e){this._target[0]=e,this.onChange()}set y(e){this._target[1]=e,this.onChange()}set z(e){this._target[2]=e,this.onChange()}set(e,i=e,o=e){return e.length?this.copy(e):(this._target[0]=e,this._target[1]=i,this._target[2]=o,this.onChange(),this)}copy(e){return this._target[0]=e[0],this._target[1]=e[1],this._target[2]=e[2],this.onChange(),this}reorder(e){return this._target.order=e,this.onChange(),this}fromRotationMatrix(e,i=this.order){return v2(this._target,e,i),this.onChange(),this}fromQuaternion(e,i=this.order,o){return pg.fromQuaternion(e),this._target.fromRotationMatrix(pg,i),o||this.onChange(),this}fromArray(e,i=0){return this._target[0]=e[i],this._target[1]=e[i+1],this._target[2]=e[i+2],this}toArray(e=[],i=0){return e[i]=this[0],e[i+1]=this[1],e[i+2]=this[2],e}}class x2{constructor(){this.parent=null,this.children=[],this.visible=!0,this.matrix=new ia,this.worldMatrix=new ia,this.matrixAutoUpdate=!0,this.worldMatrixNeedsUpdate=!1,this.position=new xn,this.quaternion=new e2,this.scale=new xn(1),this.rotation=new T2,this.up=new xn(0,1,0),this.rotation._target.onChange=()=>this.quaternion.fromEuler(this.rotation,!0),this.quaternion._target.onChange=()=>this.rotation.fromQuaternion(this.quaternion,void 0,!0)}setParent(e,i=!0){this.parent&&e!==this.parent&&this.parent.removeChild(this,!1),this.parent=e,i&&e&&e.addChild(this,!1)}addChild(e,i=!0){~this.children.indexOf(e)||this.children.push(e),i&&e.setParent(this,!1)}removeChild(e,i=!0){~this.children.indexOf(e)&&this.children.splice(this.children.indexOf(e),1),i&&e.setParent(null,!1)}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.worldMatrixNeedsUpdate||e)&&(this.parent===null?this.worldMatrix.copy(this.matrix):this.worldMatrix.multiply(this.parent.worldMatrix,this.matrix),this.worldMatrixNeedsUpdate=!1,e=!0);for(let i=0,o=this.children.length;i<o;i++)this.children[i].updateMatrixWorld(e)}updateMatrix(){this.matrix.compose(this.quaternion,this.position,this.scale),this.worldMatrixNeedsUpdate=!0}traverse(e){if(!e(this))for(let i=0,o=this.children.length;i<o;i++)this.children[i].traverse(e)}decompose(){this.matrix.decompose(this.quaternion._target,this.position,this.scale),this.rotation.fromQuaternion(this.quaternion)}lookAt(e,i=!1){i?this.matrix.lookAt(this.position,e,this.up):this.matrix.lookAt(e,this.position,this.up),this.matrix.getRotation(this.quaternion._target),this.rotation.fromQuaternion(this.quaternion)}}function C2(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function S2(t,e){let i=e[0],o=e[1],a=e[2],f=e[3],h=i+i,m=o+o,p=a+a,g=i*h,v=o*h,x=o*m,S=a*h,M=a*m,w=a*p,D=f*h,k=f*m,q=f*p;return t[0]=1-x-w,t[3]=v-q,t[6]=S+k,t[1]=v+q,t[4]=1-g-w,t[7]=M-D,t[2]=S-k,t[5]=M+D,t[8]=1-g-x,t}function E2(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function M2(t,e,i,o,a,f,h,m,p,g){return t[0]=e,t[1]=i,t[2]=o,t[3]=a,t[4]=f,t[5]=h,t[6]=m,t[7]=p,t[8]=g,t}function _2(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function A2(t,e){let i=e[0],o=e[1],a=e[2],f=e[3],h=e[4],m=e[5],p=e[6],g=e[7],v=e[8],x=v*h-m*g,S=-v*f+m*p,M=g*f-h*p,w=i*x+o*S+a*M;return w?(w=1/w,t[0]=x*w,t[1]=(-v*o+a*g)*w,t[2]=(m*o-a*h)*w,t[3]=S*w,t[4]=(v*i-a*p)*w,t[5]=(-m*i+a*f)*w,t[6]=M*w,t[7]=(-g*i+o*p)*w,t[8]=(h*i-o*f)*w,t):null}function yg(t,e,i){let o=e[0],a=e[1],f=e[2],h=e[3],m=e[4],p=e[5],g=e[6],v=e[7],x=e[8],S=i[0],M=i[1],w=i[2],D=i[3],k=i[4],q=i[5],N=i[6],F=i[7],X=i[8];return t[0]=S*o+M*h+w*g,t[1]=S*a+M*m+w*v,t[2]=S*f+M*p+w*x,t[3]=D*o+k*h+q*g,t[4]=D*a+k*m+q*v,t[5]=D*f+k*p+q*x,t[6]=N*o+F*h+X*g,t[7]=N*a+F*m+X*v,t[8]=N*f+F*p+X*x,t}function N2(t,e,i){let o=e[0],a=e[1],f=e[2],h=e[3],m=e[4],p=e[5],g=e[6],v=e[7],x=e[8],S=i[0],M=i[1];return t[0]=o,t[1]=a,t[2]=f,t[3]=h,t[4]=m,t[5]=p,t[6]=S*o+M*h+g,t[7]=S*a+M*m+v,t[8]=S*f+M*p+x,t}function R2(t,e,i){let o=e[0],a=e[1],f=e[2],h=e[3],m=e[4],p=e[5],g=e[6],v=e[7],x=e[8],S=Math.sin(i),M=Math.cos(i);return t[0]=M*o+S*h,t[1]=M*a+S*m,t[2]=M*f+S*p,t[3]=M*h-S*o,t[4]=M*m-S*a,t[5]=M*p-S*f,t[6]=g,t[7]=v,t[8]=x,t}function b2(t,e,i){let o=i[0],a=i[1];return t[0]=o*e[0],t[1]=o*e[1],t[2]=o*e[2],t[3]=a*e[3],t[4]=a*e[4],t[5]=a*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function w2(t,e){let i=e[0],o=e[1],a=e[2],f=e[3],h=e[4],m=e[5],p=e[6],g=e[7],v=e[8],x=e[9],S=e[10],M=e[11],w=e[12],D=e[13],k=e[14],q=e[15],N=i*m-o*h,F=i*p-a*h,X=i*g-f*h,G=o*p-a*m,$=o*g-f*m,ie=a*g-f*p,se=v*D-x*w,ne=v*k-S*w,he=v*q-M*w,me=x*k-S*D,pe=x*q-M*D,Oe=S*q-M*k,ye=N*Oe-F*pe+X*me+G*he-$*ne+ie*se;return ye?(ye=1/ye,t[0]=(m*Oe-p*pe+g*me)*ye,t[1]=(p*he-h*Oe-g*ne)*ye,t[2]=(h*pe-m*he+g*se)*ye,t[3]=(a*pe-o*Oe-f*me)*ye,t[4]=(i*Oe-a*he+f*ne)*ye,t[5]=(o*he-i*pe-f*se)*ye,t[6]=(D*ie-k*$+q*G)*ye,t[7]=(k*X-w*ie-q*F)*ye,t[8]=(w*$-D*X+q*N)*ye,t):null}class D2 extends Array{constructor(e=1,i=0,o=0,a=0,f=1,h=0,m=0,p=0,g=1){return super(e,i,o,a,f,h,m,p,g),this}set(e,i,o,a,f,h,m,p,g){return e.length?this.copy(e):(M2(this,e,i,o,a,f,h,m,p,g),this)}translate(e,i=this){return N2(this,i,e),this}rotate(e,i=this){return R2(this,i,e),this}scale(e,i=this){return b2(this,i,e),this}multiply(e,i){return i?yg(this,e,i):yg(this,this,e),this}identity(){return _2(this),this}copy(e){return E2(this,e),this}fromMatrix4(e){return C2(this,e),this}fromQuaternion(e){return S2(this,e),this}fromBasis(e,i,o){return this.set(e[0],e[1],e[2],i[0],i[1],i[2],o[0],o[1],o[2]),this}inverse(e=this){return A2(this,e),this}getNormalMatrix(e){return w2(this,e),this}}let L2=0;class U2 extends x2{constructor(e,{geometry:i,program:o,mode:a=e.TRIANGLES,frustumCulled:f=!0,renderOrder:h=0}={}){super(),e.canvas||console.error("gl not passed as first argument to Mesh"),this.gl=e,this.id=L2++,this.geometry=i,this.program=o,this.mode=a,this.frustumCulled=f,this.renderOrder=h,this.modelViewMatrix=new ia,this.normalMatrix=new D2,this.beforeRenderCallbacks=[],this.afterRenderCallbacks=[]}onBeforeRender(e){return this.beforeRenderCallbacks.push(e),this}onAfterRender(e){return this.afterRenderCallbacks.push(e),this}draw({camera:e}={}){e&&(this.program.uniforms.modelMatrix||Object.assign(this.program.uniforms,{modelMatrix:{value:null},viewMatrix:{value:null},modelViewMatrix:{value:null},normalMatrix:{value:null},projectionMatrix:{value:null},cameraPosition:{value:null}}),this.program.uniforms.projectionMatrix.value=e.projectionMatrix,this.program.uniforms.cameraPosition.value=e.worldPosition,this.program.uniforms.viewMatrix.value=e.viewMatrix,this.modelViewMatrix.multiply(e.viewMatrix,this.worldMatrix),this.normalMatrix.getNormalMatrix(this.modelViewMatrix),this.program.uniforms.modelMatrix.value=this.worldMatrix,this.program.uniforms.modelViewMatrix.value=this.modelViewMatrix,this.program.uniforms.normalMatrix.value=this.normalMatrix),this.beforeRenderCallbacks.forEach(o=>o&&o({mesh:this,camera:e}));let i=this.program.cullFace&&this.worldMatrix.determinant()<0;this.program.use({flipFaces:i}),this.geometry.draw({mode:this.mode,program:this.program}),this.afterRenderCallbacks.forEach(o=>o&&o({mesh:this,camera:e}))}}class I2 extends RA{constructor(e,{attributes:i={}}={}){Object.assign(i,{position:{size:2,data:new Float32Array([-1,-1,3,-1,-1,3])},uv:{size:2,data:new Float32Array([0,0,2,0,0,2])}}),super(e,i)}}const k2=({baseColor:t=[.1,.1,.1],speed:e=.2,amplitude:i=.5,frequencyX:o=3,frequencyY:a=2,interactive:f=!0,...h})=>{const m=Ee.useRef(null);return Ee.useEffect(()=>{if(!m.current)return;const p=m.current,g=new kA({antialias:!0}),v=g.gl;v.clearColor(1,1,1,1);const x=`
      attribute vec2 position;
      attribute vec2 uv;
      varying vec2 vUv;
      void main() {
        vUv = uv;
        gl_Position = vec4(position, 0.0, 1.0);
      }
    `,S=`
      precision highp float;
      uniform float uTime;
      uniform vec3 uResolution;
      uniform vec3 uBaseColor;
      uniform float uAmplitude;
      uniform float uFrequencyX;
      uniform float uFrequencyY;
      uniform vec2 uMouse;
      varying vec2 vUv;

      vec4 renderImage(vec2 uvCoord) {
          vec2 fragCoord = uvCoord * uResolution.xy;
          vec2 uv = (2.0 * fragCoord - uResolution.xy) / min(uResolution.x, uResolution.y);

          for (float i = 1.0; i < 10.0; i++){
              uv.x += uAmplitude / i * cos(i * uFrequencyX * uv.y + uTime + uMouse.x * 3.14159);
              uv.y += uAmplitude / i * cos(i * uFrequencyY * uv.x + uTime + uMouse.y * 3.14159);
          }

          vec2 diff = (uvCoord - uMouse);
          float dist = length(diff);
          float falloff = exp(-dist * 20.0);
          float ripple = sin(10.0 * dist - uTime * 2.0) * 0.03;
          uv += (diff / (dist + 0.0001)) * ripple * falloff;

          vec3 color = uBaseColor / abs(sin(uTime - uv.y - uv.x));
          return vec4(color, 1.0);
      }

      void main() {
          vec4 col = vec4(0.0);
          int samples = 0;
          for (int i = -1; i <= 1; i++){
              for (int j = -1; j <= 1; j++){
                  vec2 offset = vec2(float(i), float(j)) * (1.0 / min(uResolution.x, uResolution.y));
                  col += renderImage(vUv + offset);
                  samples++;
              }
          }
          gl_FragColor = col / float(samples);
      }
    `,M=new I2(v),w=new wA(v,{vertex:x,fragment:S,uniforms:{uTime:{value:0},uResolution:{value:new Float32Array([v.canvas.width,v.canvas.height,v.canvas.width/v.canvas.height])},uBaseColor:{value:new Float32Array(t)},uAmplitude:{value:i},uFrequencyX:{value:o},uFrequencyY:{value:a},uMouse:{value:new Float32Array([0,0])}}}),D=new U2(v,{geometry:M,program:w});function k(){g.setSize(p.offsetWidth*1,p.offsetHeight*1);const $=w.uniforms.uResolution.value;$[0]=v.canvas.width,$[1]=v.canvas.height,$[2]=v.canvas.width/v.canvas.height}window.addEventListener("resize",k),k();function q(G){const $=p.getBoundingClientRect(),ie=(G.clientX-$.left)/$.width,se=1-(G.clientY-$.top)/$.height,ne=w.uniforms.uMouse.value;ne[0]=ie,ne[1]=se}function N(G){if(G.touches.length>0){const $=G.touches[0],ie=p.getBoundingClientRect(),se=($.clientX-ie.left)/ie.width,ne=1-($.clientY-ie.top)/ie.height,he=w.uniforms.uMouse.value;he[0]=se,he[1]=ne}}f&&(p.addEventListener("mousemove",q),p.addEventListener("touchmove",N));let F;function X(G){F=requestAnimationFrame(X),w.uniforms.uTime.value=G*.001*e,g.render({scene:D})}return F=requestAnimationFrame(X),p.appendChild(v.canvas),()=>{var G;cancelAnimationFrame(F),window.removeEventListener("resize",k),f&&(p.removeEventListener("mousemove",q),p.removeEventListener("touchmove",N)),v.canvas.parentElement&&v.canvas.parentElement.removeChild(v.canvas),(G=v.getExtension("WEBGL_lose_context"))==null||G.loseContext()}},[t,e,i,o,a,f]),T.jsx("div",{ref:m,className:"liquidChrome-container",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:-1,pointerEvents:"none"},...h})},wo="TUTIEN_SAVE_GAME",vg="TUTIEN_API_KEY",Do=50,Au=20,_l=2e3,Tg=5,Ks={player:null,year:0,eventLog:[],isGameOver:!1,isLoading:!1,error:null,gameStarted:!1,currentEvent:null,hasTraveledThisYear:!1,difficulty:"trung bnh",tournament:null,geniusRanking:[],npcs:[],nsfwAllowed:!1,activeSecretRealm:null,shopInventory:[],shopLastRefreshed:0,isBreakthroughPending:!1,auction:null,activeConversation:null};function B2(){var Kn,Fi;const[t,e]=Ee.useState(Ks),[i,o]=Ee.useState(!1),a=Ee.useRef(null),[f,h]=Ee.useState(()=>localStorage.getItem(vg)),[m,p]=Ee.useState(null),[g,v]=Ee.useState("main-menu"),[x,S]=Ee.useState(!1),[M,w]=Ee.useState(!1),[D,k]=Ee.useState(!1),[q,N]=Ee.useState(null),[F,X]=Ee.useState(!1),[G,$]=Ee.useState(!1),[ie,se]=Ee.useState({}),[ne,he]=Ee.useState(""),[me,pe]=Ee.useState(!1),Oe=Ee.useRef(t);Ee.useEffect(()=>{Oe.current=t}),Ee.useEffect(()=>{if(f)try{p(new b_(f))}catch(_){console.error("Failed to init Gemini Service:",_),h(null),alert("API Key khng hp l. Vui lng kim tra li.")}else p(null)},[f]),Ee.useEffect(()=>{var _;(_=t.auction)!=null&&_.isActive?$(!0):$(!1)},[(Kn=t.auction)==null?void 0:Kn.isActive]),Ee.useEffect(()=>{S((()=>{try{const R=localStorage.getItem(wo);return R?!!JSON.parse(R).player:!1}catch{return console.warn("Could not access localStorage. Private browsing or security settings may be preventing save/load functionality."),!1}})())},[g]),Ee.useEffect(()=>{if(!t.gameStarted||t.isGameOver)return;const _=setInterval(()=>{try{const R=Oe.current;R.player&&(console.log(`[${new Date().toLocaleTimeString()}] Game auto-saved.`),localStorage.setItem(wo,JSON.stringify(R)),S(!0))}catch(R){console.error("Auto-save to localStorage failed:",R)}},600*1e3);return()=>{clearInterval(_)}},[t.gameStarted,t.isGameOver]);const ye=Ee.useCallback(async _=>{if(!m||!t.player)return;if(ie[_]){he(ie[_]);return}pe(!0),he("");const R=na.find(Y=>Y.name===_);if(R)try{const Y=await m.generateLocationImage(_,R.description,t.player);Y&&(he(Y),se(J=>({...J,[_]:Y})))}catch(Y){console.error("Image generation failed in App component:",Y)}pe(!1)},[m,t.player,ie]);Ee.useEffect(()=>{var _;m&&((_=t.player)!=null&&_.currentLocation)&&g==="playing"&&ye(t.player.currentLocation)},[m,(Fi=t.player)==null?void 0:Fi.currentLocation,g]);const qe=(_,R,Y)=>{const J=_-Y;if(J<=0)return R+J;const le=J%R;return Math.abs(le)<.001||Math.abs(le-R)<.001?0:R-le},K=_=>_<=-75?"T ch":_<=-25?"K th":_<25?"Xa l":_<50?"Ngi quen":_<100?"Thn thit":_<200?"Tri k":"Bn i",ae=_=>_.map(R=>{const Y=xt.findIndex(j=>j.name===R.realm),J=(10+Math.random()*15)*(1+Y*.2)/2;let le=R.cultivation+J,oe=R.realm;if(Y<xt.length-1){const j=xt[Y+1];le>=j.minCultivation&&(oe=j.name)}return{...R,cultivation:Math.round(le),realm:oe}}),_e=_=>{localStorage.setItem(vg,_),h(_),v("main-menu")},Xe=Ee.useCallback(async _=>{if(m){e({...Ks,isLoading:!0,difficulty:_.difficulty,nsfwAllowed:_.nsfwAllowed});try{const{player:R}=await m.startNewGame(_),Y={...Ks,difficulty:_.difficulty,gameStarted:!0,player:R,year:R.age,eventLog:[{id:0,year:R.age,text:`Hnh trnh ca bn bt u ti <strong>${R.currentLocation}</strong>.`,isMajor:!0}],npcs:JSON.parse(JSON.stringify(ng)),isLoading:!1,nsfwAllowed:_.nsfwAllowed};e(Y),v("playing")}catch(R){const Y=R instanceof Error?R.message:" xy ra li khng xc nh.";e({...Ks,error:`Khng th bt u tr chi: ${Y}`,difficulty:"trung bnh"}),v("main-menu")}}},[m]),L=()=>({description:"Linh kh trong c th bn ang si tro, bo hiu sp t ph cnh gii mi! My en ko n, li kip sp ging xung. y l thi khc quyt nh, thnh cng s phi thng, tht bi s vn kip bt phc. Bn c mun bt u  kip ngay by gi?",choices:[{text:"Bt u  kip!",effects:{breakthroughAttempt:!0}},{text:"Cha phi lc, ta cn chun b thm.",effects:{}}]}),te=()=>({description:`Tri t rung chuyn, linh kh hi t! <strong>i Hi Thin Kiu</strong> ln th ${Math.floor((t.year+.5-16)/Do)+1} sp bt u. y l c hi ngn nm c mt  tranh ti vi cc thin kiu trong thin h, ginh ly danh vng v phn thng v gi. Ph bo danh l ${_l} linh thch. Bn c mun tham gia?`,choices:[{text:`Tham gia (Tn ${_l} Linh Thch)`,effects:{tournamentAction:"join"}},{text:"B qua, an phn tu luyn",effects:{tournamentAction:"decline"}}]}),de=()=>({description:"u gi hi 20 nm mt ln ti <strong>Giao Lu Phng</strong> sp bt u. y l c hi  s hu nhng bo vt him c. Bn c mun tham d khng?",choices:[{text:"Tham d",effects:{auctionAction:"join"}},{text:"B qua",effects:{auctionAction:"decline"}}]}),re=(_,R)=>{const Y=["L Ph Trn","Hn Lp","Vng Lm","Mnh Ho","Tn V","Lm ng","Tiu Vim","Dip Phm","Thch Ho","ng Tam","C Nguyt Phng Nguyn","Bch Tiu Thun","T Minh","La Phong","Lm Minh"],J=["Kim Si","St Thn","Ma Qun","Yu","Thin Ti","C ng","Trn S","an Vng","Ph Hong","Thnh Th","Chin Tn","Huyt St","Bng ","Li Hong","Dc Thn"],oe={"n gin":.8,"trung bnh":1,kh:1.2,"c mng":1.4}[R],j=[],ce=new Set;for(let fe=0;fe<15;fe++){let we,Je;do we=Y[Math.floor(Math.random()*Y.length)];while(ce.has(we));ce.add(we),Je=J[Math.floor(Math.random()*J.length)];const Ie=(_.stats.attack+_.stats.defense)/2,rt=(Math.random()-.2)*5*oe;j.push({id:`opp-${fe}`,name:we,title:Je,realm:_.realm,stats:{attack:Math.round((Ie+rt)*oe),defense:Math.round((Ie-rt)*oe),health:100}})}return j},Se=_=>{const R=_.player1.name===t.player.name?_.player2:_.player1;return{description:`i th ca bn trong vng ny l <strong>${R.name} - "${R.title}"</strong>. Hn cng l mt thin ti ca th h ny, khng th xem thng.`,choices:[{text:"Bt u chin u!",effects:{tournamentAction:"fight"}}]}},Ue=Ee.useCallback(async()=>{var Pe;if(!t.player||t.isLoading||t.currentEvent||!m)return;let _=t;if(!t.player)return;let R={...t.player},Y=[],J=t.activeSecretRealm?{...t.activeSecretRealm}:null;R.health=Math.min(R.maxHealth,Math.round(R.health+R.maxHealth*.1)),R.age+=.5;const le=Object.values(Jn).flat(),oe=R.talents.reduce((A,P)=>{const z=le.find(W=>W.id===P);return A+((z==null?void 0:z.effects.cultivationBonus)??0)},0),j=R.pets.reduce((A,P)=>A+(P.effects.cultivationBonusPerYear??0),0),we=(15+(((Pe=R.cultivationTechnique)==null?void 0:Pe.effects.cultivationBonus)??0)+oe+j)/2*R.cultivationGainModifier;if(R.cultivation+=we,R.age%1===0){const A=An.find(P=>P.name===R.sectRank);if(A!=null&&A.salary){const P=Math.round(A.salary*R.linhThachGainModifier);P>0&&(R.linhThach+=P,Y.push({id:t.eventLog.length+6,year:R.age,text:`Bn nhn c ${P} linh thch bng lc hng nm t chc v ${R.sectRank}.`,isMajor:!1}))}}let Je=!1;if(J)if(Je=!0,J.progress+=1,J.progress>=J.duration){const A=Math.round((J.reward.linhThach??0)*R.linhThachGainModifier),P=Math.round((J.reward.cultivation??0)/2*R.cultivationGainModifier);R.linhThach+=A,R.cultivation+=P,J.reward.item&&R.inventory.push(J.reward.item),Y.push({id:t.eventLog.length,year:R.age,text:`**B CNH KT THC: ${J.name}!** Sau ${J.duration/2} nm thm him, bn nhn c phn thng hu hnh!`,isMajor:!0}),J=null}else Y.push({id:t.eventLog.length,year:R.age,text:`Bn tip tc thm him **${J.name}**. Tin : ${J.progress}/${J.duration} lt.`,isMajor:!1});else if(R.activeQuest&&R.currentLocation===R.activeQuest.location){Je=!0;let A={...R.activeQuest};A.progress+=1,R.activeQuest=A;let P=`Bn dnh na nm ti ${R.currentLocation}  hon thnh nhim v "${A.title}". Tin : ${A.progress}/${A.duration} lt.`;const z=A.healthCostPerTurn??0;if(z>0&&(R.health-=z,P+=` Bn mt <strong>${z}</strong> HP trong qu trnh ny.`),Y.push({id:t.eventLog.length,year:R.age,text:P,isMajor:!1}),A.progress>=A.duration){const W=Math.round((A.reward.linhThach??0)*R.linhThachGainModifier);Math.round((A.reward.cultivation??0)/2*R.cultivationGainModifier),R.linhThach+=W,A.reward.item&&R.inventory.push(A.reward.item),Y.push({id:t.eventLog.length+400,year:R.age,text:`**NHIM V HON THNH: ${A.title}!** Bn nhn c phn thng.`,isMajor:!0}),R.activeQuest=null}}const Ie=ae(t.npcs),{player:rt,isGameOver:Ze}=Ae(R,Y,t.eventLog.length+500),yt=[...Y.reverse(),...t.eventLog];_={...t,player:rt,year:rt.age,eventLog:yt,npcs:Ie,isGameOver:Ze,hasTraveledThisYear:!1,activeSecretRealm:J};let ut=!1;if(_.player&&!_.isBreakthroughPending&&_.player.cultivation>=_.player.cultivationForNextRealm&&(ut=!0,_={..._,isBreakthroughPending:!0,eventLog:[{id:yt.length,year:_.year,text:"Bn cm thy tu vi  n im t ph, c th  kip bt c lc no!",isMajor:!0},..._.eventLog]}),e(_),Je)return;if(ut||_.isBreakthroughPending){e(A=>({...A,currentEvent:L()}));return}const St=_.year;if(St>16&&Math.abs((St-16)%Do)<.01){e(A=>({...A,currentEvent:te()}));return}if(St>16&&Math.abs((St-16)%Au)<.01&&!_.tournament){e(A=>({...A,currentEvent:de()}));return}e(A=>({...A,isLoading:!0,error:null}));try{const A=await m.getYearlyEventChoice(_.player,_.npcs,_.nsfwAllowed);e(P=>({...P,isLoading:!1,currentEvent:A}))}catch(A){const P=A instanceof Error?A.message:" xy ra li khng xc nh khi to s kin.";e(z=>({...z,isLoading:!1,error:P}))}},[t,m]),Te=()=>{e(_=>{var rt;if(!_.player)return _;let R=JSON.parse(JSON.stringify(_.player)),Y=[];const J=xt.findIndex(Ze=>Ze.name===R.realm),le=xt[J],oe=xt[J+1];if(!oe)return{..._,isBreakthroughPending:!1,currentEvent:null};const ce=70+{"n gin":15,"trung bnh":0,kh:-15,"c mng":-30}[_.difficulty];if(Math.random()*100<ce){const Ze=R.realm;if(R.realm=oe.name,R.cultivationForNextRealm=((rt=xt[J+2])==null?void 0:rt.minCultivation)??R.cultivation,R.maxHealth+=50,R.stats.attack+=10,R.stats.defense+=10,R.health=R.maxHealth,Y.push({id:_.eventLog.length,year:R.age,text:`**T PH THNH CNG!** Li kip tan bin, bn  t ${Ze} tin ln cnh gii **${R.realm}**!`,isMajor:!0}),Object.values(Yn).map(ut=>ut.name).includes(R.sect)){const ut=xt.findIndex(ze=>ze.name===R.realm);if(ut===-1)return _;const St=An.findIndex(ze=>ze.name===R.sectRank),Ye=[...An].reverse().find(ze=>{const Pe=xt.findIndex(A=>A.name===ze.realmRequired);return Pe!==-1&&ut>=Pe});if(Ye&&An.findIndex(Pe=>Pe.name===Ye.name)>St&&(R.sectRank=Ye.name,Y.push({id:_.eventLog.length+150,year:R.age,text:`**THNG CHC!** Do tu vi t ph, bn  c thng ln chc v **${R.sectRank}** trong tng mn!`,isMajor:!0}),Ye.name==="Trng Lo")){const Pe=ta.find(A=>A.name==="Nguyn Kh Chn Quyt");Pe&&(R.cultivationTechnique=Pe,Y.push({id:_.eventLog.length+160,year:R.age,text:`Do c thng chc, bn c tng mn ban thng cng php: <strong>${Pe.name}</strong>!`,isMajor:!0}))}}}else{const Ze=(oe.minCultivation-le.minCultivation)*.2,yt=R.maxHealth*.5;R.cultivation-=Math.round(Ze),R.health-=Math.round(yt),Y.push({id:_.eventLog.length+1,year:R.age,text:"**T PH THT BI!** Bn khng chng ni li kip, tu vi b tht li, kinh mch trng thng.",isMajor:!0})}const{player:we,isGameOver:Je}=Ae(R,Y,_.eventLog.length+500),Ie=[...Y.reverse(),..._.eventLog];return{..._,player:we,eventLog:Ie,isGameOver:Je,currentEvent:null,isBreakthroughPending:!1}})},Ae=(_,R,Y)=>{let J={..._},le=!1;J.stats||(J.stats={attack:5,defense:5}),J.health=isNaN(J.health)?1:J.health,J.maxHealth=isNaN(J.maxHealth)?100:J.maxHealth,J.cultivation=isNaN(J.cultivation)?0:J.cultivation,J.linhThach=isNaN(J.linhThach)?0:J.linhThach,J.stats.attack=isNaN(J.stats.attack)?5:J.stats.attack,J.stats.defense=isNaN(J.stats.defense)?5:J.stats.defense,J.health=Math.min(J.maxHealth,J.health);const oe=xt.find(fe=>fe.name===J.realm);oe?J.age>oe.maxAge&&(le=!0,R.push({id:Y,year:J.age,text:"**TH NGUYN  CN!** D tu vi cao thm, bn vn khng th chng li quy lut ca thi gian. Th nguyn  ht, thn t o tiu.",isMajor:!0})):(R.push({id:Y,year:J.age,text:`**LI D LIU!** Cnh gii ca bn khng hp l (${J.realm}),  c thit lp li v Luyn Kh.`,isMajor:!0}),J.realm=xt[0].name,J.cultivation=0,J.cultivationForNextRealm=xt[1].minCultivation);const j=Object.values(Yn).some(fe=>fe.name===J.sect),ce=An.some(fe=>fe.name===J.sectRank);return j&&!ce&&(R.push({id:Y+10,year:J.age,text:`**LI D LIU!** Chc v ca bn khng hp l (${J.sectRank}),  c thit lp li v Ngoi Mn  T.`,isMajor:!0}),J.sectRank=An[0].name),J.health<=0&&!le&&(le=!0,R.push({id:Y+200,year:J.age,text:"**T VONG!** Sinh mnh ca bn  cn kit. Hnh trnh tu tin  kt thc.",isMajor:!0})),{player:J,isGameOver:le}},Ke=Ee.useCallback(_=>{if(!t.player||!t.currentEvent)return;const R=_.effects||{};if(R.breakthroughAttempt){Te();return}if(R.auctionAction){const oe=R.auctionAction;e(j=>{if(!j.player)return j;let ce={...j.player},fe=[...j.eventLog],we=null;const Je=j.year+.5;if(oe==="decline")return fe.unshift({id:fe.length,year:Je,text:"Bn  t chi tham gia u Gi Hi.",isMajor:!1}),{...j,player:{...ce,age:Je},year:Je,eventLog:fe,currentEvent:null,auction:null};if(oe==="join"){fe.unshift({id:fe.length,year:Je,text:"Bn di chuyn n <strong>Giao Lu Phng</strong>  tham gia u Gi Hi.",isMajor:!0}),ce.currentLocation="Giao Lu Phng";const Ie=N_(ce.realm);we={year:Je,isActive:!0,items:Ie,currentItemIndex:0,log:["u gi hi bt u! Vt phm u tin c a ln!"]}}return{...j,player:{...ce,age:Je},year:Je,eventLog:fe,currentEvent:null,auction:we}});return}if(R.tournamentAction){const oe=R.tournamentAction;e(j=>{if(!j.player)return j;let ce={...j.player},fe=[...j.eventLog],we=j.tournament?JSON.parse(JSON.stringify(j.tournament)):null,Je=null;const Ie=j.year+.5;if(oe==="decline")return fe.unshift({id:fe.length,year:Ie,text:"Bn  t chi tham gia i Hi Thin Kiu  tp trung tu luyn.",isMajor:!1}),{...j,player:{...ce,age:Ie},year:Ie,eventLog:fe,currentEvent:null};if(oe==="join"){if(ce.linhThach<_l)return fe.unshift({id:fe.length,year:Ie,text:`Bn khng  ${_l} linh thch  tham gia i Hi Thin Kiu.`,isMajor:!0}),{...j,player:{...ce,age:Ie},year:Ie,eventLog:fe,currentEvent:null};ce.linhThach-=_l,fe.unshift({id:fe.length,year:Ie,text:`Bn  chi ${_l} linh thch  ghi danh vo **i Hi Thin Kiu**.`,isMajor:!0});const rt=re(ce,j.difficulty),Ze=[ce,...rt.slice(0,7)];if(Ze.length%2!==0)return fe.unshift({id:fe.length,year:Ie,text:"Li gii u: S lng ngi tham gia khng hp l.",isMajor:!0}),{...j,player:{...ce,age:Ie},year:Ie,eventLog:fe,currentEvent:null};const yt=Ze.sort(()=>.5-Math.random()),ut=[];for(let Ye=0;Ye<yt.length;Ye+=2)ut.push({player1:yt[Ye],player2:yt[Ye+1],winner:null});we={year:Ie,isActive:!0,currentRound:1,bracket:[ut]};const St=ut.find(Ye=>Ye.player1.name===ce.name||Ye.player2.name===ce.name);return St?Je=Se(St):(fe.unshift({id:fe.length,year:Ie,text:"Li khi to gii u.",isMajor:!0}),we=null,Je=null),{...j,player:{...ce,age:Ie},year:Ie,eventLog:fe,currentEvent:Je,tournament:we}}if(oe==="fight"&&we){const rt=we.bracket[we.currentRound-1];if(!rt)return console.error("Tournament Error: Cannot find matches for current round."),{...j,tournament:null,currentEvent:null};const Ze=rt.find(ze=>!ze.winner&&(ze.player1.name===ce.name||ze.player2.name===ce.name));if(!Ze)return console.error("Tournament Error: Cannot find player's match."),{...j,tournament:null,currentEvent:null};const yt=Ze.player1.name===ce.name?Ze.player2:Ze.player1,ut=Math.max(1,ce.stats.attack-yt.stats.defense)*(Math.random()*.4+.8),St=Math.max(1,yt.stats.attack-ce.stats.defense)*(Math.random()*.4+.8),Ye=ut>=St;if(fe.unshift({id:fe.length,year:Ie,text:`Trn u vi **${yt.name}** bt u! Sau mt hi giao tranh kch lit, bn  **${Ye?"chin thng":"tht bi"}**!`,isMajor:!0}),Ye){Ze.winner=Ze.player1.name===ce.name?"player1":"player2";const Pe=[{lt:500,cv:250},{lt:1250,cv:600},{lt:7500,cv:4e3}][we.currentRound-1];if(ce.linhThach+=Math.round(Pe.lt*ce.linhThachGainModifier),ce.cultivation+=Math.round(Pe.cv*ce.cultivationGainModifier),fe.unshift({id:fe.length+1,year:Ie,text:`Bn nhn c ${Math.round(Pe.lt*ce.linhThachGainModifier)} linh thch v ${Math.round(Pe.cv*ce.cultivationGainModifier)} tu vi.`,isMajor:!1}),we.currentRound===3){fe.unshift({id:fe.length+2,year:Ie,text:"**BN L NH V CH I HI THIN KIU!** Ting tm ca bn vang di khp ni!",isMajor:!0});const P=[{rank:j.geniusRanking.length+1,name:ce.name,realm:ce.realm,year:Ie,achievement:`V ch i Hi Thin Kiu ln th ${Math.floor((Ie-16)/Do)+1}`},...j.geniusRanking];return{...j,player:ce,year:Ie,eventLog:fe,currentEvent:null,tournament:null,geniusRanking:P}}else{rt.filter(W=>W!==Ze).forEach(W=>W.winner=Math.random()>.5?"player1":"player2");const A=rt.map(W=>W.winner==="player1"?W.player1:W.player2),P=[];for(let W=0;W<A.length;W+=2)A[W+1]&&P.push({player1:A[W],player2:A[W+1],winner:null});we.bracket.push(P),we.currentRound++;const z=P.find(W=>W.player1.name===ce.name||W.player2.name===ce.name);Je=z?Se(z):null,Je||(fe.unshift({id:fe.length+3,year:Ie,text:"Bn khng c i th  vng tip theo, gii u  kt thc.",isMajor:!0}),we=null)}}else fe.unshift({id:fe.length+4,year:Ie,text:"Hnh trnh ca bn ti i Hi Thin Kiu  kt thc.",isMajor:!0}),we=null}return{...j,player:ce,year:Ie,eventLog:fe,currentEvent:Je,tournament:we}});return}const Y=t.currentEvent.description,le={"n gin":1.2,"trung bnh":1,kh:.8,"c mng":.6}[t.difficulty]??1;e(oe=>{var ue;if(!oe.player||!oe.currentEvent)return oe;let j={...oe.player},ce=JSON.parse(JSON.stringify(oe.npcs)),fe=oe.activeSecretRealm,we=[];if(j.health=Math.min(j.maxHealth,Math.round(j.health+j.maxHealth*.1)),j.age+=.5,j.age%1===0){const ve=An.find(De=>De.name===j.sectRank);if(ve!=null&&ve.salary){const De=Math.round(ve.salary*j.linhThachGainModifier);De>0&&(j.linhThach+=De,we.push({id:oe.eventLog.length+5,year:j.age,text:`Bn nhn c ${De} linh thch bng lc hng nm t chc v ${j.sectRank}.`,isMajor:!1}))}}const Je=Object.values(Jn).flat(),Ie=j.talents.reduce((ve,De)=>{const Me=Je.find(Re=>Re.id===De);return ve+((Me==null?void 0:Me.effects.cultivationBonus)??0)},0),rt=j.pets.reduce((ve,De)=>ve+(De.effects.cultivationBonusPerYear??0),0),ut=(15+(((ue=j.cultivationTechnique)==null?void 0:ue.effects.cultivationBonus)??0)+Ie+rt)/2*j.cultivationGainModifier;j.cultivation+=ut;const{successChance:St}=_;let Ye=!0,ze="";St!=null&&(Math.random()*100>St&&(Ye=!1),ze=Ye?' <span class="text-green-400">(Thnh cng!)</span>':' <span class="text-red-400">(Tht bi!)</span>');let Pe=`${Y}<br> <i>${_.text}</i>${ze}`;if(Ye){const ve=Number(R.cultivationGained)||0;j.cultivation+=Math.round(ve*le/2*j.cultivationGainModifier);const De=Number(R.linhThachChange)||0;if(j.linhThach=Math.max(0,j.linhThach+Math.round(De*le*j.linhThachGainModifier)),j.health=Math.max(0,Math.min(j.maxHealth,j.health+(Number(R.healthChange)||0))),R.newItem){const Me=R.newItem,Re={id:`${Date.now()}-${Me.name}`,name:Me.name,type:Me.type,description:Me.description,effects:Me.effects||{},technique:Me.technique,cost:Me.cost??0};Re.effects.cultivation&&(Re.effects.cultivation=Math.round(Re.effects.cultivation/2)),j.inventory=[...j.inventory,Re],Pe+=` (Nhn c <strong>${Re.name}</strong>).`}if(R.newPet){const Me=R.newPet,Re={id:`${Date.now()}-${Me.name}`,...Me};Re.effects.cultivationBonusPerYear&&(Re.effects.cultivationBonusPerYear=Math.round(Re.effects.cultivationBonusPerYear/2)),j.pets=[...j.pets,Re],we.push({id:oe.eventLog.length+4,year:j.age,text:`Bn  nhn c sng vt mi: <strong>${Re.name} (${Re.species})</strong>!`,isMajor:!0})}if(R.startSecretRealm&&!j.activeQuest&&!fe){const Me=R.startSecretRealm;fe={id:`${Date.now()}-${Me.name}`,...Me,progress:0},we.push({id:oe.eventLog.length+3,year:j.age,text:`**C DUYN LN:** Bn  bt u hnh trnh thm him B Cnh: <strong>${fe.name}</strong>!`,isMajor:!0})}if(R.newQuest&&!j.activeQuest&&!fe){const Me=R.newQuest;Me.reward.cultivation&&(Me.reward.cultivation=Math.round(Me.reward.cultivation/2));const Re=Me.title&&Me.title.trim()!==""?Me.title:"Nhim v khng tn";j.activeQuest={...Me,title:Re,id:`quest-${Date.now()}-${Math.random()}`,progress:0},we.push({id:oe.eventLog.length+300,year:j.age,text:`**Nhim v mi:** Bn  nhn nhim v "${Re}".`,isMajor:!0})}if(R.relationshipChange){const{npcId:Me,points:Re}=R.relationshipChange,dt=ce.findIndex(mt=>mt.id===Me);if(dt!==-1){const mt=ce[dt];mt.relationshipPoints+=Re*2,mt.status=K(mt.relationshipPoints);const gt=Re>0?`Mi quan h ca bn vi <strong>${mt.name}</strong>  tr nn tt hn.`:`Mi quan h ca bn vi <strong>${mt.name}</strong>  xu i.`;we.push({id:oe.eventLog.length+1,year:j.age,text:gt,isMajor:!1})}}if(R.newSpouse){const{npcId:Me}=R.newSpouse,Re=ce.findIndex(dt=>dt.id===Me);Re!==-1&&!j.spouseId&&(j.spouseId=Me,ce[Re].isLover=!0,ce[Re].status="Bn i",we.push({id:oe.eventLog.length+2,year:j.age,text:`Bn v <strong>${ce[Re].name}</strong>  chnh thc tr thnh o l, cng nhau bc trn con ng tu tin!`,isMajor:!0}))}if(R.dualCultivation){const Me=xt.findIndex(Bo=>Bo.name===j.realm),Re=xt[Me],dt=xt[Me+1],mt=((dt==null?void 0:dt.minCultivation)??Re.minCultivation*5)-Re.minCultivation,gt=Math.round((mt*.1+100)/2*j.cultivationGainModifier);j.cultivation+=gt,Pe+=` Cng o l song tu, bn nhn c ${gt} tu vi, cm gic nh sp t ph!`}}else{const ve=5+Math.floor(Math.random()*10);j.health=Math.max(0,j.health-ve),we.push({id:oe.eventLog.length+10,year:j.age,text:`Vn ri eo bm, bn mt ${ve} HP.`,isMajor:!1})}we.push({id:oe.eventLog.length,year:j.age,text:Pe,isMajor:!1});const A=ae(ce),{player:P,isGameOver:z}=Ae(j,we,oe.eventLog.length+500),W=[...we.reverse(),...oe.eventLog];return{...oe,player:P,npcs:A,year:P.age,eventLog:W,currentEvent:null,isGameOver:z,hasTraveledThisYear:!1,activeSecretRealm:fe}})},[t]),Ht=Ee.useCallback(_=>{var R;o(!1),!(!t.player||t.player.currentLocation===_||t.activeSecretRealm||(R=t.auction)!=null&&R.isActive)&&e(Y=>{if(!Y.player)return Y;const J={...Y.player,currentLocation:_},le={id:Y.eventLog.length,year:Y.year,text:`Bn  di chuyn n <strong>${_}</strong>.`,isMajor:!1};return{...Y,player:J,eventLog:[le,...Y.eventLog],hasTraveledThisYear:!0}})},[t.player,t.activeSecretRealm,t.auction]),zt=()=>{if(!t.player){alert("Khng c d liu game  lu!");return}try{const _=JSON.stringify(t,null,2);localStorage.setItem(wo,_),S(!0),alert(" lu game vo trnh duyt!");const R="data:application/json;charset=utf-8,"+encodeURIComponent(_),Y="tu_tien_save.json",J=document.createElement("a");J.setAttribute("href",R),J.setAttribute("download",Y),J.click()}catch(_){alert("Lu game tht bi! Trnh duyt ca bn c th ang chn lu tr cc b."),console.error("Failed to save game:",_)}},hn=_=>{if(typeof _!="object"||_===null||!_.player){alert("Tp lu khng hp l hoc b hng.");return}if(_.player){if(_.player.stats||(_.player.stats={attack:5,defense:5}),_.player.equipment||(_.player.equipment={weapon:null,armor:null,accessory:null}),_.player.gender===void 0&&(_.player.gender="Nam"),_.player.activeQuest===void 0&&(_.player.activeQuest=null),_.difficulty===void 0&&(_.difficulty="trung bnh"),_.player.avatarUrl===void 0&&(_.player.avatarUrl=""),_.tournament===void 0&&(_.tournament=null),_.geniusRanking===void 0&&(_.geniusRanking=[]),_.npcs===void 0&&(_.npcs=JSON.parse(JSON.stringify(ng))),_.player.spouseId===void 0&&(_.player.spouseId=null),_.player.sect===void 0&&(_.player.sect="Tn Tu"),_.nsfwAllowed===void 0&&(_.nsfwAllowed=!1),_.player.sectRank===void 0){const Y=xt.findIndex(le=>le.name===_.player.realm),J=[...An].reverse().find(le=>{const oe=xt.findIndex(j=>j.name===le.realmRequired);return Y>=oe});_.player.sectRank=J?J.name:An[0].name}_.player.pets===void 0&&(_.player.pets=[]),_.activeSecretRealm===void 0&&(_.activeSecretRealm=null),_.shopInventory===void 0&&(_.shopInventory=[]),_.shopLastRefreshed===void 0&&(_.shopLastRefreshed=0),_.player.family===void 0&&(_.player.family="thng nhn"),_.player.linhThachGainModifier===void 0&&(_.player.linhThachGainModifier=1),_.player.cultivationGainModifier===void 0&&(_.player.cultivationGainModifier=1),_.player.talents===void 0&&(_.player.talents=["ngu"]),_.isBreakthroughPending===void 0&&(_.isBreakthroughPending=!1),_.auction===void 0&&(_.auction=null),_.activeConversation===void 0&&(_.activeConversation=null);const{player:R}=Ae(_.player,[],0);_.player=R}e(_),v("playing")},mn=()=>{try{const _=localStorage.getItem(wo);if(_){let R=JSON.parse(_);hn(R)}else alert("Khng tm thy game  lu trong trnh duyt.")}catch(_){alert("Li khi ti game  lu. File c th b hng hoc trnh duyt ang chn truy cp."),localStorage.removeItem(wo),console.error("Failed to load game:",_)}},Ct=()=>{var _;(_=a.current)==null||_.click()},lt=_=>{var J;const R=(J=_.target.files)==null?void 0:J[0];if(!R)return;const Y=new FileReader;Y.onload=le=>{var oe;try{const j=(oe=le.target)==null?void 0:oe.result;if(typeof j!="string")throw new Error("Khng th c tp.");let ce=JSON.parse(j);ce.player&&ce.gameStarted!==void 0?hn(ce):alert("Tp lu khng hp l.")}catch{alert(" xy ra li khi ti tp lu. Tp c th b hng hoc khng ng nh dng.")}},Y.readAsText(R),_.target.value=""},Nn=(_,R=!1)=>{N({item:_,isEquipped:R})},Rn=()=>{N(null)},ft=()=>{e(_=>{if(!_.player)return _;if(_.year>=_.shopLastRefreshed+Tg||_.shopInventory.length===0){const Y=R_(_.player.realm);return{..._,shopInventory:Y,shopLastRefreshed:Math.floor(_.year)}}return _}),X(!0)},gn=_=>{e(R=>{if(!R.player||!_.cost||R.player.linhThach<_.cost)return R;const Y={...R.player};Y.linhThach-=_.cost,Y.inventory.push({..._,id:`${Date.now()}-${_.name}`});const J=R.shopInventory.filter(oe=>oe.id!==_.id),le={id:R.eventLog.length,year:R.year,text:`Bn  mua <strong>${_.name}</strong> vi gi ${_.cost} linh thch.`,isMajor:!1};return{...R,player:Y,shopInventory:J,eventLog:[le,...R.eventLog]}})},tn=_=>{e(R=>{if(!R.player)return R;const Y={...R.player},J=Y.inventory.findIndex(ce=>ce.id===_.id);if(J===-1)return R;const le=Math.floor((_.cost??10)*.4),oe=Math.round(le*Y.linhThachGainModifier);Y.linhThach+=oe,Y.inventory.splice(J,1);const j={id:R.eventLog.length,year:R.year,text:`Bn  bn <strong>${_.name}</strong> v nhn c ${oe} linh thch.`,isMajor:!1};return{...R,player:Y,eventLog:[j,...R.eventLog]}})},pn=_=>{e(R=>{if(!R.player||!["weapon","armor","accessory"].includes(_.type))return R;let Y=JSON.parse(JSON.stringify(R.player));const J=_.type,le=Y.inventory.findIndex(ce=>ce.id===_.id);if(le===-1)return R;Y.inventory.splice(le,1);const oe=Y.equipment[J];oe&&(Y.inventory.push(oe),oe.effects.attack&&(Y.stats.attack-=oe.effects.attack),oe.effects.defense&&(Y.stats.defense-=oe.effects.defense)),Y.equipment[J]=_,_.effects.attack&&(Y.stats.attack+=_.effects.attack),_.effects.defense&&(Y.stats.defense+=_.effects.defense);const j={id:R.eventLog.length,year:R.year,text:`Bn  trang b <strong>${_.name}</strong>.`,isMajor:!1};return{...R,player:Y,eventLog:[j,...R.eventLog]}})},$t=_=>{e(R=>{var oe;if(!R.player||!["weapon","armor","accessory"].includes(_.type))return R;let Y=JSON.parse(JSON.stringify(R.player));const J=_.type;if(!Y.equipment[J]||((oe=Y.equipment[J])==null?void 0:oe.id)!==_.id)return R;Y.equipment[J]=null,Y.inventory.push(_),_.effects.attack&&(Y.stats.attack-=_.effects.attack),_.effects.defense&&(Y.stats.defense-=_.effects.defense);const le={id:R.eventLog.length,year:R.year,text:`Bn  g trang b <strong>${_.name}</strong>.`,isMajor:!1};return{...R,player:Y,eventLog:[le,...R.eventLog]}})},Ti=_=>{e(R=>{if(!R.player||_.type!=="consumable")return R;let Y=JSON.parse(JSON.stringify(R.player));const J=Y.inventory.findIndex(fe=>fe.id===_.id);if(J===-1)return R;let le=`Bn  s dng <strong>${_.name}</strong>.`;if(_.effects.health){const fe=Math.min(Y.maxHealth-Y.health,_.effects.health);Y.health+=fe,le+=` Phc hi ${fe} sinh mnh.`}if(_.effects.cultivation){const fe=Math.round(_.effects.cultivation*Y.cultivationGainModifier);Y.cultivation+=fe,le+=` Nhn c ${fe} tu vi.`}Y.inventory.splice(J,1);let oe=[{id:R.eventLog.length,year:R.year,text:le,isMajor:!1}];const{player:j,isGameOver:ce}=Ae(Y,oe,R.eventLog.length+500);return{...R,player:j,eventLog:[...oe,...R.eventLog],isGameOver:ce}})},Gi=_=>{e(R=>{var j;if(!R.player||_.type!=="techniqueScroll"||!_.technique)return R;let Y=JSON.parse(JSON.stringify(R.player));const J=Y.inventory.findIndex(ce=>ce.id===_.id);if(J===-1)return R;const le=((j=Y.cultivationTechnique)==null?void 0:j.name)||"khng c";Y.cultivationTechnique=_.technique,Y.inventory.splice(J,1);const oe={id:R.eventLog.length,year:R.year,text:`Bn  hc cng php mi: <strong>${_.technique.name}</strong>, thay th cho ${le}.`,isMajor:!0};return{...R,player:Y,eventLog:[oe,...R.eventLog]}})},Hi=_=>{e(R=>{if(!R.player)return R;let Y=JSON.parse(JSON.stringify(R.player));const J=Y.inventory.findIndex(oe=>oe.id===_.id);if(J>-1)Y.inventory.splice(J,1);else return R;const le={id:R.eventLog.length,year:R.year,text:`Bn  vt b <strong>${_.name}</strong>.`,isMajor:!1};return{...R,player:Y,eventLog:[le,...R.eventLog]}})},zi=Ee.useCallback(()=>{e(_=>{if(!_.player||!_.auction||_.auction.items[_.auction.currentItemIndex].status!=="ongoing")return _;let R=JSON.parse(JSON.stringify(_.auction)),Y={..._.player};const J=R.items[R.currentItemIndex],le=Math.ceil(J.currentBid*1.1);if(Y.linhThach<le)return R.log.push("Bn khng  Linh Thch  ra gi ny."),{..._,auction:R};J.currentBid=le,J.highestBidderId="player",J.highestBidderName=Y.name,R.log.push(`Bn ra gi ${le} Linh Thch.`);const oe=Math.random()<.6,j=J.currentBid<(J.item.cost??5e4)*2;if(oe&&j){const ce=Math.ceil(J.currentBid*(1.05+Math.random()*.15)),fe=["Tu s o en","Lo gi b n","Thiu n vy trng","i gia phng VIP"],we=fe[Math.floor(Math.random()*fe.length)];J.currentBid=ce,J.highestBidderId=`npc_${Date.now()}`,J.highestBidderName=we,R.log.push(`${we} ra gi ${ce} Linh Thch!`)}return{..._,auction:R}})},[]),bn=Ee.useCallback(()=>{e(_=>{if(!_.player||!_.auction)return _;let R=JSON.parse(JSON.stringify(_.auction)),Y={..._.player},J=[..._.eventLog];const le=R.items[R.currentItemIndex];if(le.status=le.highestBidderId?"sold":"passed",le.status==="sold"){const oe=`<strong>${le.item.name}</strong>  c bn cho <strong>${le.highestBidderName}</strong> vi gi ${le.currentBid} Linh Thch.`;J.unshift({id:J.length,year:_.year,text:oe,isMajor:!0}),le.highestBidderId==="player"&&(Y.linhThach-=le.currentBid,Y.inventory.push(le.item))}else{const oe=`Khng ai tr gi cho <strong>${le.item.name}</strong>, vt phm  b lu tr.`;J.unshift({id:J.length+1,year:_.year,text:oe,isMajor:!1})}return R.currentItemIndex++,R.currentItemIndex>=R.items.length?(R.isActive=!1,J.unshift({id:J.length+2,year:_.year,text:"u gi hi  kt thc.",isMajor:!0})):R.log=["Vt phm tip theo  c a ln!"],{..._,player:Y,auction:R,eventLog:J}})},[]),bt=(_,R)=>{e(Y=>{if(!Y.npcs)return Y;const J=Y.npcs.map(le=>le.id===_?{...le,avatarUrl:R}:le);return{...Y,npcs:J}})},at=Ee.useCallback(async _=>{if(!m||!t.player)return;const R=t.npcs.find(Y=>Y.id===_);if(R){k(!1),e(Y=>({...Y,isLoading:!0,error:null}));try{const Y=await m.getNpcConversation(t.player,R);e(J=>({...J,isLoading:!1,activeConversation:{npcId:_,event:Y}}))}catch(Y){const J=Y instanceof Error?Y.message:"Khng th bt u hi thoi.";e(le=>({...le,isLoading:!1,error:J}))}}},[m,t.player,t.npcs]),wt=Ee.useCallback(_=>{e(R=>{if(!R.player||!R.activeConversation)return R;let Y=JSON.parse(JSON.stringify(R.npcs)),J=[];const le=Y.find(ce=>ce.id===R.activeConversation.npcId),oe=_.effects||{};if(oe.relationshipChange&&le){const ce=Number(oe.relationshipChange.points)||0;le.relationshipPoints+=ce*2,le.status=K(le.relationshipPoints);const fe=`Bn gi Truyn m Ph cho <strong>${le.name}</strong>. Mi quan h ca hai ngi  tr nn tt hn.`;J.push({id:R.eventLog.length+1,year:R.year,text:fe,isMajor:!1})}const j=[...J.reverse(),...R.eventLog];return{...R,npcs:Y,eventLog:j,activeConversation:null}})},[]),Xn=()=>{const{player:_,year:R,tournament:Y,currentEvent:J,isLoading:le,error:oe,hasTraveledThisYear:j,eventLog:ce,isGameOver:fe,gameStarted:we,geniusRanking:Je,npcs:Ie,activeSecretRealm:rt,auction:Ze,shopLastRefreshed:yt}=t,ut=_?qe(_.age,Do,16):Do,St=_?qe(_.age,Au,16):Au,Ye=_?Math.max(0,yt+Tg-R):0;switch(g){case"character-creation":return T.jsx(V_,{onStartGame:Xe,onBack:()=>v("main-menu")});case"playing":return fe||!we?T.jsx(U_,{isGameOver:fe,onStart:()=>v("character-creation"),isLoading:le}):_?T.jsxs("div",{className:"w-full h-full relative",children:[T.jsx(B_,{imageUrl:ne,isLoading:me}),T.jsxs("main",{className:"w-full max-w-7xl h-full flex flex-col md:flex-row gap-6 mx-auto relative",children:[T.jsxs("div",{className:"flex flex-col basis-[35%] md:basis-[35%] min-h-0",children:[T.jsx(lA,{player:_,npcs:Ie,onItemClick:Nn,activeSecretRealm:rt}),T.jsx(Z_,{nextTournamentIn:ut,nextAuctionIn:St,nextShopRefreshIn:Ye})]}),T.jsx("div",{className:"flex flex-col min-h-0 basis-[65%] md:basis-[65%]",children:Y!=null&&Y.isActive?T.jsx(sA,{tournament:Y,player:_,event:J,onSelectChoice:Ke}):T.jsxs("div",{className:"panel-bg flex flex-col flex-grow min-h-0 p-6 gap-4",children:[T.jsx(w_,{eventLog:ce}),J?T.jsx(Wg,{event:J,onSelectChoice:Ke}):T.jsx(D_,{onNextYear:Ue,onTravel:()=>o(!0),onOpenShop:ft,isLoading:le||!!t.activeConversation,error:oe,disabled:!!J||!!(Ze!=null&&Ze.isActive),hasTraveledThisYear:j,player:_,activeSecretRealm:rt})]})})]})]}):null;case"instructions":return T.jsx(G_,{onClose:()=>v("main-menu")});case"update-log":return T.jsx(H_,{onClose:()=>v("main-menu")});case"api-key-setup":return T.jsx(q_,{onSave:_e,onClose:()=>v("main-menu")});case"main-menu":default:return T.jsx(P_,{onStart:()=>v("character-creation"),onContinue:mn,onImport:Ct,onShowInstructions:()=>v("instructions"),onShowUpdateLog:()=>v("update-log"),onShowApiKeySetup:()=>v("api-key-setup"),hasLocalSave:x,apiKeySet:!!f})}};return T.jsxs("div",{className:"h-screen bg-gray-900 text-gray-200 font-sans flex flex-col items-center p-4 selection:bg-cyan-500 selection:text-black relative",children:[T.jsx("style",{children:`
          :root { --glow-color: hsl(180, 100%, 50%); }
          .font-serif { font-family: 'Noto Serif', serif; }
          .bg-glow { background: radial-gradient(ellipse at 50% 50%, rgba(20, 30, 60, 0.8) 0%, #060913 100%); }
          @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
          .animate-fade-in { animation: fadeIn 0.5s ease-out forwards; }
          @keyframes fadeInFast { from { opacity: 0; } to { opacity: 1; } }
          .animate-fade-in-fast { animation: fadeInFast 0.3s ease-out forwards; }
          .custom-scrollbar::-webkit-scrollbar { width: 6px; }
          .custom-scrollbar::-webkit-scrollbar-track { background: transparent; }
          .custom-scrollbar::-webkit-scrollbar-thumb { background-color: #4b5563; border-radius: 20px; }
          
          .panel-bg {
             background-color: rgba(15, 23, 42, 0.7);
             backdrop-filter: blur(12px);
             border-radius: 0.75rem;
             border: 1px solid rgba(56, 189, 248, 0.2);
             box-shadow: 0 0 40px rgba(56, 189, 248, 0.05);
          }
          
          .input-base {
            background-color: rgb(15 23 42 / 1);
            border: 1px solid rgb(55 65 81 / 1);
            border-radius: 0.375rem;
            padding: 0.5rem 0.75rem;
            color: white;
            transition: all 0.2s;
          }
          .input-base:focus {
            outline: none;
            border-color: var(--glow-color);
            box-shadow: 0 0 10px 0px var(--glow-color);
          }

          .btn {
            padding: 0.75rem 1.5rem;
            border-radius: 0.375rem;
            font-weight: bold;
            transition: all 0.2s ease;
            border: 1px solid transparent;
            box-shadow: 0 1px 3px rgba(0,0,0,0.2);
            text-align: center;
          }
          .btn:disabled {
            background-image: none;
            background-color: #4b5563;
            color: #9ca3af;
            cursor: not-allowed;
            box-shadow: none;
          }
          .btn-primary { 
            background: linear-gradient(to right, #06b6d4, #3b82f6);
            color: white;
          }
          .btn-primary:hover:not(:disabled) {
             box-shadow: 0 0 15px 0px var(--glow-color);
          }
          .btn-secondary {
            background: linear-gradient(to right, #16a34a, #0d9488);
            color: white;
          }
           .btn-secondary:hover:not(:disabled) {
             box-shadow: 0 0 15px 0px #16a34a;
          }
          .btn-dark {
             background-color: rgba(55, 65, 81, 0.8);
             color: white;
          }
          .btn-dark:hover:not(:disabled) {
             background-color: rgba(75, 85, 99, 0.9);
          }
          .btn-warning {
             background-color: #ca8a04;
             color: white;
          }
           .btn-warning:hover:not(:disabled) {
             background-color: #d97706;
          }
           .btn-shop {
             background-color: #7c3aed;
             color: white;
          }
           .btn-shop:hover:not(:disabled) {
             background-color: #8b5cf6;
          }
          .btn-event {
             background-color: rgba(30, 41, 59, 0.8);
             border: 1px solid rgba(56, 189, 248, 0.3);
             color: #67e8f9;
          }
          .btn-event:hover:not(:disabled) {
             background-color: rgba(51, 65, 85, 1);
             border-color: var(--glow-color);
             color: white;
          }
           fieldset {
             border-width: 1px;
             border-style: solid;
             border-color: rgba(56, 189, 248, 0.2);
             border-radius: 0.5rem;
           }
           legend {
             padding-left: 0.5rem;
             padding-right: 0.5rem;
             font-family: 'Noto Serif', serif;
           }

      `}),T.jsx("header",{className:"w-full max-w-7xl mb-4 z-10",children:T.jsxs("div",{className:"flex flex-wrap sm:flex-nowrap justify-between items-center gap-2",children:[T.jsx("div",{className:"w-auto text-left",children:(g==="playing"||g==="character-creation")&&T.jsx("button",{onClick:()=>v("main-menu"),className:"btn btn-dark py-1 px-3 text-sm",children:"V Menu"})}),T.jsx("div",{className:"flex-grow text-center order-first w-full sm:order-none sm:w-auto",children:g==="playing"&&t.player?T.jsxs(T.Fragment,{children:[T.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-cyan-300 tracking-wider font-serif",children:"Tu tin 1 click"}),T.jsxs("p",{className:"text-gray-400 mt-1",children:["Nm th ",Math.floor(t.year-15)," trn con ng tu luyn"]})]}):T.jsx("div",{className:"h-[76px] sm:h-auto"})}),T.jsx("div",{className:"w-auto flex justify-end items-center gap-2 flex-wrap",children:g==="playing"&&T.jsxs(T.Fragment,{children:[T.jsx("button",{onClick:()=>k(!0),className:"btn bg-pink-600/80 hover:bg-pink-500/90 py-1 px-3 text-sm",children:"Nhn Mch"}),T.jsx("button",{onClick:()=>w(!0),className:"btn btn-warning py-1 px-3 text-sm",children:"Xp Hng"}),T.jsx("button",{onClick:zt,className:"btn btn-secondary py-1 px-3 text-sm",children:"Lu"})]})})]})}),T.jsx("input",{type:"file",accept:".json",ref:a,onChange:lt,className:"hidden"}),T.jsxs("div",{className:"w-full flex-grow flex justify-center items-stretch min-h-0",children:[i&&t.player&&T.jsx(eA,{currentLocation:t.player.currentLocation,onTravel:Ht,onClose:()=>o(!1)}),M&&T.jsx(z_,{ranking:t.geniusRanking,onClose:()=>w(!1)}),D&&t.player&&T.jsx(O_,{npcs:t.npcs,player:t.player,onClose:()=>k(!1),onUpdateAvatar:bt,onStartConversation:at}),F&&t.player&&T.jsx(aA,{player:t.player,inventory:t.shopInventory,onClose:()=>X(!1),onBuy:gn,onSell:tn}),G&&t.player&&t.auction&&T.jsx(rA,{player:t.player,auction:t.auction,onClose:()=>$(!1),onPlaceBid:zi,onPass:bn}),t.activeConversation&&T.jsx(oA,{conversation:t.activeConversation,onClose:()=>e(_=>({..._,activeConversation:null})),onSelectChoice:wt}),q&&T.jsx(I_,{item:q.item,isEquipped:q.isEquipped,onClose:Rn,onEquip:pn,onUnequip:$t,onUse:Ti,onLearn:Gi,onDrop:Hi}),Xn()]}),T.jsx(cA,{}),T.jsx(k2,{})]})}const ip=document.getElementById("root");if(!ip)throw new Error("Could not find root element to mount to");const P2=E0.createRoot(ip);P2.render(T.jsx(g0.StrictMode,{children:T.jsx(B2,{})}));
